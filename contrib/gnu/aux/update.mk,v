head	1.8;
access;
symbols
	mirbsd:1.1.7;
locks; strict;
comment	@# @;


1.8
date	2009.01.15.22.46.51;	author tg;	state Exp;
branches;
next	1.7;
commitid	100496FBCED44FBB530;

1.7
date	2008.05.03.19.28.15;	author tg;	state Exp;
branches;
next	1.6;
commitid	100481CBCE53C31148B;

1.6
date	2008.05.03.19.16.09;	author tg;	state Exp;
branches;
next	1.5;
commitid	100481CBA0777F44B24;

1.5
date	2007.01.08.17.39.46;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045A281EF2CC009C1;

1.4
date	2006.10.18.23.43.04;	author tg;	state Exp;
branches;
next	1.3;
commitid	100453554CF31EEEA43;

1.3
date	2005.02.11.14.31.17;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.02.10.22.10.00;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.01.54.29;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.02.05.01.54.29;	author tg;	state Exp;
branches;
next	;


desc
@@


1.8
log
@remove install-reloc from list of provided files too
@
text
@# $MirOS: contrib/gnu/aux/update.mk,v 1.7 2008/05/03 19:28:15 tg Exp $

ONLY?=
SOURCES=
WARNS=
IGNORED=
IGNORES?=

PIDBDIR=	$${PORTSDIR:-/usr/ports}${.CURDIR:S/${PORTSDIR}//}

# available sources:
#	automake/lib/py-compile
#	automake/lib/symlink-tree

# need fixes:
#	gettext/gettext-runtime/m4/gettext.m4
#	gettext/autoconf-lib-link/m4/lib-ld.m4
#	gettext/autoconf-lib-link/m4/lib-link.m4
#	gettext/autoconf-lib-link/m4/lib-prefix.m4
# removed:
#	automake/lib/texinfo.tex
#	libtool/libtoolize


POSSIBLE_SOURCES+=					\
	automake/lib/compile				\
	automake/lib/config-ml.in			\
	automake/lib/depcomp				\
	automake/lib/mdate-sh				\
	automake/lib/missing				\
	automake/lib/ylwrap				\
	aux/config.libpath				\
	aux/install-sh					\
	aux/mkinstalldirs				\
	aux/move-if-change				\
	aux/reloc-ldflags				\
	config/config.guess				\
	config/config.sub				\
	gettext/autoconf-lib-link/config.rpath		\
	libtool/libtool.m4				\
	libtool/ltmain.sh				\
	libtool/m4salt.inc				\
	libtool/m4sugar.inc

.if !empty(ONLY)
POSSIBLE_SOURCES=${ONLY}
.endif

.for _i in ${POSSIBLE_SOURCES}
.  if !empty(IGNORES:M${_i:T})
IGNORED+= ${GNU_AUX_CONTRIB_DIR}/gnu/${_i}
.  elif exists(${GNU_AUX_CONTRIB_DIR}/gnu/${_i})
SOURCES+= ${GNU_AUX_CONTRIB_DIR}/gnu/${_i}
.  else
WARNS+=   ${GNU_AUX_CONTRIB_DIR}/gnu/${_i}
.  endif
.endfor

update:
.if !empty(SOURCES)
	cd ${.CURDIR}; \
	for srcf in ${SOURCES}; do \
		dstf="$$(basename $$srcf)"; \
		echo -n "$$dstf	<== $$srcf processing... "; \
		printf '/\\$$%s\n%s\n%s\nwq %s\n' \
		    "MirOS:/ka" "'a,t'a-1" \
		    "'as~MirOS:~miros:~" \
		    $$dstf | ed -s "$$srcf"; \
		echo "done"; \
	done
.else
	@@echo "Warning: SOURCES are empty."
.endif
.if !empty(WARNS)
	@@echo "============================================================"
	@@echo "The following files could not be found:"
.  for _i in ${WARNS}
	@@echo '| ${_i}'
.  endfor
	@@echo "============================================================"
.endif
# No libtoolize ATM, see above
#	if test -s ${.CURDIR}/libtoolize; then \
#		printf '%s\nwq\n' '1,$$g#@@pkgdatadir@@#s##${PIDBDIR}#' \
#		    | ed -s ${.CURDIR}/libtoolize; \
#	else \
#		true; \
#	fi
.if !empty(IGNORED)
	@@echo "============================================================"
	@@echo "The following files have been ignored:"
.  for _i in ${IGNORED}
	@@echo '| ${_i}'
.  endfor
	@@echo "============================================================"
.endif
@


1.7
log
@merge
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/aux/update.mk,v 1.6 2008/05/03 19:16:09 tg Exp $
a32 1
	aux/install-reloc				\
@


1.6
log
@remove unused file
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/aux/update.mk,v 1.5 2007/01/08 17:39:46 tg Exp $
d32 2
d37 1
a40 3
	gettext/config/config.libpath			\
	gettext/config/install-reloc			\
	gettext/config/reloc-ldflags			\
@


1.5
log
@use $miros: instead of _MirOS: here, too, for consistency
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/aux/update.mk,v 1.4 2006/10/18 23:43:04 tg Exp $
d21 1
a30 1
	automake/lib/texinfo.tex			\
@


1.4
log
@missing in commitid 100453554CF31EEEA43
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/aux/update.mk,v 1.3 2005/02/11 14:31:17 tg Exp $
d68 1
a68 1
		    "'as~\\\$$MirOS~_MirOS~" \
@


1.3
log
@-libtoolize
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/aux/update.mk,v 1.2 2005/02/10 22:10:00 tg Exp $
a31 1
	aux/_gplwarn.c					\
@


1.2
log
@update to MirLibtool 1.5.12
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/aux/update.mk,v 1.1.7.1 2005/02/05 01:54:29 tg Exp $
d84 7
a90 6
	if test -s ${.CURDIR}/libtoolize; then \
		printf '%s\nwq\n' '1,$$g#@@pkgdatadir@@#s##${PIDBDIR}#' \
		    | ed -s ${.CURDIR}/libtoolize; \
	else \
		true; \
	fi
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
d20 2
a42 1
	libtool/libtoolize				\
d44 2
a45 2
	libtool/m4salt.m4				\
	libtool/m4sugar.m4
@


1.1.7.1
log
@... and associated MirInfrastructure for GNU tools
@
text
@@
