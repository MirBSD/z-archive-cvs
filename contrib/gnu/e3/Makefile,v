head	1.5;
access;
symbols
	e3-2_7_1:1.1.201.1 tg:1.1.201;
locks; strict;
comment	@# @;


1.5
date	2009.06.29.19.16.35;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004A4913203CC8DD75;

1.4
date	2008.12.30.01.20.29;	author tg;	state Exp;
branches;
next	1.3;
commitid	100495977720CF6B2CE;

1.3
date	2008.12.30.01.06.56;	author tg;	state Exp;
branches;
next	1.2;
commitid	10049597445592CDFB8;

1.2
date	2008.12.30.01.04.36;	author tg;	state Exp;
branches;
next	1.1;
commitid	100495973B17A2C24D2;

1.1
date	2008.12.30.00.13.52;	author tg;	state Exp;
branches
	1.1.201.1;
next	;
commitid	100495967CD40019BC8;

1.1.201.1
date	2008.12.30.00.13.52;	author tg;	state Exp;
branches;
next	;
commitid	100495967CD40019BC8;


desc
@@


1.5
log
@display EscX ipv altX on MirBSD compilates, too
@
text
@# $MirOS: contrib/gnu/e3/Makefile,v 1.4 2008/12/30 01:20:29 tg Exp $

PROG=		e3
BINDIR?=	${BSD_PREFIX}/bin
LINKS+=		${BINDIR}/${PROG} ${BINDIR}/e3ws \
		${BINDIR}/${PROG} ${BINDIR}/e3em \
		${BINDIR}/${PROG} ${BINDIR}/e3pi \
		${BINDIR}/${PROG} ${BINDIR}/e3vi \
		${BINDIR}/${PROG} ${BINDIR}/e3ne

SRCS=		e3.asm
NASMFLAGS+=	-felf
NASMFLAGS+=	-i${.CURDIR:Q}/
NASMFLAGS+=	-w+orphan-labels
NASMFLAGS+=	-O7
NASMFLAGS+=	-DMIRBSD

# we use Esc+X instead of Alt-X
NASMFLAGS+=	-DALT_IS_META

LDFLAGS+=	-e _start
LDFLAGS+=	-Bstatic

# exactly one of the following:
NASMFLAGS+=	-DSED
#NASMFLAGS+=	-DEX
#NASMFLAGS+=	-DPERLPIPE

.include <bsd.own.mk>

.ifdef DEBUG
NASMFLAGS+=	-g
.endif

.SUFFIXES: .asm
CLEANFILES+=	${PROG}~

.asm.o:
	nasm ${NASMFLAGS} -o $@@ $<

${PROG}: ${OBJS}
	ld ${LDFLAGS} -o $@@~ ${OBJS}
	${STRIP} -s -R .comment $@@~
	mv -f $@@~ $@@

.include <bsd.prog.mk>
@


1.4
log
@fix debug
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/e3/Makefile,v 1.3 2008/12/30 01:06:56 tg Exp $
d18 3
@


1.3
log
@LINKS
@
text
@d1 1
a1 1
# $MirOS: contrib/gnu/e3/Makefile,v 1.2 2008/12/30 01:04:36 tg Exp $
a17 1
LDFLAGS+=	-s
d26 6
d40 1
a40 1
	strip -s -R .comment $@@~
@


1.2
log
@MirOSify (of course weâ€™re using and hard-coding UTF-8)
@
text
@d1 1
a1 1
# $MirOS$
d5 6
@


1.1
log
@Initial revision
@
text
@d1 1
a1 3
# Makefile for OpenBSD 
# (does not use GNU make extensions)
#
d3 28
a30 1
# 1. edit you OS if you want....
d32 1
a32 53
#OS=LINUX
#OS=BEOS
#OS=FREEBSD
OS=OPENBSD
#OS=QNX
#OS=W32 	** please use a separate make.bat for W9x **

# 2. edit dest dir prefix if you want....

PREFIX='/usr/local'


# 3. for vi friends only (else leave as is):
#    choice between '/bin/ex' or default '/bin/sed'
EXMODE=SED
#EXMODE=EX



BINDIR='$(PREFIX)/bin'
MANSEC='1'
MANDIR='$(PREFIX)/man/man$(MANSEC)'


#______________________do not edit below line________________________


ASOURCES=e3.asm
AFLAGS = -w+orphan-labels -f elf


all:	$(ASOURCES) Makefile
	nasm $(AFLAGS) -o e3.o $(ASOURCES) -l e3.lst -D$(OS) -D$(EXMODE)
	ld -s -o e3 e3.o
	strip --remove-section .comment e3
	ln -sf e3 e3ws
	ln -sf e3 e3em
	ln -sf e3 e3pi
	ln -sf e3 e3vi
	ln -sf e3 e3ne

install:	e3
	install -d $(PREFIX) $(BINDIR) $(MANDIR)
	install -m 755 e3 $(BINDIR)
	ln -sf $(BINDIR)/e3 $(BINDIR)/e3ws
	ln -sf $(BINDIR)/e3 $(BINDIR)/e3em
	ln -sf $(BINDIR)/e3 $(BINDIR)/e3pi
	ln -sf $(BINDIR)/e3 $(BINDIR)/e3vi
	ln -sf $(BINDIR)/e3 $(BINDIR)/e3ne
	install -m 644 e3.man $(MANDIR)/e3.$(MANSEC)

clean:
	rm -f e3*.o e3*.lst e3 e3em e3pi e3vi e3ws e3ne
@


1.1.201.1
log
@GPLv2 minimalistic editor (OpenBSD version)
@
text
@@
