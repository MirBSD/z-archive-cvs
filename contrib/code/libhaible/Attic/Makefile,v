head	1.39;
access;
symbols;
locks; strict;
comment	@# @;


1.39
date	2006.08.28.01.55.41;	author tg;	state dead;
branches;
next	1.38;
commitid	10044F24D247D066860;

1.38
date	2006.06.02.13.09.18;	author tg;	state Exp;
branches;
next	1.37;
commitid	100448038885A0F4B6D;

1.37
date	2006.06.01.22.55.37;	author tg;	state Exp;
branches;
next	1.36;
commitid	100447F705B5E27FA21;

1.36
date	2006.06.01.22.47.36;	author tg;	state Exp;
branches;
next	1.35;
commitid	100447F6E8C1C87BA83;

1.35
date	2006.06.01.22.42.39;	author tg;	state Exp;
branches;
next	1.34;
commitid	100447F6D124881EFA8;

1.34
date	2006.06.01.22.30.12;	author tg;	state Exp;
branches;
next	1.33;
commitid	100447F6A5E5E5D04C9;

1.33
date	2006.06.01.22.17.27;	author tg;	state Exp;
branches;
next	1.32;
commitid	100447F676243262322;

1.32
date	2006.06.01.22.03.22;	author tg;	state Exp;
branches;
next	1.31;
commitid	100447F641E589322F2;

1.31
date	2006.06.01.21.59.52;	author tg;	state Exp;
branches;
next	1.30;
commitid	100447F635D342911F2;

1.30
date	2006.06.01.21.58.15;	author tg;	state Exp;
branches;
next	1.29;
commitid	100447F62F21BBF9816;

1.29
date	2006.06.01.21.54.50;	author tg;	state Exp;
branches;
next	1.28;
commitid	100447F6214161B5202;

1.28
date	2006.06.01.21.47.00;	author tg;	state Exp;
branches;
next	1.27;
commitid	100447F606753849BF0;

1.27
date	2006.05.31.00.41.04;	author tg;	state Exp;
branches;
next	1.26;
commitid	100447CE61F1AB53D2C;

1.26
date	2006.05.31.00.25.51;	author tg;	state Exp;
branches;
next	1.25;
commitid	100447CE29F6A2495BD;

1.25
date	2006.05.30.23.25.39;	author tg;	state Exp;
branches;
next	1.24;
commitid	100447CD4804AD3B116;

1.24
date	2006.05.30.23.14.19;	author tg;	state Exp;
branches;
next	1.23;
commitid	100447CD1E1328D9F48;

1.23
date	2006.05.30.20.57.53;	author tg;	state Exp;
branches;
next	1.22;
commitid	100447CB1D93AB4686A;

1.22
date	2006.05.30.20.46.31;	author tg;	state Exp;
branches;
next	1.21;
commitid	100447CAF3E70812CE9;

1.21
date	2006.05.30.20.28.30;	author tg;	state Exp;
branches;
next	1.20;
commitid	100447CAAFE6C2A0E9D;

1.20
date	2006.05.30.20.04.22;	author tg;	state Exp;
branches;
next	1.19;
commitid	100447CA5541323F8A7;

1.19
date	2006.05.30.19.49.44;	author tg;	state Exp;
branches;
next	1.18;
commitid	100447CA1EF59CD223F;

1.18
date	2006.05.30.18.41.53;	author tg;	state Exp;
branches;
next	1.17;
commitid	100447C920761D20178;

1.17
date	2006.05.30.18.41.21;	author tg;	state Exp;
branches;
next	1.16;
commitid	100447C91E3715E9F23;

1.16
date	2006.05.30.18.28.38;	author tg;	state Exp;
branches;
next	1.15;
commitid	100447C8EE143B7A900;

1.15
date	2006.05.30.18.26.47;	author tg;	state Exp;
branches;
next	1.14;
commitid	100447C8E73599B400C;

1.14
date	2006.05.30.13.31.00;	author tg;	state Exp;
branches;
next	1.13;
commitid	100447C49277E2AFC35;

1.13
date	2006.05.30.13.21.14;	author tg;	state Exp;
branches;
next	1.12;
commitid	100447C46D44E041D69;

1.12
date	2006.05.30.13.16.50;	author tg;	state Exp;
branches;
next	1.11;
commitid	100447C45D20498D01A;

1.11
date	2006.05.30.13.07.43;	author tg;	state Exp;
branches;
next	1.10;
commitid	100447C43AD07F6CD6B;

1.10
date	2006.05.30.12.58.52;	author tg;	state Exp;
branches;
next	1.9;
commitid	100447C419C61085736;

1.9
date	2006.05.30.12.28.49;	author tg;	state Exp;
branches;
next	1.8;
commitid	100447C3A630E082D02;

1.8
date	2006.05.30.12.11.49;	author tg;	state Exp;
branches;
next	1.7;
commitid	100447C368F6DBCFCCA;

1.7
date	2006.05.30.11.34.21;	author tg;	state Exp;
branches;
next	1.6;
commitid	100447C2DAD1E865544;

1.6
date	2006.05.30.11.08.19;	author tg;	state Exp;
branches;
next	1.5;
commitid	100447C27B30244E1E6;

1.5
date	2006.05.30.10.48.54;	author tg;	state Exp;
branches;
next	1.4;
commitid	100447C231D714EFBB2;

1.4
date	2006.05.30.10.41.17;	author tg;	state Exp;
branches;
next	1.3;
commitid	100447C21642F0A6594;

1.3
date	2006.05.26.13.52.07;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004477080477AA6B13;

1.2
date	2006.05.23.11.18.40;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004472EF7E11F22DA8;

1.1
date	2006.05.23.11.12.56;	author tg;	state Exp;
branches;
next	;
commitid	1004472EE445359AF18;


desc
@@


1.39
log
@while we're still missing some man pages and stuff,
this directory can be considered dusty
@
text
@# $MirOS: contrib/code/libhaible/Makefile,v 1.38 2006/06/02 13:09:18 tg Exp $

LIB=	haible
NOPIC=	Yes	# for now

# for "miri18n.h"
CPPFLAGS+= -I${LIBCSRCDIR}/include

# missing
#SRCS+=	fwprintf.c
#SRCS+=	fwscanf.c
#SRCS+=	swprintf.c
#SRCS+=	swscanf.c
#SRCS+=	vfwprintf.c
#SRCS+=	vfwscanf.c
#SRCS+=	vswprintf.c
#SRCS+=	vswscanf.c
#SRCS+=	vwprintf.c
#SRCS+=	vwscanf.c
#SRCS+=	wcsftime.c
#SRCS+=	wprintf.c
#SRCS+=	wscanf.c

# manual pages
MAN+=		MB_CUR_MAX.3 wcswidth.3 wcwidth.3
MLINKS+=	MB_CUR_MAX.3 MB_LEN_MAX.3

.include <bsd.lib.mk>
@


1.38
log
@get rid of the remaining LGPL stuff
now all that's left are manpages
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.37 2006/06/01 22:55:37 tg Exp $
@


1.37
log
@cunningly write towctrans(3) according to manpage, SUSv3 spec
(online docs) and iswctype.c, considering our special situation
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.36 2006/06/01 22:47:36 tg Exp $
a5 3
.PATH: ${.CURDIR}/string
SRCS+=	wcstok.c

@


1.36
log
@towlower/towupper, implemented like iswTYPE,
based upon manual page, just calling towctrans(3)
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.35 2006/06/01 22:42:39 tg Exp $
a4 1
SRCS+=	towctrans.c
a8 4
# reachover for libc
.include <bsd.own.mk>
LIBCSRCDIR?=	${BSDSRCDIR}/lib/libc

a30 4
# reachover for libc
.PATH: ${LIBCSRCDIR}/locale
MAN+=		towctrans.3

@


1.35
log
@* write an iswctype(3) from scratch, based upon manual page,
  the UCD-autogenerated attribute tables and Bruno's defines
  but without the special cases for the C locale
* don't include locale/Makefile.inc any more, revert it
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.34 2006/06/01 22:30:12 tg Exp $
a5 2
SRCS+=	towlower.c
SRCS+=	towupper.c
@


1.34
log
@add a cunning (small, not even worth the adv clause ;) isw*() implementation
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.33 2006/06/01 22:17:27 tg Exp $
a4 1
SRCS+=	iswctype.c
a39 1
MAN+=		iswctype.3
@


1.33
log
@move freely licenced functions from libhaible into libc;
add missing wcsxfrm(3); sort and style; remove some stubs
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.32 2006/06/01 22:03:22 tg Exp $
a34 14
.for _wctype in alnum alpha blank cntrl digit graph lower print punct \
    space upper xdigit
GENERATED+=	isw${_wctype}.c

isw${_wctype}.c: iswTYPE.c
	sed 's!TYPE!${_wctype}!g' <$> >$@@
.endfor

SRCS+=	${GENERATED}

CLEANFILES+=	${GENERATED}

beforedepend: ${GENERATED}

d41 2
a42 9
MAN+=		iswctype.3 towctrans.3
MLINKS+=	iswalnum.3 iswblank.3 \
		iswalnum.3 iswcntrl.3 \
		iswalnum.3 iswdigit.3 \
		iswalnum.3 iswgraph.3 \
		iswalnum.3 iswprint.3 \
		iswalnum.3 iswpunct.3 \
		iswalnum.3 iswspace.3 \
		iswalnum.3 iswxdigit.3
@


1.32
log
@move UCD-generated attribute tables from libhaible to libc;
sync required definitions appropriately
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.31 2006/06/01 21:59:52 tg Exp $
a5 5
SRCS+=	mblen.c
SRCS+=	mbrlen.c
SRCS+=	mbsrtowcs.c
SRCS+=	mbstowcs.c
SRCS+=	mbtowc.c
a8 7
SRCS+=	wcsrtombs.c
SRCS+=	wcstombs.c
SRCS+=	wcswidth.c
SRCS+=	wctomb.c
SRCS+=	wctrans.c
SRCS+=	wctype.c
SRCS+=	wcwidth.c
d55 1
a55 2
MAN+=		iswctype.3 mbrlen.3 towctrans.3 wctrans.3 wctype.3
MAN+=		mbsrtowcs.3 wcsrtombs.3
@


1.31
log
@move catgets(3) man page for stub catalogue functions into libc
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.30 2006/06/01 21:58:15 tg Exp $
a4 1
SRCS+=	attribute.c
a10 1
SRCS+=	tow_nop.c towl_tbl.c towu_tbl.c
d29 3
@


1.30
log
@move Makefile entries for a few reachover functions
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.29 2006/06/01 21:54:50 tg Exp $
a60 4
MAN+=		catgets.3
MLINKS+=	catgets.3 catopen.3
MLINKS+=	catgets.3 catclose.3

@


1.29
log
@move the wide string functions wcs[n]casecmp, wcscoll and wcsdup,
as well as the enhanced wmemchr(3) manual page, from libhaible into libc
(version bump to come, for all future commits)
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.28 2006/06/01 21:47:00 tg Exp $
a30 14
.PATH: ${LIBCSRCDIR}/locale
CPPFLAGS+= -I${LIBCSRCDIR}/locale
SRCS+=	wcstod.c
SRCS+=	wcstol.c
SRCS+=	wcstoll.c
SRCS+=	wcstoul.c
SRCS+=	wcstoull.c

CFLAGS_wcstod.o+=	-Wno-cast-qual
CFLAGS_wcstol.o+=	-Wno-cast-qual
CFLAGS_wcstoll.o+=	-Wno-cast-qual
CFLAGS_wcstoul.o+=	-Wno-cast-qual
CFLAGS_wcstoull.o+=	-Wno-cast-qual

@


1.28
log
@add missing split files
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.27 2006/05/31 00:41:04 tg Exp $
a15 2
SRCS+=	wcscasecmp.c
SRCS+=	wcsncasecmp.c
a24 2
SRCS+=	wcscoll.c
SRCS+=	wcsdup.c
a94 30
# changed wmemstr manual page. copied:
MAN+=		wmemchr.3
MLINKS+=wmemchr.3 wmemcmp.3
MLINKS+=wmemchr.3 wmemcpy.3
MLINKS+=wmemchr.3 wmemmove.3
MLINKS+=wmemchr.3 wmemset.3
MLINKS+=wmemchr.3 wcscat.3
MLINKS+=wmemchr.3 wcschr.3
MLINKS+=wmemchr.3 wcscmp.3
MLINKS+=wmemchr.3 wcscpy.3
MLINKS+=wmemchr.3 wcscspn.3
MLINKS+=wmemchr.3 wcslcat.3
MLINKS+=wmemchr.3 wcslcpy.3
MLINKS+=wmemchr.3 wcslen.3
MLINKS+=wmemchr.3 wcsncat.3
MLINKS+=wmemchr.3 wcsncmp.3
MLINKS+=wmemchr.3 wcsncpy.3
MLINKS+=wmemchr.3 wcspbrk.3
MLINKS+=wmemchr.3 wcsrchr.3
MLINKS+=wmemchr.3 wcsspn.3
MLINKS+=wmemchr.3 wcsstr.3
# added:
MLINKS+=wmemchr.3 wcscasecmp
MLINKS+=wmemchr.3 wcscoll
MLINKS+=wmemchr.3 wcsdup
MLINKS+=wmemchr.3 wcsftime
MLINKS+=wmemchr.3 wcsncasecmp
MLINKS+=wmemchr.3 wcswcs
MLINKS+=wmemchr.3 wcsxfrm

@


1.27
log
@make libhaible feature-complete (for now) by adding missing manpages
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.26 2006/05/31 00:25:51 tg Exp $
d12 1
a12 1
SRCS+=	tow_nop.c
@


1.26
log
@add the last missing "basic" function
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.25 2006/05/30 23:25:39 tg Exp $
d83 3
@


1.25
log
@we're lucky LC_COLLATE(UTF-8)=C
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.24 2006/05/30 23:14:19 tg Exp $
d18 2
a19 1
#SRCS+=	wcstombs.c
@


1.24
log
@sync
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.23 2006/05/30 20:57:53 tg Exp $
d26 1
a58 1
#SRCS+=	wcscoll.c
@


1.23
log
@sync; disable another interface depending on a notyet function
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.22 2006/05/30 20:46:31 tg Exp $
d9 2
a10 1
#SRCS+=	mbstowcs.c
d35 1
a35 1
#SRCS+=	wcstod.c
d41 1
a49 1
#SRCS+=	mbsrtowcs.c
a59 3
#SRCS+=	wcsrtombs.c
#SRCS+=	wcstof.c
#SRCS+=	wcstold.c
d85 1
a85 2
# not yet
#MAN+=		mbsrtowcs.3 wcsrtombs.3
@


1.22
log
@add the new openbsd functions
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.21 2006/05/30 20:28:30 tg Exp $
d34 1
a34 1
SRCS+=	wcstod.c
d40 5
@


1.21
log
@add manual page for catgets functions
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.20 2006/05/30 20:04:22 tg Exp $
d28 12
a42 1
#SRCS+=	mbrlen.c
a54 1
#SRCS+=	wcstod.c
a55 1
#SRCS+=	wcstol.c
a56 4
#SRCS+=	wcstoll.c
#SRCS+=	wcstoul.c
#SRCS+=	wcstoull.c
#SRCS+=	wcsxfrm.c
a79 3
.include <bsd.own.mk>
LIBCSRCDIR?=	${BSDSRCDIR}/lib/libc

@


1.20
log
@add a few; disable two depending on notyet funcs
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.19 2006/05/30 19:49:44 tg Exp $
d70 3
@


1.19
log
@add a couple of functions
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.18 2006/05/30 18:41:53 tg Exp $
d9 1
a9 1
SRCS+=	mbstowcs.c
d17 1
d19 1
@


1.18
log
@typo
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.17 2006/05/30 18:41:21 tg Exp $
d7 4
d74 1
a74 1
MAN+=		iswctype.3 towctrans.3 wctrans.3 wctype.3
d76 1
a76 1
#MAN+=		mbrlen.3 mbsrtowcs.3 wcsrtombs.3
@


1.17
log
@amend the manual page; sort
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.16 2006/05/30 18:28:38 tg Exp $
d83 1
a83 1
MAN+=		wmemstr.3
@


1.16
log
@add wmemstr(3) man page copy here, to amend
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.15 2006/05/30 18:26:47 tg Exp $
d104 7
@


1.15
log
@add reachover libhaible man pages (H:) and commented out ones (#:)
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.14 2006/05/30 13:31:00 tg Exp $
d82 23
@


1.14
log
@fix build (of manpages)
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.13 2006/05/30 13:21:14 tg Exp $
a68 2
#.PATH: ${LIBCSRCDIR}/string
#MAN+=		wcstok.3	# already in libc
@


1.13
log
@oops, wcstok(3) is already installed
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.12 2006/05/30 13:16:50 tg Exp $
d66 1
d68 1
@


1.12
log
@add manual pages contained in but missing from libc
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.11 2006/05/30 13:07:43 tg Exp $
d67 2
a68 2
.PATH: ${LIBCSRCDIR}/string
MAN+=		wcstok.3
@


1.11
log
@these functions are "notyet" in wchar.h
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.10 2006/05/30 12:58:52 tg Exp $
d63 19
@


1.10
log
@add wcstok from libhaible; my own wcsdup
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.9 2006/05/30 12:28:49 tg Exp $
d22 27
@


1.9
log
@add a __CRAZY clean version of the (non-SUSv3 but libutf8/glibc compatible)
wcs[n]casecmp functions, derived from UCB code (str[n]casecmp) for simpli-
city (not that I couldn't have written them myself), but slightly optimised
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.8 2006/05/30 12:11:49 tg Exp $
d18 4
@


1.8
log
@xterm-213 based wcwidth(3) and my own wcswidth(3)
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.7 2006/05/30 11:34:21 tg Exp $
d11 2
@


1.7
log
@finish all of <wctype.h> plus wctype()
some of that code by me (using bsearch(3) instead of
inlined hand-grown lsearch(3) replacement by FSF),
the tables aren't copyrightable, so, MirOS licence
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.6 2006/05/30 11:08:19 tg Exp $
d11 1
@


1.6
log
@add a bunch of isw*() functions
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.5 2006/05/30 10:48:54 tg Exp $
d6 1
d11 2
@


1.5
log
@split out the 'nop' table to avoid pulling in toupper table
if source only requires tolower function etc.
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.4 2006/05/30 10:41:17 tg Exp $
d12 14
@


1.4
log
@beautify
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.3 2006/05/26 13:52:07 tg Exp $
d4 1
d6 1
@


1.3
log
@move mbsinit(3) into libc from libhaible;
it's written by myself and thus miros licenced
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.2 2006/05/23 11:18:40 tg Exp $
d3 6
a8 3
LIB=		haible
SRCS+=		attribute.c towctrans.c towlower.c towupper.c \
		wcwidth.c
@


1.2
log
@* move nop_table into caseconv code
* change nop_table type to unsigned short for now (implied casts suck)
@
text
@d1 1
a1 1
# $MirOS: contrib/code/libhaible/Makefile,v 1.1 2006/05/23 11:12:56 tg Exp $
d4 1
a4 1
SRCS+=		attribute.c mbsinit.c towctrans.c towlower.c towupper.c \
@


1.1
log
@add towlower(3), towupper(3) from libutf8
@
text
@d1 1
a1 1
# $MirOS$
d4 2
a5 1
SRCS+=		attribute.c mbsinit.c towlower.c towupper.c wcwidth.c
@

