head	1.9;
access;
symbols
	joe-3_1jupp38:1.6
	joe-3_1jupp37:1.6
	joe-3_1jupp36:1.6
	joe-3_1jupp35:1.6
	joe-3_1jupp34:1.6
	joe-3_1jupp33:1.6
	joe-3_1jupp32:1.6
	joe-3_1jupp31:1.6
	joe-3_1jupp30:1.6
	joe-3_1jupp29:1.5;
locks; strict;
comment	@# @;


1.9
date	2020.01.01.03.40.00;	author tg;	state Exp;
branches;
next	1.8;
commitid	1005E0C148E3BFC14DD;

1.8
date	2020.01.01.03.02.44;	author tg;	state Exp;
branches;
next	1.7;
commitid	1005E0C0BD41B40E377;

1.7
date	2020.01.01.02.43.52;	author tg;	state Exp;
branches;
next	1.6;
commitid	1005E0C0779032D81D3;

1.6
date	2017.01.11.19.26.54;	author tg;	state Exp;
branches;
next	1.5;
commitid	100587686986AD3A77F;

1.5
date	2016.10.30.02.44.19;	author tg;	state Exp;
branches;
next	1.4;
commitid	10058155E8C33257B8A;

1.4
date	2016.10.30.02.38.35;	author tg;	state Exp;
branches;
next	1.3;
commitid	10058155D3C0F05E9E0;

1.3
date	2016.10.29.23.44.45;	author tg;	state Exp;
branches;
next	1.2;
commitid	1005815347F236258ED;

1.2
date	2016.10.29.22.28.48;	author tg;	state Exp;
branches;
next	1.1;
commitid	100581522B40B56A212;

1.1
date	2016.10.29.22.03.24;	author tg;	state Exp;
branches;
next	;
commitid	10058151CC06D1C9B5E;


desc
@@


1.9
log
@fix installation on Windows 95 which is more picky about syntax

(jupp32 itself works well except some cursor positioning, like ^QF)
@
text
@; Right-Click this and choose "_I_nstall" to install jupp!

; © 2006, 2009, 2010, 2011, 2012, 2016, 2017, 2019
;   by mirabilos <m@@mirbsd.org>
; see copying.txt and jupprc for legal

[Version]
Signature="$CHICAGO$"
DriverVer=@@ts@@,3.1.@@jwin@@

[Strings]
; 24,%PROGRAMF% is likely the same as 16422, but it is not documented
; which versions this works on (just hope for the best); some systems
; have a wrong drive letter; Win95 does not support using LFNs here.
PROGRAMF="PROGRA~1"

[SourceDisksNames]
1="joe 3.1jupp@@jwin@@ Win32 installation floppy",,

[SourceDisksFiles]
@@files@@

[DefaultInstall]
CopyFiles=jupp.Copy,jrc.Copy,jcm.Copy,jsy.Copy
AddReg=jupp.AddReg,fopenas.AddReg
MediaType=SOFTWARE

[jupp.Copy]
jupp32.exe
jupp32.txt
; copies of jupp32.exe so the other *rc files are usable
jmacs.exe,jupp32.exe
joe.exe,jupp32.exe
jpico.exe,jupp32.exe
jstar.exe,jupp32.exe
; sources at: http://www.mirbsd.org/MirOS/dist/gnu/cygwin32/
cygwin1.dll

[jrc.Copy]
copying.txt
jmacsrc
joerc
jpicorc
jstarrc
jupp32rc

[jcm.Copy]
klingon

[jsy.Copy]
asm.jsf
c.jsf
conf.jsf
csh.jsf
diff.jsf
fortran.jsf
html.jsf
java.jsf
lisp.jsf
mail.jsf
mason.jsf
pascal.jsf
perl.jsf
php.jsf
python.jsf
sh.jsf
tcl.jsf
tex.jsf
verilog.jsf
vhdl.jsf
xml.jsf

[jupp.AddReg]
HKCR,"*\shell\jupp","",,"&jupp"
HKCR,"*\shell\jupp","Version",,"jupp 3.1.@@jwin@@ (i486)"
HKCR,"*\shell\jupp\command","",,"%24%\%PROGRAMF%\jupp32\jupp32.exe -CYGhack %L"

[fopenas.AddReg]
HKCR,"*\shell\fopenas","",,"&Load with..."
HKCR,"*\shell\fopenas\command","",,"rundll32 shell32,OpenAs_RunDLL %1"

[DestinationDirs]
DefaultDestDir=24,%PROGRAMF%\jupp32
jcm.Copy=24,%PROGRAMF%\jupp32\charmaps
jsy.Copy=24,%PROGRAMF%\jupp32\syntax

; $MirOS: contrib/code/jupp/setup.inf,v 1.8 2020/01/01 03:02:44 tg Exp $
@


1.8
log
@use PROGRA~1 for the installation directory

tested on Win7; Win95 doesnâ€™t do LFNs here
@
text
@d18 1
a18 1
1="joe 3.1jupp@@jwin@@ Win32 installation floppy"
d87 1
a87 1
; $MirOS: contrib/code/jupp/setup.inf,v 1.3 2016/10/29 23:44:45 tg Exp $
@


1.7
log
@time to retire the fixup for old INFsâ€™ damage
@
text
@d3 1
a3 1
; © 2006, 2009, 2010, 2011, 2012, 2016, 2017
d11 6
d76 1
a76 1
HKCR,"*\shell\jupp\command","",,"%24%\Programme\jupp32\jupp32.exe -CYGhack %L"
d83 3
a85 5
; possibly 16422,jupp32 but it's not documented since when this works;
; it _is_ documented that the drive is wrong on some systems though...
DefaultDestDir=24,Programme\jupp32
jcm.Copy=24,Programme\jupp32\charmaps
jsy.Copy=24,Programme\jupp32\syntax
@


1.6
log
@add -CYGhack command line option; use it in right-click menuâ€¦

the details are buried deep in cygwin32 source code, but it boils down to:

C:\>ga \\foo\bar baz.txt
argv[1] = \\foo\bar
argv[2] = baz.txt
C:\>ga "\\foo\bar baz.txt"
argv[1] = \foo\bar baz.txt
argv[2] IS NULL

I consider this a bug, but as itâ€™s there, letâ€™s parse our command line
on our ownâ€¦ again with the codepage dance we already use in utf8.câ€¦
(and now I also know why the set of permissible filenames is so limited)

â€¦ anyway, it works (I tested it on my win2k VM)!
@
text
@a18 1
DelFiles=damage32.Undo,damage64.Undo
a75 16
[damage32.Undo]
cygwin1.dll,,,1
jupp32.exe,,,1
jmacs.exe,,,1
joe.exe,,,1
jpico.exe,,,1
jstar.exe,,,1

[damage64.Undo]
cygwin1.dll,,,1
jupp32.exe,,,1
jmacs.exe,,,1
joe.exe,,,1
jpico.exe,,,1
jstar.exe,,,1

a79 2
damage32.Undo=-1,C:\WINDOWS\system32
damage64.Undo=-1,C:\WINDOWS
@


1.5
log
@this must be a build timestamp, and setup.inf must be the latest file
@
text
@d3 1
a3 1
; © 2006, 2009, 2010, 2011, 2012, 2016
d71 1
a71 1
HKCR,"*\shell\jupp\command","",,"%24%\Programme\jupp32\jupp32.exe ""%L"""
@


1.4
log
@apply fixes from the Win32 build
@
text
@d9 1
a9 1
DriverVer=10/29/2016,3.1.@@jwin@@
@


1.3
log
@first cut at win32 self-relocation
@
text
@d63 1
d102 1
a102 1
; $MirOS: contrib/code/jupp/setup.inf,v 1.1 2016/10/29 22:03:24 tg Exp $
@


1.2
log
@first cut at improving things
@
text
@d3 3
a5 6
; © 2006, 2009, 2010, 2011, 2012
;   by mirabilos <tg@@mirbsd.org>
; licence see jupprc and copying

; copy and set up jupp for win32
; must be in c:\windows\system32
d9 1
a9 1
DriverVer=06/08/2012,3.1.@@jwin@@
d15 1
a15 31
setup.inf=1
copying.txt=1
cygwin1.dll=1
jupp32.exe=1
jupp32.txt=1
jmacsrc=1
joerc=1
jpicorc=1
jstarrc=1
jupp32rc=1
klingon=1
asm.jsf=1
c.jsf=1
conf.jsf=1
csh.jsf=1
diff.jsf=1
fortran.jsf=1
html.jsf=1
java.jsf=1
lisp.jsf=1
mail.jsf=1
mason.jsf=1
pascal.jsf=1
perl.jsf=1
php.jsf=1
python.jsf=1
sh.jsf=1
tcl.jsf=1
verilog.jsf=1
vhdl.jsf=1
xml.jsf=1
d19 1
a23 1
cygwin1.dll
d31 2
d70 1
a70 1
HKCR,"*\shell\jupp\command","",,"c:\windows\system32\jupp32.exe ""%L"""
d76 16
d93 7
a99 5
DefaultDestDir=-1,C:\WINDOWS\system32
jupp.Copy=-1,C:\WINDOWS\system32
jrc.Copy=-1,C:\WINDOWS\system32\joe
jcm.Copy=-1,C:\WINDOWS\system32\joe\charmaps
jsy.Copy=-1,C:\WINDOWS\system32\joe\syntax
@


1.1
log
@add old way to make jupp32
@
text
@d12 1
a12 1
DriverVer=06/08/2012,3.1.20
d15 1
a15 1
1="joe 3.1jupp20 Win32 installation floppy"
d18 1
a18 4
jupp-w32.cfg=1
jupp-w32.dif=1
setup32.inf=1
setup64.inf=1
d100 1
a100 1
HKCR,"*\shell\jupp","Version",,"jupp 3.1.20 (i486)"
d114 1
a114 1
; $MirOS$
@

