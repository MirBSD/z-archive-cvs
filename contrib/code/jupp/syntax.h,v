head	1.5;
access;
symbols
	joe-3_1jupp38:1.5
	joe-3_1jupp37:1.5
	joe-3_1jupp36:1.5
	joe-3_1jupp35:1.5
	joe-3_1jupp34:1.5
	joe-3_1jupp33:1.5
	joe-3_1jupp32:1.5
	joe-3_1jupp31:1.3
	joe-3_1jupp30:1.3
	joe-3_1jupp29:1.3
	joe-3_1jupp28:1.2
	joe-3_1jupp27:1.2
	joe-3_1jupp26:1.2
	joe-3_1jupp25:1.2
	joe-3_1jupp24:1.2
	joe-3_1jupp23:1.2
	joe-3_1jupp22:1.2
	joe-3_1jupp21:1.2
	joe-3_1jupp20:1.2
	joe-3_1jupp19:1.2
	joe-3_1jupp18:1.2
	joe-3_1jupp17:1.2
	joe-3_1jupp16:1.2
	joe-3_1jupp15:1.2
	joe-3_1jupp14:1.2
	joe-3_1jupp12:1.2
	joe-3_1jupp11:1.2
	joe-3_1jupp10:1.2
	joe-3_1jupp9:1.2
	joe-3_1jupp8:1.1.201.1
	joe-3_1jupp7:1.1.201.1
	joe-3_1jupp6:1.1.201.1
	joe-3_1jupp5:1.1.201.1
	joe-3_1jupp4:1.1.201.1
	joe-3_1:1.1.201.1
	tg:1.1.201;
locks; strict;
comment	@ * @;


1.5
date	2017.12.02.17.00.50;	author tg;	state Exp;
branches;
next	1.4;
commitid	1005A22DC570063953B;

1.4
date	2017.12.02.02.07.32;	author tg;	state Exp;
branches;
next	1.3;
commitid	1005A220AD65C90E687;

1.3
date	2016.10.07.19.43.55;	author tg;	state Exp;
branches;
next	1.2;
commitid	10057F7FB0D4D3E4027;

1.2
date	2008.05.13.13.08.26;	author tg;	state Exp;
branches;
next	1.1;
commitid	100482992BC01EE89A1;

1.1
date	2005.02.05.00.37.17;	author tg;	state Exp;
branches
	1.1.201.1;
next	;

1.1.201.1
date	2005.02.05.00.37.17;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@fix string name collision by prefixing the idstrings in not-.c files
@
text
@#ifndef _Isyntax
#define _Isyntax 1

#ifdef EXTERN
__IDSTRING(rcsid_syntax_h, "$MirOS: contrib/code/jupp/syntax.h,v 1.4 2017/12/02 02:07:32 tg Exp $");
#endif

#include "hash.h"

/*
 *	Syntax highlighting DFA interpreter
 *	Copyright
 *		(C) 2004 Joseph H. Allen
 *
 *	This file is part of JOE (Joe's Own Editor)
 */

/* Color definition */

struct high_color {
	struct high_color *next;
	const unsigned char *name;	/* Symbolic name of color */
	int color;			/* Color value */
};

/* State */

struct high_state {
	int no;				/* State number */
	const unsigned char *name;	/* Highlight state name */
	int color;			/* Color for this state */
	struct high_cmd *cmd[256];	/* Character table */
};

/* Command (transition) */

struct high_cmd {
	struct high_state *new_state;	/* The new state */
	HASH *keywords;			/* Hash table of keywords */
	int recolor;			/* No. chars to recolor if <0. */
	unsigned noeat : 1;		/* Set to give this character to next state */
	unsigned start_buffering : 1;	/* Set if we should start buffering */
	unsigned stop_buffering : 1;	/* Set if we should stop buffering */
	unsigned ignore : 1;		/* Set to ignore case */
};

/* Loaded form of syntax file */

struct high_syntax {
	struct high_syntax *next;	/* Linked list of loaded syntaxes */
	const unsigned char *name;	/* Name of this syntax */
	struct high_state **states;	/* The states of this syntax.  states[0] is idle state */
	int nstates;			/* No. states */
	int szstates;			/* Malloc size of states array */
	struct high_color *color;	/* Linked list of color definitions */
	int sync_lines;			/* No. lines back to start parsing when we lose sync.  -1 means start at beginning */
	struct high_cmd default_cmd;	/* Default transition for new states */
};

/* Find a syntax.  Load it if necessary. */

struct high_syntax *load_dfa(const unsigned char *name);

/* Parse a lines.  Returns new state. */

extern int *attr_buf;
int parse(struct high_syntax *syntax, P *line, int state);

#endif
@


1.4
log
@overhaul the way includes work; give jupp proper RCS IDs

(after all, empty source files are UB; win32.c is likely)
@
text
@d5 1
a5 1
__RCSID("$MirOS$");
@


1.3
log
@UTF-8 syntax highlighting
@
text
@a0 2
/* $MirOS: contrib/code/jupp/syntax.h,v 1.2 2008/05/13 13:08:26 tg Exp $ */

d4 4
@


1.2
log
@prepare for joe-3.1jupp9:
* sync NEWS
* bump vsn in configure.ac
* tag all files with RCS ID
* sync licence template
@
text
@d1 1
a1 1
/* $MirOS$ */
d20 1
a20 1
	unsigned char *name;		/* Symbolic name of color */
d28 1
a28 1
	unsigned char *name;		/* Highlight state name */
a35 4
	int noeat;			/* Set to give this character to next state */
	int recolor;			/* No. chars to recolor if <0. */
	int start_buffering;		/* Set if we should start buffering */
	int stop_buffering;		/* Set if we should stop buffering */
d38 5
a42 1
	int ignore;			/* Set to ignore case */
d49 1
a49 1
	unsigned char *name;			/* Name of this syntax */
d60 1
a60 1
struct high_syntax *load_dfa(unsigned char *name);
d65 1
a65 1
int parse(struct high_syntax *syntax,P *line,int state);
@


1.1
log
@Initial revision
@
text
@d1 2
@


1.1.201.1
log
@JOE's Own Editor 3.1
@
text
@@
