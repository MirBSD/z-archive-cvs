head	1.12;
access;
symbols
	FWCF_1_06:1.10
	FWCF_1_05:1.10
	FWCF_1_04:1.10
	FWCF_1_03:1.9
	FWCF_1_01:1.5
	FWCF_1_00:1.5;
locks; strict;
comment	@# @;


1.12
date	2013.08.06.17.06.17;	author tg;	state Exp;
branches;
next	1.11;
commitid	10052012D144F7753C5;

1.11
date	2013.08.05.22.06.07;	author tg;	state Exp;
branches;
next	1.10;
commitid	100520021D16E80D23B;

1.10
date	2007.05.08.21.52.53;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004640F14A456E3051;

1.9
date	2007.03.13.18.28.20;	author tg;	state Exp;
branches;
next	1.8;
commitid	10045F6ED5B655DE7B4;

1.8
date	2007.03.13.18.17.58;	author tg;	state Exp;
branches;
next	1.7;
commitid	10045F6EAE065B7C580;

1.7
date	2007.03.13.18.14.30;	author tg;	state Exp;
branches;
next	1.6;
commitid	10045F6EA1D49AE20D1;

1.6
date	2007.02.28.22.57.35;	author tg;	state Exp;
branches;
next	1.5;
commitid	10045E608E176D1B350;

1.5
date	2006.09.24.21.46.16;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004516FCB12AEB461A;

1.4
date	2006.09.24.20.34.59;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004516EBC4399F582B;

1.3
date	2006.09.16.07.35.36;	author tg;	state Exp;
branches;
next	1.2;
commitid	100450BA94D3353BC7D;

1.2
date	2006.09.16.03.07.48;	author tg;	state Exp;
branches;
next	1.1;
commitid	100450B6A937B6BB46D;

1.1
date	2006.09.15.21.11.23;	author tg;	state Exp;
branches;
next	;
commitid	100450B16F309C2883E;


desc
@@


1.12
log
@get rid of the now useless ZLIB_CONST
@
text
@# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.11 2013/08/05 22:06:07 tg Exp $
#-
# This file is part of the FreeWRT project. FreeWRT is copyrighted
# material, please see the LICENCE file in the top-level directory
# or at http://www.freewrt.org/licence for details.

__CRAZY=		Yes
MKC_DEBG=		cpp

UNAME_S!=		uname -s

.ifndef LIB
.  if exists(${.CURDIR}/../lib/${__objdir})
DPADD+=			${.CURDIR}/../lib/${__objdir}/libfwcf.a
LDADD+=			-L${.CURDIR}/../lib/${__objdir} -lfwcf
.  else
DPADD+=			${.CURDIR}/../lib/libfwcf.a
LDADD+=			-L${.CURDIR}/../lib -lfwcf
.  endif
.endif

CPPFLAGS+=		-I${.CURDIR}/..
.PATH: ${.CURDIR}/..

test: .NOTMAIN all

COMPRESSORS+=		c_null.c
COMPRESSORS+=		c_zlib.c
CPPFLAGS+=		-DZCONST=const -DZLIB_CONST

COMPRESSORS+=		c_lzo1x1.c
MKDEP+=			-I${.CURDIR}/../bundled
CFLAGS_c_lzo1x1.o+=	-I${.CURDIR}/../bundled -Wno-undef
_CFLADD+=		c_lzo1x1.o

.if make(test)
CFLAGS_sys_bsd.o+=	-DRND_DISABLE
_CFLADD+=		sys_bsd.o
.endif

.if ${UNAME_S} == "OpenBSD"
.  for _i in ${_CFLADD}
CFLAGS+=		${CFLAGS_${_i}}
.  endfor
.endif
@


1.11
log
@-DZCONST=const â†’ -DZLIB_CONST

XXX sys/conf/Makefile.inc does it twice?
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.10 2007/05/08 21:52:53 tg Exp $
d29 1
a29 1
CPPFLAGS+=		-DZLIB_CONST
@


1.10
log
@ZCONST
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.9 2007/03/13 18:28:20 tg Exp $
d29 1
a29 1
CPPFLAGS+=		-DZCONST=const
@


1.9
log
@remove test stuff
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.8 2007/03/13 18:17:58 tg Exp $
d29 1
@


1.8
log
@typo, now builds fine on
| OpenBSD redmoon.openbsd.de 4.0 GENERIC#1046 sparc64
as devel/test system
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.7 2007/03/13 18:14:30 tg Exp $
a40 1
CPPFLAGS+=		-D'__RCSID(x)=static const char __rcsid[] = (x)'
@


1.7
log
@some changes required to make this build on OpenBSD
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.6 2007/02/28 22:57:35 tg Exp $
d37 1
a37 1
CFLADD+=		sys_bsd.o
d42 1
a42 1
.  for _i in ${CFLADD}
@


1.6
log
@* add missing licence boilerplate
* fix 'make depend' (BSD) warning
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.5 2006/09/24 21:46:16 tg Exp $
a11 6
.if ${UNAME_S} == "OpenBSD"
CPPFLAGS+=		-D'__RCSID(x)=static const char __rcsid[] = (x)'
.endif

REALOBJDIR!=		readlink -nf .

d13 7
a19 2
DPADD+=			${REALOBJDIR}/../lib/libfwcf.a
LDADD+=			-L${REALOBJDIR}/../lib -lfwcf
d33 1
d37 8
@


1.5
log
@implement LZO1X-1 compression via MiniLZO (GPL'd)
@
text
@d1 5
a5 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.4 2006/09/24 20:34:59 tg Exp $
d32 1
@


1.4
log
@* join mkfwcf.c, unfwcf.c, fwcf.helper.c into a single file tool.c
  which builds a combinded mkfwcf+unfwcf for the host normally, and
  a stripped-down tool for the target #ifdef SMALL (code sharing ;)
* enhance the tool by recompress functionality

Note: mkfwcf and unfwcf are kept for now
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.3 2006/09/16 07:35:36 tg Exp $
d27 3
@


1.3
log
@split the code into smaller units to reduce final executables' sizes
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.2 2006/09/16 03:07:48 tg Exp $
d26 4
@


1.2
log
@aid debugging
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/fwcf/Makefile.inc,v 1.1 2006/09/15 21:11:23 tg Exp $
d11 15
@


1.1
log
@begin operating on file tree traversal, not finished yet
mkfwcf.c will only be enhanced by the compression functions
later, it's almost finished
@
text
@d1 1
a1 1
# $MirOS$
d4 1
@

