head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2013.12.31.10.17.32;	author tg;	state Exp;
branches;
next	1.4;
commitid	10052C299C929432393;

1.4
date	2013.12.31.10.11.33;	author tg;	state Exp;
branches;
next	1.3;
commitid	10052C29861709F84FA;

1.3
date	2012.12.01.14.08.31;	author tg;	state Exp;
branches;
next	1.2;
commitid	10050BA0F7726E1432E;

1.2
date	2012.06.29.15.17.14;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004FEDC7111A47055B;

1.1
date	2012.06.24.19.34.31;	author tg;	state Exp;
branches;
next	;
commitid	1004FE76BD1607070D3;


desc
@@


1.5
log
@new QUILTRC_ENABLE flag, to use these settings also outside of deb packaging
@
text
@# $MirOS: contrib/hosted/tg/deb/dot.quiltrc,v 1.3 2012/12/01 14:08:31 tg Exp $
#-
# Configuration options (set to non-empty value to enable):
# * QUILTRC_ENABLE: generate patches in a standardised format
#   (enabled by default if QUILT_PATCHES was empty or “-” and
#   we find ourselves to be in a Debian 3.0 (quilt) package)
# * QUILTRC_NO_DIFF_P: do not show C function context in diffs
#
# If QUILT_PATCHES is empty or a sole hyphen-minus, this ~/.quiltrc
# checks for Debian 3.0 (quilt) source package and sets QUILT_PATCHES
# to "debian/patches" if found; otherwise, if it was a hyphen-minus,
# to "patches".

while test -z "$QUILT_PATCHES" || test x"$QUILT_PATCHES" = x"-"; do
	d=.
	while :; do
		test -d $d/debian && test -x $d/debian/rules && break
		test x"$(/bin/readlink -e $d)" = x"/" && break
		d=$d/..
	done
	test -x $d/debian/rules || break

	# now in Debian packaging tree with unset $QUILT_PATCHES

	QUILT_PATCHES="debian/patches"
	test -d $d/debian/patches || mkdir $d/debian/patches
	QUILTRC_ENABLE=1

	# this is not a real loop, exit it always
	break
done
if test -n "$QUILTRC_ENABLE"; then
	# enable options to generate standardised patches
	QUILT_PATCH_OPTS="--reject-format=unified"
	QUILT_DIFF_OPTS=""
	test -n "$QUILTRC_NO_DIFF_P" || \
	    QUILT_DIFF_OPTS="$QUILT_DIFF_OPTS --show-c-function"
	QUILT_DIFF_ARGS="-p ab --no-timestamps --no-index --color=auto"
	QUILT_REFRESH_ARGS="-p ab --no-timestamps --no-index --sort"
	QUILT_PUSH_ARGS="--color=auto"
	QUILT_COLORS="diff_hdr=1;32:diff_add=1;34:diff_rem=1;31:diff_hunk=1;33:diff_ctx=35:diff_cctx=33"
fi
test x"$QUILT_PATCHES" = x"-" && QUILT_PATCHES=patches
:
@


1.4
log
@add --sort to QUILT_REFRESH_ARGS to work around Debian #733504
@
text
@d2 11
d26 8
d42 1
a42 5
	test -d $d/debian/patches || mkdir $d/debian/patches

	# this is not a real loop, exit it always
	break
done
@


1.3
log
@allow overriding “diff -p” in refresh via env
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/tg/deb/dot.quiltrc,v 1.2 2012/06/29 15:17:14 tg Exp $
d20 1
a20 1
	QUILT_REFRESH_ARGS="-p ab --no-timestamps --no-index"
@


1.2
log
@some old quilt predefine QUILT_PATCHES=patches if empty BEFORE sourcing quiltrc; allow overriding automatic detection by setting it to a dash and default to "patches" if dash
@
text
@d1 1
a1 1
# $MirOS: contrib/hosted/tg/deb/dot.quiltrc,v 1.1 2012/06/24 19:34:31 tg Exp $
d16 3
a18 1
	QUILT_DIFF_OPTS="--show-c-function"
@


1.1
log
@add more developer scripts for useful patch and changelog generation
@
text
@d1 1
a1 1
# $MirOS$
d3 1
a3 1
while test -z "$QUILT_PATCHES"; do
d26 2
@

