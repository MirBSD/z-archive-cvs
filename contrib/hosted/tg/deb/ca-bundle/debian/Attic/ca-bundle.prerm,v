head	1.5;
access;
symbols
	ca-bundle-20170309:1.4
	ca-bundle-20140329:1.3
	ca-bundle-20120530:1.3
	ca-bundle_20110214:1.1.0.2;
locks; strict;
comment	@# @;


1.5
date	2017.07.31.17.44.56;	author tg;	state dead;
branches;
next	1.4;
commitid	100597F6CAF754E3CF3;

1.4
date	2017.03.09.15.45.35;	author tg;	state Exp;
branches;
next	1.3;
commitid	10058C178B92006A59C;

1.3
date	2012.05.30.19.50.46;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004FC67A2937823E87;

1.2
date	2011.09.06.20.18.41;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004E66803860B3D4BE;

1.1
date	2009.12.11.11.09.02;	author tg;	state Exp;
branches;
next	;
commitid	1004B22285873D12CC3;


desc
@@


1.5
log
@stop tracking this in CVS
@
text
@#!/bin/sh
# $MirOS: contrib/hosted/tg/deb/ca-bundle/debian/ca-bundle.prerm,v 1.4 2017/03/09 15:45:35 tg Exp $

set -e

# This maintainer script can be called the following ways:
#
# * prerm "remove"
# * old-prerm "upgrade" $new_version
# * conflictors-prerm "remove" "in-favour" $package $new_version
# * deconfigureds-prerm "deconfigure" "in-favour"
#	$package_being_installed $pbi_version ["removing"
#	$conflicting_package $cp_version]
# The package and dependencies are at least Half-Installed; dependencies
# have previously been configured and not removed.
#
# * new-prerm "failed-upgrade" $old_version
# * new-prerm "failed-upgrade" $old_version $new_version # 1.18.5, stretch
# Called when 'old-prerm "upgrade"' fails; new package not unpacked, all
# other constraints the same as above.

case $1 in
remove|deconfigure)
	;;

upgrade|failed-upgrade)
	;;

*)
	echo >&2 "prerm called with unknown subcommand '$1'"
	exit 1
	;;
esac

nukeifeq() {
	if cmp -s "$1" "$2" 2>/dev/null; then
		rm -f "$1"
	fi
}

crtdir=/etc/ssl/certs
datadir=/usr/share/ca-bundle

# remove files if generated by us, so that next package version
# can install their own, differing ones
nukeifeq $crtdir/ca-certificates.crt $datadir/ca-certificates.crt
nukeifeq $crtdir/java/cacerts $datadir/keystore.jks

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
@


1.4
log
@update
@
text
@d2 1
a2 1
# $MirOS: contrib/hosted/tg/deb/ca-bundle/debian/ca-bundle.prerm,v 1.2 2011/09/06 20:18:41 tg Exp $
@


1.3
log
@other misc. packaging improvements
@
text
@d18 1
a34 1

@


1.2
log
@Fix maintainer scripts and drop dh_installdirs
@
text
@d2 1
a2 1
# $MirOS: contrib/hosted/tg/deb/jupp/debian/jupp.prerm,v 1.4 2011/09/06 20:07:39 tg Exp $
a48 1

@


1.1
log
@experimental auto-purge-if-unchanged on upgrade
@
text
@d2 1
a2 1
# $MirOS: contrib/hosted/tg/deb/ca-bundle/debian/ca-bundle.postrm,v 1.2 2009/11/23 14:21:29 tg Exp $
d6 29
d44 4
a47 10
case $1 in
purge|upgrade|deconfigure)
	# remove files if generated by us, so that next package version
	# can install their own, differing ones
	nukeifeq $crtdir/ca-certificates.crt $datadir/ca-certificates.crt
	nukeifeq $crtdir/java/cacerts $datadir/keystore.jks
	;;

remove|failed-upgrade)
	;;
a48 5
*)
	echo "prerm called with unknown argument '$1'" >&2
	exit 1
	;;
esac
@

