head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2019.09.10.20.30.25;	author tg;	state dead;
branches;
next	1.4;
commitid	1005D7807F135496775;

1.4
date	2011.11.12.00.11.23;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004EBDB9BD4C7CAAED;

1.3
date	2011.07.28.17.19.14;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004E319A26263D388B;

1.2
date	2011.04.19.11.35.34;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004DAD73961D3E7BDD;

1.1
date	2010.06.08.10.02.32;	author tg;	state Exp;
branches;
next	;
commitid	1004C0E154962C8BC7C;


desc
@@


1.5
log
@drop these repos, maintained in http://www.mirbsd.org/~tg/Debs/
@
text
@#!/usr/bin/make -f
# $MirOS: contrib/hosted/tg/deb/host/debian/rules,v 1.4 2011/11/12 00:11:23 tg Exp $
#-
# -*- makefile -*-
# Sample debian/rules that uses debhelper.
# This file was originally written by Joey Hess and Craig Small.
# As a special exception, when this file is copied by dh-make into a
# dh-make output file, you may use that output file without restriction.
# This special exception was added by Craig Small in version 0.37 of dh-make.

CC?=		gcc
CFLAGS=		-Wall -g

ifneq (,$(filter noopt,$(DEB_BUILD_OPTIONS)))
	CFLAGS += -O0
else
	CFLAGS += -O2
endif

PMAKE_ENV:=	LC_ALL=C
PMAKE_ENV+=	CC='${CC}'
PMAKE_ENV+=	CFLAGS='${CFLAGS}'
PMAKE_ENV+=	CPPFLAGS='${CPPFLAGS}'
PMAKE_FLAGS:=	DEBIAN=Yes
# disable -Werror for package build (comment this out if developing)
PMAKE_FLAGS+=	NOGCCERROR=Yes

build build-arch build-indep: debian/.build_stamp

debian/.build_stamp:
	dh_testdir
	-rm -f debian/.*_stamp
	-rm -rf builddir
	mkdir builddir
	cp Make* host.* builddir/
	cd builddir && env ${PMAKE_ENV} pmake ${PMAKE_FLAGS} clean
	cd builddir && env ${PMAKE_ENV} pmake ${PMAKE_FLAGS} obj
	cd builddir && env ${PMAKE_ENV} pmake ${PMAKE_FLAGS} depend
	cd builddir && env ${PMAKE_ENV} pmake ${PMAKE_FLAGS}
	touch $@@

clean:
	dh_testdir
	-rm -f debian/.*_stamp
	-rm -rf builddir
	dh_clean

binary-indep:

binary-arch: build
	dh_testdir
	dh_testroot
	dh_installchangelogs
	dh_installdocs
#	dh_installexamples
	dh_install
#	dh_installmenu
#	dh_installdebconf
#	dh_installlogrotate
#	dh_installemacsen
#	dh_installpam
#	dh_installmime
#	dh_installinit
#	dh_installcron
#	dh_installinfo
	dh_installman
	mv  debian/mirhost/usr/bin/host \
	    debian/mirhost/usr/bin/mirhost
	mv  debian/mirhost/usr/share/man/man1/host.1 \
	    debian/mirhost/usr/share/man/man1/mirhost.1
#	dh_link
	dh_strip
	dh_compress
	dh_fixperms
#	dh_perl
#	dh_python
#	dh_makeshlibs
	dh_installdeb
	dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary: binary-indep binary-arch
.PHONY: binary binary-arch binary-indep build build-arch build-indep clean
@


1.4
log
@lintian and d/rules cleanup round
@
text
@d2 1
a2 1
# $MirOS: contrib/hosted/tg/deb/host/debian/rules,v 1.3 2011/07/28 17:19:14 tg Exp $
@


1.3
log
@switch to new packaging style
@
text
@d2 1
a2 1
# $MirOS: contrib/hosted/tg/deb/host/debian/rules,v 1.2 2011/04/19 11:35:34 tg Exp $
d48 1
a48 9
install: build
	dh_testdir
	dh_testroot
	dh_clean -k
	dh_installdirs

# Build architecture-independent files here.
binary-indep: build install
# We have nothing to do by default.
d50 1
a50 2
# Build architecture-dependent files here.
binary-arch: build install
d85 1
a85 1
.PHONY: build build-arch build-indep clean binary-indep binary-arch binary install
@


1.2
log
@update, weâ€™ll need this @@work
@
text
@d2 1
a2 1
# $MirOS: contrib/hosted/tg/deb/host/debian/rules,v 1.1 2010/06/08 10:02:32 tg Exp $
d28 1
a28 2
patch: debian/.patch_stamp
build: debian/.build_stamp
d30 1
a30 1
debian/.patch_stamp:
d34 2
a35 10
	cp -r src builddir
	# apply patches
	for a in debian/diffs/*; do \
		test -e "$$a" || continue; \
		(cd builddir; patch -lp0) <$$a; \
	done
	touch $@@

debian/.build_stamp: debian/.patch_stamp
	dh_testdir
d94 1
a94 1
.PHONY: build clean binary-indep binary-arch binary install check
@


1.1
log
@new package, sponsored by tarent GmbH
@
text
@d2 1
a2 1
# $MirOS: contrib/hosted/tg/deb/makefs/debian/rules,v 1.6 2010/03/16 22:11:50 tg Exp $
a19 2
CPPFLAGS+=	-include /usr/include/bsd/bsd.h

@

