head	1.11;
access;
symbols;
locks; strict;
comment	@# @;


1.11
date	2018.12.25.19.22.05;	author tg;	state Exp;
branches;
next	1.10;
commitid	1005C22837425D4BE8B;

1.10
date	2018.12.25.19.21.41;	author tg;	state Exp;
branches;
next	1.9;
commitid	1005C22835430D95E8C;

1.9
date	2016.02.11.19.00.49;	author tg;	state Exp;
branches;
next	1.8;
commitid	10056BCDA61649EA9B4;

1.8
date	2010.03.15.18.05.06;	author tg;	state Exp;
branches;
next	1.7;
commitid	1004B9E76DD516C3C74;

1.7
date	2010.03.15.17.57.38;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004B9E751D538DDBD8;

1.6
date	2009.11.17.21.28.25;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004B0315904EBABBA5;

1.5
date	2009.11.17.21.17.05;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004B0312C11524AA81;

1.4
date	2008.12.27.18.23.47;	author tg;	state Exp;
branches;
next	1.3;
commitid	100495672744BFD3C3D;

1.3
date	2008.03.14.17.07.41;	author tg;	state Exp;
branches;
next	1.2;
commitid	10047DAB0F42CDC233D;

1.2
date	2008.03.14.16.45.59;	author tg;	state Exp;
branches;
next	1.1;
commitid	10047DAABDD118A6FDD;

1.1
date	2008.03.12.23.09.25;	author tg;	state Exp;
branches;
next	;
commitid	10047D862931F373B74;


desc
@@


1.11
log
@MirOS ⇒ MirBSD here, too
@
text
@.\" $MirOS: contrib/samples/portmdoc,v 1.10 2018/12/25 19:21:41 tg Exp $
.\"-
.\" Copyright (c) 2008, 2009, 2010, 2016, 2018
.\"	mirabilos <m@@mirbsd.org>
.\"-
.\" Try to make GNU groff and AT&T nroff more compatible
.\" * ` generates ‘ in gnroff, so use \`
.\" * ' generates ’ in gnroff, \' generates ´, so use \*(aq
.\" * - generates ‐ in gnroff, \- generates −, so .tr it to -
.\"   thus use - for hyphens and \- for minus signs and option dashes
.\" * ~ is size-reduced and placed atop in groff, so use \*(TI
.\" * ^ is size-reduced and placed atop in groff, so use \*(ha
.\" * \(en does not work in nroff, so use \*(en
.\" * <>| are problematic, so redefine and use \*(Lt\*(Gt\*(Ba
.\" Also make sure to use \& *before* a punctuation char that is to not
.\" be interpreted as punctuation, and especially with two-letter words
.\" but also (after) a period that does not end a sentence (“e.g.\&”).
.\" The section after the "doc" macropackage has been loaded contains
.\" additional code to convene between the UCB mdoc macropackage (and
.\" its variant as BSD mdoc in groff) and the GNU mdoc macropackage.
.\"
.ie \n(.g \{\
.	if \*[.T]ascii .tr \-\N'45'
.	if \*[.T]latin1 .tr \-\N'45'
.	if \*[.T]utf8 .tr \-\N'45'
.	ds <= \[<=]
.	ds >= \[>=]
.	ds Rq \[rq]
.	ds Lq \[lq]
.	ds sL \(aq
.	ds sR \(aq
.	if \*[.T]utf8 .ds sL `
.	if \*[.T]ps .ds sL `
.	if \*[.T]utf8 .ds sR '
.	if \*[.T]ps .ds sR '
.	ds aq \(aq
.	ds TI \(ti
.	ds ha \(ha
.	ds en \(en
.\}
.el \{\
.	ds aq '
.	ds TI ~
.	ds ha ^
.	ds en \(em
.\}
.\"
.\" Implement .Dd with the Mdocdate RCS keyword
.\"
.rn Dd xD
.de Dd
.ie \\$1$Mdocdate: \{\
.	xD \\$2 \\$3, \\$4
.\}
.el .xD \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8
..
.\"
.\" .Dd must come before definition of .Mx, because when called
.\" with -mandoc, it might implement .Mx itself, but we want to
.\" use our own definition. And .Dd must come *first*, always.
.\"
.Dd $Mdocdate: December 25 2018 $
.\"
.\" Check which macro package we use, and do other -mdoc setup.
.\"
.ie \n(.g \{\
.	if \*[.T]utf8 .tr \[la]\*(Lt
.	if \*[.T]utf8 .tr \[ra]\*(Gt
.	ie d volume-ds-1 .ds tT gnu
.	el .ie d doc-volume-ds-1 .ds tT gnp
.	el .ds tT bsd
.\}
.el .ds tT ucb
.\"
.\" Implement .Mx (MirBSD)
.\"
.ie "\*(tT"gnu" \{\
.	eo
.	de Mx
.	nr curr-font \n[.f]
.	nr curr-size \n[.ps]
.	ds str-Mx \f[\n[curr-font]]\s[\n[curr-size]u]
.	ds str-Mx1 \*[Tn-font-size]\%MirBSD\*[str-Mx]
.	if !\n[arg-limit] \
.	if \n[.$] \{\
.	ds macro-name Mx
.	parse-args \$@@
.	\}
.	if (\n[arg-limit] > \n[arg-ptr]) \{\
.	nr arg-ptr +1
.	ie (\n[type\n[arg-ptr]] == 2) \
.	as str-Mx1 \~\*[arg\n[arg-ptr]]
.	el \
.	nr arg-ptr -1
.	\}
.	ds arg\n[arg-ptr] "\*[str-Mx1]
.	nr type\n[arg-ptr] 2
.	ds space\n[arg-ptr] "\*[space]
.	nr num-args (\n[arg-limit] - \n[arg-ptr])
.	nr arg-limit \n[arg-ptr]
.	if \n[num-args] \
.	parse-space-vector
.	print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[Tn-font-size]
.\}
.el .ie "\*(tT"gnp" \{\
.	eo
.	de Mx
.	nr doc-curr-font \n[.f]
.	nr doc-curr-size \n[.ps]
.	ds doc-str-Mx \f[\n[doc-curr-font]]\s[\n[doc-curr-size]u]
.	ds doc-str-Mx1 \*[doc-Tn-font-size]\%MirBSD\*[doc-str-Mx]
.	if !\n[doc-arg-limit] \
.	if \n[.$] \{\
.	ds doc-macro-name Mx
.	doc-parse-args \$@@
.	\}
.	if (\n[doc-arg-limit] > \n[doc-arg-ptr]) \{\
.	nr doc-arg-ptr +1
.	ie (\n[doc-type\n[doc-arg-ptr]] == 2) \
.	as doc-str-Mx1 \~\*[doc-arg\n[doc-arg-ptr]]
.	el \
.	nr doc-arg-ptr -1
.	\}
.	ds doc-arg\n[doc-arg-ptr] "\*[doc-str-Mx1]
.	nr doc-type\n[doc-arg-ptr] 2
.	ds doc-space\n[doc-arg-ptr] "\*[doc-space]
.	nr doc-num-args (\n[doc-arg-limit] - \n[doc-arg-ptr])
.	nr doc-arg-limit \n[doc-arg-ptr]
.	if \n[doc-num-args] \
.	doc-parse-space-vector
.	doc-print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[doc-Tn-font-size]
.\}
.el \{\
.	de Mx
.	nr cF \\n(.f
.	nr cZ \\n(.s
.	ds aa \&\f\\n(cF\s\\n(cZ
.	if \\n(aC==0 \{\
.		ie \\n(.$==0 \&MirBSD\\*(aa
.		el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.	\}
.	if \\n(aC>\\n(aP \{\
.		nr aP \\n(aP+1
.		ie \\n(C\\n(aP==2 \{\
.			as b1 \&MirBSD\ #\&\\*(A\\n(aP\\*(aa
.			ie \\n(aC>\\n(aP \{\
.				nr aP \\n(aP+1
.				nR
.			\}
.			el .aZ
.		\}
.		el \{\
.			as b1 \&MirBSD\\*(aa
.			nR
.		\}
.	\}
..
.\}
.\"-
@


1.10
log
@compatibility with newer GNU groff versions (prefixed mdoc)
@
text
@d1 1
a1 1
.\" $MirOS: contrib/samples/portmdoc,v 1.7 2010/03/15 17:57:38 tg Exp $
d62 1
a62 1
.Dd $Mdocdate: February 11 2016 $
d83 1
a83 1
.	ds str-Mx1 \*[Tn-font-size]\%MirOS\*[str-Mx]
d115 1
a115 1
.	ds doc-str-Mx1 \*[doc-Tn-font-size]\%MirOS\*[doc-str-Mx]
d147 1
a147 1
.		ie \\n(.$==0 \&MirOS\\*(aa
d153 1
a153 1
.			as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
d161 1
a161 1
.			as b1 \&MirOS\\*(aa
@


1.9
log
@fix working with ditroff on Schillix, confirmed by Jvrg
@
text
@d3 1
a3 1
.\" Copyright (c) 2008, 2009, 2010, 2016
d62 1
a62 1
.Dd $Mdocdate: March 15 2010 $
d70 1
d109 32
@


1.8
log
@polish and pass UCB, BSD, GNU mdoc with no warnings
@
text
@d3 2
a4 2
.\" Copyright (c) 2008, 2009, 2010
.\"	Thorsten “mirabilos” Glaser <tg@@mirbsd.org>
d15 3
a17 1
.\" Also make sure to use \& especially with two-letter words.
@


1.7
log
@tweak gnroff -Tutf8 -c -mgdoc output further
@
text
@d1 1
a1 1
.\" $MirOS: contrib/samples/portmdoc,v 1.6 2009/11/17 21:28:25 tg Exp $
a37 2
.	if \*[.T]utf8 .tr \[la]\*(Lt
.	if \*[.T]utf8 .tr \[ra]\*(Gt
d60 1
a60 1
.Dd $Mdocdate: November 17 2009 $
d62 1
a62 1
.\" Check which macro package we use
d65 2
@


1.6
log
@fix an editing mistake
@
text
@d1 1
a1 1
.\" $MirOS: contrib/samples/portmdoc,v 1.5 2009/11/17 21:17:05 tg Exp $
d3 1
a3 1
.\" Copyright (c) 2008, 2009
d14 2
d38 2
@


1.5
log
@possibly fix some of the output of (in mc)
$ man -l %f
$ man --warnings -E UTF-8 -l %f >/dev/null; print === $?
on Debian Anal/Linux
@
text
@d1 1
a1 1
.\" $MirOS: contrib/samples/portmdoc,v 1.4 2008/12/27 18:23:47 tg Exp $
d58 1
a58 1
.Dd $Mdocdate: December 27 2008 $
d101 1
@


1.4
log
@• get portmdoc the fixes from tmac/mdoc/doc-groff
  (tested with mksh.1 manpage: works with AT&T nroff due to .if)
• get macro definitions from portmdoc into tmac/mdoc/doc-nroff
• copy changes from tmac/mdoc/doc-nroff into share/tmac/mdoc/doc-ditroff
• add comments and macros from portmdoc into share/tmac/mdoc/doc-groff
• do not %beginstrip share/tmac/mdoc/doc-groff due to its complexity
• add short usage into tmac/mdoc/doc-nroff before %beginstrip as well
@
text
@d1 1
a1 1
.\" $MirOS: contrib/samples/portmdoc,v 1.3 2008/03/14 17:07:41 tg Exp $
d3 1
a3 1
.\" Copyright (c) 2008
d14 3
d58 9
a66 1
.Dd $Mdocdate: March 14 2008 $
d70 52
a121 14
.de Mx
.nr cF \\n(.f
.nr cZ \\n(.s
.ds aa \&\f\\n(cF\s\\n(cZ
.if \\n(aC==0 \{\
.	ie \\n(.$==0 \&MirOS\\*(aa
.	el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.\}
.if \\n(aC>\\n(aP \{\
.	nr aP \\n(aP+1
.	ie \\n(C\\n(aP==2 \{\
.		as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.		ie \\n(aC>\\n(aP \{\
.			nr aP \\n(aP+1
a123 5
.		el .aZ
.	\}
.	el \{\
.		as b1 \&MirOS\\*(aa
.		nR
d125 1
a126 1
..
@


1.3
log
@spacing
@
text
@d1 4
a4 1
.\" $MirOS: contrib/samples/portmdoc,v 1.2 2008/03/14 16:45:59 tg Exp $
d7 3
a9 3
.\" * ` generates ‘ in groff, so use \`
.\" * ' generates ’ in groff, \' generates ´, so use \*(aq
.\" * - generates ‐ in groff, \- generates −, fixed in tmac/mdoc/doc-groff
d16 13
@


1.2
log
@use .Dd before (re)defining .Mx, otherwise tmac.andoc fucks up on mnbsd
@
text
@d1 1
a1 1
.\" $MirOS: contrib/samples/portmdoc,v 1.1 2008/03/12 23:09:25 tg Exp $
d11 1
d26 1
d38 2
a39 1
.Dd $Mdocdate$
d42 1
d67 1
@


1.1
log
@this can be added to manpages of our portable subprojects
@
text
@d1 1
a1 1
.\" $MirOS: src/bin/mksh/mksh.1,v 1.113 2008/03/04 00:09:34 tg Exp $
d33 5
@

