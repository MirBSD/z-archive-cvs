head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2016.10.09.18.31.57;	author tg;	state Exp;
branches;
next	1.1;
commitid	10057FA8D296835D4A1;

1.1
date	2016.10.09.18.11.57;	author tg;	state Exp;
branches;
next	;
commitid	10057FA88796A086AE8;


desc
@@


1.2
log
@add extra flag to show each charâ€™s width (as determined by mksh)
@
text
@#!/bin/mksh
# $MirOS: contrib/fonts/tools/bdfc2lst.sh,v 1.1 2016/10/09 18:11:57 tg Exp $
#-
# .bdfc -> .lst (list of characters contained within)

if [[ $1 = -w ]]; then
	# enable widths
	alias postprocess='sort | addwidths'
else
	alias postprocess=sort
fi

function addwidths {
	local hex s
	local -i1 ch
	set -U

	while read hex; do
		ch=0x$hex
		if (( ch )); then
			s=${ch#1#}
			print -r -- "$hex ${%s}"
		else
			print -r -- "$hex 0"
		fi
	done
}

for i in *.bdfc; do
	o=${i%.bdfc}.lst
	sed -n '/^c \([0-9A-F][0-9A-F][0-9A-F][0-9A-F]\) .*$/s//\1/p' \
	    <"$i" | postprocess >"$o"
done
@


1.1
log
@move contrib/fonts/fixed/bdfc2lst to contrib/fonts/tools/bdfc2lst.sh
@
text
@d1 2
a2 2
#!/bin/sh
# $MirOS: contrib/fonts/fixed/bdfc2lst,v 1.1 2012/09/01 20:57:14 tg Exp $
d6 23
d32 1
a32 1
	    <"$i" | sort >"$o"
@

