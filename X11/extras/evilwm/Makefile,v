head	1.5;
access;
symbols
	MIRBSD_10_BASE:1.4
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	evilwm-0_99_18:1.1.201.2
	evilwm-0_99_17:1.1.201.1
	tg:1.1.201;
locks; strict;
comment	@# @;


1.5
date	2010.04.08.14.03.39;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004BBDE2370151EC6D;

1.4
date	2006.08.14.18.57.57;	author tg;	state Exp;
branches;
next	1.3;
commitid	10044E0C7C657C8A08A;

1.3
date	2005.07.07.18.27.13;	author tg;	state Exp;
branches;
next	1.2;
commitid	27f942cd73fd1fbe;

1.2
date	2005.03.19.13.30.07;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.01.04.40;	author tg;	state Exp;
branches
	1.1.201.1;
next	;

1.1.201.1
date	2005.02.05.01.04.40;	author tg;	state Exp;
branches;
next	1.1.201.2;

1.1.201.2
date	2005.07.07.18.07.02;	author tg;	state Exp;
branches;
next	;
commitid	5f4742cd6f554c49;


desc
@@


1.5
log
@switch KEY_KILL to Ctrl-Alt-Break (as my .Xmodmap switches grave/Escape,
and grabbing goes by keymap/keysym not keycode)
@
text
@# $MirOS: X11/extras/evilwm/Makefile,v 1.4 2006/08/14 18:57:57 tg Exp $

PROG=		evilwm
MAN=		evilwm.1
SRCS=		client.c events.c main.c misc.c new.c screen.c

LDADD+=		-L${X11LIBDIR} -lX11 -lXext
CPPFLAGS+=	-DVERSION=\"0.99.18\"
CPPFLAGS+=	-DSHAPE -DMOUSE -DSTDIO -DSOLIDDRAG -DCOLOURMAP -DVWM

# Enable a more informative and clear banner to be displayed on Ctrl+Alt+I.
CPPFLAGS+=	-DINFOBANNER
# Uncomment to show the same banner on moves and resizes.
# Note this can make things very SLOW!
#CPPFLAGS+=	-DINFOBANNER_MOVERESIZE

# Starting with evilwm 0.99.14, the "new move behaviour" is to only move a
# window if you move it by 5 or more pixels. This can be rather annoying,
# even if moving a window by accident. Uncomment the following line to
# revert to the older move behaviour.
CPPFLAGS+=	-DOLD_MOVE_BEHAVIOUR

# Use Motif hints to find if a window should be borderless.
# To use this option, you need to have the Motif development files installed.
.if exists(${X11BASE}/include/Xm/MwmUtil.h)
CPPFLAGS+=	-DMWM_HINTS
.endif

# Uncomment for snap-to-border support (thanks, Neil Drumm)
# Start evilwm with -snap num to enable (num is proximity in pixels to snap to)
CPPFLAGS+=	-DSNAP

# Uncomment the following line if you want to use Ctrl-Alt-Escape to kill
# windows (evilwm default) instead of Ctrl-Alt-Break (or just set it to
# what you want). This is useful under XFree86/Cygwin and VMware (probably)
#CPPFLAGS+=	-DKEY_KILL=XK_Escape

#CPPFLAGS+=	-DSANITY		# active sanity checks
#CPPFLAGS+=	-DDEBUG			# miscellaneous debugging
#CPPFLAGS+=	-DXDEBUG		# show some X calls

CFLAGS_misc.o+=	-Wno-cast-qual

.include <bsd.prog.mk>
@


1.4
log
@sync licence, make __CRAZY clean
@
text
@d1 1
a1 1
# $MirOS: X11/extras/evilwm/Makefile,v 1.3 2005/07/07 18:27:13 tg Exp $
d33 4
a36 4
# Uncomment the following line if you want to use Ctrl+Alt+q to kill windows
# instead of Ctrl+Alt+Escape (or just set it to what you want).  This is
# useful under XFree86/Cygwin and VMware (probably)
#CPPFLAGS+=	-DKEY_KILL=XK_q
@


1.3
log
@Finish the update of evilwm, taking care of local changes, strlcpy
cleanup, fixes for resize/move etc.
@
text
@d1 1
a1 1
# $MirOS: X11/extras/evilwm/Makefile,v 1.2 2005/03/19 13:30:07 tg Exp $
d42 2
@


1.2
log
@merge over X11/extras

XXX rewrite evilwm man page in -mdoc
@
text
@d1 1
a1 1
# $MirOS$
d5 1
a5 1
SRCS=		allinone.c
d8 2
a9 11
CPPFLAGS+=	-DSHAPE -DVERSION=\"0.99.17\"
CLEANFILES+=	allinone.c

CPPFLAGS+=	-DMOUSE
CPPFLAGS+=	-DSTDIO
CPPFLAGS+=	-DSOLIDDRAG
CPPFLAGS+=	-DCOLOURMAP

# To support virtual desktops, uncomment exactly one of the following lines:
CPPFLAGS+=	-DVWM
#CPPFLAGS+=	-DVDESK
a41 3
allinone.c: evilwm.h client.c events.c main.c misc.c new.c screen.c
	cat ${.ALLSRC} | sed 's/^#include.*evilwm.*$$//' >$@@

@


1.1
log
@Initial revision
@
text
@d1 1
a1 2
# If you don't use CC 
CC       = gcc
d3 16
a18 8
# Edit this line if you don't want evilwm to install under /usr.
# Note that $(DESTDIR) is used by the Debian build process.
prefix = $(DESTDIR)/usr

XROOT    = /usr/X11R6
INCLUDES = -I$(XROOT)/include
LDPATH   = -L$(XROOT)/lib
LIBS     = -lX11
a19 4
# Configure evilwm by editing the following DEFINES lines.

# Uncomment to enable solid window drags.  This can be slow on old systems.
DEFINES += -DSOLIDDRAG
d21 10
a30 4
DEFINES += -DINFOBANNER
# Uncomment to show the same banner on moves and resizes.  Note this can
# make things very SLOW!
#DEFINES += -DINFOBANNER_MOVERESIZE
d34 3
a36 14
DEFINES += -DMWM_HINTS

# To support virtual desktops, uncomment one or both of the following 2 lines.
DEFINES += -DVWM
#DEFINES += -DVDESK
# VWM enables the built-in virtual desktop code and VDESK allows the use
# of the extern pager program "vdesk".
#
# To support shaped windows properly, uncomment the following two lines:
DEFINES += -DSHAPE
LIBS	+= -lXext

# Uncomment for mouse support.  You probably want this.
DEFINES += -DMOUSE
d40 1
a40 9
DEFINES += -DSNAP

# Uncomment to compile in certain text messages like help.  You want this too
# unless you *really* want to trim the bytes.
DEFINES += -DSTDIO

# You can save a few bytes if you know you won't need colour map support
# (eg for 16 or more bit displays)
DEFINES += -DCOLOURMAP
d45 1
a45 4
#DEFINES += -DKEY_KILL=XK_q

# Print whatever debugging messages I've left in this release.
#DEFINES += -DDEBUG	# miscellaneous debugging
d47 3
a49 1
# ----- You shouldn't need to change anything under this line ------ #
d51 2
a52 55
version = 0
revision = 99
subrev = 17

distdir = evilwm-$(version).$(revision).$(subrev).orig
disttar = evilwm_$(version).$(revision).$(subrev).orig.tar.gz

#DEFINES += -DSANITY	# active sanity checks
#DEFINES += -DXDEBUG	# show some X calls

DEFINES += -DVERSION=\"$(version).$(revision).$(subrev)\" $(DEBIAN)
CFLAGS  += $(INCLUDES) $(DEFINES) -Os -Wall
#CFLAGS  += $(INCLUDES) $(DEFINES) -g -Wall
CFLAGS  += -Wstrict-prototypes -Wpointer-arith -Wcast-align -Wcast-qual -Wshadow -Waggregate-return -Wnested-externs -Winline -Wwrite-strings -Wundef
LDFLAGS += $(LDPATH) $(LIBS)

HEADERS  = evilwm.h
SRCS     = client.c events.c main.c misc.c new.c screen.c
OBJS     = $(SRCS:.c=.o)

all: evilwm

evilwm: $(OBJS)
	$(CC) $(CFLAGS) $(OBJS) -o $@@ $(LDFLAGS)

allinone:
	cat evilwm.h $(SRCS) | sed 's/^#include.*evilwm.*$$//' > allinone.c
	$(CC) $(CFLAGS) -o evilwm allinone.c $(LDFLAGS)
	rm allinone.c

%.o: %.c $(HEADERS)
	$(CC) $(CFLAGS) -c $<

doinstall:
	if [ -f evilwm.exe ]; then mv evilwm.exe evilwm; fi
	mkdir -p $(prefix)/bin $(prefix)/share/man/man1
	install -s evilwm $(prefix)/bin
	install evilwm.1 $(prefix)/share/man/man1
	#gzip -9 $(prefix)/share/man/man1/evilwm.1

install: doinstall

dist: clean
	cd debian && debuild clean
	mkdir /var/tmp/$(distdir)
	cp -a . /var/tmp/$(distdir)/
	cd /var/tmp && tar cfz $(disttar) $(distdir) --exclude=$(distdir)/CVS --exclude=$(distdir)/debian --exclude=$(distdir)/.\#\* && rm -rf $(distdir)
	mv /var/tmp/$(disttar) ..

debuild: dist
	-cd ..; rm -rf $(distdir)/
	cd ..; tar xfz $(disttar)
	cp -a debian ../$(distdir)/
	rm -rf ../$(distdir)/debian/CVS/
	cd ../$(distdir); debuild
d54 1
a54 2
clean:
	rm -f evilwm evilwm.exe $(OBJS)
@


1.1.201.1
log
@evilwm 0.99.17
@
text
@@


1.1.201.2
log
@There is a new evilwm out there!
@
text
@d13 1
a13 4
DEFINES  = $(EXTRA_DEFINES)
# Configure evilwm by editing the following DEFINES lines.  You can also
# add options by setting EXTRA_DEFINES on the make(1) command line,
# e.g., make EXTRA_DEFINES="-DDEBUG".
d27 1
a27 1
# To support virtual desktops, uncomment the following line.
d29 4
a32 1

a45 1
# Note that snprintf(3) is always part of the build.
d49 1
a49 1
# (e.g., for 16 or more bit displays)
d58 1
a58 1
DEFINES += -DDEBUG	# miscellaneous debugging
d62 3
a64 1
version = 0.99.18
d66 2
a67 1
distname = evilwm-$(version)
d69 2
a70 1
DEFINES += -DXDEBUG	# show some X calls
d72 1
a72 1
DEFINES += -DVERSION=\"$(version)\" $(DEBIAN)
d75 1
a75 1
CFLAGS  += -W -Wstrict-prototypes -Wpointer-arith -Wcast-align -Wcast-qual -Wshadow -Waggregate-return -Wnested-externs -Winline -Wwrite-strings -Wundef -Wsign-compare -Wmissing-prototypes -Wredundant-decls
d78 1
a78 1
HEADERS  = evilwm.h log.h
d87 4
a90 4
#allinone:
#	cat evilwm.h $(SRCS) | sed 's/^#include.*evilwm.*$$//' > allinone.c
#	$(CC) $(CFLAGS) -o evilwm allinone.c $(LDFLAGS)
#	rm allinone.c
d104 6
a109 3
dist:
	darcs dist --dist-name $(distname)
	mv $(distname).tar.gz ..
d112 5
a116 6
	-cd ..; rm -rf $(distname)/ $(distname).orig/
	cd ..; mv $(distname).tar.gz evilwm_$(version).orig.tar.gz
	cd ..; tar xfz evilwm_$(version).orig.tar.gz
	cp -a debian ../$(distname)/
	rm -rf ../$(distname)/debian/_darcs/
	cd ../$(distname); debuild
@

