head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2009.12.28.14.55.14;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004B38C6D25E238175;

1.4
date	2009.08.16.17.17.44;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004A883C9B4C196B76;

1.3
date	2007.04.12.20.20.41;	author bsiegert;	state Exp;
branches;
next	1.2;
commitid	100461E94AE5730E83F;

1.2
date	2007.02.22.15.12.30;	author tg;	state Exp;
branches;
next	1.1;
commitid	10045DDB2ED22845BA2;

1.1
date	2006.10.07.00.12.57;	author tg;	state Exp;
branches;
next	;
commitid	1004526F0E646DFD9A1;


desc
@@


1.5
log
@speed up recursive ops by use of .MAKEFLAGS (not MAKEFLAGS like TNF,
since our make is different, apparently)
@
text
@# $MirOS: ports/japanese/jmdict/datfile/Makefile,v 1.4 2009/08/16 17:17:44 tg Exp $

.include <mirports.sys.mk>

COMMENT=		sqlite2 format JMdict database
CATEGORIES=		japanese
.ifndef datfile_VSN
datfile_VSN!=		cd ${PORTSDIR}/japanese/JMdict && ${MAKE} show=VSN
.MAKEFLAGS:=		${.MAKEFLAGS} datfile_VSN=${datfile_VSN:Q}
.endif
PKGNAME=		jmdict-datfile-${datfile_VSN}-${DASH_VER}
HOMEPAGE=		http://mandrill.fuxx0r.net/jmdict.php

# Creative Commons by-sa 2.5
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

BUILD_DEPENDS+=		:JMdict-${datfile_VSN}:japanese/JMdict
BUILD_DEPENDS+=		::japanese/jmdict/jmdict_import

WRKDIST=		${WRKDIR}
NO_DISTFILES=		Yes
NO_CHECKSUM=		Yes
NO_REGRESS=		Yes
USE_CXX=		Yes # depends on jmdict_import, which uses CXX
PKG_ARCH=		*

do-build:
	@@echo WARNING: This is a very time-consuming build
	@@echo process, which can take over an hour at 1 GHz!
	cd ${WRKBUILD} && \
	    ln -s ${LOCALBASE}/share/JMdict/JMdict && \
	    ${LOCALBASE}/bin/jmdict_import

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/{,doc/}jmdict-datfile
	${INSTALL_DATA} ${WRKBUILD}/dictionary ${PREFIX}/share/jmdict-datfile/
	${INSTALL_DATA} ${LOCALBASE}/share/doc/JMdict/licence.html \
	    ${PREFIX}/share/doc/jmdict-datfile/

.include <bsd.port.mk>
@


1.4
log
@change all V to VSN (ok bsiegert@@) and some DASH_VER while here
@
text
@d1 1
a1 1
# $MirOS: ports/japanese/jmdict/datfile/Makefile,v 1.3 2007/04/12 20:20:41 bsiegert Exp $
d7 5
a11 2
VSN!=			cd ${PORTSDIR}/japanese/JMdict && ${MAKE} show=VSN
PKGNAME=		jmdict-datfile-${VSN}-${DASH_VER}
d20 1
a20 1
BUILD_DEPENDS+=		:JMdict-${VSN}:japanese/JMdict
@


1.3
log
@USE_CXX (dependency)
@
text
@d1 1
a1 1
# $MirOS: ports/japanese/jmdict/datfile/Makefile,v 1.2 2007/02/22 15:12:30 tg Exp $
d7 2
a8 2
V!=			cd ${PORTSDIR}/japanese/JMdict && ${MAKE} show=V
PKGNAME=		jmdict-datfile-$V-0
d17 1
a17 1
BUILD_DEPENDS+=		:JMdict-$V:japanese/JMdict
@


1.2
log
@don't use ${PORTSDIR} before it's defined
@
text
@d1 1
a1 1
# $MirOS: ports/japanese/jmdict/datfile/Makefile,v 1.1 2006/10/07 00:12:57 tg Exp $
d24 1
@


1.1
log
@add a working port of the jmdict command line utility
NB: creating the sqlite version of the dictionary took more than one hour;
    that's why it's a separate port, which can be depended on by gjdict too
@
text
@d1 3
a3 1
# $MirOS$
@

