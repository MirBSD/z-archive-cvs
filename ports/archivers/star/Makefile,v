head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2008.03.09.17.22.21;	author tg;	state Exp;
branches;
next	1.4;
commitid	10047D41CAA7E715397;

1.4
date	2007.03.31.22.01.53;	author tg;	state Exp;
branches;
next	1.3;
commitid	100460EDA5B5AAA6E31;

1.3
date	2006.09.14.00.06.52;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045089C0E234154C3;

1.2
date	2006.02.09.12.25.12;	author tg;	state Exp;
branches;
next	1.1;
commitid	10043EB348C1DDC8752;

1.1
date	2005.03.18.15.42.44;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.42.44;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@# $MirOS: ports/archivers/star/Makefile,v 1.4 2007/03/31 22:01:53 tg Exp $
# $OpenBSD: Makefile,v 1.13 2003/02/18 12:59:10 naddy Exp $
# $FreeBSD: Makefile,v 1.7 1998/12/24 13:15:23 dirk Exp $

COMMENT=			unique standard tape archiver with many enhancements

DISTNAME=	star-1.4.3
CATEGORIES=	archivers sysutils
HOMEPAGE=	http://www.fokus.gmd.de/research/cc/glone/employees/joerg.schilling/private/star.html


# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	ftp://ftp.berlios.de/pub/star/
EXTRACT_SUFX=	.tar.bz2

FLAVOURS=	static
FLAVOUR?=

RUN_DEPENDS=	:bzip2-*:archivers/bzip2

.include <mirports.sys.mk>

USE_SCHILY=	Yes
MAKE_ENV+=	COPTX=${CFLAGS:Q}
.if ${FLAVOUR:L:Mstatic}
MAKE_ENV+=	LDOPTX=-static
.endif

OBJ=	OBJ/${MACHINE}-openbsd-cc

do-install:
.for prog in star tartest
	${INSTALL_PROGRAM} ${WRKBUILD}/${prog}/${OBJ}/${prog} ${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/${prog}/${prog}.1 ${PREFIX}/man/man1
.endfor
	cd ${PREFIX}/bin; ln -sf star ustar
	cd ${PREFIX}/man/man1; ln -sf star.1 ustar.1
	${INSTALL_PROGRAM} ${WRKBUILD}/mt/${OBJ}/smt ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKBUILD}/rmt/${OBJ}/rmt ${PREFIX}/libexec/srmt
	perl -pi -e 's,%%SYSCONFDIR%%,${SYSCONFDIR},g' ${WRKSRC}/rmt/rmt.1
	${INSTALL_MAN} ${WRKSRC}/rmt/rmt.1 ${PREFIX}/man/man8/srmt.8
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/star
	${INSTALL_DATA} ${WRKSRC}/rmt/rmt.dfl \
		${PREFIX}/share/examples/star/srmt.conf.sample

NO_REGRESS=	Yes

.include <bsd.port.mk>
@


1.4
log
@fix broken dependencies, <bsd.own.mk> inclusion; break other packages
@
text
@d1 1
a1 1
# $MirOS: ports/archivers/star/Makefile,v 1.3 2006/09/14 00:06:52 tg Exp $
d21 2
a22 2
FLAVORS=	static
FLAVOR?=
d30 1
a30 1
.if ${FLAVOR:L:Mstatic}
@


1.3
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/archivers/star/Makefile,v 1.2 2006/02/09 12:25:12 tg Exp $
d26 1
a26 1
.include <bsd.own.mk>
@


1.2
log
@first bulk build fallout:
* fix port bugs which are simple to fix (eg. libtoolise)
* break all others so that we get a percentage of what works...
@
text
@d1 1
a1 1
# $MirOS: ports/archivers/star/Makefile,v 1.1.7.1 2005/03/18 15:42:44 tg Exp $
d5 1
a5 1
COMMENT=	"unique standard tape archiver with many enhancements"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
d28 2
a29 5
USE_GMAKE=	Yes
MAKE_ENV=	MAKEPROG="${MAKEPROG}" \
		CCOM="${CC}" COPTX="${CFLAGS}" \
		SYSCONFDIR="${SYSCONFDIR}"

d34 1
a34 7
.if ${MACHINE} != "i386" || ${CC} != "cc"
do-configure:
	@@ln -sf ${WRKSRC}/RULES/i386-openbsd-cc.rul \
		${WRKSRC}/RULES/${MACHINE}-openbsd-${CC}.rul
.endif

OBJ=	OBJ/${MACHINE}-openbsd-${CC}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
