head	1.6;
access;
symbols
	cvs-200908291130:1.1.1.1 openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2012.01.15.11.56.51;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004F12BF00696BD00A;

1.5
date	2009.08.30.18.25.09;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004A9AC41523AA6324;

1.4
date	2009.08.30.16.11.58;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004A9AA4E148406569;

1.3
date	2009.08.29.13.17.55;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004A992A8E66930E5D;

1.2
date	2009.08.29.12.59.56;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004A99264D28C908DC;

1.1
date	2009.08.29.11.43.42;	author tg;	state Exp;
branches
	1.1.1.1;
next	;
commitid	1004A991477761C8DC1;

1.1.1.1
date	2009.08.29.11.43.42;	author tg;	state Exp;
branches;
next	;
commitid	1004A991477761C8DC1;


desc
@@


1.6
log
@mirror this ourselves; the new project with the name “luaposix” linked
from the homepage is github and has no similarity to the one we need here
@
text
@# $MirOS: ports/devel/luaposix/Makefile,v 1.5 2009/08/30 18:25:09 tg Exp $
# $OpenBSD: Makefile,v 1.10 2008/06/11 05:04:37 landry Exp $

COMMENT=		posix library for the lua language
DISTNAME=		luaposix-20060408
CATEGORIES=		devel
MASTER_SITES=		${_MASTER_SITE_MIRBSD}
HOMEPAGE=		http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/

# Public domain
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

BUILD_DEPENDS+=		:mirmake->=20090830:devel/mirmake
MODULES=		lang/lua
NO_REGRESS=		Yes
SHARED_ONLY=		Yes

MAKE_FILE=		${.SYSMK}/bsd.lib.mk
EXTRA_XAKE_FLAGS+=	LIB=posix \
			SHLIB_SONAME=posix.so \
			SHLIB_VERSION=- \
			SHLIB_TYPE=plugin \
			SRCS=luaposix.c \
			LIBDIR=${TRUEPREFIX:Q}/lib/lua/5.1

pre-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/lua/5.1

.include <bsd.port.mk>
@


1.5
log
@require new MirMake for plugins on OSX
@
text
@d1 1
a1 1
# $MirOS: ports/devel/luaposix/Makefile,v 1.4 2009/08/30 16:11:58 tg Exp $
d7 1
a7 1
MASTER_SITES=		http://mirrors.protection.cx/~pedro/
@


1.4
log
@fix typo in Darwin codepath
@
text
@d1 1
a1 1
# $MirOS: ports/devel/luaposix/Makefile,v 1.3 2009/08/29 13:17:55 tg Exp $
d16 1
d25 1
a26 2
			NOPICINSTALL=no \
			_LIBS_STATIC=no \
a28 4
.if (${MACHINE_OS} == "Darwin")
LDFLAGS+=		-bundle -undefined dynamic_lookup
.endif

@


1.3
log
@(from luasocket) maybe needed on Mac ⇒ bsiegert@@ please test
@
text
@d1 1
a1 1
# $MirOS: ports/devel/luaposix/Makefile,v 1.2 2009/08/29 12:59:56 tg Exp $
d30 1
a30 1
LDFLAGS+=	-bundle undefined dynamic_lookup
@


1.2
log
@• lua: fix module loading
• luaposix: port – use mirmake to create the bundle

tg@@bleu:~ $ lua -l posix
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
> print(posix.getenv('USER'))
tg
> ^D
@
text
@d1 1
a1 1
# $MirOS$
d29 4
@


1.1
log
@Initial revision
@
text
@d1 1
d4 5
a8 8
COMMENT=	posix library for the lua language

DISTNAME=	luaposix-20060408
PKGNAME=	${DISTNAME}p1
CATEGORIES=	devel

MASTER_SITES=	http://mirrors.protection.cx/~pedro/
HOMEPAGE=	http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/
d16 12
a27 7
MODULES=	lang/lua
NO_REGRESS=	Yes
SHARED_ONLY=	Yes

do-build:
	${CC} ${CFLAGS} -fPIC -I${LOCALBASE}/include -shared\
	${WRKDIST}/luaposix.c -o ${WRKDIST}/posix.so
d29 1
a29 1
do-install:
a30 1
	${INSTALL_DATA} ${WRKSRC}/posix.so ${PREFIX}/lib/lua/5.1
@


1.1.1.1
log
@import Lua and some bindings required for the Simtec eKey
@
text
@@
