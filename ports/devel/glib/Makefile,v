head	1.21;
access;
symbols
	bsiegert-experimental:1.19.0.2
	bsiegert-experimental_BASE:1.19
	bsiegert-glib2-2_8:1.12.0.2
	bsiegert-glib2-2_12:1.13.0.2;
locks; strict;
comment	@# @;


1.21
date	2010.11.25.15.35.39;	author bsiegert;	state Exp;
branches;
next	1.20;
commitid	1004CEE81C53B9CCA70;

1.20
date	2009.08.05.07.54.08;	author tg;	state Exp;
branches;
next	1.19;
commitid	1004A793A8B0046CF50;

1.19
date	2009.07.07.18.08.01;	author bsiegert;	state Exp;
branches
	1.19.2.1;
next	1.18;
commitid	1004A538EED0D4E6F70;

1.18
date	2009.03.02.20.12.12;	author bsiegert;	state Exp;
branches;
next	1.17;
commitid	10049AC3D9509EEF8B1;

1.17
date	2008.03.06.22.08.23;	author tg;	state Exp;
branches;
next	1.16;
commitid	10047D06AEA5DDE8D1F;

1.16
date	2007.02.22.22.57.47;	author tg;	state Exp;
branches;
next	1.15;
commitid	10045DE1FF10F590776;

1.15
date	2007.01.06.16.45.53;	author tg;	state Exp;
branches;
next	1.14;
commitid	100459FD23E4888353C;

1.14
date	2006.12.30.21.51.07;	author tg;	state Exp;
branches;
next	1.13;
commitid	1004596DF3F4AAF58D3;

1.13
date	2006.12.26.16.40.58;	author bsiegert;	state Exp;
branches;
next	1.12;
commitid	100459150667E2DED9E;

1.12
date	2006.12.20.15.31.14;	author tg;	state Exp;
branches;
next	1.11;
commitid	100458956E02A39AB3C;

1.11
date	2006.11.02.01.55.37;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004549501176B5FBE6;

1.10
date	2006.09.14.00.08.12;	author tg;	state Exp;
branches;
next	1.9;
commitid	10045089C0E234154C3;

1.9
date	2006.06.04.20.57.14;	author bsiegert;	state Exp;
branches;
next	1.8;
commitid	1004483477912A9BF39;

1.8
date	2006.03.14.22.51.58;	author bsiegert;	state Exp;
branches;
next	1.7;
commitid	1004417491D532C9E46;

1.7
date	2006.02.09.11.11.21;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043EB23217A35557B;

1.6
date	2005.09.23.20.17.52;	author bsiegert;	state Exp;
branches;
next	1.5;
commitid	3d40433462f22306;

1.5
date	2005.09.22.19.27.36;	author bsiegert;	state Exp;
branches;
next	1.4;
commitid	2d42433305a51171;

1.4
date	2005.09.09.10.39.24;	author bsiegert;	state Exp;
branches;
next	1.3;
commitid	6e2f4321663d40a6;

1.3
date	2005.07.24.12.32.16;	author bsiegert;	state Exp;
branches;
next	1.2;
commitid	175642e38a5be7dd;

1.2
date	2005.07.07.21.19.04;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.44.37;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.19.2.1
date	2009.07.15.16.46.55;	author bsiegert;	state Exp;
branches;
next	;
commitid	1004A5E07FE2C199394;

1.1.7.1
date	2005.03.18.15.44.37;	author tg;	state Exp;
branches;
next	;


desc
@@


1.21
log
@Step by step, bring Gtk+ a bit closer to the current version. Update
glib to latest 2.14, pango to latest 1.18 and Gtk+ to latest 2.12.
Update these three together.

Pango does not build its xft backend because we do not have a xrender.pc
file in base. Some packages that depend on pangoxft will have to be touched.
@
text
@# $MirOS: ports/devel/glib/Makefile,v 1.20 2009/08/05 07:54:08 tg Exp $
# $OpenBSD: Makefile,v 1.19 2004/12/22 06:31:05 espie Exp $

COMMENT=		general-purpose utility library
COMMENT-docs=		glib2 documentation
VERSION=		2.16.6
DASH_VER=		0
DISTNAME=		glib-${VERSION}
PKGNAME=		glib2-${VERSION}-${DASH_VER}
PKGNAME-docs=		glib2-docs-${VERSION}-${DASH_VER}
CATEGORIES=		devel
HOMEPAGE=		http://www.gtk.org

# LGPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES+=           ${MASTER_SITE_GNOME:=sources/glib/${VERSION:R}/}
MASTER_SITES+=		ftp://ftp.gtk.org/pub/glib/${VERSION:R}/
EXTRACT_SUFX=		.tar.bz2

MULTI_PACKAGES=		-docs
SUBPACKAGE?=

.if defined(PACKAGING) && ${SUBPACKAGE} == "-docs"
PKG_ARCH=		*
.else
MODULES=		devel/gettext devel/pkgconfig converters/libiconv
.endif

# hppa's threads are broken (configure test gives Bus error)...
.if (${MACHINE_ARCH} == "hppa")
CONFIGURE_ARGS+=	--disable-threads
.else
CONFIGURE_ARGS+=	--with-threads=posix
.endif
CONFIGURE_ARGS+=	--disable-rebuilds

USE_GMAKE=		Yes
CONFIGURE_STYLE=	autoconf
AUTOCONF_NEW=		Yes
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--enable-static

.include <bsd.port.mk>
@


1.20
log
@fix the PLISTs: distribute doc files *all* into the doc subpackage;
resolves problem that main package creates a share/gtk-doc directory
without an appropriate @@dirrm (XXX this should be checked)
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.19 2009/07/07 18:08:01 bsiegert Exp $
d6 2
a7 2
VERSION=		2.12.13
DASH_VER=		2
d20 2
a21 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/glib/2.12/
@


1.19
log
@Fix on newer gcc versions by replacing "extern inline" by "static inline".
Bump.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.18 2009/03/02 20:12:12 bsiegert Exp $
d7 1
a7 1
DASH_VER=		1
@


1.19.2.1
log
@Update to 2.21.3, not ready for general consumption yet.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.19 2009/07/07 18:08:01 bsiegert Exp $
d6 2
a7 3
VERSION=		2.21.3
V=			${VERSION:R}
DASH_VER=		0
d20 1
a20 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/glib/${V}/
@


1.18
log
@Update to 2.12.13. Apparently adding "--disable-rebuilds" fixes the build
problems I had.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.17 2008/03/06 22:08:23 tg Exp $
d7 1
a7 1
DASH_VER=		0
@


1.17
log
@couple of improvements, bsiegert@@ agreed good idea
â€¢ re-run mmake makesum â†’ add TIGER hash
â€¢ refresh patches (changes offsets)
â€¢ fix time_t casts
â€¢ do not call iconv if fromcharset and tocharset are the same
â€¢ do not cast a pointer to a long into a time_t oO
â€¢ while openbsd may have no wchar_t functions, do not prevent
  mac osx and mirbsd from using full unicode stuff
â€¢ ALIGN is defined by <machine/param.h>
â€¢ <malloc.h> _is_ obsolete
â€¢ support U+1E9E (áºž, uppercase eszett)
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.16 2007/02/22 22:57:47 tg Exp $
d6 2
a7 2
VERSION=		2.12.6
DASH_VER=		1
d38 1
@


1.16
log
@remove redundancy
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.15 2007/01/06 16:45:53 tg Exp $
d7 1
@


1.15
log
@* by request of bsiegert@@, unrevert the glib2 downgrade
* fix whitespace (thanks to editors/joe (jupp) ^Ov option)
@
text
@d1 1
a1 1
# $MirOS$
a42 2
CONFIGURE_ARGS+=	--disable-dependency-tracking
CONFIGURE_ARGS+=	--disable-libtool-lock
@


1.14
log
@revert commitid 100459150667E2DED9E, thus bringing back glib2
to 2.8 from 2.12 - przemek (zeno) complains that the upgrade
breaks gtk+2, and it's only "for now".
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.12 2006/12/20 15:31:14 tg Exp $
d6 1
a6 2
VERSION=		2.8.1
DASH_VER=		4
d9 1
a9 1
PKGNAME-docs=           glib2-docs-${VERSION}-${DASH_VER}
d19 2
a20 2
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.8/
EXTRACT_SUFX=           .tar.bz2
d22 1
a22 1
MULTI_PACKAGES=         -docs
d43 2
a44 2
CONFIGURE_ARGS+=	--disable-dependency-tracking \
			--disable-libtool-lock \
@


1.13
log
@Tentatively update glib to 2.12.6-0, tested only on Mac OS so far. But at
least I have:

FAIL: run-collate-tests.sh
1 of 49 tests failed

Which means 48 that work ;).
@
text
@d6 2
a7 2
VERSION=		2.12.6
DASH_VER=		0
d20 1
a20 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/glib/2.12/
d44 2
a45 2
CONFIGURE_ARGS+=	--disable-dependency-tracking
CONFIGURE_ARGS+=	--disable-libtool-lock
@


1.12
log
@sync DASH_VER usage:
* the dash doesn't belong into the DASH_VER variable,
  it's only a decimal integer value
* DASH_VER already defaults to 0 (admittedly new)
* PKGNAME already defaults to ${DISTNAME}-${DASH_VER}
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.11 2006/11/02 01:55:37 tg Exp $
d6 2
a7 2
VERSION=		2.8.1
DASH_VER=		4
d20 1
a20 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.8/
d44 2
a45 2
CONFIGURE_ARGS+=	--disable-dependency-tracking \
			--disable-libtool-lock \
@


1.11
log
@speed up build here too and wait for bsiegert@@ to update them
XXX glib might need --enable-included-printf
XXX as I trust our printf more than theirs, especially
XXX in terms of -Wformat ;-)
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.10 2006/09/14 00:08:12 tg Exp $
d4 2
a5 2
COMMENT=			general-purpose utility library
COMMENT-docs=			glib2 documentation
@


1.10
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.9 2006/06/04 20:57:14 bsiegert Exp $
d44 2
@


1.9
log
@Add a fix for iconv in -current.  Our iconv has both a "native" (iconv_open)
and a GNU one (libiconv_open).  This leads glib to believe that we are using
the wrong iconv.h (no, no, don't ask).  Bump patchlevel.

Some explications by tg@@
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.8 2006/03/14 22:51:58 bsiegert Exp $
d4 2
a5 2
COMMENT=		"general-purpose utility library"
COMMENT-docs=           "glib2 documentation"
@


1.8
log
@This seems to be a working solution for the iconv port trouble on -stable.

Add iconv includes and lib path (both -L and -rpath) to the iconv module.
Also add those to the glib pkgconfig file and make the port use the iconv
module. Bump patchlevel.

Hint: You will want to update those two together.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.7 2006/02/09 11:11:21 tg Exp $
d7 1
a7 1
DASH_VER=		3
@


1.7
log
@Fix a few abuses:
| CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include/libpng \
|			    -I${LOCALBASE}/include -I${X11BASE}/include" \
| 			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
|			PKGCONFIG_PATH=...

* use Benny's pkgconfig module
  - fixes PKGCONFIG_PATH in all places
  - adds explicit dependencies on pkgconfig where needed
* use a new png module
  - also cought a few implicit dependencies
* use a new freetype1 module in two places (more to come?)
* CPPFLAGS, LDFLAGS are in CONFIGURE_ENV anyway, so correctly
  add to them as CPPFLAGS+=<tab>foo instead
* use EXTRA_{M,X,F}AKE_FLAGS
* CC is given anyway, too
* add MAKEINFO= to gnu style

Still doesn't catch all OpenBSD abuses, but most of them.

Brokenness analysis:
* Automatically done
  - CFLAGS+=CPPFLAGS
  - CXXFLAGS+=CPPFLAGS
  - CPPFLAGS+=-I${LOCALBASE}/include
  - LDFLAGS+=-L${LOCALBASE}/lib
  - CONFIGURE_ENV, MAKE_FLAGS+=
    + LDFLAGS=LDFLAGS
    + CPPFLAGS you get the idea
    + CFLAGS
    + CXXFLAGS
    + CC
    + CXX (if USE_CXX)
* Done if USE_X11=Yes
  - CPPFLAGS+=X11BASE/include
  - LDFLAGS+=X11BASE/lib

Tell me if there are problems, but first try adding
an EXTRA_ before MAKE_FLAGS and FAKE_FLAGS.
Remember EXTRA_XAKE_FLAGS get added to both.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.6 2005/09/23 20:17:52 bsiegert Exp $
d7 1
a7 1
DASH_VER=		2
d29 1
a29 1
MODULES=		devel/gettext devel/pkgconfig
@


1.6
log
@Where has this patch gone? Re-add it, bump patchlevel.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.5 2005/09/22 19:27:36 bsiegert Exp $
d29 1
a29 1
MODULES=		devel/gettext
a30 1
BUILD_DEPENDS=          :pkgconfig-*:devel/pkgconfig
@


1.5
log
@Regenerate PLIST, there were some missing files. Bump patchlevel.

Oops.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.4 2005/09/09 10:39:24 bsiegert Exp $
d7 1
a7 1
DASH_VER=		1
@


1.4
log
@Update glib to 2.8.1-0, as a first step for gtk 2.8 upgrades. GNOME 2.12 is
out.
@
text
@d1 1
a1 1
# $MirOS: ports/devel/glib/Makefile,v 1.2 2005/07/07 21:19:04 bsiegert Exp $
d7 1
a7 1
DASH_VER=		0
@


1.3
log
@Libtoolise plist, bump patchlevel
@
text
@d6 2
a7 2
VERSION=		2.4.8
DASH_VER=		2
d20 1
a20 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.4/
a44 2
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include" \
			LIBS="-L${LOCALBASE}/lib"
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS$
d7 1
d9 2
a10 2
PKGNAME=		glib2-${VERSION}-1
PKGNAME-docs=           glib2-docs-${VERSION}-1
@


1.1
log
@Initial revision
@
text
@d8 2
a9 2
PKGNAME=		glib2-${VERSION}p1
PKGNAME-docs=           glib2-docs-${VERSION}p0
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
