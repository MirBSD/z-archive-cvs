head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2008.11.01.22.57.46;	author tg;	state Exp;
branches;
next	1.1;
commitid	100490CDEF2192E8556;

1.1
date	2006.12.30.21.48.48;	author tg;	state Exp;
branches;
next	;
commitid	1004596DEAD06619C96;


desc
@@


1.2
log
@now that we have svn distfiles, begin fixing this (any volunteers?)
@
text
@# $MirOS: ports/devel/lrmi/Makefile.MirPorts,v 1.1 2006/12/30 21:48:48 tg Exp $

.if ${MACHINE_OS:M*BSD}
LIB_LDADD=	-li386
.endif

LTMIRMAKE=	Yes

.if defined(BUILD_INC)
.  include "${.CURDIR}/Makefile"

inc::
	@@echo LIB_SRCS=${sources:M*.c} >$@@
	@@echo LIB_VSN=${MAJOR}.${MINOR} >>$@@
.elif defined(BUILD_LIB)
.  include "inc"
LIB=		lrmi
SHLIB_VERSION=	${LIB_VSN}
SRCS=		${LIB_SRCS}
LDADD+=		${LIB_LDADD}
NOMAN=		Yes

.  include <bsd.lib.mk>
.elif defined(BUILD_PROG)
.  include "inc"
PROG=		lrmi-vbetest
SRCS=		vbetest.c
LDADD+=		-L. -llrmi ${LIB_LDADD}
NOMAN=		Yes

.  include <bsd.prog.mk>
.else

HDRS=		lrmi.h

all:
# no "make obj" because "this" make won't descend
#	cd ${.CURDIR} && exec ${MAKE} -f ${MAKE_FILE} obj
	cd ${.CURDIR} && SRCS=$$(echo *.c) exec ${MAKE} -f ${MAKE_FILE} depend
	cd ${.CURDIR} && exec ${MAKE} -f ${MAKE_FILE} BUILD_INC=1 inc
	cd ${.CURDIR} && exec ${MAKE} -f ${MAKE_FILE} BUILD_LIB=1 $@@
	cd ${.CURDIR} && exec ${MAKE} -f ${MAKE_FILE} BUILD_PROG=1 $@@

install: includes
	cd ${.CURDIR} && exec ${MAKE} -f ${MAKE_FILE} BUILD_LIB=1 $@@
	cd ${.CURDIR} && exec ${MAKE} -f ${MAKE_FILE} BUILD_PROG=1 $@@

.  include <bsd.prog.mk>
.endif
@


1.1
log
@a proof-of-concept port of the *nix real mode interface,
together with a VESA video mode switch tester (untested,
since I couldn't do it on HERC, somehow... EPERM as root
looks like securelevel or allowaperture)
@
text
@d1 1
a1 1
# $MirOS$
d7 2
d34 2
d44 1
a44 1
install:
@

