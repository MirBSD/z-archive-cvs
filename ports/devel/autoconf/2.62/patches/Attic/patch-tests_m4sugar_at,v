head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2009.11.22.14.39.58;	author tg;	state dead;
branches;
next	1.1;
commitid	1004B094D4B2DC70993;

1.1
date	2009.11.22.00.16.24;	author tg;	state Exp;
branches;
next	;
commitid	1004B088259208162D8;


desc
@@


1.2
log
@fix another line number problem with our m4(1)
@
text
@$MirOS: ports/devel/autoconf/2.62/patches/patch-tests_m4sugar_at,v 1.1 2009/11/22 00:16:24 tg Exp $

	Work around bug in BSD m4

--- tests/m4sugar.at.orig	Sat Apr  5 23:04:25 2008
+++ tests/m4sugar.at	Sun Nov 22 00:11:37 2009
@@@@ -136,7 +136,7 @@@@ m4_defun([baz], [m4_require([foo])])
 
 m4_init
 m4_divert([0])dnl
-baz
+baz dnl
 ]])
 
 AT_CHECK_M4SUGAR([], 1, [],
@@@@ -613,7 +613,7 @@@@ AT_CLEANUP
 AT_SETUP([m4@@&t@@_max and m4@@&t@@_min])
 
 AT_DATA_M4SUGAR([script.4s],
-[[m4_max
+[[m4_max dnl
 ]])
 
 AT_CHECK_M4SUGAR([], 1, [],
@@@@ -623,7 +623,7 @@@@ autom4te: m4 failed with exit status: 1
 ]])
 
 AT_DATA_M4SUGAR([script.4s],
-[[m4_min
+[[m4_min dnl
 ]])
 
 AT_CHECK_M4SUGAR([], 1, [],
@


1.1
log
@merge bsiegert@@’s OpenBSD 2.62 port, my MirBSD 2.61 port, add portability
to GNU m4 (back which was removed by these OpenBSD people), fix things,
and add a few workarounds for bugs in our m4 (which increments the line
number too early, upon first encounter of a newline even if the newline
is pushed back into the input buffer)

this is still not ready for general consumption, but good for testing,
and a candidate for AUTOCONF_NEW default *after* the next full MirBSD
release (or, at the very least, full snapshot, which has been adopted);
although I’d rather like to get a 2.65 (but not tonight…) with our m4
working first and switch there then
@
text
@d1 1
a1 1
$MirOS$
@

