head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2006.06.12.20.17.53;	author tg;	state Exp;
branches;
next	1.1;
commitid	100448DCBE006EEAA35;

1.1
date	2005.12.16.14.52.21;	author tg;	state Exp;
branches;
next	;
commitid	10043A2D4AD11B8FC32;


desc
@@


1.2
log
@* add MirLibtool extensions, bump level
* run regression tests, 1 fails (plus C++), any idea?

=== Running link-order.test
mkdir linkorder.dir/src/.libs
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/c.c  -fPIC -DPIC -o linkorder.dir/src/.libs/c.o
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/c.c -o linkorder.dir/src/c.o >/dev/null 2>&1
mgcc -shared  -fPIC -DPIC  linkorder.dir/src/.libs/c.o  -L/usr/mpkg/lib  -march=i486 -mpush-args -mpreferred-stack-boundary=2 -o linkorder.dir/src/.libs/libcee.so.0.0
ar cru linkorder.dir/src/.libs/libcee.a  linkorder.dir/src/c.o
creating linkorder.dir/src/libcee.la
(cd linkorder.dir/src/.libs && rm -f libcee.la && ln -s ../libcee.la libcee.la)
cp linkorder.dir/src/.libs/libcee.so.0.0 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libcee.so.0.0
cp linkorder.dir/src/.libs/libcee.lai /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libcee.la
cp linkorder.dir/src/.libs/libcee.a /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libcee.a
chmod 644 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libcee.a
PATH="$PATH:/sbin" ldconfig -m /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib
ldconfig: /var/run/ld.so.hints.FKkzj24027: Permission denied
mkdir linkorder.dir/src/.libs
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/a_old.c  -fPIC -DPIC -o linkorder.dir/src/.libs/a.o
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/a_old.c -o linkorder.dir/src/a.o >/dev/null 2>&1
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/b_old.c  -fPIC -DPIC -o linkorder.dir/src/.libs/b.o
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/b_old.c -o linkorder.dir/src/b.o >/dev/null 2>&1
mgcc -shared  -fPIC -DPIC  linkorder.dir/src/.libs/b.o  -L/usr/mpkg/lib -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee  -march=i486 -mpush-args -mpreferred-stack-boundary=2 -o linkorder.dir/src/.libs/libb.so.0.0
ar cru linkorder.dir/src/.libs/libb.a  linkorder.dir/src/b.o
creating linkorder.dir/src/libb.la
(cd linkorder.dir/src/.libs && rm -f libb.la && ln -s ../libb.la libb.la)
mgcc -shared  -fPIC -DPIC  linkorder.dir/src/.libs/a.o  -Llinkorder.dir/src/.libs -lb -L/usr/mpkg/lib -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee  -march=i486 -mpush-args -mpreferred-stack-boundary=2 -o linkorder.dir/src/.libs/liba.so.0.0
ar cru linkorder.dir/src/.libs/liba.a  linkorder.dir/src/a.o
creating linkorder.dir/src/liba.la
(cd linkorder.dir/src/.libs && rm -f liba.la && ln -s ../liba.la liba.la)
cp linkorder.dir/src/.libs/libb.so.0.0 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libb.so.0.0
cp linkorder.dir/src/.libs/libb.lai /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libb.la
cp linkorder.dir/src/.libs/libb.a /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libb.a
chmod 644 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/libb.a
PATH="$PATH:/sbin" ldconfig -m /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib
ldconfig: /var/run/ld.so.hints.FRtmx19201: Permission denied
(cd /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests; /bin/sh ../libtool  --mode=relink mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -o linkorder.dir/src/liba.la linkorder.dir/src/a.lo linkorder.dir/src/libb.la -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee -rpath /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib )
mgcc -shared  -fPIC -DPIC  linkorder.dir/src/.libs/a.o  -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lb -L/usr/mpkg/lib -lcee  -march=i486 -mpush-args -mpreferred-stack-boundary=2 -o linkorder.dir/src/.libs/liba.so.0.0
cp linkorder.dir/src/.libs/liba.so.0.0T /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/liba.so.0.0
cp linkorder.dir/src/.libs/liba.lai /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/liba.la
cp linkorder.dir/src/.libs/liba.a /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/liba.a
chmod 644 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib/liba.a
PATH="$PATH:/sbin" ldconfig -m /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib
libtool: install: warning: relinking 'linkorder.dir/src/liba.la'
ldconfig: /var/run/ld.so.hints.fJcUH19822: Permission denied
mkdir linkorder.dir/src/.libs
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/a_new.c  -fPIC -DPIC -o linkorder.dir/src/.libs/a.o
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/a_new.c -o linkorder.dir/src/a.o >/dev/null 2>&1
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/b_new.c  -fPIC -DPIC -o linkorder.dir/src/.libs/b.o
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/b_new.c -o linkorder.dir/src/b.o >/dev/null 2>&1
mgcc -shared  -fPIC -DPIC  linkorder.dir/src/.libs/b.o  -L/usr/mpkg/lib -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee  -march=i486 -mpush-args -mpreferred-stack-boundary=2 -o linkorder.dir/src/.libs/libb.so.0.0
ar cru linkorder.dir/src/.libs/libb.a  linkorder.dir/src/b.o
creating linkorder.dir/src/libb.la
(cd linkorder.dir/src/.libs && rm -f libb.la && ln -s ../libb.la libb.la)
mgcc -shared  -fPIC -DPIC  linkorder.dir/src/.libs/a.o  -Llinkorder.dir/src/.libs -lb -L/usr/mpkg/lib -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee  -march=i486 -mpush-args -mpreferred-stack-boundary=2 -o linkorder.dir/src/.libs/liba.so.0.0
ar cru linkorder.dir/src/.libs/liba.a  linkorder.dir/src/a.o
creating linkorder.dir/src/liba.la
(cd linkorder.dir/src/.libs && rm -f liba.la && ln -s ../liba.la liba.la)
cp linkorder.dir/src/.libs/libb.so.0.0 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/libb.so.0.0
cp linkorder.dir/src/.libs/libb.lai /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/libb.la
cp linkorder.dir/src/.libs/libb.a /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/libb.a
chmod 644 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/libb.a
PATH="$PATH:/sbin" ldconfig -m /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib
ldconfig: /var/run/ld.so.hints.qMmrQy2747: Permission denied
(cd /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests; /bin/sh ../libtool  --mode=relink mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -o linkorder.dir/src/liba.la linkorder.dir/src/a.lo linkorder.dir/src/libb.la -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee -rpath /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib )
mgcc -shared  -fPIC -DPIC  linkorder.dir/src/.libs/a.o  -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib -lb -L/usr/mpkg/lib -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee  -march=i486 -mpush-args -mpreferred-stack-boundary=2 -o linkorder.dir/src/.libs/liba.so.0.0
cp linkorder.dir/src/.libs/liba.so.0.0T /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/liba.so.0.0
cp linkorder.dir/src/.libs/liba.lai /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/liba.la
cp linkorder.dir/src/.libs/liba.a /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/liba.a
chmod 644 /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib/liba.a
PATH="$PATH:/sbin" ldconfig -m /usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib
libtool: install: warning: relinking 'linkorder.dir/src/liba.la'
ldconfig: /var/run/ld.so.hints.yeWyX18100: Permission denied
libtool: install: warning: relinking 'linkorder.dir/src/liba.la'
./link-order.test: wrong link order
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/main_old.c  -fPIC -DPIC -o linkorder.dir/src/.libs/main_old.o
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/main_old.c -o linkorder.dir/src/main_old.o >/dev/null 2>&1
mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -o linkorder.dir/src/main_old linkorder.dir/src/.libs/main_old.o  -L/usr/mpkg/lib -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -la -lb -lcee    -Wl,-rpath,/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -Wl,-rpath,/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/main_new.c  -fPIC -DPIC -o linkorder.dir/src/.libs/main_new.o
 mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -c linkorder.dir/src/main_new.c -o linkorder.dir/src/main_new.o >/dev/null 2>&1
mgcc -O2 -pipe -Os -Wstrict-aliasing -Wformat -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -march=i486 -mpush-args -mpreferred-stack-boundary=2 -fhonour-copts -isystem /usr/mpkg/share/mmake -include /usr/mpkg/share/mmake/mirmake.h -isystem /usr/ports/devel/libtool -idirafter /usr/mpkg/include -o linkorder.dir/src/main_new linkorder.dir/src/.libs/main_new.o  -L/usr/mpkg/lib -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib -la -lb -L/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -lcee    -Wl,-rpath,/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib -Wl,-rpath,/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib -Wl,-rpath,/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/new/lib -Wl,-rpath,/usr/ports/devel/libtool/w-libtool-1.5.23a.20060612-1/libtool/tests/linkorder.dir/old/lib
FAIL: link-order.test

doesn't look critical tho
@
text
@@@comment $MirOS: ports/devel/libtool/pkg/PLIST,v 1.1 2005/12/16 14:52:21 tg Exp $
@@unexec install-info --delete --info-dir=%D/info %D/info/libtool.info
bin/libtool
bin/libtoolize
include/ltdl.h
info/libtool.info
lib/libltdl.la
share/aclocal/libtool.m4
share/aclocal/ltdl.m4
share/libtool/config.guess
share/libtool/config.sub
share/libtool/install-sh
share/libtool/libltdl/COPYING.LIB
share/libtool/libltdl/Makefile.am
share/libtool/libltdl/Makefile.in
share/libtool/libltdl/README
share/libtool/libltdl/acinclude.m4
share/libtool/libltdl/aclocal.m4
share/libtool/libltdl/config-h.in
share/libtool/libltdl/config.guess
share/libtool/libltdl/config.sub
share/libtool/libltdl/configure
share/libtool/libltdl/configure.ac
share/libtool/libltdl/install-sh
share/libtool/libltdl/ltdl.c
share/libtool/libltdl/ltdl.h
share/libtool/libltdl/ltmain.sh
share/libtool/libltdl/missing
share/libtool/ltmain.sh
share/libtool/m4salt.inc
share/libtool/m4sugar.inc
@@dirrm share/libtool/libltdl
@@dirrm share/libtool
@@dirrm share/aclocal
@@exec install-info --info-dir=%D/info %D/info/libtool.info
@


1.1
log
@commit what I'm currently working on, trying to get regression failures down
@
text
@d1 1
a1 1
@@comment $MirOS$
d30 2
@

