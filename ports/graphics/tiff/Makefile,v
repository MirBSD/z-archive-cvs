head	1.19;
access;
symbols;
locks; strict;
comment	@# @;


1.19
date	2013.09.11.18.30.53;	author tg;	state Exp;
branches;
next	1.18;
commitid	1005230B6F54DA268A1;

1.18
date	2009.08.16.17.25.50;	author tg;	state Exp;
branches;
next	1.17;
commitid	1004A8841315849D3DC;

1.17
date	2009.08.16.17.17.38;	author tg;	state Exp;
branches;
next	1.16;
commitid	1004A883C9B4C196B76;

1.16
date	2008.03.09.17.22.55;	author tg;	state Exp;
branches;
next	1.15;
commitid	10047D41CAA7E715397;

1.15
date	2008.02.17.15.40.28;	author bsiegert;	state Exp;
branches;
next	1.14;
commitid	10047B8558300009909;

1.14
date	2007.02.22.22.57.51;	author tg;	state Exp;
branches;
next	1.13;
commitid	10045DE1FF10F590776;

1.13
date	2006.12.20.15.31.25;	author tg;	state Exp;
branches;
next	1.12;
commitid	100458956E02A39AB3C;

1.12
date	2006.10.01.03.31.47;	author tg;	state Exp;
branches;
next	1.11;
commitid	100451F35FF6DEB5A4E;

1.11
date	2006.09.14.00.10.08;	author tg;	state Exp;
branches;
next	1.10;
commitid	10045089C0E234154C3;

1.10
date	2006.02.09.09.35.57;	author tg;	state Exp;
branches;
next	1.9;
commitid	10043EB0C94610EDE76;

1.9
date	2005.09.22.12.51.47;	author bsiegert;	state Exp;
branches;
next	1.8;
commitid	69db4332a8ac86df;

1.8
date	2005.07.06.19.21.31;	author bsiegert;	state Exp;
branches;
next	1.7;
commitid	609742cc2f044f70;

1.7
date	2005.04.28.20.16.25;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2005.04.28.20.08.06;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2005.04.28.19.54.39;	author bsiegert;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.24.01.17.35;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2005.04.24.00.59.08;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.24.00.09.10;	author bsiegert;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.47.10;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.47.10;	author tg;	state Exp;
branches;
next	;


desc
@@


1.19
log
@indent
@
text
@# $MirOS: ports/graphics/tiff/Makefile,v 1.18 2009/08/16 17:25:50 tg Exp $
# $OpenBSD: Makefile,v 1.29 2004/05/18 23:35:35 brad Exp $

COMMENT=		library routines for working with TIFF images
COMMENT-cxx=		C++ API for working with TIFF images
DESCR=			${PKGDIR}/DESCR
VSN=			3.7.4
_V=			${VSN:R:S/.//}.${VSN:E}
DASH_VER=		1
DISTNAME=		tiff-${VSN}
PKGNAME-cxx=		tiff-cxx-${VSN}-${DASH_VER}
CATEGORIES=		graphics
MASTER_SITES=		http://dl.maptools.org/dl/libtiff/old/
HOMEPAGE=		http://www.remotesensing.org/libtiff/
RESPONSIBLE=		Benny Siegert <bsiegert@@gmx.de>

BUILD_DEPENDS+=		:jpeg->=6b-4:graphics/jpeg \
			::graphics/jpeg:patch
LIB_DEPENDS+=		jpeg.62::graphics/jpeg

# BSD
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

PSEUDO_FLAVOURS=	no_cxx
FLAVOUR?=

CONFIGURE_STYLE=	autoconf
AUTOCONF_NEW=		Yes
SUBST_VARS+=		_V

CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--enable-old-jpeg
CONFIGURE_ARGS+=	--enable-rpath

.if ${FLAVOUR:L:Mno_cxx}
CONFIGURE_ARGS+=	--enable-cxx=no
.else
CONFIGURE_ARGS+=	--enable-cxx
USE_CXX=		Yes
MULTI_PACKAGES=		-cxx
.endif

.if defined(PACKAGING) && defined(SUBPACKAGE) && !empty(SUBPACKAGE)
LIB_DEPENDS=		tiff::graphics/tiff
.endif

post-patch:
	cp ${WRKDIR}/graphics/jpeg/jpeg-6b/jpegint.h ${WRKSRC}/libtiff/

post-install:
	cd ${PREFIX}/man/man3; for a in *tiff; do \
		mv $$a $${a%tiff}; \
	done

.include <bsd.port.mk>
@


1.18
log
@add VSN to default SUBST_VARS
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.16 2008/03/09 17:22:55 tg Exp $
d27 1
a27 1
PSEUDO_FLAVOURS=		no_cxx
@


1.17
log
@change all V to VSN (ok bsiegert@@) and some DASH_VER while here
@
text
@d32 1
a32 1
SUBST_VARS+=		VSN _V
@


1.16
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.15 2008/02/17 15:40:28 bsiegert Exp $
d7 2
a8 2
V=			3.7.4
_V=			${V:R:S/.//}.${V:E}
d10 2
a11 2
DISTNAME=		tiff-${V}
PKGNAME-cxx=		tiff-cxx-${V}-${DASH_VER}
d32 1
a32 1
SUBST_VARS+=		V _V
@


1.15
log
@Correct MASTER_SITES, no patchlevel bump as it is the same file
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.14 2007/02/22 22:57:51 tg Exp $
d27 2
a28 2
PSEUDO_FLAVORS=		no_cxx
FLAVOR?=
d38 1
a38 1
.if ${FLAVOR:L:Mno_cxx}
@


1.14
log
@remove redundancy
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.13 2006/12/20 15:31:25 tg Exp $
d13 1
a13 1
MASTER_SITES=		ftp://ftp.remotesensing.org/pub/libtiff/
@


1.13
log
@sync DASH_VER usage:
* the dash doesn't belong into the DASH_VER variable,
  it's only a decimal integer value
* DASH_VER already defaults to 0 (admittedly new)
* PKGNAME already defaults to ${DISTNAME}-${DASH_VER}
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.12 2006/10/01 03:31:47 tg Exp $
a35 2
CONFIGURE_ARGS+=	--disable-dependency-tracking
CONFIGURE_ARGS+=	--disable-libtool-lock
@


1.12
log
@* libjpeg: add support for "old jpeg" hunk from libtiff's contrib section
* libtiff: remove --with-jpeg-*-dir so that it does not add -L/usr/mpkg/lib
  to the command line -> doesn't link against an already installed libtiff
* libtiff: speed up build a lot (--disable-dependency-tracking and
  --disable-libtool-lock)
* libtiff: enable rpaths while here
  (sorry Benny)
* libtiff: remove no longer needed workaround
* libtiff: enable "old jpeg" support (pulls in jpegint.h temporarily tho)
* xloadimage: correct error condition abuse leading to false error message
* all: fix indenting in Makefile; sync DESCR, PLIST, distinfo; bump version
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.11 2006/09/14 00:10:08 tg Exp $
d9 1
a9 1
DASH_VER=		-1
d11 1
a11 2
PKGNAME=		${DISTNAME}${DASH_VER}
PKGNAME-cxx=		tiff-cxx-${V}${DASH_VER}
@


1.11
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.10 2006/02/09 09:35:57 tg Exp $
d4 2
a5 2
COMMENT=			library routines for working with TIFF images
COMMENT-cxx=			library routines for working with TIFF images, C++ API
d9 1
a9 1
DASH_VER=		-0
d18 3
a20 1
LIB_DEPENDS=    	jpeg.62::graphics/jpeg
d36 4
a39 2
CONFIGURE_ARGS+=	--with-jpeg-include-dir=${LOCALBASE}/include
CONFIGURE_ARGS+=	--with-jpeg-lib-dir=${LOCALBASE}/lib
d53 2
a54 2
pre-patch:
	rm -f ${WRKSRC}/m4/libtool.m4
@


1.10
log
@remove SEPARATE_BUILD for once and for good, I'm fed up with
all the trouble it can cause - ports which need it (e.g. the
GCC SC doesnt "support" building gcc with srcdir=objdir) can
set stuff like WRKBUILD themselves.
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.9 2005/09/22 12:51:47 bsiegert Exp $
d4 2
a5 2
COMMENT=		"library routines for working with TIFF images"
COMMENT-cxx=		"library routines for working with TIFF images, C++ API"
@


1.9
log
@Update libtiff to 3.7.4. My patch is now included.

Btw, the patch leads in fact to correct behaviour because libtiff uses
-version-number and not -version-info (even if the former is sort of
deprecated).
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.8 2005/07/06 19:21:31 bsiegert Exp $
a30 1
SEPARATE_BUILD=		flavored
@


1.8
log
@Move some packages (those that use DASH_VER) to new patchlevels.
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.6 2005/04/28 20:08:06 tg Exp $
d7 1
a7 1
V=			3.7.2
d9 1
a9 1
DASH_VER=		-1
d15 1
a15 1
HOMEPAGE=		http://www.libtiff.org/
d29 1
a29 1
CONFIGURE_STYLE=	autogen
d31 1
a31 2
AUTOMAKE_VERSION=	1.9
SEPARATE_BUILD=		concurrent
d50 3
@


1.7
log
@* remove temporary fix
* rename manpages so they are actually found (agreed maintainer)
@
text
@d9 1
a9 1
DASH_VER=		p1
@


1.6
log
@tentative bug fix, waiting for maintainer for final fix
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.5 2005/04/28 19:54:39 bsiegert Exp $
a46 2
EXTRA_XAKE_FLAGS+=	LIBTIFF_VERSION_INFO=${_V:S/./:/}:0

d51 5
@


1.5
log
@Add patch for soname on Darwin (submitted upstream). Make myself responsible.
Bump patchlevel.
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.4 2005/04/24 01:17:35 tg Exp $
a15 1

d47 2
@


1.4
log
@okay, libtiff.so.37.2 now
also, substitute ${_V} for our beloved Mach-O friends
(I hope the PFRAG.dylib are now correct)
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.3 2005/04/24 00:59:08 tg Exp $
d9 1
d16 3
d34 1
a34 1
SUBST_VARS+=		_V
@


1.3
log
@fix building of package (make mistake)

XXX still broken:
-@@lib lib/libtiff.so.36.1
+@@lib lib/libtiff.so.3.7
Can't be...
@
text
@d1 1
a1 1
# $MirOS: ports/graphics/tiff/Makefile,v 1.2 2005/04/24 00:09:10 bsiegert Exp $
d7 3
a9 3
VERSION=		3.7.2
DASH_VER=	
DISTNAME=		tiff-${VERSION}
d11 1
a11 1
PKGNAME-cxx=		tiff-cxx-${VERSION}${DASH_VER}
d30 1
a30 1
SUBST_VARS+=		VERSION
d44 1
a44 1
. if defined(PACKAGING) && defined(SUBPACKAGE) && !empty(SUBPACKAGE)
d46 1
a46 3
. endif

#NO_REGRESS=	Yes
@


1.2
log
@Bring tiff port up to date, update to 3.7.2.

Now uses autotools and libtool for building. C++ stuff is cleanly separated,
use the "no_cxx" pseudo flavour to suppress its build.

PFRAG.shared update still pending, as I am on Mac OS X at the moment.
@
text
@d1 1
a1 1
# $MirOS$
d44 1
a44 1
. if defined(PACKAGING) && !empty(SUBPACKAGE)
@


1.1
log
@Initial revision
@
text
@d4 12
a15 8
COMMENT=	"tools and library routines for working with TIFF images"
VERSION=	3.6.1
DISTNAME=	tiff-v${VERSION}
PKGNAME=	tiff-${VERSION}p1
CATEGORIES=	graphics
MASTER_SITES=	ftp://ftp.remotesensing.org/pub/libtiff/
HOMEPAGE=	http://www.libtiff.org/
LIB_DEPENDS=    jpeg.62::graphics/jpeg
d23 26
a48 22
CONFIGURE_STYLE= simple
CONFIGURE_ARGS=	--prefix="${PREFIX}" --with-ZIP --with-JPEG \
		--with-CC="${CC}" --with-GCOPTS="${CFLAGS}" \
		--with-DIRS_LIBINC="${LOCALBASE}/include" \
		--with-OPTIMIZER="" --with-DIR_GZLIB="/usr/lib" \
		--with-DIR_JPEGLIB="${LOCALBASE}/lib" \
		--with-LIBGL="no" --with-LIBIMAGE="no" \
		--with-INSTALL="sh ${WRKSRC}/port/install.sh" \
		--noninteractive

DOCDIR=	${PREFIX}/share/doc/tiff

post-extract:
	@@cp -f ${PORTSDIR}/infrastructure/db/{config.guess,config.sub} ${WRKSRC}

NO_REGRESS=	Yes

post-install:
	${INSTALL_DATA_DIR} ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/html/*.html ${DOCDIR}
	${INSTALL_DATA} ${WRKSRC}/html/images/*.gif ${DOCDIR}/images
	${INSTALL_DATA} ${WRKSRC}/html/images/*.jpg ${DOCDIR}/images
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
