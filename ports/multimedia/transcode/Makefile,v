head	1.10;
access;
symbols;
locks; strict;
comment	@# @;


1.10
date	2008.10.16.19.43.56;	author tg;	state Exp;
branches;
next	1.9;
commitid	10048F798F722A050E5;

1.9
date	2008.03.09.17.23.14;	author tg;	state Exp;
branches;
next	1.8;
commitid	10047D41CAA7E715397;

1.8
date	2007.04.13.19.38.18;	author bsiegert;	state Exp;
branches;
next	1.7;
commitid	100461FDC41408D051C;

1.7
date	2006.12.20.15.31.33;	author tg;	state Exp;
branches;
next	1.6;
commitid	100458956E02A39AB3C;

1.6
date	2006.09.14.00.11.28;	author tg;	state Exp;
branches;
next	1.5;
commitid	10045089C0E234154C3;

1.5
date	2006.06.03.16.02.40;	author bsiegert;	state Exp;
branches;
next	1.4;
commitid	1004481B24F60607F88;

1.4
date	2005.07.07.21.23.57;	author bsiegert;	state Exp;
branches;
next	1.3;
commitid	66bc42cd9a7ea714;

1.3
date	2005.04.10.21.50.34;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.25.23.14.01;	author bsiegert;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.50.43;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.50.43;	author tg;	state Exp;
branches;
next	;


desc
@@


1.10
log
@many more distfile fixes:
either change stuff to let ‚Äúmmake checksum‚Äù succeed, for example by fixing
MASTER_SITES or DIST_SUBDIR, or by adding the ‚ÄúSize‚Äù That Does Matter‚Ñ¢ to
the distinfo (so that b0rken downloads are skipped), or by whatever other
means, or mark b0rken stuff as BROKEN for sure. For squid, I removed one
of the upstream patches from the list.

After this, all non-BROKEN (and some BROKEN and NOT_FOR_PLATFORM) distfiles
verify successfully (and thusly link to FTP/ and CDROM/ on the mirror).
@
text
@# $MirOS: ports/multimedia/transcode/Makefile,v 1.9 2008/03/09 17:23:14 tg Exp $
# $OpenBSD: Makefile,v 1.2 2004/06/24 19:27:00 sturm Exp $

BROKEN=			unfetchable distfile

NOT_FOR_PLATFORM=	${NOPIC_PLATFORMS}

COMMENT=		video stream processing tools
COMMENT-dv=		transcode plugins utilizing libdv
COMMENT-mjpegtools=	transcode plugins utilizing mjpegtools
COMMENT-xvidcore=	transcode plugins utilizing xvidcore

VERSION=		0.6.12
DASH_VER=		1
DISTNAME=		transcode-${VERSION}
PKGNAME-dv=		transcode-dv-${VERSION}-${DASH_VER}
PKGNAME-mjpegtools=	transcode-mjpegtools-${VERSION}-${DASH_VER}
PKGNAME-xvidcore=	transcode-xvidcore-${VERSION}-${DASH_VER}

CATEGORIES=	multimedia graphics audio
HOMEPAGE=	http://zebra.fh-weingarten.de/~transcode/
MASTER_SITES=	http://zebra.fh-weingarten.de/~transcode/pre/

# GNU GPLv2
PERMIT_PACKAGE_CDROM=	dependency audio/lame is not allowed for CDROM
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

.if ${MACHINE} == "i386"
BUILD_DEPENDS+=		::lang/nasm
SED_PLIST+=		|sed -e '/^%%i386%%/r${PKGDIR}/PFRAG.i386' -e '//d'
.else
SED_PLIST+=		|sed -e '/^%%i386%%/d'
.endif

PSEUDO_FLAVOURS=         no_dv no_mjpegtools no_xvidcore
FLAVOUR?=

MULTI_PACKAGES=
.if !${FLAVOUR:L:Mno_dv}
MULTI_PACKAGES+=        -dv
USE_X11=		Yes # depends on libdv, which needs X11
.endif
.if !${FLAVOUR:L:Mno_mjpegtools}
MULTI_PACKAGES+=        -mjpegtools
.endif
.if !${FLAVOUR:L:Mno_xvidcore}
MULTI_PACKAGES+=        -xvidcore
.endif

SUBPACKAGE?=

LIB_DEPENDS+=	SDL.2::devel/sdl \
		a52.0::audio/liba52 \
		dvdread.3::devel/libdvdread \
		jpeg.62::graphics/jpeg \
		mp3lame.0::audio/lame \
		ogg.5::audio/libogg \
		vorbis.3,vorbisfile.4::audio/libvorbis \
		xml2.2.6::textproc/libxml

USE_CXX=	Yes
CONFIGURE_STYLE=autoconf
AUTOCONF_NEW=	Yes
CONFIGURE_ENV+=	LIBFAME_CONFIG="no"
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
		--enable-liba52 \
		--with-ogg --with-vorbis \
		--enable-text \
		--disable-altivec --disable-mmx --disable-sse \
		--disable-v4l \
		--with-avifile-mods=no \
		--with-magick-mods=no \
		--without-libfame \
		--without-libmpeg3 \
		--without-lzo \
		--without-openqt \
		--without-pvm3 \
		--without-qt \
		--without-theora

.if ${FLAVOUR:L:Mno_dv}
CONFIGURE_ARGS+=        --without-dv
.else
CONFIGURE_ARGS+=        --with-dv
.endif

.if ${FLAVOUR:L:Mno_mjpeg}
CONFIGURE_ARGS+=        --disable-mjpeg
.else
CONFIGURE_ARGS+=        --enable-mjpeg
.endif

.if ${FLAVOUR:L:Mno_xvidcore}
CONFIGURE_ARGS+=        --without-xvidcore
.else
CONFIGURE_ARGS+=        --with-default-xvid=xvid4
.endif

.if defined(PACKAGING)
.  if ${SUBPACKAGE} == "-dv"
RUN_DEPENDS+=		::graphics/transcode \
			::multimedia/libdv
.  elif ${SUBPACKAGE} == "-mjpegtools"
RUN_DEPENDS+=		::graphics/transcode \
			::multimedia/mjpegtools
.  elif ${SUBPACKAGE} == "-xvidcore"
RUN_DEPENDS+=		::graphics/transcode \
			::multimedia/xvidcore
.  else
RUN_DEPENDS+=		::graphics/ffmpeg \
			::audio/sox
.  endif
.else
.  if ${MULTI_PACKAGES:M-dv}
LIB_DEPENDS+=		dv.4::multimedia/libdv
.  endif
.  if ${MULTI_PACKAGES:M-mjpegtools}
LIB_DEPENDS+=		mjpegutils.2::multimedia/mjpegtools
.  endif
.  if ${MULTI_PACKAGES:M-xvidcore}
LIB_DEPENDS+=		xvidcore.4::multimedia/xvidcore
.  endif
.endif

.include <bsd.port.mk>
@


1.9
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/multimedia/transcode/Makefile,v 1.8 2007/04/13 19:38:18 bsiegert Exp $
d4 2
@


1.8
log
@not for CDROM (lame dependency),  transcode  flavour needs X11
@
text
@d1 1
a1 1
# $MirOS: ports/multimedia/transcode/Makefile,v 1.7 2006/12/20 15:31:33 tg Exp $
d35 2
a36 2
PSEUDO_FLAVORS=         no_dv no_mjpegtools no_xvidcore
FLAVOR?=
d39 1
a39 1
.if !${FLAVOR:L:Mno_dv}
d43 1
a43 1
.if !${FLAVOR:L:Mno_mjpegtools}
d46 1
a46 1
.if !${FLAVOR:L:Mno_xvidcore}
d81 1
a81 1
.if ${FLAVOR:L:Mno_dv}
d87 1
a87 1
.if ${FLAVOR:L:Mno_mjpeg}
d93 1
a93 1
.if ${FLAVOR:L:Mno_xvidcore}
@


1.7
log
@sync DASH_VER usage:
* the dash doesn't belong into the DASH_VER variable,
  it's only a decimal integer value
* DASH_VER already defaults to 0 (admittedly new)
* PKGNAME already defaults to ${DISTNAME}-${DASH_VER}
@
text
@d1 1
a1 1
# $MirOS: ports/multimedia/transcode/Makefile,v 1.6 2006/09/14 00:11:28 tg Exp $
d23 1
a23 1
PERMIT_PACKAGE_CDROM=	Yes
d41 1
@


1.6
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ≠ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/multimedia/transcode/Makefile,v 1.5 2006/06/03 16:02:40 bsiegert Exp $
d6 4
a9 4
COMMENT=			video stream processing tools
COMMENT-dv=			transcode plugins utilizing libdv
COMMENT-mjpegtools=			transcode plugins utilizing mjpegtools
COMMENT-xvidcore=			transcode plugins utilizing xvidcore
d12 1
a12 1
DASH_VER=		-1
d14 3
a16 4
PKGNAME=		${DISTNAME}${DASH_VER}
PKGNAME-dv=		transcode-dv-${VERSION}${DASH_VER}
PKGNAME-mjpegtools=	transcode-mjpegtools-${VERSION}${DASH_VER}
PKGNAME-xvidcore=	transcode-xvidcore-${VERSION}${DASH_VER}
@


1.5
log
@Batch-correct all wrong libxml dependencies. They should either be just to
xml2, to xml2.2 or to xml2.2.6. Bump patchlevels for all ports concerned
(but not for xfce4, where I was too lazy).
@
text
@d1 1
a1 1
# $MirOS: ports/multimedia/transcode/Makefile,v 1.4 2005/07/07 21:23:57 bsiegert Exp $
d6 4
a9 4
COMMENT=		"video stream processing tools"
COMMENT-dv=		"transcode plugins utilizing libdv"
COMMENT-mjpegtools=	"transcode plugins utilizing mjpegtools"
COMMENT-xvidcore=	"transcode plugins utilizing xvidcore"
@


1.4
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS: ports/multimedia/transcode/Makefile,v 1.2 2005/03/25 23:14:01 bsiegert Exp $
d12 1
d14 4
a17 3
PKGNAME-dv=		transcode-dv-${VERSION}-0
PKGNAME-mjpegtools=	transcode-mjpegtools-${VERSION}-0
PKGNAME-xvidcore=	transcode-xvidcore-${VERSION}-0
d59 1
a59 1
		xml2.8::textproc/libxml
@


1.3
log
@NOPIC_PLATFORMS, LP64_PLATFORMS and general change of
{NOT,ONLY}_FOR_{ARCH{,E,ES},OS} to {NOT,ONLY}_FOR_PLATFORM

some fallout maybe, I hope not
@
text
@d13 3
a15 3
PKGNAME-dv=		transcode-dv-${VERSION}
PKGNAME-mjpegtools=	transcode-mjpegtools-${VERSION}
PKGNAME-xvidcore=	transcode-xvidcore-${VERSION}
@


1.2
log
@Mass-update dependencies to cope with port renames. Mostly done in the train
home from Strasbourg.
@
text
@d1 1
a1 1
# $MirOS$
d4 1
a4 1
NOT_FOR_ARCHS=		${NO_SHARED_ARCHS}
@


1.1
log
@Initial revision
@
text
@d28 1
a28 1
BUILD_DEPENDS+=		::devel/nasm
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
