head	1.7;
access;
symbols;
locks; strict;
comment	@# @;


1.7
date	2007.04.13.19.37.22;	author bsiegert;	state Exp;
branches;
next	1.6;
commitid	100461FDBFC3C79AFB1;

1.6
date	2007.03.31.22.02.06;	author tg;	state Exp;
branches;
next	1.5;
commitid	100460EDA5B5AAA6E31;

1.5
date	2006.09.14.00.11.28;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045089C0E234154C3;

1.4
date	2006.02.01.16.28.02;	author tg;	state Exp;
branches;
next	1.3;
commitid	10043E0E1771404AF56;

1.3
date	2005.04.11.15.56.15;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.10.21.50.32;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.50.49;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.50.49;	author tg;	state Exp;
branches;
next	;


desc
@@


1.7
log
@USE_CXX/USE_X11, package not for FTP or CDROM.

Did anybody ever test this?
@
text
@# $MirOS$
# $OpenBSD: Makefile,v 1.13 2003/08/24 01:21:35 jolan Exp $

# sync with mplayer archs due to dependency
ONLY_FOR_PLATFORM=	*:*:i386 *:*:powerpc OpenBSD:*:arm OpenBSD:*:amd64 #XXX

DISTNAME=		mplayer-fontmaker-0.90
CATEGORIES=		x11 multimedia
COMMENT=		subtitle fonts generator for mplayer

MODULES=		converters/libiconv
BUILD_DEPENDS=		::multimedia/mplayer:configure
DISTFILES=
NO_CHECKSUM=		Yes

post-extract:
	ln -sf ${WRKDIR}/x11/mplayer/MPlayer-* ${WRKDIST}

WRKSRC=	${WRKDIST}/TOOLS/subfont-c
ALL_TARGET=subfont
MAKE_FLAGS=OPTFLAGS='-I${X11BASE}/include/freetype2 -I${LOCALBASE}/include' \
    LDLIBS='-lm -L${X11BASE}/lib -lfreetype -L${ICONV_PREFIX}/lib -liconv'

USE_GMAKE=		Yes
USE_X11=		Yes # depends on mplayer, which needs X11
USE_CXX=		Yes # depends on mplayer, which uses CXX

OSDDIR=${PREFIX}/libdata/mplayer-osd

post-build:
	sed -e 's,^PREFIX=.*,PREFIX=${PREFIX},' \
	    ${FILESDIR}/mksubfont >${WRKBUILD}/mksubfont

NO_REGRESS=Yes

do-install:
	${INSTALL_PROGRAM} ${WRKBUILD}/subfont ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${OSDDIR}
	${INSTALL_DATA} ${WRKBUILD}/osd/osd.pfb  ${OSDDIR}
	${INSTALL_DATA} ${WRKBUILD}/encodings/osd-mplayer ${OSDDIR}/osd-encoding
	${INSTALL_PROGRAM} ${WRKBUILD}/mksubfont ${PREFIX}/bin
	${INSTALL_DATA} ${WRKBUILD}/README ${PREFIX}/share/doc/mplayer-fontmaker

PERMIT_PACKAGE_FTP=	dependency multimedia/mplayer is not allowed for FTP
PERMIT_PACKAGE_CDROM=	dependency multimedia/mplayer is not allowed for CDROM
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	"Patented stuff"

.include <bsd.port.mk>
@


1.6
log
@fix broken dependencies, <bsd.own.mk> inclusion; break other packages
@
text
@d1 1
d24 3
a26 1
USE_GMAKE=Yes
d44 2
a45 2
PERMIT_PACKAGE_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
@


1.5
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d4 1
a4 1
ONLY_FOR_PLATFORM=	*:*:i386 *:*:macppc
d6 3
a8 3
DISTNAME=mplayer-fontmaker-0.90
CATEGORIES=x11 multimedia
COMMENT=			subtitle fonts generator for mplayer
d10 2
a11 2
MODULES=	converters/libiconv
BUILD_DEPENDS=	::x11/mplayer:configure
d13 1
a13 1
NO_CHECKSUM=	Yes
@


1.4
log
@add USE_ICONV variable to MODULES=converters/libiconv which
defaults to any -> doesn't pull in the port under Darwin and
MirOS-current, uses libiconv (GNU or BSD) in base
@
text
@d8 1
a8 1
COMMENT='subtitle fonts generator for mplayer'
@


1.3
log
@the port part of platform refinal
@
text
@d21 1
a21 1
    LDLIBS='-lm -L/usr/X11R6/lib -lfreetype -L/usr/local/lib -liconv'
@


1.2
log
@NOPIC_PLATFORMS, LP64_PLATFORMS and general change of
{NOT,ONLY}_FOR_{ARCH{,E,ES},OS} to {NOT,ONLY}_FOR_PLATFORM

some fallout maybe, I hope not
@
text
@d4 1
a4 1
ONLY_FOR_PLATFORM=	*:i386 *:macppc
@


1.1
log
@Initial revision
@
text
@d4 1
a4 1
ONLY_FOR_ARCHS=i386 macppc
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
