head	1.6;
access;
symbols;
locks; strict;
comment	@# @;


1.6
date	2008.11.08.23.04.06;	author tg;	state Exp;
branches;
next	1.5;
commitid	10049161AC72620EAF0;

1.5
date	2007.05.10.13.02.22;	author tg;	state Exp;
branches;
next	1.4;
commitid	100464317A6439F08F1;

1.4
date	2007.04.17.23.41.01;	author tg;	state Exp;
branches;
next	1.3;
commitid	10046255A1913F69329;

1.3
date	2007.03.04.20.00.51;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045EB2500777EEDFA;

1.2
date	2007.02.11.00.48.21;	author tg;	state Exp;
branches;
next	1.1;
commitid	10045CE679A4A3CDB4E;

1.1
date	2006.12.28.04.38.20;	author tg;	state Exp;
branches;
next	;
commitid	10045934A3963A08EF4;


desc
@@


1.6
log
@more mass conversions, including ancient eMail addresses
@
text
@# $MirOS: ports/sysutils/chkuterm/Makefile,v 1.5 2007/05/10 13:02:22 tg Exp $

COMMENT=		check current terminal for utf-8 mode
CATEGORIES=		comms sysutils
DIST_NAME=		chkuterm
DIST_DATE=		20070510
DIST_SOURCE=		port
RESPONSIBLE=		Thorsten Glaser <tg@@mirbsd.org>

# MirOS
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

NO_REGRESS=		Yes

.include <bsd.port.mk>
@


1.5
log
@• wait 75 ms between flushing all tty I/O and writing the enquiry string
• wait 75 ms between writing the enquiry string and waiting for an answer
• bump date of chkuterm, patchlev^Wdash_ver of screen
• screen: mention chkuterm functionality in the description
@
text
@d1 1
a1 1
# $MirOS: ports/sysutils/chkuterm/Makefile,v 1.4 2007/04/17 23:41:01 tg Exp $
d8 1
a8 1
RESPONSIBLE=		Thorsten Glaser <tg@@66h.42h.de>
@


1.4
log
@When select(2) tells us that we've got something on wsfd, we maybe only got
one char (the first one of the response would be ESC); read it and if it is
it indeed, switch to blocking stdio and get row and column with fscanf(3) –
the response code is luckily being trailed by an ‘R’ that, upon being read,
terminates fscanf gracefully (other stuff is done using TCIOFLUSH).

This change should both make the detection e̲v̲e̲n̲ more reliable on (slow) in-
ternet links as well as reduce the number of flush'd keys if we type during
login already (and not get us the response messed up as programme input). I
only tested this a little bit, though, yet…
@
text
@d1 1
a1 1
# $MirOS: ports/sysutils/chkuterm/Makefile,v 1.3 2007/03/04 20:00:51 tg Exp $
d6 1
a6 1
DIST_DATE=		20070417
@


1.3
log
@• use TCIOFLUSH + TCSANOW instead of TCSAFLUSH
• sleep 50 ms between writing the “get cursor position” request to the
  terminal and reading the answer

appears to¹ help screen's problems when reattaching from an utf-8 tty
to utf-8 screen backend introduced in screen-4.0.3-4 ― please upgrade

¹) if someone has got a better idea², please tell me
²) no we don't fscanf(3) like linux vt-is-UTF8, since the tty may not
   even support the “get cursor position” request at all
@
text
@d1 1
a1 1
# $MirOS: ports/sysutils/chkuterm/Makefile,v 1.2 2007/02/11 00:48:21 tg Exp $
d6 1
a6 1
DIST_DATE=		20070304
@


1.2
log
@* prevent false positives with Shift-JIS or EUC-JP in ports/japanese/kterm
* new return values:
  0 = UTF-8 (as previously)
  >0 = not utf-8 (as previously)
  1 = unknown charset (as previously, but new meaning)
  2 = positively ISO-8859-1 (new retval)
  3 = error occured (as previously)
@
text
@d1 1
a1 1
# $MirOS: ports/sysutils/chkuterm/Makefile,v 1.1 2006/12/28 04:38:20 tg Exp $
d6 1
a6 1
DIST_DATE=		20070210
@


1.1
log
@add a stripped-down version of wsconfig(8) -U
because e.g. linux vt-is-UTF8 only works on their VTs (why?)
and other OSes don't even have it...
@
text
@d1 1
a1 1
# $MirOS: ports/comms/ssfe/Makefile,v 1.8 2006/09/14 00:07:37 tg Exp $
d6 1
a6 1
DIST_DATE=		20061228
a7 1
PKGNAME=		${DIST_NAME}-${DIST_DATE}-0
@

