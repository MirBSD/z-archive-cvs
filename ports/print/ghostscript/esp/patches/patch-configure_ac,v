head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2006.04.27.20.52.11;	author bsiegert;	state Exp;
branches;
next	1.2;
commitid	10044512EA204B6306B;

1.2
date	2005.12.16.01.27.57;	author tg;	state Exp;
branches;
next	1.1;
commitid	10043A2181433F3EB58;

1.1
date	2005.12.16.01.17.24;	author bsiegert;	state Exp;
branches;
next	;
commitid	10043A214A73AFE9293;


desc
@@


1.3
log
@Update to 8.15.2-0.

Fix MASTER_SITES. Use @@sample (I can't believe this thing still used an
INSTALL script). Regenerate patches and fix a png / zlib compat issue (I
should probably write a Problem Report to ESP about this).
@
text
@$MirOS$
--- configure.ac.orig	Sun Apr 23 13:30:04 2006
+++ configure.ac	Thu Apr 27 16:12:43 2006
@@@@ -499,13 +499,13 @@@@
 
 	AC_CHECK_LIB(X11,XOpenDisplay)
 	AC_CHECK_LIB(Xext,XdbeQueryExtension)
-	AC_CHECK_LIB(Xt,XtAppCreateShell)
+	AC_CHECK_LIB(Xt,XtAppCreateShell,,,[-lSM -lICE])
 
 	LIBS="$SAVELIBS"
 
 	if test "$ac_cv_lib_Xt_XtAppCreateShell" = yes; then
 		X_DEVS="\$(DD)x11.dev \$(DD)x11alpha.dev \$(DD)x11cmyk.dev \$(DD)x11mono.dev \$(DD)x11_.dev \$(DD)x11alt_.dev \$(DD)x11cmyk2.dev \$(DD)x11cmyk4.dev \$(DD)x11cmyk8.dev \$(DD)x11rg16x.dev \$(DD)x11rg32x.dev \$(DD)x11gray2.dev \$(DD)x11gray4.dev"
-		X_LIBS="Xt Xext X11"
+		X_LIBS="Xt Xext X11 SM ICE"
 	fi
 fi
 
@


1.2
log
@re-add AC_FUNC_MALLOC here to not miss a cpp macro
now that we have a both better and generic fix in place

"MirWurscht" bsiegert@@
@
text
@d1 4
a4 4
$MirOS: ports/print/ghostscript/esp/patches/patch-configure_ac,v 1.1 2005/12/16 01:17:24 bsiegert Exp $
--- configure.ac.orig	Mon Dec 12 18:03:08 2005
+++ configure.ac	Mon Dec 12 18:06:50 2005
@@@@ -593,13 +593,13 @@@@ if test x$no_x != xyes; then
d15 2
a16 2
-		X_LIBS="-lXt -lXext -lX11"
+		X_LIBS="-lXt -lXext -lX11 -lSM -lICE"
@


1.1
log
@Add -lSM -lICE to X libraries, they are dependencies of the Athena widgets.

Also remove AC_FUNC_MALLOC from the configure script. This function is more
of a design bug than useful. If malloc is not GNU malloc it defines malloc
as rpl_malloc, which is undefined. Wtf?

(It seems that when you use this macro, you are supposed to add a source
file with rpl_malloc, which is a wrapper around the platform's malloc).
@
text
@d1 1
a1 1
$MirOS$
a19 8
@@@@ -617,7 +617,6 @@@@
 
 AC_FUNC_FORK
 AC_PROG_GCC_TRADITIONAL
-AC_FUNC_MALLOC
 AC_FUNC_MEMCMP
 AC_TYPE_SIGNAL
 AC_FUNC_STAT
@

