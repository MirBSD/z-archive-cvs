head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2007.03.15.23.18.33;	author tg;	state Exp;
branches;
next	;
commitid	10045F9D4145DCD12DB;


desc
@@


1.1
log
@fix a few time_t bugs

XXX ugly #1:
big-endian time_t64 ILP32 boxen are wrong in zdevcal.c
(but sparc is time_t32, luckily)
(and thank the creator we don't have pdp endian arches)

XXX ugly #2:
|    char buf1[4+1+2+1+2+1]; /* yyyy-mm-dd\0 */
|    sprintf(buf1,
|            "%04ld-%02d-%02d",
|            (long)(tms.tm_year + 1900), tms.tm_mon + 1, tms.tm_mday);
@
text
@$MirOS$
--- src/gdevpdfe.c.orig	Mon Mar 13 20:53:20 2006
+++ src/gdevpdfe.c	Thu Mar 15 23:16:34 2007
@@@@ -164,8 +164,8 @@@@ pdf_xmp_time(char *buf, int buf_length)
     time(&t);
     tms = *localtime(&t);
     sprintf(buf1,
-	    "%04d-%02d-%02d",
-	    tms.tm_year + 1900, tms.tm_mon + 1, tms.tm_mday);
+	    "%04ld-%02d-%02d",
+	    (long)(tms.tm_year + 1900), tms.tm_mon + 1, tms.tm_mday);
     strncpy(buf, buf1, buf_length);
 }
 
@
