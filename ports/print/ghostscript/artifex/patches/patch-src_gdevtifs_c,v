head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2007.03.15.23.18.33;	author tg;	state Exp;
branches;
next	;
commitid	10045F9D4145DCD12DB;


desc
@@


1.1
log
@fix a few time_t bugs

XXX ugly #1:
big-endian time_t64 ILP32 boxen are wrong in zdevcal.c
(but sparc is time_t32, luckily)
(and thank the creator we don't have pdp endian arches)

XXX ugly #2:
|    char buf1[4+1+2+1+2+1]; /* yyyy-mm-dd\0 */
|    sprintf(buf1,
|            "%04ld-%02d-%02d",
|            (long)(tms.tm_year + 1900), tms.tm_mon + 1, tms.tm_mday);
@
text
@$MirOS$
--- src/gdevtifs.c.orig	Mon Mar 13 16:17:56 2006
+++ src/gdevtifs.c	Thu Mar 15 23:10:42 2007
@@@@ -215,8 +215,8 @@@@ gdev_tiff_begin_page(gx_device_printer *
 	time(&t);
 	tms = *localtime(&t);
 	sprintf(std_values.dateTimeValue,
-		"%04d:%02d:%02d %02d:%02d:%02d",
-		tms.tm_year + 1900, tms.tm_mon + 1, tms.tm_mday,
+		"%04ld:%02d:%02d %02d:%02d:%02d",
+		(long)(tms.tm_year + 1900), tms.tm_mon + 1, tms.tm_mday,
 		tms.tm_hour, tms.tm_min, tms.tm_sec);
     }
 
@
