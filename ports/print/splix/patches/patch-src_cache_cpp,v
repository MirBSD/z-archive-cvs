head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2009.03.23.19.39.28;	author bsiegert;	state Exp;
branches;
next	;
commitid	10049C7E533312B3BB7;


desc
@@


1.1
log
@New port: splix-2.0.0-0. From DESCR:

This driver is usable by all printer devices which understand the QPDL
(Quick Page Description Language) language. It covers several Samsung,
Xerox, Dell, and Ricoh printers like the ML-2250 which uses it as a
native printer language (Check the technical documentation for more
information).

If you are upgrading your current version, you MUST delete your printer
in the CUPS interface and install it again. This operation MUST be done
since CUPS make a copy of the PPD file and this file is modified between
versions.
@
text
@$MirOS$
--- src/cache.cpp.orig	Mon Mar 23 15:27:24 2009
+++ src/cache.cpp	Mon Mar 23 15:27:56 2009
@@@@ -529,6 +529,7 @@@@ bool CacheEntry::swapToDisk()
 {
     const char *path = "/tmp/splixV2-pageXXXXXX";
     int fd;
+    size_t len;
 
     if (_tempFile) {
         ERRORMSG(_("Trying to swap a page instance on the disk which is "
@@@@ -537,8 +538,9 @@@@ bool CacheEntry::swapToDisk()
     }
 
     // Create the temporarily file
-    _tempFile = new char[strlen(path)+1];
-    strcpy(_tempFile, path);
+    len = strlen(path) + 1;
+    _tempFile = new char[len];
+    strlcpy(_tempFile, path, len);
     if ((fd = mkstemp(_tempFile)) == -1) {
         delete[] _tempFile;
         _tempFile = NULL;
@
