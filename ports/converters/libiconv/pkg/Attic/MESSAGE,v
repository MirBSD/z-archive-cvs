head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2008.04.07.18.42.24;	author tg;	state dead;
branches;
next	1.1;
commitid	10047FA6A081EF172DD;

1.1
date	2006.02.01.17.23.36;	author tg;	state Exp;
branches;
next	;
commitid	10043E0EE085FAE1F2C;


desc
@@


1.2
log
@• nuke VMEM_WARNING
• nuke INSTALL/DEINSTALL: LIB_DEPENDS can do relative paths
  like this: LIB_DEPENDS+= ../giconv/lib/iconv
• nuke MESSAGE, it is only confusing these days (pre-MirBSD-#9 times)

• introduce fake pkgviews, formal specification:
  – ${LOCALBASE}/pkgview/${STEM} (i.e. PKGNAME without version and dashver)
  – PLIST must also contain hierarchy up to “@@dirrm pkgview”
  – ${LOCALBASE}/pkgview/${STEM}/ may have subdirs include and lib *ONLY*
    (everything else goes directly to ${LOCALBASE}/ as usual)
  – packages with this system must use (provide) MODULES
  – the MODULES file must provide something like ${FOO_PREFIX}
  – and should probably add it to the appropriate *FLAGS vars
• these are until we have real pkgview+buildlink3 style stuff like TNF
  (ok, probably never or in 5 years ☻)

‣ NOTE: @@lib will add /usr/mpkg/pkgview/libiconv/lib (in my case) to
  the default library search path *and not remove it on pkg_delete*!
  ① this is buggy, if you add it you must remove it too (XXX how?)
  ② this should be unneeded because we use DT_RPATH – Benny?
@
text
@If you are upgrading from libiconv-1.9.1-2 or older:
The includes and libraries have moved from ${PREFIX}/lib
and ${PREFIX}/include to ${PREFIX}/giconv/{lib,include}
respectively.

To continue using your old applications which were linked
against libiconv without rebuilding, put symbolic links
into ${PREFIX}/lib/ from your preferred implementation:

MirOS-current, not retaining file names:
 * libiconv.so.2.2   -> /usr/lib/libiconv.so.4.4
 * libcharset.so.1.0 -> ${PREFIX}/giconv/lib/libcharset.so.1.0

Darwin, retaining file names:
 * libiconv.*.dylib   -> /usr/lib/libiconv.*.dylib
 * libcharset.*.dylib -> /usr/lib/libcharset.*.dylib

Other operating systems, retaining file names:
 * libiconv.so*   -> ${PREFIX}/giconv/lib/libiconv.so*
 * libcharset.so* -> ${PREFIX}/giconv/lib//libcharset.so*
@


1.1
log
@move libiconv (and libcharset) includes from LOCALBASE/include and
LOCALBASE/lib to LOCALBASE/giconv/{include,lib}/, respectively, to
avoid a configure-time clash between these resulting in none being
picked (mgcc -LLOCALBASE/lib -L/usr/lib -liconv fails, because the
system libiconv isn't seen and GNU libiconv needs renamed function
macros which are not provided by /usr/include/iconv.h).
Add instructions to point symbolic links, for upgraders (on Darwin
and MirOS, recommend links to the base system libraries instead).
@
text
@@

