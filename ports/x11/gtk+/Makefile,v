head	1.18;
access;
symbols;
locks; strict;
comment	@# @;


1.18
date	2010.11.25.15.35.45;	author bsiegert;	state Exp;
branches;
next	1.17;
commitid	1004CEE81C53B9CCA70;

1.17
date	2009.08.15.20.45.20;	author bsiegert;	state Exp;
branches;
next	1.16;
commitid	1004A871E5D43FF9933;

1.16
date	2008.04.07.21.19.34;	author tg;	state Exp;
branches;
next	1.15;
commitid	10047FA8FB924448471;

1.15
date	2008.03.09.17.23.43;	author tg;	state Exp;
branches;
next	1.14;
commitid	10047D41CAA7E715397;

1.14
date	2007.09.04.20.32.29;	author bsiegert;	state Exp;
branches;
next	1.13;
commitid	10046DDC0A456F1FAEB;

1.13
date	2007.07.10.19.16.49;	author bsiegert;	state Exp;
branches;
next	1.12;
commitid	1004693DB0069B41764;

1.12
date	2007.02.22.22.57.58;	author tg;	state Exp;
branches;
next	1.11;
commitid	10045DE1FF10F590776;

1.11
date	2007.01.06.16.30.19;	author bsiegert;	state Exp;
branches;
next	1.10;
commitid	100459FCCFA1C8EC44A;

1.10
date	2006.12.20.15.32.53;	author tg;	state Exp;
branches;
next	1.9;
commitid	100458956E02A39AB3C;

1.9
date	2006.09.14.00.15.24;	author tg;	state Exp;
branches;
next	1.8;
commitid	10045089C0E234154C3;

1.8
date	2006.02.09.11.15.51;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043EB23217A35557B;

1.7
date	2005.10.09.15.27.06;	author bsiegert;	state Exp;
branches;
next	1.6;
commitid	ce7434936c47836;

1.6
date	2005.09.25.15.45.55;	author bsiegert;	state Exp;
branches;
next	1.5;
commitid	128b4336c5fd8d95;

1.5
date	2005.09.24.12.14.42;	author tg;	state Exp;
branches;
next	1.4;
commitid	595433542b80d86;

1.4
date	2005.07.07.21.28.51;	author bsiegert;	state Exp;
branches;
next	1.3;
commitid	66bc42cd9a7ea714;

1.3
date	2005.04.10.21.51.50;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.02.20.32.53;	author bsiegert;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.16.00.35;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.16.00.35;	author tg;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Step by step, bring Gtk+ a bit closer to the current version. Update
glib to latest 2.14, pango to latest 1.18 and Gtk+ to latest 2.12.
Update these three together.

Pango does not build its xft backend because we do not have a xrender.pc
file in base. Some packages that depend on pangoxft will have to be touched.
@
text
@# $MirOS: ports/x11/gtk+/Makefile,v 1.17 2009/08/15 20:45:20 bsiegert Exp $
# $OpenBSD: Makefile,v 1.14 2004/03/30 15:48:29 sturm Exp $

NOT_FOR_PLATFORM=		${NOPIC_PLATFORMS}
COMMENT=			multi-platform graphical toolkit
COMMENT-docs=			gtk+-2 documentation
VERSION=			2.12.12
DASH_VER=			0
DISTNAME=			gtk+-${VERSION}
PKGNAME=			gtk+2-${VERSION}-${DASH_VER}
PKGNAME-docs=			gtk+2-docs-${VERSION}-${DASH_VER}
FULLPKGNAME-docs=		${PKGNAME-docs}
CATEGORIES=			x11 devel
HOMEPAGE=			http://www.gtk.org
RESPONSIBLE=			Benny Siegert <bsiegert@@gmx.de>

# LGPL
PERMIT_PACKAGE_CDROM=		Yes
PERMIT_PACKAGE_FTP=		Yes
PERMIT_DISTFILES_CDROM=		Yes
PERMIT_DISTFILES_FTP=		Yes

MASTER_SITES+=			${MASTER_SITE_GNOME:=sources/gtk+/${VERSION:R}/}
MASTER_SITES+=			ftp://ftp.gtk.org/pub/gtk/${VERSION:R}/
EXTRACT_SUFX=           	.tar.bz2

MULTI_PACKAGES=         	-docs
SUBPACKAGE?=

FLAVOURS=			cups
FLAVOUR?=

.if ${SUBPACKAGE} != "-docs"
MODULES=			devel/gettext devel/pkgconfig graphics/png x11/gtk+

LIB_DEPENDS=			glib-2.0.0.0,gmodule-2.0.0.0,gobject-2.0.0.0,gthread-2.0.0.0:glib2->=2.16:devel/glib \
				pango-1.0.0.0,pangoft2-1.0.0.0,pangox-1.0.0.0,pangocairo-1.0.0.0:pango->=1.18:devel/pango \
				atk-1.0.0.0::devel/atk \
				tiff::graphics/tiff \
				jpeg::graphics/jpeg
. if ${FLAVOUR:L:Mcups}
LIB_DEPENDS+=			cups,cupsimage::print/cups
. endif
.endif

.if defined(PACKAGING) && ${SUBPACKAGE} == "-docs"
PKG_ARCH=			*
.endif

USE_X11=			Yes
USE_GMAKE=			Yes
CONFIGURE_STYLE=		autoconf
AUTOCONF_NEW=			Yes

CONFIGURE_ARGS+=		--enable-static
CONFIGURE_ARGS+=		${CONFIGURE_SHARED}
CONFIGURE_ARGS+= 		--disable-gtk-doc

.if !${FLAVOUR:L:Mcups}
CONFIGURE_ARGS+=		--disable-cups
.endif

.include <bsd.port.mk>
@


1.17
log
@Unify glib2 dependencies to "*-2.0.0.0" type, the other ones are not
reliable
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.16 2008/04/07 21:19:34 tg Exp $
d7 2
a8 2
VERSION=			2.10.14
DASH_VER=			1
d23 2
a24 3
MASTER_SITES+=			ftp://gd.tuwien.ac.at/graphics/gimp/
MASTER_SITES+=			ftp://infosoc.uni-koeln.de/pub/ftp.gimp.org/
MASTER_SITES+=			ftp://ftp.gtk.org/pub/gtk/v2.10/
d34 1
a34 1
MODULES=			devel/gettext devel/pkgconfig graphics/png
d36 2
a37 2
LIB_DEPENDS=			glib-2.0.0.0,gmodule-2.0.0.0,gobject-2.0.0.0,gthread-2.0.0.0::devel/glib \
				pango-1.0.0.0,pangoft2-1.0.0.0,pangox-1.0.0.0,pangoxft-1.0.0.0,pangocairo-1.0.0.0::devel/pango \
d60 1
a60 1
CONFIGURE_ARGS+=		--without-cups
@


1.16
log
@fix where the @@dirrms are in the PLISTs
XXX we must change update-plist to make sure that _each_ PLIST has
XXX an @@dirrm for EVERY directory it contains/creates, even if that
XXX directory is created by >1 multipackage (not for gtk+2 tho)

XXX what about ports/x11/gtk+{1,2} like debian, to just always version,
XXX and not have one without?
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.15 2008/03/09 17:23:43 tg Exp $
d37 3
a39 3
LIB_DEPENDS=			glib-2.0.0.800,gmodule-2.0.0.800,gobject-2.0.0.800,gthread-2.0.0.800::devel/glib \
				pango-1.0.0.1000,pangoft2-1.0.0.1000,pangox-1.0.0.1000,pangoxft-1.0.0.1000,pangocairo-1.0.0.1000::devel/pango \
				atk-1.0.0.1011::devel/atk \
d41 1
a41 1
				jpeg.62::graphics/jpeg
@


1.15
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.14 2007/09/04 20:32:29 bsiegert Exp $
d8 1
a8 1
DASH_VER=			0
@


1.14
log
@Update to 2.10.14-0, required by some newer Gtk apps. I wanted this for release
so all packages are built against this version.

Now has a cups flavor that decides whether the cups printing backend is
built. I should feed back that configure.in change upstream maybe.
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.13 2007/07/10 19:16:49 bsiegert Exp $
d31 2
a32 2
FLAVORS=			cups
FLAVOR?=
d42 1
a42 1
. if ${FLAVOR:L:Mcups}
d60 1
a60 1
.if !${FLAVOR:L:Mcups}
@


1.13
log
@Build gdk-pixbuf executables with -pthread, fixes librsvg Gtk+ plugin.
Regenerate other patches, too. Bump patchlevel. You need at least this
Gtk version for librsvg.
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.12 2007/02/22 22:57:58 tg Exp $
d7 2
a8 2
VERSION=			2.10.6
DASH_VER=			1
d12 1
d23 3
a25 1
MASTER_SITES=			ftp://ftp.gtk.org/pub/gtk/v2.10/
d31 3
d37 2
a38 2
LIB_DEPENDS=			glib-2.0.0.800,gmodule-2.0.0.800,gobject-2.0.0.800::devel/glib \
				pango-1.0.0.1000,pangoft2-1.0.0.1000,pangox-1.0.0.1000,pangoxft-1.0.0.1000::devel/pango \
d42 3
d60 4
@


1.12
log
@remove redundancy
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.11 2007/01/06 16:30:19 bsiegert Exp $
d8 1
@


1.11
log
@Here is what I have been doing during 23c3:

Update the rest of Gtk+ and dependencies to their current version. Tested on Mac
OS X (during the congress) and MirOS/i386 (23c3 edition).

Some notes:
- cairo does not have the svg backend enabled as our librsvg port needs Gtk+,
  which needs cairo.
- Gtk+ builds a CUPS printing backend when CUPS is available, I should make this
  a flavour.
- tg@@, please resurrect glib 2.12 as I am useless with CVS merging.
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.10 2006/12/20 15:32:53 tg Exp $
a48 2
CONFIGURE_ARGS+= 		--disable-dependency-tracking
CONFIGURE_ARGS+= 		--disable-libtool-lock
@


1.10
log
@sync DASH_VER usage:
* the dash doesn't belong into the DASH_VER variable,
  it's only a decimal integer value
* DASH_VER already defaults to 0 (admittedly new)
* PKGNAME already defaults to ${DISTNAME}-${DASH_VER}
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.9 2006/09/14 00:15:24 tg Exp $
d7 1
a7 1
VERSION=			2.8.6
d21 1
a21 1
MASTER_SITES=			ftp://ftp.gtk.org/pub/gtk/v2.8/
d49 2
@


1.9
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.8 2006/02/09 11:15:51 tg Exp $
d4 1
a4 1
NOT_FOR_PLATFORM=	${NOPIC_PLATFORMS}
d9 2
a10 3
DASH_VER=			-0
PKGNAME=			gtk+2-${VERSION}${DASH_VER}
PKGNAME-docs=			gtk+2-docs-${VERSION}${DASH_VER}
@


1.8
log
@Fix a few abuses:
| CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include/libpng \
|			    -I${LOCALBASE}/include -I${X11BASE}/include" \
| 			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
|			PKGCONFIG_PATH=...

* use Benny's pkgconfig module
  - fixes PKGCONFIG_PATH in all places
  - adds explicit dependencies on pkgconfig where needed
* use a new png module
  - also cought a few implicit dependencies
* use a new freetype1 module in two places (more to come?)
* CPPFLAGS, LDFLAGS are in CONFIGURE_ENV anyway, so correctly
  add to them as CPPFLAGS+=<tab>foo instead
* use EXTRA_{M,X,F}AKE_FLAGS
* CC is given anyway, too
* add MAKEINFO= to gnu style

Still doesn't catch all OpenBSD abuses, but most of them.

Brokenness analysis:
* Automatically done
  - CFLAGS+=CPPFLAGS
  - CXXFLAGS+=CPPFLAGS
  - CPPFLAGS+=-I${LOCALBASE}/include
  - LDFLAGS+=-L${LOCALBASE}/lib
  - CONFIGURE_ENV, MAKE_FLAGS+=
    + LDFLAGS=LDFLAGS
    + CPPFLAGS you get the idea
    + CFLAGS
    + CXXFLAGS
    + CC
    + CXX (if USE_CXX)
* Done if USE_X11=Yes
  - CPPFLAGS+=X11BASE/include
  - LDFLAGS+=X11BASE/lib

Tell me if there are problems, but first try adding
an EXTRA_ before MAKE_FLAGS and FAKE_FLAGS.
Remember EXTRA_XAKE_FLAGS get added to both.
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.7 2005/10/09 15:27:06 bsiegert Exp $
d5 2
a6 2
COMMENT=			"multi-platform graphical toolkit"
COMMENT-docs=           	"gtk+-2 documentation"
@


1.7
log
@Update gtk+ to 2.8.6-0. Needs a new bugfix.
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.6 2005/09/25 15:45:55 bsiegert Exp $
d29 1
a29 1
MODULES=			devel/gettext
a34 1
				png.3::graphics/png \
a35 1
BUILD_DEPENDS=          	:pkgconfig-*:devel/pkgconfig
a43 1
CPPFLAGS+=			-I${X11BASE}/include/freetype2/ -I${LOCALBASE}/include/libpng
a50 7
PKG_CONFIG_PATH=		${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig
MAKE_ENV+=			PKG_CONFIG_PATH="${PKG_CONFIG_PATH}"
CONFIGURE_ENV+=			PKG_CONFIG_PATH="${PKG_CONFIG_PATH}"

#  re-enable this only if build breaks on MirOS or OpenBSD
#NO_SYSTRACE=			"normalize_filename: filename too long"

@


1.6
log
@Update gtk+ to 2.8.3-0. Works for me on Mac OS Tiger. Surprisingly easy
actually, but for tg's bugfix (thanks a lot!).
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.5 2005/09/24 12:14:42 tg Exp $
d7 1
a7 1
VERSION=			2.8.3
@


1.5
log
@fix bsiegert@@s error with mirmake.h

NB: there's a reason CONFIGURE_ENV is separate from MAKE_ENV...

PS: NO_SYSTRACE can probably go, please remove it once you update
    and only bring it back if it definitively does not work on
    MirOS and/or OpenBSD.
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.4 2005/07/07 21:28:51 bsiegert Exp $
d7 1
a7 1
VERSION=			2.4.14
d9 3
a11 2
PKGNAME=			gtk+2-${VERSION}-0
PKGNAME-docs=			gtk+2-docs-${VERSION}-0
d22 1
a22 1
MASTER_SITES=			ftp://ftp.gtk.org/pub/gtk/v2.4/
d31 4
a34 4
LIB_DEPENDS=			glib-2.0.400.0,gmodule-2.0.400.0,gobject-2.0.400.0::devel/glib \
				pango-1.0.399.1,pangoft2-1.0.399.1,pangox-1.0.399.1,pangoxft-1.0.399.1::devel/pango \
				atk-1.0.0.1::devel/atk \
				tiff.35::graphics/tiff \
d49 3
d53 1
d57 3
a59 1
NO_SYSTRACE=			"normalize_filename: filename too long"
@


1.4
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS: ports/x11/gtk+/Makefile,v 1.2 2005/04/02 20:32:53 bsiegert Exp $
d49 3
a51 2
MAKE_ENV=			PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
CONFIGURE_ENV+=			${MAKE_ENV}
@


1.3
log
@NOPIC_PLATFORMS, LP64_PLATFORMS and general change of
{NOT,ONLY}_FOR_{ARCH{,E,ES},OS} to {NOT,ONLY}_FOR_PLATFORM

some fallout maybe, I hope not
@
text
@d9 2
a10 2
PKGNAME=			gtk+2-${VERSION}
PKGNAME-docs=			gtk+2-docs-${VERSION}
@


1.2
log
@glib2 -> glib

oops
@
text
@d1 1
a1 1
# $MirOS$
d4 1
a4 1
NOT_FOR_ARCHS=			${NO_SHARED_ARCHS}
@


1.1
log
@Initial revision
@
text
@d30 1
a30 1
LIB_DEPENDS=			glib-2.0.400.0,gmodule-2.0.400.0,gobject-2.0.400.0::devel/glib2 \
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
