head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2008.03.09.19.16.05;	author tg;	state Exp;
branches;
next	1.4;
commitid	10047D437336B26509B;

1.4
date	2007.01.29.01.24.51;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045BD4CC6551DD5AE;

1.3
date	2006.09.14.00.12.22;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045089C0E234154C3;

1.2
date	2005.07.07.21.25.04;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.49.11;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.49.11;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@by request of bsiegert@@, make all imake-using ports as only for MirOS and
OpenBSD, since they use the -DPorts logic of OpenBSD.cf/MirBSD.cf

since imake.port.mk would be too late, this means touching â€™em all

XXX these openbsd derived ports Makefiles surely look ugly
@
text
@# $MirOS: ports/net/tightvnc/Makefile,v 1.4 2007/01/29 01:24:51 tg Exp $
# $OpenBSD: Makefile,v 1.12 2004/04/21 12:56:30 wilfried Exp $

ONLY_FOR_PLATFORM=	MirBSD:*:* OpenBSD:*:*

# Xvnc is broken
VIEWER_ONLY=		#defined

COMMENT=		cross-platform remote desktop access
COMMENT-viewer=		client for cross-platform remote desktop access

VERSION=		tightvnc-1.2.7
PKGNAME=        	${VERSION}-${DASH_VER}
DISTNAME=       	${VERSION}_unixsrc
CATEGORIES=		net
MASTER_SITES=   	${MASTER_SITE_SOURCEFORGE:=vnc-tight/}
HOMEPAGE=		http://www.tightvnc.org/
LIB_DEPENDS=		jpeg.62.::graphics/jpeg

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WRKDIST=		${WRKDIR}/vnc_unixsrc
MULTI_PACKAGES=		-viewer
SUBPACKAGE?=
CONFIGURE_STYLE=	imake
USE_X11=		Yes
ALL_TARGET=    		World
NO_REGRESS=		Yes

.ifdef VIEWER_ONLY
COMMENT=		${COMMENT-viewer}
DESCR=			${PKGDIR}/DESCR-viewer
PLIST=			${PKGDIR}/PLIST-viewer
FULLPKGNAME=		${PKGNAME}-viewer
MULTI_PACKAGES:=
ALL_TARGET=		all
.else
DOCUMENTATION=		vncserver.man vncpasswd/vncpasswd.man \
			vncconnect/vncconnect.man \
			Xvnc/programs/Xserver/Xvnc.man
.endif
DOCUMENTATION+=		vncviewer/vncviewer.man

.if ${MACHINE_ARCH} == "sparc64"
PATCH_LIST=		patch-* gcc-*
.endif

# We have to frob a few things, and we want our own permissions, so it's easier
# to do the install ourselves.
post-install:
	${INSTALL_PROGRAM} ${WRKSRC}/vncviewer/vncviewer ${PREFIX}/bin/vncviewer
.ifndef VIEWER_ONLY
	${INSTALL_PROGRAM} ${WRKSRC}/Xvnc/programs/Xserver/Xvnc ${PREFIX}/bin/Xvnc
	${INSTALL_PROGRAM} ${WRKSRC}/vncpasswd/vncpasswd ${PREFIX}/bin/vncpasswd
	${INSTALL_PROGRAM} ${WRKSRC}/vncconnect/vncconnect ${PREFIX}/bin/vncconnect
	sed  -e s%/usr/local/vnc/classes%${TRUEPREFIX}/share/vnc/classes% \
		< ${WRKSRC}/vncserver \
		> ${WRKSRC}/vncserver.local
	${INSTALL_SCRIPT} ${WRKSRC}/vncserver.local ${PREFIX}/bin/vncserver
# Go install Java classes
	${INSTALL_DATA_DIR} ${PREFIX}/share/vnc
	cp -R ${WRKSRC}/classes ${PREFIX}/share/vnc/
.endif
.for i in ${DOCUMENTATION}
	${INSTALL_MAN} ${WRKSRC}/$i ${PREFIX}/man/man1/${i:T:R}.1
.endfor

.include <bsd.port.mk>
@


1.4
log
@* unbreak fetching - wrong DISTNAME
* unbreak configuring - USE_X11 not set
* build viewer only - server doesn't work ATM
  (and this needs an update anyway)

XXX weird stuff, better do a totally new port
XXX CONFIGURE_STYLE=imake stinkt
XXX vncauth.c:0: note: someone does not honour COPTS correctly, passed 2 times
@
text
@d1 1
a1 1
# $MirOS$
d4 2
@


1.3
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
d4 2
a5 2
COMMENT=			cross-platform remote desktop access
COMMENT-viewer=			client for cross-platform remote desktop access
d7 2
a8 6
VERSION=	1.2.7
PKGNAME=        tightvnc-${VERSION}-0
DISTNAME=       ${PKGNAME}_unixsrc
CATEGORIES=	net
MASTER_SITES=   ${MASTER_SITE_SOURCEFORGE:=vnc-tight/}
DISTFILES=	${DISTNAME}.tar.gz
d10 7
a16 3
HOMEPAGE=	http://www.tightvnc.org/

LIB_DEPENDS=	jpeg.62.::graphics/jpeg
d24 2
a25 4
EXTRACT_ONLY=	${DISTNAME}.tar.gz
WRKDIST=	${WRKDIR}/vnc_unixsrc

MULTI_PACKAGES= -viewer
a26 1

d28 17
a44 7

ALL_TARGET=    	World

NO_REGRESS=	Yes

DOCUMENTATION=vncserver.man vncpasswd/vncpasswd.man vncconnect/vncconnect.man \
    Xvnc/programs/Xserver/Xvnc.man vncviewer/vncviewer.man
d47 1
a47 1
PATCH_LIST=	patch-* gcc-*
d53 2
a55 1
	${INSTALL_PROGRAM} ${WRKSRC}/vncviewer/vncviewer ${PREFIX}/bin/vncviewer
a61 1

d64 2
a65 1
	cp -R ${WRKSRC}/classes ${PREFIX}/share/vnc
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d3 2
a4 2
COMMENT=	"cross-platform remote desktop access"
COMMENT-viewer=	"client for cross-platform remote desktop access"
@


1.1
log
@Initial revision
@
text
@d7 1
a7 1
PKGNAME=        tightvnc-${VERSION}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
