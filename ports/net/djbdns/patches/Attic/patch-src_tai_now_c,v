head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2011.11.20.01.38.38;	author tg;	state dead;
branches;
next	1.2;
commitid	1004EC85A340D5FE8FB;

1.2
date	2007.02.23.01.06.12;	author tg;	state Exp;
branches;
next	1.1;
commitid	10045DE3E1B013F1F39;

1.1
date	2005.05.14.23.21.05;	author tg;	state Exp;
branches
	1.1.201.1;
next	;
commitid	1e94428687d39445;

1.1.201.1
date	2005.05.14.23.21.05;	author tg;	state Exp;
branches;
next	;
commitid	1e94428687d39445;


desc
@@


1.3
log
@stop using <sys/taitime.h> API
@
text
@$MirOS: ports/net/djbdns/patches/patch-src_tai_now_c,v 1.2 2007/02/23 01:06:12 tg Exp $
--- src/tai_now.c.orig	Sun Feb 11 21:11:23 2001
+++ src/tai_now.c	Fri Feb 23 01:02:58 2007
@@@@ -1,7 +1,16 @@@@
+#include <sys/param.h>
+#if defined(MirBSD) && (MirBSD > 0x09AB)
+#include <sys/taitime.h>
+#endif
 #include <time.h>
 #include "tai.h"
 
 void tai_now(struct tai *t)
 {
+#ifndef __TAI64_BIAS
   tai_unix(t,time((time_t *) 0));
+#else
+  if (t != NULL)
+    t->x = tai_time(NULL);
+#endif /* __TAI64_BIAS */
 }
@


1.2
log
@use our tai functions, even in miros-current
@
text
@d1 1
a1 1
$MirOS: ports/net/djbdns/patches/patch-src_tai_now_c,v 1.1.201.1 2005/05/14 23:21:05 tg Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$MirOS$
d3 8
a10 2
+++ src/tai_now.c	Sat May 14 22:45:56 2005
@@@@ -3,5 +3,10 @@@@
@


1.1.201.1
log
@New djbdns port, #ifdef'd, "original" and "no_ipv6" flavours removed
"no_ipv4" non-functional at the moment, will follow later after
redesign using crunchgen(1) and crunchide(1)
@
text
@@
