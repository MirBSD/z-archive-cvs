head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2006.01.24.21.54.21;	author tg;	state Exp;
branches;
next	1.1;
commitid	10043D6A21654DAA21E;

1.1
date	2006.01.17.22.40.38;	author tg;	state Exp;
branches;
next	;
commitid	10043CD71AE7CE50D89;


desc
@@


1.2
log
@it's settled, let's use /usr/bin/logger for axfrdns under inetd(8)
@
text
@$MirOS: ports/net/djbdns/patches/patch-man_axfrdns-conf_8,v 1.1 2006/01/17 22:40:38 tg Exp $
--- man/axfrdns-conf.8.orig	Thu Oct 23 08:09:45 2003
+++ man/axfrdns-conf.8	Tue Jan 24 21:49:19 2006
@@@@ -28,6 +28,18 @@@@ Normally 
 is 
 .IR /etc/axfrdns .
 
+.B axfrdns-conf
+enables
+.B axfrdns
+to run in two different ways.
+You can use
+.BR tcpserver (1)
+which is not included in the MirPorts Framework but the
+default mode of operation, or you can run it from within
+.BR inetd (8).
+The latter option however also forces you to run it outside
+of the control of djb daemontools.
+
 You can run the service under
 .BR svscan (8)
 by creating a symbolic link in the 
@@@@ -65,6 +77,29 @@@@ into
 .I tcp.cdb
 for
 .BR tcpserver (1).
+
+To run
+.B axfrdns
+within
+.BR inetd (8),
+first shut down the services after creating the
+directory, using the command:
+
+svc -dx 
+.I D
+.IR D /log
+
+After shutting down, remove everything except
+.IR D /env
+and
+.IR D /inetd
+to avoid them being picked up by
+.BR svscanboot (8)
+on next reboot (or don't install into /service at all).
+Finally, read the comment in
+.IR D /inetd
+and patch
+.BR inetd.conf (5).
 
 .B axfrdns-conf
 arranges for
@


1.1
log
@* there is no axfrdns with IPv6 transport¹²
* add inetd wrapper for axfrdns²
* write out the wrapper correctly automatically in axfrdns-conf(8)
* document that
* mark as for MirOS BSD and OpenBSD only due to arc4random(3) usage
* add port version (for zonenotify) and mksh path (for the
  inetd wrapper in axfrdns-conf) to CPPFLAGS
* build zonenotify
* tinydns-data: fix warnings (conversion)
* sync PLIST
* bump package version

¹) unless you tweak UCSPI-TCP
²) or inetd.conf (tcp4, tcp6)

tested against a 'dig @@1.2.3.4 axfr my.domain' on an openbsd box,
so I suppose it works ok
@
text
@d1 1
a1 1
$MirOS$
d3 1
a3 1
+++ man/axfrdns-conf.8	Tue Jan 17 22:30:43 2006
d23 1
a23 1
@@@@ -65,6 +77,31 @@@@ into
d39 2
a40 2
+After shutting down, remove both 
+.IR D /run
d42 1
a42 1
+.IR D /log/run
d45 1
a45 1
+on next reboot.
a49 2
+You can also remove Makefile and tcp (and tcp.cdb) from
+.IR D .
@

