head	1.17;
access;
symbols;
locks; strict;
comment	@# @;


1.17
date	2015.07.19.18.48.52;	author tg;	state Exp;
branches;
next	1.16;
commitid	10055ABF11C1F495374;

1.16
date	2010.09.21.21.23.56;	author tg;	state Exp;
branches;
next	1.15;
commitid	1004C992261692DCA0F;

1.15
date	2008.03.09.17.23.19;	author tg;	state Exp;
branches;
next	1.14;
commitid	10047D41CAA7E715397;

1.14
date	2007.02.22.22.57.55;	author tg;	state Exp;
branches;
next	1.13;
commitid	10045DE1FF10F590776;

1.13
date	2006.11.16.19.25.08;	author tg;	state Exp;
branches;
next	1.12;
commitid	100455CBB28255003D6;

1.12
date	2006.10.13.16.15.50;	author tg;	state Exp;
branches;
next	1.11;
commitid	100452FBBCC2983FF9E;

1.11
date	2006.09.14.00.12.00;	author tg;	state Exp;
branches;
next	1.10;
commitid	10045089C0E234154C3;

1.10
date	2006.08.18.18.05.49;	author tg;	state Exp;
branches;
next	1.9;
commitid	10044E6018100C580D3;

1.9
date	2006.07.27.11.51.42;	author tg;	state Exp;
branches;
next	1.8;
commitid	10044C8A8DA40F956CB;

1.8
date	2006.02.21.19.48.15;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043FB6DF81E8040F6;

1.7
date	2006.02.09.09.36.10;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043EB0C94610EDE76;

1.6
date	2006.02.07.20.17.31;	author tg;	state Exp;
branches;
next	1.5;
commitid	10043E9006872B5FC79;

1.5
date	2005.12.15.13.07.22;	author tg;	state Exp;
branches;
next	1.4;
commitid	10043A16A7849B907A3;

1.4
date	2005.11.04.20.38.43;	author tg;	state Exp;
branches;
next	1.3;
commitid	1df9436bc6dfcf7e;

1.3
date	2005.08.04.16.48.27;	author tg;	state Exp;
branches;
next	1.2;
commitid	3bc042f246f0c819;

1.2
date	2005.07.07.21.24.23;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.48.42;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.48.42;	author tg;	state Exp;
branches;
next	;


desc
@@


1.17
log
@new OpenVPN; modulo HMAC errors thrown on server sideâ€¦
@
text
@# $MirOS: ports/net/openvpn/Makefile,v 1.16 2010/09/21 21:23:56 tg Exp $
# $OpenBSD: Makefile,v 1.2 2003/12/30 21:29:53 sturm Exp $

COMMENT=		easy-to-use, robust, highly configurable VPN solution
DISTNAME=		openvpn-2.3.7
CATEGORIES=		net security
HOMEPAGE=		https://openvpn.net/index.php/open-source.html
MASTER_SITES=		http://swupdate.openvpn.org/community/releases/

# GNU GPLv2-only with OpenSSL exception
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes

FLAVOURS=		no_lzo static
FLAVOUR?=

.if !${FLAVOUR:L:Mno_lzo}
.  if !${FLAVOUR:L:Mstatic}
LIB_DEPENDS+=		lzo2::archivers/lzo
RUN_DEPENDS+=		:lzo->=2.*:archivers/lzo
.  endif
BUILD_DEPENDS+=		:lzo->=2.*:archivers/lzo
.endif

.if ${FLAVOUR:L:Mstatic}
LDSTATIC=		-static
.endif

USE_GMAKE=		Yes
CONFIGURE_STYLE=	autogen
AUTOCONF_NEW=		Yes
AUTOMAKE_VERSION=	1.9
.if ${FLAVOUR:L:Mno_lzo}
CONFIGURE_ARGS+=	--disable-lzo --enable-lzo-stub
.else
CONFIGURE_ARGS+=	--with-lzo-headers=${LOCALBASE:Q}/include \
			--with-lzo-lib=${LOCALBASE:Q}/lib
.endif
CONFIGURE_ARGS+=	--enable-password-save

post-extract:
	-rm -f ${WRKSRC:Q}/m4/{lt,libtool}*

.include <bsd.port.mk>
@


1.16
log
@use arc4random() a bit more efficiently
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.15 2008/03/09 17:23:19 tg Exp $
d5 1
a5 4
VERSION=		2.0.9
DASH_VER=		1
DISTNAME=		openvpn-${VERSION}
PKGNAME=		openvpn-${VERSION:S/_//}-${DASH_VER}
d7 2
a8 2
HOMEPAGE=		http://openvpn.net/
MASTER_SITES=		${HOMEPAGE}release/
d10 1
a10 1
# GNU GPLv2
d32 1
a32 1
CONFIGURE_STYLE=	autoconf
d34 1
d36 1
a36 1
CONFIGURE_ARGS+=	--disable-lzo
d38 2
a39 2
CONFIGURE_ARGS+=	--with-lzo-headers=${LOCALBASE}/include \
			--with-lzo-lib=${LOCALBASE}/lib
d41 1
d43 2
a44 22
SAMPLES_DIR=		${PREFIX}/share/examples/openvpn

post-build:
	for a in ${WRKSRC}/easy-rsa/{,2.0/}[!2W]*; do print \
	    '%g#/bin/bash#s##${SHELL}#g\nwq' | ed -s $$a; done

post-install:
	${INSTALL_DATA_DIR} ${SAMPLES_DIR}
	${INSTALL_DATA_DIR} ${SAMPLES_DIR}/easy-rsa/2.0
	${INSTALL_DATA_DIR} ${SAMPLES_DIR}/sample-config-files
	${INSTALL_DATA_DIR} ${SAMPLES_DIR}/sample-keys
	${INSTALL_DATA_DIR} ${SAMPLES_DIR}/sample-scripts
	${INSTALL_DATA} ${WRKSRC}/easy-rsa/[!2W]* \
	    ${SAMPLES_DIR}/easy-rsa/
	${INSTALL_DATA} ${WRKSRC}/easy-rsa/2.0/* \
	    ${SAMPLES_DIR}/easy-rsa/2.0/
	${INSTALL_DATA} ${WRKSRC}/sample-config-files/* \
	    ${SAMPLES_DIR}/sample-config-files/
	${INSTALL_DATA} ${WRKSRC}/sample-keys/* \
	    ${SAMPLES_DIR}/sample-keys/
	${INSTALL_DATA} ${WRKSRC}/sample-scripts/* \
	    ${SAMPLES_DIR}/sample-scripts/
@


1.15
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.14 2007/02/22 22:57:55 tg Exp $
d6 1
d8 1
a8 1
PKGNAME=		openvpn-${VERSION:S/_//}-0
@


1.14
log
@remove redundancy
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.13 2006/11/16 19:25:08 tg Exp $
d18 2
a19 2
FLAVORS=		no_lzo static
FLAVOR?=
d21 2
a22 2
.if !${FLAVOR:L:Mno_lzo}
.  if !${FLAVOR:L:Mstatic}
d29 1
a29 1
.if ${FLAVOR:L:Mstatic}
d36 1
a36 1
.if ${FLAVOR:L:Mno_lzo}
@


1.13
log
@sync dependency issue
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.12 2006/10/13 16:15:50 tg Exp $
a35 1
CONFIGURE_ARGS+=	--disable-dependency-tracking
@


1.12
log
@update
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.11 2006/09/14 00:12:00 tg Exp $
d22 5
a26 1
LIB_DEPENDS+=		lzo2:lzo->=2.*:archivers/lzo
a30 3
BUILD_DEPENDS+=		${LIB_DEPENDS}
LIB_DEPENDS:=
RUN_DEPENDS:=
@


1.11
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.10 2006/08/18 18:05:49 tg Exp $
d4 2
a5 2
COMMENT=			easy-to-use, robust, highly configurable VPN solution
VERSION=		2.0.7
d7 1
a7 1
PKGNAME=		openvpn-${VERSION:S/_//}-1
d21 4
d27 3
a29 4
.endif

.if !${FLAVOR:L:Mno_lzo}
LIB_DEPENDS+=		lzo2:lzo->=2.*:archivers/lzo
@


1.10
log
@simplify and speed up by using arc4random_pushb and update a comment
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.9 2006/07/27 11:51:42 tg Exp $
d4 1
a4 1
COMMENT=		"easy-to-use, robust, highly configurable VPN solution"
@


1.9
log
@* update to 2.0.7
* add a syslog line to ease reliable use
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.8 2006/02/21 19:48:15 tg Exp $
d7 1
a7 1
PKGNAME=		openvpn-${VERSION:S/_//}-0
@


1.8
log
@* patch-configure_ac: check for arc4random(3), arc4random_push(3)
* patch-crypto_{c,h}: use arc4random(3) if available, for PRNG
* patch-ssl_c: if arc4random_push(3) MirOS extension is available,
  mimic recent ssh(1)/sshd(8) patches and push back randomness
  gained by kex with the peer (tls, both methods) - sadly cannot
  use pings, neither does preshared keys help
* patch-tun_c: reduce diffs while here
* Makefile: bump

checked to run against thorvpn (not patched)
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.7 2006/02/09 09:36:10 tg Exp $
d5 1
a5 1
VERSION=		2.0.5
d7 1
a7 1
PKGNAME=		openvpn-${VERSION:S/_//}-2
@


1.7
log
@remove SEPARATE_BUILD for once and for good, I'm fed up with
all the trouble it can cause - ports which need it (e.g. the
GCC SC doesnt "support" building gcc with srcdir=objdir) can
set stuff like WRKBUILD themselves.
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.6 2006/02/07 20:17:31 tg Exp $
d7 1
a7 1
PKGNAME=		openvpn-${VERSION:S/_//}-1
d29 4
a32 4
USE_GMAKE=	Yes
CONFIGURE_STYLE=autoconf
AUTOCONF_NEW=	Yes
CONFIGURE_ARGS+=--disable-dependency-tracking
d34 1
a34 1
CONFIGURE_ARGS+=--disable-lzo
d36 2
a37 2
CONFIGURE_ARGS+=--with-lzo-headers=${LOCALBASE}/include \
		--with-lzo-lib=${LOCALBASE}/lib
d40 1
a40 1
SAMPLES_DIR=	${PREFIX}/share/examples/openvpn
@


1.6
log
@solve the mkdir_p problem globally
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.5 2005/12/15 13:07:22 tg Exp $
a28 1
SEPARATE_BUILD=	concurrent
@


1.5
log
@* Depend on LZO 2.x, bump patchlevel
* Remove ekkoBSD (we don't support it in all places any more anyway)
* Sort: Open/MirBSD -> MirOS/OpenBSD
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.4 2005/11/04 20:38:43 tg Exp $
a39 1
FAKE_FLAGS+=	mkdir_p='/bin/mkdir -p'
@


1.4
log
@* update to 2.0.5
* add 'static' flavour
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.3 2005/08/04 16:48:27 tg Exp $
d4 7
a10 7
COMMENT=	"easy-to-use, robust, and highly configurable VPN"
VERSION=	2.0.5
DISTNAME=	openvpn-${VERSION}
PKGNAME=	openvpn-${VERSION:S/_//}-0
CATEGORIES=	net security
HOMEPAGE=	http://openvpn.net/
MASTER_SITES=	${HOMEPAGE}release/
d18 1
a18 1
FLAVORS=	no_lzo static
d22 1
a22 1
LDSTATIC=	-static
d26 1
a26 1
LIB_DEPENDS+=	lzo::archivers/lzo
@


1.3
log
@update to 2.0 (final)
@
text
@d1 1
a1 1
# $MirOS: ports/net/openvpn/Makefile,v 1.2 2005/07/07 21:24:23 bsiegert Exp $
d5 1
a5 1
VERSION=	2.0
d18 1
a18 1
FLAVORS=	no_lzo
d21 4
d45 2
a46 2
	for a in ${WRKSRC}/easy-rsa/[!W]*; do print \
	    'g,/bin/bash,s,,${SHELL},g\nwq' | ed -s $$a; done
d50 1
a50 1
	${INSTALL_DATA_DIR} ${SAMPLES_DIR}/easy-rsa
d54 1
a54 1
	${INSTALL_DATA} ${WRKSRC}/easy-rsa/[!W]* \
d56 2
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS$
d5 1
a5 1
VERSION=	2.0_rc6
d10 1
a10 2
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=openvpn/}
#MASTER_SITES=	${HOMEPAGE}beta/
d18 6
a23 1
LIB_DEPENDS=	lzo::archivers/lzo
d29 4
d35 1
d42 1
a42 1
	    'g,/bin/bash,s,,/bin/ksh,g\nwq' | ed -s $$a; done
d50 8
a57 4
	${INSTALL_DATA} ${WRKSRC}/easy-rsa/[!W]* ${SAMPLES_DIR}/easy-rsa/
	${INSTALL_DATA} ${WRKSRC}/sample-config-files/* ${SAMPLES_DIR}/sample-config-files/
	${INSTALL_DATA} ${WRKSRC}/sample-keys/* ${SAMPLES_DIR}/sample-keys/
	${INSTALL_DATA} ${WRKSRC}/sample-scripts/* ${SAMPLES_DIR}/sample-scripts/
@


1.1
log
@Initial revision
@
text
@d7 1
a7 1
PKGNAME=	openvpn-${VERSION:S/_//}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
