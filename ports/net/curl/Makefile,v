head	1.14;
access;
symbols;
locks; strict;
comment	@# @;


1.14
date	2015.10.26.16.00.38;	author tg;	state Exp;
branches;
next	1.13;
commitid	100562E4E3A5F3E752A;

1.13
date	2008.08.26.19.16.09;	author tg;	state Exp;
branches;
next	1.12;
commitid	10048B4569013FE8F6D;

1.12
date	2008.04.06.01.51.20;	author tg;	state Exp;
branches;
next	1.11;
commitid	10047F82CA238603EBA;

1.11
date	2008.04.05.21.54.37;	author tg;	state Exp;
branches;
next	1.10;
commitid	10047F7F52731DD7AAA;

1.10
date	2007.05.12.22.36.11;	author tg;	state Exp;
branches;
next	1.9;
commitid	100464641666E97C039;

1.9
date	2007.05.08.21.05.53;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004640E5FF639A13BF;

1.8
date	2007.02.22.22.57.54;	author tg;	state Exp;
branches;
next	1.7;
commitid	10045DE1FF10F590776;

1.7
date	2006.10.06.21.20.21;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004526C8AC50BC6BF2;

1.6
date	2006.09.14.00.11.37;	author tg;	state Exp;
branches;
next	1.5;
commitid	10045089C0E234154C3;

1.5
date	2006.07.23.16.41.47;	author tg;	state Exp;
branches;
next	1.4;
commitid	10044C3A6CD736EEC62;

1.4
date	2005.12.18.04.54.45;	author tg;	state Exp;
branches;
next	1.3;
commitid	10043A4EBA164AD4904;

1.3
date	2005.12.18.04.21.10;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043A4E3BD5F668F32;

1.2
date	2005.04.22.22.52.41;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.48.03;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.48.03;	author tg;	state Exp;
branches;
next	;


desc
@@


1.14
log
@fix SSLv2 removal fallout
@
text
@# $MirOS: ports/net/curl/Makefile,v 1.13 2008/08/26 19:16:09 tg Exp $
# $OpenBSD: Makefile,v 1.44 2004/05/18 23:30:45 brad Exp $

COMMENT=		get files from FTP, Gopher, HTTP or HTTPS servers
DISTNAME=		curl-7.18.2
DASH_VER=		1
CATEGORIES=		net
MASTER_SITES=		http://curl.haxx.se/download/ \
			ftp://ftp.sunet.se/pub/www/utilities/curl/ \
			ftp://cool.haxx.se/curl/ \
			ftp://ftp.fu-berlin.de/pub/unix/network/curl/ \
			http://curl.linuxworx.com.au/ \
			http://www.cubic.ch/mirror/curl/ \
			http://curl.webmeta.com/ \
			ftp://gd.tuwien.ac.ut/utils/archivers/curl/
HOMEPAGE=		http://curl.haxx.se/

# MIT
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

.include <mirports.sys.mk>

CONFIGURE_STYLE=	autoconf
AUTOCONF_NEW=		yes
MODGNU_TYPESCAN=	recv send getnameinfo
CONFIGURE_ENV+=		ac_cv_path_NROFF=${NROFF:Q}
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--enable-static \
			--enable-http \
			--enable-ftp \
			--enable-file \
			--disable-ldap \
			--disable-ldaps \
			--enable-dict \
			--enable-telnet \
			--enable-tftp \
			--enable-manual \
			--disable-libgcc \
			--enable-ipv6 \
			--enable-nonblocking \
			--enable-thread \
			--disable-ares \
			--enable-verbose \
			--disable-sspi \
			--disable-debug \
			--enable-crypto-auth \
			--enable-cookies \
			--enable-hidden-symbols \
			--without-krb4 \
			--without-spnego \
			--without-gssapi \
			--with-ssl \
			--with-zlib \
			--without-libssh2 \
			--without-gnutls \
			--without-nss \
			--without-ca-bundle \
			--without-libidn

.if !exists(/dev/arandom)
CONFIGURE_ARGS+=	--with-random=/dev/urandom
.else
CONFIGURE_ARGS+=	--with-random=/dev/arandom
.endif

.if ${OStype} == "Interix"
CONFIGURE_ARGS+=	--disable-ipv6
.endif

#XXX suboptimal, better would be to use both or to symlink or flavouriseâ€¦
.if (${OStype} == "MirBSD") && (${SYSCONFDIR} == "/etc")
CONFIGURE_ARGS+=	--with-ca-path=/etc/ssl/certs
.else
CONFIGURE_ARGS+=	--with-ca-path=${LOCALBASE}/share/ca-certificates
RUN_DEPENDS+=		:ca-certificates->=20080406:essentials/ca-certificates
.endif

.if (${OStype} == "OpenBSD") || (${OStype} == "MidnightBSD")
CONFIGURE_ARGS+=	--with-gssapi
.endif

ALL_TARGET=		all examples

# buggy
#REGRESS_DEPENDS+=	::security/stunnel
REGRESS_TARGET=		test-full
# see mircvs://contrib/code/Snippets/posixtz.c
.if exists(/usr/lib/libposixtz.so)
REGRESS_ENV+=		LD_PRELOAD=/usr/lib/libposixtz.so
.endif

post-extract:
	rm -f ${WRKSRC}/src/hugehelp.c

.include <bsd.port.mk>
@


1.13
log
@upgrade
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.12 2008/04/06 01:51:20 tg Exp $
d6 1
@


1.12
log
@01:49âŽœ<mirabilos:#MidnightBSD> say, do you have gssapi?
01:49âŽœ<mirabilos:#MidnightBSD> (kerberos V)
01:49âŽœ<mirabilos:#MidnightBSD> in base, that is
01:50âŽœÂ«laffer1:#midnightbsdÂ» Yeah
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.11 2008/04/05 21:54:37 tg Exp $
d5 1
a5 1
DISTNAME=		curl-7.18.1
@


1.11
log
@update, and donâ€™t ask meâ€¦ itâ€™s sÌ²oÌ² uglyâ€¦
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.10 2007/05/12 22:36:11 tg Exp $
d80 1
a80 2
#XXX what about MidnightBSD?
.if ${OStype} == "OpenBSD"
@


1.10
log
@make autoconf-2.61 default for AUTOCONF_NEW=Yes

ok bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.9 2007/05/08 21:05:53 tg Exp $
d5 1
a5 1
DISTNAME=		curl-7.16.2
d23 2
d27 2
a28 1
MODGNU_TYPESCAN=	recv send strdup strstr getnameinfo
d35 2
d40 4
d47 1
d53 1
d58 1
a61 4
.include <mirports.sys.mk>

CPPFLAGS+=		-DCURL_CA_PATH=\"${SYSCONFDIR}/ssl/certs\"

d70 5
d76 2
a77 1
CONFIGURE_ARGS+=	--enable-ipv6
d80 1
a82 2
.else
CONFIGURE_ARGS+=	--without-gssapi
d85 13
@


1.9
log
@â€¢ upgrade to 7.16.2
â€¢ let this search ${SYSCONFDIR}/etc/ssl/certs by default
  (so that curl https://herc.mirbsd.org/foo works on a default install)

ATTENTION: this port hardcodes ${AUTOCONF_VERSION} instead of relying
on ${AUTOCONF_NEW} to pick the right one because it needs to use
autoconf-2.61 â€“ this should be changed once we make 2.61 standard.
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.8 2007/02/22 22:57:54 tg Exp $
a24 1
AUTOCONF_VERSION=	2.61
@


1.8
log
@remove redundancy
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.7 2006/10/06 21:20:21 tg Exp $
d5 1
a5 1
DISTNAME=		curl-7.15.5
d25 2
d36 1
d38 1
d43 1
d45 2
a48 1
			--with-zlib \
d53 3
a55 1
.if (${OStype} == "Darwin") || (${OStype} == "Interix")
@


1.7
log
@update; fix on non-BSD platforms
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.6 2006/09/14 00:11:37 tg Exp $
d25 1
a25 2
CONFIGURE_ARGS+=	--disable-dependency-tracking \
			${CONFIGURE_SHARED} \
a26 1
			--disable-libtool-lock \
@


1.6
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.5 2006/07/23 16:41:47 tg Exp $
d4 2
a5 2
COMMENT=			get files from FTP, Gopher, HTTP or HTTPS servers
DISTNAME=		curl-7.15.4
d25 3
a27 3
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--with-random="/dev/arandom" \
			--disable-dependency-tracking \
a31 1
			--enable-tftp \
a32 1
			--enable-gopher \
d34 1
d36 2
d39 2
a40 1
			--enable-crypto-auth \
d42 2
d45 1
a45 3
			--without-ca-bundle \
			--without-libidn \
			--disable-libtool-lock
d48 13
a66 5
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/emacs/site-lisp
	cd ${WRKSRC}; ${INSTALL_DATA} curl-style.el \
	    ${PREFIX}/share/emacs/site-lisp/

@


1.5
log
@update to 7.15.4, fixes my configure errors

XXX doesn't build if it's already installed
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.4 2005/12/18 04:54:45 tg Exp $
d4 1
a4 1
COMMENT=		get files from FTP, Gopher, HTTP or HTTPS servers
@


1.4
log
@update to 7.15.1
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.3 2005/12/18 04:21:10 tg Exp $
d4 2
a5 2
COMMENT=		"get files from FTP, Gopher, HTTP or HTTPS servers"
DISTNAME=		curl-7.15.1
d27 2
a30 1
			--enable-gopher \
d32 1
d34 1
d38 1
d41 1
@


1.3
log
@* add configure flags to avoid picking up stuff
* bump patchlevel, just in case
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.2 2005/04/22 22:52:41 tg Exp $
d5 1
a5 2
DISTNAME=		curl-7.13.2
PKGNAME=		${DISTNAME}-1
d40 7
a47 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/curl
a48 1
	cd ${WRKSRC}; ${INSTALL_DATA} README ${PREFIX}/share/doc/curl/
d50 1
a50 1
		${PREFIX}/share/emacs/site-lisp/
@


1.2
log
@simple update
@
text
@d1 1
a1 1
# $MirOS: ports/net/curl/Makefile,v 1.1.7.1 2005/03/18 15:48:03 tg Exp $
d4 13
a16 12
COMMENT=	"get files from FTP, Gopher, HTTP or HTTPS servers"
DISTNAME=	curl-7.13.2
CATEGORIES=	net
MASTER_SITES=	http://curl.haxx.se/download/ \
		ftp://ftp.sunet.se/pub/www/utilities/curl/ \
		ftp://cool.haxx.se/curl/ \
		ftp://ftp.fu-berlin.de/pub/unix/network/curl/ \
		http://curl.linuxworx.com.au/ \
		http://www.cubic.ch/mirror/curl/ \
		http://curl.webmeta.com/ \
		ftp://gd.tuwien.ac.ut/utils/archivers/curl/
HOMEPAGE=	http://curl.haxx.se/
d27 13
a39 1
CONFIGURE_ARGS+=	--with-random="/dev/arandom"
d44 1
a44 1
	cd ${WRKSRC}; ${INSTALL_DATA} README ${PREFIX}/share/doc/curl
d46 1
a46 1
		${PREFIX}/share/emacs/site-lisp
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
d5 1
a5 1
DISTNAME=	curl-7.12.2
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
