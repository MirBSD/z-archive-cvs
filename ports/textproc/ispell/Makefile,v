head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2009.08.16.16.28.37;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004A882F1F72B43308;

1.4
date	2008.10.04.19.03.44;	author tg;	state Exp;
branches;
next	1.3;
commitid	10048E7BD9A0842B398;

1.3
date	2006.09.14.00.14.06;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045089C0E234154C3;

1.2
date	2006.01.01.05.25.30;	author tg;	state Exp;
branches;
next	1.1;
commitid	10043B767D4764EA72A;

1.1
date	2005.03.18.15.52.45;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.52.45;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@change
â€¢ _PASS_CC back from ã€Œmpccã€ to ã€Œ${WRKDIR}/bin/mpccã€ (note that the
  former ã€Œ${WRKDIR:Q}/bin/mpccã€ was wrong)
â€¢ all uses of _PASS_CC to either
  â€£ ${_PASS_CC:T:Q} (when passing, e.g. for libtool â€“ this is for use
    when ${WRKDIR}/bin is in $$PATH)
  â€£ ${_PASS_CC:Q} (when invoking, e.g. in post-build targets â€“ only
    these I saw when mechanically doing this; Benny wants to fix the
    remaining ones; I shouldâ€™ve introduced no more breakage than was)
â€¢ _PASS_CXX/mpcxx just the same

agreed bsiegert@@
@
text
@# $MirOS: ports/textproc/ispell/Makefile,v 1.4 2008/10/04 19:03:44 tg Exp $
# $OpenBSD: Makefile,v 1.37 2004/01/14 17:09:08 jakob Exp $

COMMENT=			interactive spelling checker
COMMENT-dutch=			ispell dictionary for Dutch
COMMENT-french=			ispell dictionary for French
COMMENT-german=			ispell dictionary for German
COMMENT-russian=			ispell dictionary for Russian
COMMENT-portuguese=			ispell dictionary for Portuguese
COMMENT-slovak=			ispell dictionary for Slovak
COMMENT-spanish=			ispell dictionary for Spanish
COMMENT-swedish=			ispell dictionary for Swedish

VERSION=		3.2.06
PL=			1
DISTNAME=		ispell-${VERSION}
PKGNAME=		ispell-${VERSION}-${PL}
CATEGORIES=		textproc
HOMEPAGE=		http://fmg-www.cs.ucla.edu/geoff/ispell.html

MASTER_SITES=		http://fmg-www.cs.ucla.edu/geoff/tars/ \
			ftp://ftp.netsw.org/dict/tools/
MASTER_SITES0=		ftp://ftp.freebsd.org/pub/FreeBSD/ports/distfiles/
MASTER_SITES1=		ftp://ftp.robot.ireq.ca/pub/ispell/
MASTER_SITES2=		ftp://ftp.informatik.uni-kiel.de/pub/kiel/dicts/
MASTER_SITES3=		http://www.sslug.dk/locale/ispell/iswedish/
MASTER_SITES4=		ftp://mch5.chem.msu.su/pub/russian/ispell/ \
			ftp://ftp.afti.nsu.ru/pub/mirrors/russian-ispell/
MASTER_SITES5=		http://natura.di.uminho.pt/~jj/pln/
MASTER_SITES6=		http://ispell.hq.sk/
MASTER_SITES7=		http://www.datsi.fi.upm.es/~coes/

DIST_SUBDIR=		ispell

DUTCH_DICT=		ispell-nl-1.0.0
FRENCH_DICT=		francais-IREQ-1.4
GERMAN_DICT=		hk2-deutsch
SWEDISH_DICT=		iswedish-1.2.1
RUSSIAN_DICT=		rus-ispell-0.99e7
PORTUGUESE_DICT=	UMportugues
SLOVAK_DICT=		ispell-sk-0.2.0
SPANISH_DICT=		espa~nol-1.7

DISTFILES=	${DISTNAME}.tar.gz \
		${DUTCH_DICT}.tar.gz:0 \
		${FRENCH_DICT}.tar.gz:1 \
		${GERMAN_DICT}.tar.gz:2 \
		${SWEDISH_DICT}.tar.gz:3 \
		${RUSSIAN_DICT}.tar.gz:4 \
		${PORTUGUESE_DICT}.tgz:5 \
		${SLOVAK_DICT}.tar.gz:6  \
		${SPANISH_DICT}.tar.gz:7

EXTRACT_ONLY=	${DISTNAME}.tar.gz \
		${DUTCH_DICT}.tar.gz \
		${SWEDISH_DICT}.tar.gz \
		${PORTUGUESE_DICT}.tgz \
		${SLOVAK_DICT}.tar.gz  \
		${SPANISH_DICT}.tar.gz

SUBST_VARS+=	VERSION

MULTI_PACKAGES=	-dutch -french -german -swedish -russian -portuguese \
		-slovak -spanish
.for i in ${MULTI_PACKAGES}
PKGNAME$i=	ispell$i-${VERSION}-${PL}
.endfor
SUBPACKAGE?=

# ispell: BSD-like
# dictionaries: GPL or BSD-like
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

.if defined(PACKAGING) && ${SUBPACKAGE} == "-german"
PERMIT_PACKAGE_CDROM=	"no license"
PERMIT_PACKAGE_FTP=	"no license"
PERMIT_DISTFILES_CDROM=	"no license"
PERMIT_DISTFILES_FTP=	"no license"
.endif
 
.if defined(PACKAGING) && !empty(SUBPACKAGE)
RUN_DEPENDS=	::textproc/ispell
.endif

MAKE_FLAGS=	TMPDIR=${WRKDIR} 

NO_REGRESS=	Yes

post-extract:
	@@mkdir -p ${WRKDIR}/french
	@@(cd ${WRKDIR}/french; \
	tar xzf ${FULLDISTDIR}/${FRENCH_DICT}${EXTRACT_SUFX})

	@@mkdir -p ${WRKDIR}/german
	@@(cd ${WRKDIR}/german; \
	tar xzf ${FULLDISTDIR}/${GERMAN_DICT}${EXTRACT_SUFX})

	@@mkdir -p ${WRKDIR}/russian
	@@(cd ${WRKDIR}/russian; \
	tar xzf ${FULLDISTDIR}/${RUSSIAN_DICT}${EXTRACT_SUFX})
	
	@@(cd ${WRKDIR}/${SPANISH_DICT}/; \
	mv espa~nol.aff spanish.aff; \
	mv espa~nol.words+ spanish.words+)

post-patch:
	@@sed "s%/usr/local%${PREFIX}%g" ${WRKSRC}/local.h.samp > \
		${WRKSRC}/local.h
	@@echo "#define CFLAGS \"${CFLAGS}\"" >> ${WRKSRC}/local.h
	@@echo "#define CC \""${_PASS_CC:T:Q}\" >> ${WRKSRC}/local.h

post-build:
	@@sed "s%/usr/local%${PREFIX}%g" ${FILESDIR}/ispell-config > \
		${WRKDIST}/ispell-config

	@@(cd ${WRKDIR}/${DUTCH_DICT}; \
	${WRKDIST}/buildhash words-nl.ispell nederlands.aff nederlands.hash)

	@@(cd ${WRKDIR}/french; \
	$(MAKE) RM='rm -f' HASH=${WRKDIST}/buildhash)

	@@(cd ${WRKDIR}/german; \
	sort -u *.txt | ./tex2iso >all.words; \
	${WRKDIST}/buildhash all.words deutsch.aff deutsch.hash)

	@@(cd ${WRKDIR}/${SWEDISH_DICT}; \
	${WRKDIST}/buildhash svenska.datalista svenska.aff svenska.hash)

	@@(cd ${WRKDIR}/russian; \
	sort -u base.koi computer.koi geography.koi science.koi >all.words; \
	sed -e "s/^\#y//;s/^\#koi/wordchars/" < russian.aff.koi > russian.aff; \
	${WRKDIST}/buildhash all.words russian.aff russian.hash)

	@@(cd ${WRKDIR}/portugues; \
	${WRKDIST}/buildhash portugues.dic portugues.aff portuguese.hash; \
	cp portugues.aff portuguese.aff)

	@@(cd ${WRKDIR}/${SLOVAK_DICT}; \
	cat *.words | sort -u -f > slovak.words; \
	${WRKDIST}/buildhash slovak.words slovak.aff slovak.hash)

	@@(cd ${WRKDIR}/${SPANISH_DICT}; \
	${WRKDIST}/buildhash spanish.words+ spanish.aff spanish.hash)

do-install:
	${INSTALL_PROGRAM} ${WRKDIST}/ispell ${PREFIX}/bin/ispell
	${INSTALL_PROGRAM} ${WRKDIST}/buildhash ${PREFIX}/bin/buildhash
	${INSTALL_PROGRAM} ${WRKDIST}/tryaffix ${PREFIX}/bin/tryaffix
	${INSTALL_PROGRAM} ${WRKDIST}/ijoin ${PREFIX}/bin/ijoin
	${INSTALL_PROGRAM} ${WRKDIST}/findaffix ${PREFIX}/bin/findaffix
	${INSTALL_PROGRAM} ${WRKDIST}/munchlist ${PREFIX}/bin/munchlist
	${INSTALL_PROGRAM} ${WRKDIST}/icombine ${PREFIX}/bin/icombine
	${INSTALL_SCRIPT} ${WRKDIST}/ispell-config ${PREFIX}/bin/ispell-config

	${INSTALL_MAN} ${WRKDIST}/ispell.1 ${PREFIX}/man/man1/ispell.1
	ln -s ispell.1 ${PREFIX}/man/man1/buildhash.1
	ln -s ispell.1 ${PREFIX}/man/man1/munchlist.1
	ln -s ispell.1 ${PREFIX}/man/man1/findaffix.1
	ln -s ispell.1 ${PREFIX}/man/man1/tryaffix.1
	${INSTALL_MAN} ${WRKDIST}/ispell.4 ${PREFIX}/man/man4/ispell.4
	ln -s ispell.4 ${PREFIX}/man/man4/english.4

	${INSTALL_DATA_DIR} ${PREFIX}/lib/ispell

	${INSTALL_DATA} ${WRKDIST}/languages/english/english.aff \
		${PREFIX}/lib/ispell/american.aff
	ln -s american.aff ${PREFIX}/lib/ispell/british.aff
	${INSTALL_DATA} ${WRKDIST}/languages/american/americanmed+.hash \
		${PREFIX}/lib/ispell/americanmed+.hash
	ln -s americanmed+.hash ${PREFIX}/lib/ispell/american.hash
	${INSTALL_DATA} ${WRKDIST}/languages/british/britishxlg.hash \
		${PREFIX}/lib/ispell/britishxlg.hash
	ln -s britishxlg.hash ${PREFIX}/lib/ispell/british.hash

	ln -s american.aff ${PREFIX}/lib/ispell/default.aff
	ln -s american.hash ${PREFIX}/lib/ispell/default.hash

	${INSTALL_DATA} ${WRKDIR}/${DUTCH_DICT}/nederlands.{aff,hash} \
		${PREFIX}/lib/ispell
	${INSTALL_DATA} ${WRKDIR}/german/deutsch.{aff,hash} \
		${PREFIX}/lib/ispell
	${INSTALL_DATA} ${WRKDIR}/french/francais.{aff,hash} \
		${PREFIX}/lib/ispell
	${INSTALL_DATA} ${WRKDIR}/${SWEDISH_DICT}/svenska.{aff,hash} \
		${PREFIX}/lib/ispell
	${INSTALL_DATA} ${WRKDIR}/russian/russian.{aff,hash} \
		${PREFIX}/lib/ispell
	${INSTALL_DATA} ${WRKDIR}/portugues/portuguese.{aff,hash} \
		${PREFIX}/lib/ispell
	${INSTALL_DATA} ${WRKDIR}/${SLOVAK_DICT}/slovak.{aff,hash} \
		${PREFIX}/lib/ispell
	${INSTALL_DATA} ${WRKDIR}/${SPANISH_DICT}/spanish.{aff,hash} \
		${PREFIX}/lib/ispell

.include <bsd.port.mk>
@


1.4
log
@mass conversion from
â€¢ ${CC}
â€¢ "${CC}"
â€¢ '${CC}'
â€¢ ${CC:Q}
to ${_PASS_CC:Q} (or without :Q if itâ€™s executed, not assigned), and
same for CXXâ€¦ most of these are VERY UGLY, prone to break with ccache
and maybe even withoutâ€¦
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/ispell/Makefile,v 1.3 2006/09/14 00:14:06 tg Exp $
d113 1
a113 1
	@@echo "#define CC \""${_PASS_CC:Q}\" >> ${WRKSRC}/local.h
@


1.3
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/ispell/Makefile,v 1.2 2006/01/01 05:25:30 tg Exp $
d113 1
a113 1
	@@echo "#define CC \"${CC}\"" >> ${WRKSRC}/local.h
@


1.2
log
@regen (2910)
@
text
@d1 1
a1 1
# $MirOS$
d4 9
a12 9
COMMENT=		"interactive spelling checker"
COMMENT-dutch=		"ispell dictionary for Dutch"
COMMENT-french=		"ispell dictionary for French"
COMMENT-german=		"ispell dictionary for German"
COMMENT-russian=	"ispell dictionary for Russian"
COMMENT-portuguese=	"ispell dictionary for Portuguese"
COMMENT-slovak=		"ispell dictionary for Slovak"
COMMENT-spanish=	"ispell dictionary for Spanish"
COMMENT-swedish=	"ispell dictionary for Swedish"
@


1.1
log
@Initial revision
@
text
@d1 1
d14 18
a31 18
VERSION=	3.2.06
DISTNAME=	ispell-${VERSION}
CATEGORIES=	textproc


HOMEPAGE=	http://fmg-www.cs.ucla.edu/geoff/ispell.html

MASTER_SITES=	http://fmg-www.cs.ucla.edu/geoff/tars/ \
		ftp://ftp.netsw.org/dict/tools/
MASTER_SITES0=	ftp://ftp.freebsd.org/pub/FreeBSD/ports/distfiles/
MASTER_SITES1=	ftp://ftp.robot.ireq.ca/pub/ispell/
MASTER_SITES2=	ftp://ftp.informatik.uni-kiel.de/pub/kiel/dicts/
MASTER_SITES3=	http://www.sslug.dk/locale/ispell/iswedish/
MASTER_SITES4=	ftp://mch5.chem.msu.su/pub/russian/ispell/ \
		ftp://ftp.afti.nsu.ru/pub/mirrors/russian-ispell/
MASTER_SITES5=	http://natura.di.uminho.pt/~jj/pln/
MASTER_SITES6=	http://ispell.hq.sk/
MASTER_SITES7=	http://www.datsi.fi.upm.es/~coes/
d33 1
a33 1
DIST_SUBDIR=	ispell
d66 1
a66 1
PKGNAME$i=	ispell$i-${VERSION}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
