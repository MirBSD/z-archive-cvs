head	1.23;
access;
symbols;
locks; strict;
comment	@# @;


1.23
date	2014.05.28.23.06.45;	author tg;	state Exp;
branches;
next	1.22;
commitid	10053866C040253497F;

1.22
date	2013.09.11.16.54.11;	author tg;	state Exp;
branches;
next	1.21;
commitid	1005230A03A3108396A;

1.21
date	2013.08.06.20.58.57;	author tg;	state Exp;
branches;
next	1.20;
commitid	1005201639C3190B657;

1.20
date	2010.11.19.17.15.12;	author bsiegert;	state Exp;
branches;
next	1.19;
commitid	1004CE6B08E772CE0A2;

1.19
date	2010.08.16.19.40.31;	author bsiegert;	state Exp;
branches;
next	1.18;
commitid	1004C69942A73B3B85A;

1.18
date	2008.08.26.17.17.39;	author tg;	state Exp;
branches;
next	1.17;
commitid	10048B43A916C2C9058;

1.17
date	2008.05.02.15.10.41;	author tg;	state Exp;
branches;
next	1.16;
commitid	100481B2EDD3FE86B26;

1.16
date	2008.03.16.17.36.30;	author bsiegert;	state Exp;
branches;
next	1.15;
commitid	10047DD5A7458E37A87;

1.15
date	2008.03.09.17.23.35;	author tg;	state Exp;
branches;
next	1.14;
commitid	10047D41CAA7E715397;

1.14
date	2008.01.22.20.18.23;	author bsiegert;	state Exp;
branches;
next	1.13;
commitid	10047964FA600006676;

1.13
date	2007.06.22.22.29.41;	author bsiegert;	state Exp;
branches;
next	1.12;
commitid	100467C4D487CE80FA6;

1.12
date	2007.02.22.22.57.58;	author tg;	state Exp;
branches;
next	1.11;
commitid	10045DE1FF10F590776;

1.11
date	2007.01.25.21.54.43;	author bsiegert;	state Exp;
branches;
next	1.10;
commitid	10045B926E13A555E4E;

1.10
date	2006.10.11.15.27.47;	author bsiegert;	state Exp;
branches;
next	1.9;
commitid	100452D0D7710117EE0;

1.9
date	2006.09.14.00.14.08;	author tg;	state Exp;
branches;
next	1.8;
commitid	10045089C0E234154C3;

1.8
date	2006.02.01.16.28.03;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043E0E1771404AF56;

1.7
date	2006.01.25.17.53.02;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043D7BAF83724A905;

1.6
date	2005.12.27.13.54.47;	author bsiegert;	state Exp;
branches;
next	1.5;
commitid	10043B147A32D6A68F4;

1.5
date	2005.12.22.21.05.46;	author bsiegert;	state Exp;
branches;
next	1.4;
commitid	10043AB152058E6F1D8;

1.4
date	2005.07.23.17.44.24;	author bsiegert;	state Exp;
branches;
next	1.3;
commitid	409342e281f097c0;

1.3
date	2005.07.19.18.11.39;	author bsiegert;	state Exp;
branches;
next	1.2;
commitid	5f4d42dd425c98a0;

1.2
date	2005.07.07.21.26.49;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.52.47;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.52.47;	author tg;	state Exp;
branches;
next	;


desc
@@


1.23
log
@add U-A header to allow this to (extremely slowly) d/l DTDs from the W3C

(find an offline method, this is unusable IRL)
@
text
@# $MirOS: ports/textproc/libxml/Makefile,v 1.22 2013/09/11 16:54:11 tg Exp $
# $OpenBSD: Makefile,v 1.76 2004/04/21 04:42:26 robert Exp $

COMMENT=		XML parsing library
MODPY_EGG_VERSION=	2.6.32
DASH_VER=		3
DISTNAME=		libxml2-${MODPY_EGG_VERSION}
PKGNAME=		libxml-${MODPY_EGG_VERSION}-${DASH_VER}
CATEGORIES=		textproc
MASTER_SITES=		ftp://xmlsoft.org/libxml2/old/ \
			${HOMEPAGE}sources/old/ \
			${MASTER_SITE_GNOME:=sources/libxml2/2.6/}
HOMEPAGE=		http://xmlsoft.org/

# BSD-like
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MODULES+=		converters/libiconv
MODULES+=		devel/pkgconfig
MODULES+=		lang/python

CONFIGURE_STYLE=	autoconf
AUTOCONF_NEW=		Yes
MODPY_USE_DISTUTILS=	No
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--enable-static
CONFIGURE_ARGS+=	--with-html-dir=${PREFIX:Q}/share/doc
CONFIGURE_ARGS+=	--with-html-subdir=libxml2/html
CONFIGURE_ARGS+=	--with-iconv=${ICONV_PREFIX:Q}
CONFIGURE_ARGS+=	--with-zlib
CONFIGURE_ARGS+=	--without-readline
CONFIGURE_ARGS+=	--without-threads
CONFIGURE_ARGS+=	--with-python=${LOCALBASE}/bin/python${MODPY_VERSION}

CPPFLAGS+=		-DMIRPORTS_LOCALBASE=\"${LOCALBASE:Q}\"

post-extract:
	# WTF?!
	rm -f ${WRKSRC:Q}/win32/Makefile.msvc.*

post-install:
	${INSTALL_DATA_DIR} ${PREFIX:Q}/share/examples
	env LD_LIBRARY_PATH=${PREFIX:Q}/lib DYLD_ROOT_PATH=${WRKINST:Q} \
	    ${PREFIX:Q}/bin/xmlcatalog --noout --create \
	    ${PREFIX:Q}/share/examples/xmlcatalog

.include <bsd.port.mk>
@


1.22
log
@cherry-pick an upstream commit fixing zlib abuse of internals (using API instead)
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.21 2013/08/06 20:58:57 tg Exp $
d6 1
a6 1
DASH_VER=		2
@


1.21
log
@mark as BROKEN with libz from -current
will fix that but let me get base into shape first
@
text
@d1 1
a1 4
# 2.7.6 -> 2.7.7
BROKEN=			needs MFC to work with -current libz

# $MirOS: ports/textproc/libxml/Makefile,v 1.20 2010/11/19 17:15:12 bsiegert Exp $
d6 1
a6 1
DASH_VER=		1
d11 1
a11 1
			${HOMEPAGE}sources/ \
d40 4
@


1.20
log
@Use python version specified in MODPY_VERSION.
@
text
@d1 4
a4 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.19 2010/08/16 19:40:31 bsiegert Exp $
@


1.19
log
@The sources are now in old/
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.18 2008/08/26 17:17:39 tg Exp $
d6 1
d36 1
a36 1
CONFIGURE_ARGS+=	--with-python
@


1.18
log
@upgrade libxml and fold python flavour into main, since it was on by
default anyway, and, while I hate compiling this huge crap, less flavours
are actually a good thing (bsiegert@@ removed python's flavours too...)

while here, make it use the python module, and, as such, no longer
hard-code the use of python 2.3
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.17 2008/05/02 15:10:41 tg Exp $
d9 1
a9 1
MASTER_SITES=		ftp://xmlsoft.org/libxml2/ \
@


1.17
log
@| B_R_DEPENDS+= ::python/2.3,no_cxx
has _two_ effects:
â€¢ if not installed, build no_cxx flavour by default â€“ desired
â€¢ if !no_cxx flavour is installed, fail â€“ not quite soâ€¦
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.16 2008/03/16 17:36:30 bsiegert Exp $
d5 3
a7 4
VERSION=		2.6.31
DASH_VER=		2
DISTNAME=		libxml2-${VERSION}
PKGNAME=		libxml-${VERSION}-${DASH_VER}
d20 1
a20 4
FLAVOURS=		python
FLAVOUR?=		python

MODULES=		converters/libiconv
d22 1
a22 2

SUBST_VARS+=		VERSION
d26 1
d29 3
a31 3
CONFIGURE_ARGS+=	--with-html-dir="${PREFIX}/share/doc"
CONFIGURE_ARGS+=	--with-html-subdir="libxml2/html"
CONFIGURE_ARGS+=	--with-iconv="${ICONV_PREFIX}"
d35 1
a38 7
.if ${FLAVOUR:L:Mpython}
CONFIGURE_ARGS+=	--with-python
B_R_DEPENDS+=		::lang/python/2.3
.else
CONFIGURE_ARGS+=	--without-python
.endif

d40 1
a40 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples
d42 2
a43 2
		${PREFIX}/bin/xmlcatalog --noout --create \
		${PREFIX}/share/examples/xmlcatalog
@


1.16
log
@Correct plist for python flavour, make python flavour the default, bump
patchlevel.

If python is not the default, at some point in a bulk build, things will break
because libxml without python is already installed.
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.15 2008/03/09 17:23:35 tg Exp $
d6 1
a6 1
DASH_VER=		1
d44 1
a44 1
B_R_DEPENDS+=		::lang/python/2.3,no_cxx
@


1.15
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.14 2008/01/22 20:18:23 bsiegert Exp $
d6 1
a6 1
DASH_VER=		0
d22 1
a22 1
FLAVOUR?=		
d27 2
@


1.14
log
@SECURITY: Update to 2.6.31-0. Fixes a UTF-8 handling vulnerability.
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.13 2007/06/22 22:29:41 bsiegert Exp $
d21 2
a22 2
FLAVORS=		python
FLAVOR?=		
d40 1
a40 1
.if ${FLAVOR:L:Mpython}
@


1.13
log
@Add a python flavour that builds and installs the python bindings---
required for gnome-doc-utils. Bump patchlevel.
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.12 2007/02/22 22:57:58 tg Exp $
d5 2
a6 2
VERSION=		2.6.27
DASH_VER=		1
d8 1
a8 1
PKGNAME=		libxml-${VERSION}-1
d22 1
a22 1
FLAVOR?=
@


1.12
log
@remove redundancy
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.11 2007/01/25 21:54:43 bsiegert Exp $
d6 1
d8 1
a8 1
PKGNAME=		libxml-${VERSION}-0
d21 3
a34 1
CONFIGURE_ARGS+=	--without-python
d40 7
@


1.11
log
@Update libxml to 2.6.27-0. Speed up build and change the catalog handling:
Create an empty catalog during fake and install it via @@sample. The old
method would wipe out your existing catalog file during package upgrades,
which is definitely not what you want.
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.10 2006/10/11 15:27:47 bsiegert Exp $
a33 2
CONFIGURE_ARGS+=	--disable-dependency-tracking
CONFIGURE_ARGS+=	--disable-libtool-lock
@


1.10
log
@Update libxml to latest patch release (2.6.26)
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.9 2006/09/14 00:14:08 tg Exp $
d4 2
a5 2
COMMENT=			XML parsing library
VERSION=		2.6.26
d9 2
a10 2
MASTER_SITES=		${HOMEPAGE}sources/ \
			ftp://xmlsoft.org/ \
d34 2
d39 6
@


1.9
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.8 2006/02/01 16:28:03 tg Exp $
d5 1
a5 1
VERSION=		2.6.23
@


1.8
log
@add USE_ICONV variable to MODULES=converters/libiconv which
defaults to any -> doesn't pull in the port under Darwin and
MirOS-current, uses libiconv (GNU or BSD) in base
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.7 2006/01/25 17:53:02 tg Exp $
d4 1
a4 1
COMMENT=		"XML parsing library"
@


1.7
log
@* update to 2.6.23
* move database from /var/db to LOCALBASE/db
* add zlib support
* use pkgconfig module
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.6 2005/12/27 13:54:47 bsiegert Exp $
d29 1
a29 1
CONFIGURE_ARGS+=	--with-iconv="${LOCALBASE}"
@


1.6
log
@Oops, forgot to update the plist. Bump patchlevel.
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.5 2005/12/22 21:05:46 bsiegert Exp $
d5 1
a5 1
VERSION=		2.6.22
d7 1
a7 1
PKGNAME=		libxml-${VERSION}-3
d12 1
a12 1
HOMEPAGE=		http://xmlsoft.org/ 
a19 1
BUILD_DEPENDS=		:pkgconfig-*:devel/pkgconfig
d21 1
d23 1
a24 1
CONFIGURE_STYLE=	autoconf gnu
d30 1
d32 1
d35 2
@


1.5
log
@Update to libxml-2.6.22
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.4 2005/07/23 17:44:24 bsiegert Exp $
d7 1
a7 1
PKGNAME=		libxml-${VERSION}-2
@


1.4
log
@Fix library name, bump patchlevel. Needs the latest unlibtoolise update.
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.3 2005/07/19 18:11:39 bsiegert Exp $
d5 1
a5 1
VERSION=		2.6.14
@


1.3
log
@libtoolise plist, bump patchlevel
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/libxml/Makefile,v 1.2 2005/07/07 21:26:49 bsiegert Exp $
d7 1
a7 1
PKGNAME=		libxml-${VERSION}-1
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS$
d7 1
a7 1
PKGNAME=		libxml-${VERSION}-0
@


1.1
log
@Initial revision
@
text
@d7 1
a7 1
PKGNAME=		libxml-${VERSION}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
