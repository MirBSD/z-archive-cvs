head	1.9;
access;
symbols;
locks; strict;
comment	@# @;


1.9
date	2015.10.27.16.50.52;	author tg;	state Exp;
branches;
next	1.8;
commitid	100562FAB807E219849;

1.8
date	2008.03.23.16.16.31;	author tg;	state Exp;
branches;
next	1.7;
commitid	10047E6826B1A8A0541;

1.7
date	2008.03.09.17.23.35;	author tg;	state Exp;
branches;
next	1.6;
commitid	10047D41CAA7E715397;

1.6
date	2007.04.29.23.53.06;	author tg;	state Exp;
branches;
next	1.5;
commitid	10046352FE923ADC162;

1.5
date	2007.04.03.19.45.31;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004612AC977E789195;

1.4
date	2006.10.27.15.52.27;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045422B5071789216;

1.3
date	2006.10.06.14.51.13;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045266D52555711A7;

1.2
date	2006.10.06.14.43.44;	author tg;	state Exp;
branches;
next	1.1;
commitid	10045266BA047B453AA;

1.1
date	2006.08.10.23.01.32;	author tg;	state Exp;
branches;
next	;
commitid	10044DBBA8373B189FF;


desc
@@


1.9
log
@more Attic…
@
text
@# $MirOS: ports/textproc/groff/Makefile,v 1.8 2008/03/23 16:16:31 tg Exp $

# probably easy to add others, but packing list is different
ONLY_FOR_PLATFORM=		MirBSD:*:* Interix:*:*

COMMENT=			GNU troff compatible typesetter
COMMENT-docs=			documentation for groff
CATEGORIES=			textproc
VERSION=			1.19.2
DASH_VER=			3
DISTNAME=			groff-${VERSION}
PKGNAME-docs=			groff-docs-${VERSION}-${DASH_VER}
HOMEPAGE=			http://www.gnu.org/software/groff/
RESPONSIBLE=			Thorsten Glaser <tg@@mirbsd.de>
MASTER_SITES=			${MASTER_SITE_GNU:=groff/old/}
SUBST_VARS+=			VERSION

# GNU GPL Version 2 or later
PERMIT_DISTFILES_CDROM=		Yes
PERMIT_DISTFILES_FTP=		Yes
PERMIT_PACKAGE_CDROM=		Yes
PERMIT_PACKAGE_FTP=		Yes

FLAVOURS=			no_x11
FLAVOUR?=

MULTI_PACKAGES=			-docs
SUBPACKAGE?=

.if ${SUBPACKAGE} == "-docs"
PERMIT_PACKAGE_CDROM=		"GNU FDL 1.2"
PERMIT_PACKAGE_FTP=		"GNU FDL 1.2"
.else
B_R_DEPENDS+=			${GROFF_DEPENDS}
.endif

.if !${FLAVOUR:Mno_x11}
GROFF_DEPENDS+=			:ghostscript-*:print/ghostscript/artifex
GROFF_DEPENDS+=			:psutils-*:print/psutils
GROFF_DEPENDS+=			:netpbm-*:graphics/netpbm
USE_X11=			Yes
.endif

USE_CXX=			Yes
CONFIGURE_STYLE=		autoconf dest
AUTOCONF_NEW=			Yes
CONFIGURE_ENV+=			PAGE=A4
EXTRA_XAKE_FLAGS+=		indexdir=/usr/share/dict/papers

.if ${FLAVOUR:Mno_x11}
CONFIGURE_ARGS+=		--without-x
CONFIGURE_ARGS+=		--without-gs
EXTRA_XAKE_FLAGS+=		make_html= make_install_html=
EXTRA_XAKE_FLAGS+=		make_pdfdoc= make_install_pdfdoc=
EXTRA_XAKE_FLAGS+=		DEVICE=utf8 OTHERDEVDIRS=
.else
CONFIGURE_ARGS+=		--with-appresdir=${_DESTPFX}${PREFIX}/lib/X11/app-defaults
EXTRA_XAKE_FLAGS+=		make_html=html make_pdfdoc=pdfdoc
EXTRA_XAKE_FLAGS+=		make_install_html=install_html
EXTRA_XAKE_FLAGS+=		make_install_pdfdoc=install_pdfdoc
.endif

post-extract:
	-rm -f ${WRKSRC}/doc/groff{,-*}

post-install:
	mv -f ${PREFIX}/info/groff ${PREFIX}/info/groff.info
	(cat /etc/man.conf 2>&- || :) | sed \
	    -e 's!/usr/bin/nrcon!nroff!g' \
	    -e 's!/usr/bin/nroff!nroff!g' \
	    -e 's!nroff!g& -c!g' \
	    -e 's!/usr/bin/tbl!tbl!g' \
	    -e 's!tbl!g&!g' \
	    -e 's!\.gtbl!.tbl!' \
	    >${PREFIX}/share/groff/man.conf
	cd ${PREFIX}/share/groff && \
	    sed -e 's!gnroff!& -Tascii!g' man.conf >man_7bit.conf && \
	    sed -e 's!gnroff!& -Tlatin1!g' man.conf >man_ltn1.conf && \
	    sed -e 's!gnroff!& -Tutf8!g' man.conf >man_utf8.conf
	cd ${FILESDIR} && ${INSTALL_DATA} an.tmac andoc.tmac gan.tmac \
	    ${PREFIX}/lib/groff/site-tmac/
	cd ${PREFIX}/share/groff/${VERSION}/tmac && ln -f doc.tmac gdoc.tmac

.include <bsd.port.mk>
@


1.8
log
@install three more man.conf examples, for ASCII, ISO-8859-1 and UTF-8 fixed
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/groff/Makefile,v 1.7 2008/03/09 17:23:35 tg Exp $
d15 1
a15 1
MASTER_SITES=			${MASTER_SITE_GNU:=groff/}
@


1.7
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/groff/Makefile,v 1.6 2007/04/29 23:53:06 tg Exp $
d10 1
a10 1
PL=				2
d12 1
a12 2
PKGNAME=			groff-${VERSION}-${PL}
PKGNAME-docs=			groff-docs-${VERSION}-${PL}
d76 4
@


1.6
log
@rename “console” flavour to “no_x11” in accordance with bsiegert@@'s new policy
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/groff/Makefile,v 1.5 2007/04/03 19:45:31 tg Exp $
d25 2
a26 2
FLAVORS=			no_x11
FLAVOR?=
d38 1
a38 1
.if !${FLAVOR:Mno_x11}
d51 1
a51 1
.if ${FLAVOR:Mno_x11}
@


1.5
log
@• remove ports that are simply broken, don't work, for too long, with no
  update or update-willing person in sight, kde stuff, web2.0 stuff that
  we don't want in ports (just stuff it into /var/www yourself, it isn't
  that difficult, right?), stuff for which no new version exists/will be
  and some obsd cruft; adjust dependencies
• no BUILD_DEPENDS+=RUN_DEPENDS or vice versa any more, *ever*
• fix some other stuff partially

ok bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/groff/Makefile,v 1.4 2006/10/27 15:52:27 tg Exp $
d25 1
a25 1
FLAVORS=			console
d38 1
a38 1
.if !${FLAVOR:L:Mconsole}
d51 1
a51 1
.if ${FLAVOR:L:Mconsole}
@


1.4
log
@fix -mandoc to use both BSD thingies, because it is used from our Makefiles etc.
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/groff/Makefile,v 1.3 2006/10/06 14:51:13 tg Exp $
d35 1
a35 2
BUILD_DEPENDS+=			${GROFF_DEPENDS}
RUN_DEPENDS+=			${GROFF_DEPENDS}
@


1.3
log
@also, change default flavour to non-console, to get postscript etc. output,
as our base nroff is good enough for the console case, and nothing depends
specifically on gnroff in mirports
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/groff/Makefile,v 1.2 2006/10/06 14:43:44 tg Exp $
d10 1
a10 1
PL=				1
d78 2
a79 2
	${INSTALL_DATA} ${FILESDIR}/{,g}an.tmac ${PREFIX}/lib/groff/site-tmac/
	cd ${PREFIX}/lib/groff/site-tmac && ln -f an.tmac andoc.tmac
@


1.2
log
@in man.conf, .tbl .tbl.Z .tbl.gz suffixes should be kept ;)
fixes: gman fetchmail (after fetchmail update)
@
text
@d1 1
a1 1
# $MirOS: ports/textproc/groff/Makefile,v 1.1 2006/08/10 23:01:32 tg Exp $
d26 1
a26 1
FLAVOR?=			console
@


1.1
log
@add a port of GNU groff, with a 'console' flavour, selected by default,
preventing dependencies on netpbm, ghostscript and psutils, but containing
only text (no HTML, PS, PDF, DVI, printer, X11, etc.) output and not all
tools; documentation is splitted for licence reasons

took me the better part of the afternoon and evening, now I'd better
get lunch ;) tested on and designed for MirOS, should be usable on
Interix as well
@
text
@d1 1
a1 1
# $MirOS$
d10 1
a10 1
PL=				0
d75 3
a77 1
	    -e 's!tbl!g&!g' >${PREFIX}/share/groff/man.conf
@

