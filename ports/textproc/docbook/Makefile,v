head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2007.01.29.20.17.01;	author bsiegert;	state Exp;
branches;
next	1.4;
commitid	10045BE563158077896;

1.4
date	2006.09.14.00.14.03;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045089C0E234154C3;

1.3
date	2006.02.09.09.36.19;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043EB0C94610EDE76;

1.2
date	2005.07.07.21.26.46;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.52.42;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.52.42;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Correct location of XML catalog

tg@@, was that you who changed it from /var/db to $LOCALBASE/db?
@
text
@# $OpenBSD: Makefile,v 1.18 2003/06/17 16:20:04 marcm Exp $
# $MirOS$

COMMENT=	technical documentation XML/SGML definitions

DISTNAME=	docbook-4.2
DASH_VER=	2
DIST_SUBDIR=	docbook
CATEGORIES=	textproc

ROOT_SITE=	http://www.oasis-open.org/docbook/
MIRROR_SITE=	http://www.docbook.org/
HOMEPAGE=	http://www.oasis-open.org/docbook/

MASTER_SITES0=	${ROOT_SITE}/sgml/2.4.1/ 
MASTER_SITES1=	${ROOT_SITE}/sgml/3.0/
MASTER_SITES2=	${ROOT_SITE}/sgml/3.1/ ${MIRROR_SITE}/sgml/3.1/
MASTER_SITES3=	${ROOT_SITE}/sgml/4.0/ ${MIRROR_SITE}/sgml/4.0/
MASTER_SITES4=	${ROOT_SITE}/sgml/4.1/ ${MIRROR_SITE}/sgml/4.1/
MASTER_SITES5=	${ROOT_SITE}/xml/4.1/ ${MIRROR_SITE}/xml/4.1/
MASTER_SITES6=	${ROOT_SITE}/xml/4.1.2/ ${MIRROR_SITE}/xml/4.1.2/
MASTER_SITES7=	${ROOT_SITE}/xml/4.2/ ${MIRROR_SITE}/xml/4.2/
MASTER_SITES8=	http://www.docbook.org/tdg/

DISTFILES=	docbk241.zip:0 docbk30.zip:1 docbk31.zip:2 docbk40.zip:3 docbk41.zip:4 docbkx41.zip:5 docbkx412.zip:6 docbook-xml-4.2.zip:7 examples.zip:8


# permission granted in dtd copyright notice
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

NO_BUILD=       Yes
NO_REGRESS=	Yes

SGML_VERSIONS=	2.4.1 3.0 3.1 4.0 4.1
XML_VERSIONS=	4.1 4.1.2 4.2

SGML_INSTDIR=	${PREFIX}/share/sgml/docbook
XML_INSTDIR=	${PREFIX}/share/xml/docbook

BUILD_DEPENDS=	:libxml->=2.5.7:textproc/libxml
RUN_DEPENDS=	::textproc/iso8879 \
		:docbook-dsssl-*:textproc/docbook-dsssl \
		:libxml->=2.5.7:textproc/libxml

.for i in ${SGML_VERSIONS} ${XML_VERSIONS:C/(.+)/x\1/g}
EXTRACT_CASES+=	*docbk${i:S/.//g}.zip) unzip -qa ${FULLDISTDIR}/$$archive -d ${WRKDIR}/$i;;
.endfor

# new naming system for recent docbook versions
EXTRACT_CASES+=	*docbook-xml-4.2.zip) unzip -qa ${FULLDISTDIR}/$$archive -d ${WRKDIR}/x4.2;;

do-install:
	${INSTALL_DATA_DIR} ${SGML_INSTDIR} ${XML_INSTDIR}
	${INSTALL_DATA} ${FILESDIR}/sgml_catalog ${PREFIX}/share/sgml/catalog
	${INSTALL_DATA} ${FILESDIR}/sgml_db_catalog ${SGML_INSTDIR}/catalog
	${INSTALL_DATA} ${FILESDIR}/xml_catalog ${PREFIX}/share/xml/catalog
	${INSTALL_DATA} ${FILESDIR}/xml_db_catalog ${XML_INSTDIR}/catalog
.for i in ${SGML_VERSIONS}
	${INSTALL_DATA_DIR} ${SGML_INSTDIR}/$i
	${INSTALL_DATA} ${WRKDIR}/$i/* ${SGML_INSTDIR}/$i
	${INSTALL_DATA} ${FILESDIR}/sgml_db${i:S/.//g}_catalog ${SGML_INSTDIR}/$i/catalog
.endfor
.for i in ${XML_VERSIONS}
	${INSTALL_DATA_DIR} ${XML_INSTDIR}/$i ${XML_INSTDIR}/$i/ent
	${INSTALL_DATA} ${WRKDIR}/x$i/*.* ${XML_INSTDIR}/$i
	${INSTALL_DATA} ${WRKDIR}/x$i/ent/* ${XML_INSTDIR}/$i/ent
	${INSTALL_DATA} ${FILESDIR}/xml_db${i:S/.//g}_catalog ${XML_INSTDIR}/$i/catalog
.endfor
	sh ${FILESDIR}/makemastercatalog

.include <bsd.port.mk>
@


1.4
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d2 1
d4 1
a4 1
COMMENT=			technical documentation XML/SGML definitions
d7 1
a7 1
PKGNAME=	${DISTNAME}-1
@


1.3
log
@remove SEPARATE_BUILD for once and for good, I'm fed up with
all the trouble it can cause - ports which need it (e.g. the
GCC SC doesnt "support" building gcc with srcdir=objdir) can
set stuff like WRKBUILD themselves.
@
text
@d3 1
a3 1
COMMENT=	"technical documentation XML/SGML definitions"
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@a34 1
SEPARATE_BUILD=	concurrent
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
