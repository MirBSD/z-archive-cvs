head	1.8;
access;
symbols;
locks; strict;
comment	@# @;


1.8
date	2009.08.16.16.26.54;	author tg;	state Exp;
branches;
next	1.7;
commitid	1004A882F1F72B43308;

1.7
date	2008.10.04.19.03.09;	author tg;	state Exp;
branches;
next	1.6;
commitid	10048E7BD9A0842B398;

1.6
date	2008.03.09.17.22.45;	author tg;	state Exp;
branches;
next	1.5;
commitid	10047D41CAA7E715397;

1.5
date	2006.09.14.00.09.36;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045089C0E234154C3;

1.4
date	2005.07.07.21.21.16;	author bsiegert;	state Exp;
branches;
next	1.3;
commitid	66bc42cd9a7ea714;

1.3
date	2005.04.11.15.55.29;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.10.21.49.55;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.46.28;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.46.28;	author tg;	state Exp;
branches;
next	;


desc
@@


1.8
log
@change
â€¢ _PASS_CC back from ã€Œmpccã€ to ã€Œ${WRKDIR}/bin/mpccã€ (note that the
  former ã€Œ${WRKDIR:Q}/bin/mpccã€ was wrong)
â€¢ all uses of _PASS_CC to either
  â€£ ${_PASS_CC:T:Q} (when passing, e.g. for libtool â€“ this is for use
    when ${WRKDIR}/bin is in $$PATH)
  â€£ ${_PASS_CC:Q} (when invoking, e.g. in post-build targets â€“ only
    these I saw when mechanically doing this; Benny wants to fix the
    remaining ones; I shouldâ€™ve introduced no more breakage than was)
â€¢ _PASS_CXX/mpcxx just the same

agreed bsiegert@@
@
text
@# $MirOS: ports/games/uqm/Makefile,v 1.7 2008/10/04 19:03:09 tg Exp $
# $OpenBSD: Makefile,v 1.9 2004/03/31 03:42:16 jolan Exp $

# 64-bit issues, unaligned memory access
ONLY_FOR_PLATFORM=	*:*:i386 *:*:powerpc

COMMENT=			ur-quan masters: sdl port of star control 2
COMMENT-3domusic=			ur-quan masters: 3DO music content
COMMENT-remix1=			ur-quan masters: remix pack number one
COMMENT-remix2=			ur-quan masters: remix pack number two
COMMENT-voice=			ur-quan masters: speech content

VER=			0.3
DISTNAME=		uqm-${VER}-source
CATEGORIES=		games x11
PDIST=			${DISTNAME}.tgz
CDIST=			uqm-${VER}-content.zip
MDIST=			uqm-${VER}-3domusic.zip
VDIST=			uqm-${VER}-voice.zip
RM1DIST=		uqm-remix-pack1.zip
RM2DIST=		uqm-remix-pack2.zip
DISTFILES=		${PDIST} ${CDIST}
SUPDISTFILES=		${MDIST} ${VDIST} ${RM1DIST} ${RM2DIST}
DIST_SUBDIR=		uqm
CATEGORIES=		games x11
PKGNAME=		uqm-${VER}-0
PKGNAME-3domusic=	uqm-3domusic-${VER}-0
PKGNAME-remix1=		uqm-remix1-${VER}-0
PKGNAME-remix2=		uqm-remix2-${VER}-0
PKGNAME-voice=		uqm-voice-${VER}-0
EXTRACT_ONLY=		${PDIST}
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=sc2/}
HOMEPAGE=		http://sc2.sourceforge.net/

# GPL
PERMIT_PACKAGE_CDROM=	"Unresolved licensing issues"
PERMIT_PACKAGE_FTP=	"Unresolved licensing issues"
PERMIT_DISTFILES_CDROM=	"Unresolved licensing issues"
PERMIT_DISTFILES_FTP=	"Unresolved licensing issues"

LIB_DEPENDS=	SDL_image::devel/sdl-image \
		vorbis.0,vorbisfile.1::audio/libvorbis

NO_REGRESS=	Yes
USE_GMAKE=	Yes
USE_X11=	Yes
USE_CXX=	Yes

PSEUDO_FLAVOURS=	no_3domusic no_remix1 no_remix2 no_voice
FLAVOUR?=

MULTI_PACKAGES=
.if !${FLAVOUR:L:Mno_3domusic}
DISTFILES+=	${MDIST}
MULTI_PACKAGES+=-3domusic
.endif
.if !${FLAVOUR:L:Mno_remix1}
DISTFILES+=	${RM1DIST}
MULTI_PACKAGES+=-remix1
.endif
.if !${FLAVOUR:L:Mno_remix2}
DISTFILES+=	${RM2DIST}
MULTI_PACKAGES+=-remix2
.endif
.if !${FLAVOUR:L:Mno_voice}
DISTFILES+=	${VDIST}
MULTI_PACKAGES+=-voice
.endif

SUBPACKAGE?=

.if defined(PACKAGING)
. if ${SUBPACKAGE} == "-3domusic"
PKG_ARCH=	*
RUN_DEPENDS=	::games/uqm
. endif
. if ${SUBPACKAGE} == "-remix1"
PKG_ARCH=	*
RUN_DEPENDS=	::games/uqm
. endif
. if ${SUBPACKAGE} == "-remix2"
PKG_ARCH=	*
RUN_DEPENDS=    ::games/uqm
. endif
. if ${SUBPACKAGE} == "-voice"
PKG_ARCH=	*
RUN_DEPENDS=	::games/uqm
. endif
.endif

WRKSRC=		${WRKDIR}/${PKGNAME}

do-configure:
.if (${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "i386" || \
     ${MACHINE_ARCH} == "vax")
	@@sed -e "s|@@PREFIX@@|${PREFIX}|g ; s|@@ENDIAN@@|undef|g" \
		${FILESDIR}/config.h > ${WRKSRC}/src/config.h
.else
	@@sed -e "s|@@PREFIX@@|${PREFIX}|g ; s|@@ENDIAN@@|define|g" \
		${FILESDIR}/config.h > ${WRKSRC}/src/config.h
.endif
	@@sed -e "s|@@CC@@|"${_PASS_CC:T:Q}"|g ; s|@@CFLAGS@@|${CFLAGS}|g ; \
		s|@@LOCALBASE@@|${LOCALBASE}|g ; s|@@PREFIX@@|${PREFIX}|g ; \
		s|@@X11BASE@@|${X11BASE}|g" ${FILESDIR}/build.vars \
		> ${WRKSRC}/build.vars

do-build:
	cd ${WRKBUILD}; ./build.sh uqm

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/uqm
	${INSTALL_DATA_DIR} ${PREFIX}/share/uqm/content/packages/addons/uqmremix
	${INSTALL_DATA} ${WRKBUILD}/doc/users/manual.txt \
		${PREFIX}/share/doc/uqm
	${INSTALL_DATA} ${WRKBUILD}/content/version \
		${PREFIX}/share/uqm/content
	${INSTALL_DATA} ${FULLDISTDIR}/${CDIST} \
		${PREFIX}/share/uqm/content/packages
.if !${FLAVOUR:L:Mno_3domusic}
	${INSTALL_DATA} ${FULLDISTDIR}/${MDIST} \
		${PREFIX}/share/uqm/content/packages
.endif
.if !${FLAVOUR:L:Mno_remix1}
	${INSTALL_DATA} ${FULLDISTDIR}/${RM1DIST} \
		${PREFIX}/share/uqm/content/packages/addons/uqmremix
.endif
.if !${FLAVOUR:L:Mno_remix2}
	${INSTALL_DATA} ${FULLDISTDIR}/${RM2DIST} \
		${PREFIX}/share/uqm/content/packages/addons/uqmremix
.endif
.if !${FLAVOUR:L:Mno_voice}
	${INSTALL_DATA} ${FULLDISTDIR}/${VDIST} \
		${PREFIX}/share/uqm/content/packages
.endif
	${INSTALL_PROGRAM} ${WRKBUILD}/uqm ${PREFIX}/bin

.include <bsd.port.mk>
@


1.7
log
@mass conversion from
â€¢ ${CC}
â€¢ "${CC}"
â€¢ '${CC}'
â€¢ ${CC:Q}
to ${_PASS_CC:Q} (or without :Q if itâ€™s executed, not assigned), and
same for CXXâ€¦ most of these are VERY UGLY, prone to break with ccache
and maybe even withoutâ€¦
@
text
@d1 1
a1 1
# $MirOS: ports/games/uqm/Makefile,v 1.6 2008/03/09 17:22:45 tg Exp $
d102 1
a102 1
	@@sed -e "s|@@CC@@|"${_PASS_CC:Q}"|g ; s|@@CFLAGS@@|${CFLAGS}|g ; \
@


1.6
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/games/uqm/Makefile,v 1.5 2006/09/14 00:09:36 tg Exp $
d102 1
a102 1
	@@sed -e "s|@@CC@@|${CC}|g ; s|@@CFLAGS@@|${CFLAGS}|g ; \
@


1.5
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/games/uqm/Makefile,v 1.4 2005/07/07 21:21:16 bsiegert Exp $
d49 2
a50 2
PSEUDO_FLAVORS=	no_3domusic no_remix1 no_remix2 no_voice
FLAVOR?=
d53 1
a53 1
.if !${FLAVOR:L:Mno_3domusic}
d57 1
a57 1
.if !${FLAVOR:L:Mno_remix1}
d61 1
a61 1
.if !${FLAVOR:L:Mno_remix2}
d65 1
a65 1
.if !${FLAVOR:L:Mno_voice}
d119 1
a119 1
.if !${FLAVOR:L:Mno_3domusic}
d123 1
a123 1
.if !${FLAVOR:L:Mno_remix1}
d127 1
a127 1
.if !${FLAVOR:L:Mno_remix2}
d131 1
a131 1
.if !${FLAVOR:L:Mno_voice}
@


1.4
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS: ports/games/uqm/Makefile,v 1.2 2005/04/10 21:49:55 tg Exp $
d7 5
a11 5
COMMENT=		"ur-quan masters: sdl port of star control 2"
COMMENT-3domusic=	"ur-quan masters: 3DO music content"
COMMENT-remix1=		"ur-quan masters: remix pack number one"
COMMENT-remix2=		"ur-quan masters: remix pack number two"
COMMENT-voice=		"ur-quan masters: speech content"
@


1.3
log
@the port part of platform refinal
@
text
@d26 5
a30 5
PKGNAME=		uqm-${VER}
PKGNAME-3domusic=	uqm-3domusic-${VER}
PKGNAME-remix1=		uqm-remix1-${VER}
PKGNAME-remix2=		uqm-remix2-${VER}
PKGNAME-voice=		uqm-voice-${VER}
@


1.2
log
@NOPIC_PLATFORMS, LP64_PLATFORMS and general change of
{NOT,ONLY}_FOR_{ARCH{,E,ES},OS} to {NOT,ONLY}_FOR_PLATFORM

some fallout maybe, I hope not
@
text
@d1 1
a1 1
# $MirOS: ports/games/uqm/Makefile,v 1.1.7.1 2005/03/18 15:46:28 tg Exp $
d5 1
a5 1
ONLY_FOR_PLATFORM=	*:i386 *:powerpc
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
d5 1
a5 1
ONLY_FOR_ARCHS=		i386 powerpc
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
