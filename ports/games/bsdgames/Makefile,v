head	1.24;
access;
symbols;
locks; strict;
comment	@# @;


1.24
date	2015.10.16.14.50.54;	author tg;	state Exp;
branches;
next	1.23;
commitid	10056210ED9045E511A;

1.23
date	2015.10.13.18.38.46;	author tg;	state Exp;
branches;
next	1.22;
commitid	100561D4FC6589240DD;

1.22
date	2012.09.12.17.24.58;	author tg;	state Exp;
branches;
next	1.21;
commitid	1005050C560198589CC;

1.21
date	2009.08.16.16.26.48;	author tg;	state Exp;
branches;
next	1.20;
commitid	1004A882F1F72B43308;

1.20
date	2008.12.07.18.58.00;	author tg;	state Exp;
branches;
next	1.19;
commitid	100493C1C934A10FB73;

1.19
date	2008.11.10.23.24.04;	author tg;	state Exp;
branches;
next	1.18;
commitid	1004918C29A74804045;

1.18
date	2008.10.04.19.03.07;	author tg;	state Exp;
branches;
next	1.17;
commitid	10048E7BD9A0842B398;

1.17
date	2008.05.25.20.56.38;	author tg;	state Exp;
branches;
next	1.16;
commitid	1004839D28B6A814A50;

1.16
date	2008.03.14.18.24.48;	author tg;	state Exp;
branches;
next	1.15;
commitid	10047DAC2FF5780F2BC;

1.15
date	2007.03.02.01.47.08;	author tg;	state Exp;
branches;
next	1.14;
commitid	10045E781B1757F9753;

1.14
date	2007.02.22.22.12.43;	author tg;	state Exp;
branches;
next	1.13;
commitid	10045DE1572271FCD78;

1.13
date	2007.02.22.21.37.02;	author tg;	state Exp;
branches;
next	1.12;
commitid	10045DE0D0D6929A692;

1.12
date	2006.09.14.00.09.19;	author tg;	state Exp;
branches;
next	1.11;
commitid	10045089C0E234154C3;

1.11
date	2006.06.11.10.57.29;	author tg;	state Exp;
branches;
next	1.10;
commitid	100448BF728310D8807;

1.10
date	2006.03.23.19.42.24;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004422FA300A66744D;

1.9
date	2006.03.02.01.42.16;	author tg;	state Exp;
branches;
next	1.8;
commitid	10044064D684E877179;

1.8
date	2006.01.01.02.46.00;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043B742786BBA895F;

1.7
date	2005.12.28.01.25.08;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043B1E9807C921B58;

1.6
date	2005.12.28.01.04.55;	author tg;	state Exp;
branches;
next	1.5;
commitid	10043B1E4BC52173533;

1.5
date	2005.12.16.11.46.39;	author tg;	state Exp;
branches;
next	1.4;
commitid	10043A2A92E65B7CCDD;

1.4
date	2005.11.19.22.51.37;	author tg;	state Exp;
branches;
next	1.3;
commitid	4cde437fac0a14ac;

1.3
date	2005.08.21.11.48.50;	author tg;	state Exp;
branches;
next	1.2;
commitid	3af74308676450c3;

1.2
date	2005.07.07.21.20.57;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.46.05;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.46.05;	author tg;	state Exp;
branches;
next	;


desc
@@


1.24
log
@making __MAN{,INST}ALL always recurse has unwanted side effects; revert
@
text
@# $MirOS: ports/games/bsdgames/Makefile,v 1.23 2015/10/13 18:38:46 tg Exp $

COMMENT=		BSD base system games
CATEGORIES=		games
DASH_VER=		4
MCZ_FETCH=		Yes
CVS_DISTREPO=		:ext:anoncvs@@anoncvs.ca.openbsd.org:/cvs
CVS_DISTDATE=		2007/02/22
CVS_DISTMODS=		src/games
CVS_DISTFILE=		bsdgames
RESPONSIBLE=		Thorsten Glaser <tg@@mirbsd.de>

# BSD
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

.include <mirports.sys.mk>
.if !defined(SUDO) || empty(SUDO)
IGNORE+=		"requires use of SUDO=sudo"
.endif

PREFIX=			/usr
BINGRP=			games
EXTRA_MAKE_FLAGS=	HOSTCC=${_PASS_CC:T:Q}
EXTRA_FAKE_FLAGS=	MANDIR=${PREFIX:Q}/share/man/cat
.ifdef MAN_ONLY
EXTRA_XAKE_FLAGS+=	BSD_SUBDIR_MK_MANRECURSE=1
.endif

EXTRA_FORTUNES=		alexander.griesser alexander.talos andreas.krennmair \
			at.linux at.statistik de.misc en.misc farber fh-brs \
			fvl fvl_vendor larry.wall martin.piskernig netbsd \
			netbsd-o netbsd-tips norbert.tretkowski \
			rainer.weikusat rss thomas.ogrisegg tretkowski \
			unamerican-o
.if (${OStype} == "Interix") || (${OStype} == "OpenBSD")
FORTUNE_COPY=		cat	# crippled OS
.else
MODULES+=		converters/libiconv
FORTUNE_COPY=		iconv -f iso-8859-1 -t utf-8
.endif

post-extract:
.for _i in ${EXTRA_FORTUNES}
	${FORTUNE_COPY} <${FILESDIR}/${_i} >${WRKSRC}/fortune/datfiles/${_i}
.endfor

do-configure:
	cd ${WRKSRC} && ${MAKE} obj

.ifndef MAN_ONLY
pre-build:
	cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
	    ${MAKE_PROGRAM} ${MAKE_FLAGS} -f ${MAKE_FILE} depend
.endif

pre-install:
	${SUDO} rm -rf ${WRKINST}/usr{,/share}/{man,info}
	${SUDO} /usr/sbin/mtree -U -e -d -n -p ${WRKINST} \
	    -f ${FILESDIR}/BSD.games.dist
.ifdef MAN_ONLY
	mkdir -p ${WRKINST}/usr/share/man/cat8
.endif

.ifndef MAN_ONLY
post-install:
	cd ${WRKINST}/var && ${SUDO} tar cf \
	    ${WRKINST}/usr/share/games/_tarball.dist games && \
	    rm -rf games
.endif

.include <bsd.port.mk>
@


1.23
log
@make it possible to build only the manpages (up to mmake fake)
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.22 2012/09/12 17:24:58 tg Exp $
d28 3
d53 1
a53 1
.ifndef MANPAGES_ONLY
d63 1
a63 1
.ifdef MANPAGES_ONLY
d67 1
a67 1
.ifndef MANPAGES_ONLY
@


1.22
log
@oups. OpenBSD ships Makefile.inc with 'BINGRP?=games' and The MirPorts
Framework sets BINGRP by default, but, of course, to 'bin'‚Ä¶ fix that.
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.21 2009/08/16 16:26:48 tg Exp $
d50 1
d54 1
d60 3
d64 1
d69 1
@


1.21
log
@change
‚Ä¢ _PASS_CC back from „Äåmpcc„Äç to „Äå${WRKDIR}/bin/mpcc„Äç (note that the
  former „Äå${WRKDIR:Q}/bin/mpcc„Äç was wrong)
‚Ä¢ all uses of _PASS_CC to either
  ‚Ä£ ${_PASS_CC:T:Q} (when passing, e.g. for libtool ‚Äì this is for use
    when ${WRKDIR}/bin is in $$PATH)
  ‚Ä£ ${_PASS_CC:Q} (when invoking, e.g. in post-build targets ‚Äì only
    these I saw when mechanically doing this; Benny wants to fix the
    remaining ones; I should‚Äôve introduced no more breakage than was)
‚Ä¢ _PASS_CXX/mpcxx just the same

agreed bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.20 2008/12/07 18:58:00 tg Exp $
d5 1
a5 1
DASH_VER=		3
d25 1
@


1.20
log
@switch all CVS_DISTF (and svn) to MCZ_FETCH=Yes except these
which already were or these which are broken anyway (net/bind)
to make them IS_INTERACTIVE=No and thus suitable for bulk builds

agreed bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.19 2008/11/10 23:24:04 tg Exp $
d25 1
a25 1
EXTRA_MAKE_FLAGS=	HOSTCC=${_PASS_CC:Q}
@


1.19
log
@I‚Äôm a collector, gimme new fortunes
10x ahoka@@ for mentioning that these exist (netbsd-o specially ‚ò∫)
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.18 2008/10/04 19:03:07 tg Exp $
d6 1
@


1.18
log
@mass conversion from
‚Ä¢ ${CC}
‚Ä¢ "${CC}"
‚Ä¢ '${CC}'
‚Ä¢ ${CC:Q}
to ${_PASS_CC:Q} (or without :Q if it‚Äôs executed, not assigned), and
same for CXX‚Ä¶ most of these are VERY UGLY, prone to break with ccache
and maybe even without‚Ä¶
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.17 2008/05/25 20:56:38 tg Exp $
d5 1
a5 1
DASH_VER=		2
d28 5
a32 3
			at.linux at.statistik de.misc en.misc fvl fvl_vendor \
			larry.wall martin.piskernig norbert.tretkowski \
			rainer.weikusat rss thomas.ogrisegg tretkowski fh-brs
@


1.17
log
@use :ext: in front of OpenBSD‚Äôs anoncvs mirror, and document
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.16 2008/03/14 18:24:48 tg Exp $
d24 1
a24 1
EXTRA_MAKE_FLAGS=	HOSTCC=${CC:Q}
@


1.16
log
@empty /var/games shan‚Äôt prevent us from populating
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.15 2007/03/02 01:47:08 tg Exp $
d6 1
a6 1
CVS_DISTREPO=		anoncvs@@anoncvs.ca.openbsd.org:/cvs
@


1.15
log
@‚Ä¢ sync extra fortunes with 2004-10-07 (from tarball)
  From: Alexander Bartolich <alexander.bartolich@@gmx.at>
‚Ä¢ convert fortune cookies to utf-8 on !openbsd !interix
‚Ä¢ bring back huntd(6) for systems with tcp_wrappers,
  an informative message echoing shell script otherwise
‚Ä¢ offer people to host their fortune cookie collections
  in our CVS
‚Ä¢ rm -rf /var/games on pkg_delete -c
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.14 2007/02/22 22:12:43 tg Exp $
d5 1
a5 1
DASH_VER=		1
@


1.14
log
@update
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.13 2007/02/22 21:37:02 tg Exp $
d5 1
d27 10
a36 2
EXTRA_FORTUNES=		at.linux fh-brs fvl fvl_vendor martin.piskernig \
			norbert.tretkowski rss thomas.ogrisegg
d39 3
a41 1
	cd ${FILESDIR}; cp ${EXTRA_FORTUNES} ${WRKSRC}/fortune/datfiles/
@


1.13
log
@update datfiles for fh-brs from :pserver:anonymous@@cvs.gforge.stud.inf.fh-bonn-rhein-sieg.de:/cvsroot/fortune-fh-brs
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.12 2006/09/14 00:09:19 tg Exp $
d6 1
a6 1
CVS_DISTDATE=		2005/02/16
a8 1
PKGNAME=		${_CVS_DISTF:R}-4
d23 2
a24 2
EXTRA_MAKE_FLAGS=	HOSTCC="${CC}"
EXTRA_FAKE_FLAGS=	MANDIR=${PREFIX}/share/man/cat
@


1.12
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ≠ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.11 2006/06/11 10:57:29 tg Exp $
d3 1
a3 1
COMMENT=			BSD base system games
d9 1
a9 1
PKGNAME=		${_CVS_DISTF:R}-3
@


1.11
log
@sync with upstream 1.3, remove trailing whitespace
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.10 2006/03/23 19:42:24 tg Exp $
d3 1
a3 1
COMMENT=		"BSD base system games"
@


1.10
log
@sync with upstream rev 1.2
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.9 2006/03/02 01:42:16 tg Exp $
d9 1
a9 1
PKGNAME=		${_CVS_DISTF:R}-2
@


1.9
log
@* yay, more cool stuff from my university
* clean up fortune madness
* clean up fortune installation process
* don't try to remove /usr/share/man or /usr/share/man/cat6 any more
* bump package level
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.8 2006/01/01 02:46:00 tg Exp $
d9 1
a9 1
PKGNAME=		${_CVS_DISTF:R}-1
@


1.8
log
@switch ERRORS to IGNORE to fix make index
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.7 2005/12/28 01:25:08 tg Exp $
d9 2
a10 2
PKGNAME=		${_CVS_DISTF:R}-0
RESPONSIBLE=		Thorsten Glaser <tg@@66h.42h.de>
d27 1
a27 1
EXTRA_FORTUNES=		at.linux fvl fvl_vendor martin.piskernig \
d43 1
a43 1
	    -f ${FILESDIR}/BSD.games.dist >/dev/null
d46 3
a48 3
	( cd ${WRKINST}/var && ${SUDO} tar \
	    cf ${WRKINST}/usr/share/games/_tarball.dist games \
	    && rm -rf games )
@


1.7
log
@work around recent addition of "support" for /usr-based ports
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.6 2005/12/28 01:04:55 tg Exp $
d20 1
a20 1
ERRORS+=		"You must use SUDO=sudo."
@


1.6
log
@* more descriptive error message
* fix including mirports.sys.mk before
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.5 2005/12/16 11:46:39 tg Exp $
d41 1
@


1.5
log
@make WRKDIST= optional for CVS_DISTMODS case
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.4 2005/11/19 22:51:37 tg Exp $
d18 1
d20 1
a20 1
ERRORS+=		"You must use sudo."
@


1.4
log
@Since I lost this port's distfile some months ago anyway,
increase its day by one, use the CVS fetch method, and
fix it (so it builds as user but with sudo).

also, disable huntd(6) because it includes <tcpd.h> which
doesn't exist on all platforms (someone to make it depen-
dent on -DTCP_WRAPPERS ?) and move manual pages around.
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.3 2005/08/21 11:48:50 tg Exp $
a21 1
WRKDIST=		${WRKDIR}/src/games
@


1.3
log
@_DOMAIN_DU_JOUR dies
@
text
@d1 1
a1 1
# $MirOS: ports/games/bsdgames/Makefile,v 1.2 2005/07/07 21:20:57 bsiegert Exp $
d5 5
a9 6
V=			20050215
DISTNAME=		games-${V}
PKGNAME=		bsdgames-${V}-0
EXTRACT_SUFX=		.cpio.gz
HOMEPAGE=		http://mirbsd.de/
MASTER_SITES=		${_MASTER_SITE_MIRBSD}
d18 5
a22 1
WRKDIST=		${WRKDIR}/games
d25 1
a25 1
EXTRA_FAKE_FLAGS=	MANDIR=${LOCALBASE}/man/cat
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS$
d11 1
a11 1
RESPONSIBLE=		Thorsten Glaser <tg@@${_DOMAIN_DU_JOUR}>
@


1.1
log
@Initial revision
@
text
@d7 1
a7 1
PKGNAME=		bsdgames-${V}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
