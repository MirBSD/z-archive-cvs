head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2008.07.30.00.15.49;	author tg;	state Exp;
branches;
next	;
commitid	100488FB23E3E0E7494;


desc
@@


1.1
log
@Wine 1.0 port, mostly taken from pkgsrc®

request for help: there is probably something about mmap.c the only
thing preventing us from running this… similar to the issues outlined
in the FreeBSD wiki about Wine, but made harder due to W^X probably

This will almost certainly not work on MidnightBSD, have a hard time
working on OpenBSD (especially due to no VFORK_SHM there), is totally
untested on Darwin (and PFRAG.dylib is missing), and not for Interix;
I wonder if it would work on NetBSD® (it should) if MirPorts ran the-
re, but if so, it had IPX support, which theirs doesn’t ☺
@
text
@$MirOS$

	Shared library naming policy: libFOO.major.minor

--- libs/wine/Makefile.in.orig	Tue Jul 29 20:13:38 2008
+++ libs/wine/Makefile.in	Tue Jul 29 22:21:06 2008
@@@@ -11,7 +11,11 @@@@ DEFS      = -D__WINESRC__ -DWINE_UNICODE
 
 VERSION   = 1.0
 SOVERSION = 1
+ifneq ($(shell uname -s | fgrep -i bsd 2>/dev/null),)
+SONAME    = libwine.so.$(VERSION)	# BSD
+else					# GNU/Linux
 SONAME    = libwine.so.$(SOVERSION)
+endif
 DYNAME    = libwine.$(SOVERSION).dylib
 
 INSTALLDIRS = $(DESTDIR)$(libdir)
@
