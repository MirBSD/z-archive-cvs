head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2008.07.30.00.15.47;	author tg;	state Exp;
branches;
next	;
commitid	100488FB23E3E0E7494;


desc
@@


1.1
log
@Wine 1.0 port, mostly taken from pkgsrc®

request for help: there is probably something about mmap.c the only
thing preventing us from running this… similar to the issues outlined
in the FreeBSD wiki about Wine, but made harder due to W^X probably

This will almost certainly not work on MidnightBSD, have a hard time
working on OpenBSD (especially due to no VFORK_SHM there), is totally
untested on Darwin (and PFRAG.dylib is missing), and not for Interix;
I wonder if it would work on NetBSD® (it should) if MirPorts ran the-
re, but if so, it had IPX support, which theirs doesn’t ☺
@
text
@$MirOS$
--- dlls/shell32/trash.c.orig	Tue Jun 17 14:07:08 2008
+++ dlls/shell32/trash.c	Tue Jul 29 21:22:31 2008
@@@@ -458,11 +458,12 @@@@ static HRESULT TRASH_GetDetails(const TR
     {
         struct tm del_time;
         time_t del_secs;
+	int y;
         
         sscanf(deletion_date, "%d-%d-%dT%d:%d:%d",
-            &del_time.tm_year, &del_time.tm_mon, &del_time.tm_mday,
+            &y, &del_time.tm_mon, &del_time.tm_mday,
             &del_time.tm_hour, &del_time.tm_min, &del_time.tm_sec);
-        del_time.tm_year -= 1900;
+        del_time.tm_year = y - 1900;
         del_time.tm_mon--;
         del_secs = mktime(&del_time);
         
@
