head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2008.07.30.00.15.51;	author tg;	state Exp;
branches;
next	;
commitid	100488FB23E3E0E7494;


desc
@@


1.1
log
@Wine 1.0 port, mostly taken from pkgsrc®

request for help: there is probably something about mmap.c the only
thing preventing us from running this… similar to the issues outlined
in the FreeBSD wiki about Wine, but made harder due to W^X probably

This will almost certainly not work on MidnightBSD, have a hard time
working on OpenBSD (especially due to no VFORK_SHM there), is totally
untested on Darwin (and PFRAG.dylib is missing), and not for Interix;
I wonder if it would work on NetBSD® (it should) if MirPorts ran the-
re, but if so, it had IPX support, which theirs doesn’t ☺
@
text
@$MirOS$
--- programs/winhlp32/hlpfile.c.orig	Tue Jun 17 14:07:08 2008
+++ programs/winhlp32/hlpfile.c	Tue Jul 29 22:37:41 2008
@@@@ -904,7 +904,7 @@@@ static BOOL     HLPFILE_RtfAddMetaFile(s
     hsoff = GET_UINT(ptr, 4);
     ptr += 8;
 
-    WINE_TRACE("sz=%lu csz=%lu offs=%lu/%u,%lu\n",
+    WINE_TRACE("sz=%lu csz=%lu offs=%lu/%tu,%lu\n",
                size, csize, off, ptr - beg, hsoff);
 
     bits = HLPFILE_DecompressGfx(beg + off, csize, size, pack);
@@@@ -1514,7 +1514,7 @@@@ BOOL    HLPFILE_BrowsePage(HLPFILE_PAGE*
     BYTE        *buf, *end;
     DWORD       ref = page->reference;
     unsigned    index, old_index = -1, offset, count = 0, offs = 0;
-    unsigned    cpg, parlen;
+    unsigned    cpg = 0, parlen;
     char        tmp[1024];
     const char* ck = NULL;
 
@
