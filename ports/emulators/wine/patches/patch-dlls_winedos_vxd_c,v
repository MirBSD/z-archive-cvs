head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2008.07.30.00.15.48;	author tg;	state Exp;
branches;
next	;
commitid	100488FB23E3E0E7494;


desc
@@


1.1
log
@Wine 1.0 port, mostly taken from pkgsrc®

request for help: there is probably something about mmap.c the only
thing preventing us from running this… similar to the issues outlined
in the FreeBSD wiki about Wine, but made harder due to W^X probably

This will almost certainly not work on MidnightBSD, have a hard time
working on OpenBSD (especially due to no VFORK_SHM there), is totally
untested on Darwin (and PFRAG.dylib is missing), and not for Interix;
I wonder if it would work on NetBSD® (it should) if MirPorts ran the-
re, but if so, it had IPX support, which theirs doesn’t ☺
@
text
@$MirOS$
--- dlls/winedos/vxd.c.orig	Tue Jun 17 14:07:08 2008
+++ dlls/winedos/vxd.c	Tue Jul 29 21:31:47 2008
@@@@ -659,8 +659,8 @@@@ void WINAPI VXD_Win32s( CONTEXT86 *conte
                 {
                     TRACE("PERF130 hack: "
                                "Replacing byte %02X at offset %04X:%04X\n",
-                               *(retv+1), SELECTOROF(func1),
-                                          OFFSETOF(func1) + retv+1-start);
+                               *(retv+1), (unsigned int)(SELECTOROF(func1)),
+                               (unsigned int)(OFFSETOF(func1) + retv+1-start));
 
                     *(retv+1) = (BYTE)0xCB;
                 }
@
