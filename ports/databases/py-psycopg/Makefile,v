head	1.6;
access;
symbols;
locks; strict;
comment	@# @;


1.6
date	2007.04.11.17.04.19;	author bsiegert;	state Exp;
branches;
next	1.5;
commitid	100461D150D77E04419;

1.5
date	2007.04.03.19.10.51;	author bsiegert;	state Exp;
branches;
next	1.4;
commitid	1004612A6C651FB8AE4;

1.4
date	2007.03.31.22.01.56;	author tg;	state Exp;
branches;
next	1.3;
commitid	100460EDA5B5AAA6E31;

1.3
date	2006.09.14.00.07.58;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045089C0E234154C3;

1.2
date	2005.07.07.21.18.48;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.44.19;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.44.19;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Non-free dependency, so package is not for CDROM or FTP
@
text
@# $MirOS: ports/databases/py-psycopg/Makefile,v 1.5 2007/04/03 19:10:51 bsiegert Exp $
# $OpenBSD: Makefile,v 1.12 2004/02/23 05:06:40 ish Exp $

COMMENT=	PostgreSQL database adapter for Python
VERSION=	1.1.4
DISTNAME=	psycopg-${VERSION}
PKGNAME=	py-psycopg-${VERSION}-${DASH_VER}
CATEGORIES=	databases
MASTER_SITES=	http://initd.org/pub/software/psycopg/
HOMEPAGE=	http://initd.org/software/psycopg

PERMIT_PACKAGE_FTP=	Yes
PERMIT_PACKAGE_CDROM=	dependency databases/postgresql is not allowed for CDROM
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes

USE_CXX=	Yes
USE_X11=	Yes

PYTHON_VER=	2.3
DATETIME_PATH=	${LOCALBASE}/lib/python${PYTHON_VER}/site-packages/mx/DateTime

LIB_DEPENDS+=	pq.2::databases/postgresql
RUN_DEPENDS+=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
		:py-mxDateTime->=2.0.0-py${PYTHON_VER}:devel/py-mxDateTime,py${PYTHON_VER}
BUILD_DEPENDS+=	${RUN_DEPENDS}

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--with-python=python${PYTHON_VER}		\
		--with-python-version=${PYTHON_VER}		\
		--with-mxdatetime-includes=${DATETIME_PATH}/mxDateTime

SUBST_VARS=	PYTHON_VER

NO_REGRESS=	Yes

pre-install:
	mkdir -p ${PREFIX}/lib/zope/lib/python/Products/
	cp -r ${WRKSRC}/ZPsycopgDA/ ${PREFIX}/lib/zope/lib/python/Products/

.include <bsd.port.mk>
@


1.5
log
@Merge zope flavor into main, untested ...
@
text
@d1 1
a1 1
# $MirOS$
d13 1
a13 1
PERMIT_PACKAGE_CDROM=	Yes
d18 1
@


1.4
log
@fix broken dependencies, <bsd.own.mk> inclusion; break other packages
@
text
@d1 1
d4 1
a4 1
COMMENT=			PostgreSQL database adapter for Python
d7 1
a7 1
PKGNAME=	py-psycopg-${VERSION}-0
a16 3
FLAVORS=	zope
FLAVOR?=

a26 4
.if ${FLAVOR:L:Mzope}
RUN_DEPENDS+=	:zope-*:www/zope
.endif

@


1.3
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d21 1
a21 1
PYTHON_VER=	2.1
d26 1
a26 1
		:py-mxDateTime->=2.0.0-py2.1:devel/py-mxDateTime,py2.1
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d3 1
a3 1
COMMENT=	"PostgreSQL database adapter for Python"
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
PKGNAME=	py-psycopg-${VERSION}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
