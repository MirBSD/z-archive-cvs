head	1.6;
access;
symbols;
locks; strict;
comment	@# @;


1.6
date	2009.08.16.17.16.39;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004A883C9B4C196B76;

1.5
date	2007.03.31.22.01.55;	author tg;	state Exp;
branches;
next	1.4;
commitid	100460EDA5B5AAA6E31;

1.4
date	2006.09.14.00.07.49;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045089C0E234154C3;

1.3
date	2006.02.02.20.13.47;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043E2680B1115BCC7;

1.2
date	2005.07.07.21.18.25;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.44.09;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.44.09;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@change all V to VSN (ok bsiegert@@) and some DASH_VER while here
@
text
@# $MirOS: ports/databases/mysql/Makefile,v 1.5 2007/03/31 22:01:55 tg Exp $
# $OpenBSD: Makefile,v 1.99 2004/05/21 12:16:21 brad Exp $
# Uses pthreads

BROKEN=		needs fixing/updating, any volunteers?

# test that!
#.if ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "m88k"
#BROKEN=		gen_lex_hash hangs
#.endif

COMMENT=			multithreaded SQL database (client)
COMMENT-server=			multithreaded SQL database (server)
COMMENT-tests=			multithreaded SQL database (regression test suite)
VERSION=	4.0.20
DISTNAME=	mysql-${VERSION}
FULLPKGNAME=	mysql-client-${VERSION}-0
PKGNAME-server=	mysql-server-${VERSION}-0
FULLPKGNAME-tests= mysql-tests-${VERSION}-0
CATEGORIES=	databases
VSN=		MySQL-4.0
MASTER_SITES=	http://mysql.mirrors.pair.com/Downloads/${VSN}/
HOMEPAGE=	http://www.mysql.com/

# GNU GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

DB_DIR?=	/var/mysql
SOCKET_DIR=	/var/run/mysql
SUBST_VARS=	DB_DIR SOCKET_DIR VERSION

VMEM_WARNING=	Yes
USE_GMAKE=	Yes
USE_CXX=	Yes
CONFIGURE_STYLE=autoconf
AUTOCONF_NEW=	Yes
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ARGS+= --enable-thread-safe-client \
		 --localstatedir="${DB_DIR}" \
		 --with-comment='MirPorts: ${FULLPKGNAME-server}' \
		 --with-libwrap \
		 --with-mysqld-user="_mysql" \
		 --with-openssl \
		 --with-unix-socket-path="${SOCKET_DIR}/mysql.sock" \
		 --with-vio \
		 --without-bench \
		 --without-debug \
		 --without-docs \
		 --without-extra-tools \
		 --without-readline

.include <mirports.sys.mk>

.if defined(USE_GCC3) && (${USE_GCC3:L} == "yes")
CONFIGURE_ARGS+=--with-client-ldflags=-lsupc++ \
		--with-mysqld-ldflags=-lsupc++
.endif


.if ${MACHINE} == "i386"
CONFIGURE_ARGS+= --enable-assembler
.endif

MULTI_PACKAGES=	-server -tests
SUBPACKAGE?=

.if ${SUBPACKAGE} == "-server"
RUN_DEPENDS=	:mysql-client-4.0.*:databases/mysql \
		:p5-DBD-mysql-*:databases/p5-DBD-mysql
.endif

DOCS=		manual.html manual.ps manual_toc.html manual.txt

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mysql/Flags
	cd ${WRKSRC}/Docs; ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/mysql
	${INSTALL_DATA} ${WRKSRC}/Docs/Flags/*.gif \
		${PREFIX}/share/doc/mysql/Flags
	cd ${PREFIX}/lib && ln -sf mysql/libmysqlclient.so.12.0 . && \
		ln -sf mysql/libmysqlclient_r.so.12.0 .

do-regress:
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run --force

.include <bsd.port.mk>
@


1.5
log
@fix broken dependencies, <bsd.own.mk> inclusion; break other packages
@
text
@d1 1
a1 1
# $MirOS: ports/databases/mysql/Makefile,v 1.4 2006/09/14 00:07:49 tg Exp $
d21 2
a22 2
V=		MySQL-4.0
MASTER_SITES=	http://mysql.mirrors.pair.com/Downloads/$V/
@


1.4
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/databases/mysql/Makefile,v 1.3 2006/02/02 20:13:47 tg Exp $
d55 1
a55 1
.include <bsd.own.mk>
@


1.3
log
@break mysql, since there's no maintainer for it
@
text
@d1 1
a1 1
# $MirOS: ports/databases/mysql/Makefile,v 1.2 2005/07/07 21:18:25 bsiegert Exp $
d12 3
a14 3
COMMENT=	"multithreaded SQL database (client)"
COMMENT-server=	"multithreaded SQL database (server)"
COMMENT-tests=	"multithreaded SQL database (regression test suite)"
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS$
d5 6
a10 3
.if ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "m88k"
BROKEN=		"gen_lex_hash hangs"
.endif
@


1.1
log
@Initial revision
@
text
@d14 3
a16 3
FULLPKGNAME=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}
FULLPKGNAME-tests= mysql-tests-${VERSION}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
