head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2009.05.20.19.39.12;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004A145C3E1AD9A78D;

1.2
date	2009.05.20.14.45.28;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004A14177950649403;

1.1
date	2009.01.17.11.43.34;	author tg;	state Exp;
branches;
next	;
commitid	1004971C3F4204C5115;


desc
@@


1.3
log
@first step at modernising; actually /var (or the localbased equivalent)
is a much better choice at localstatedir (and probably the default), and
we've been advocating sudo for a decade or so now

XXX this port is a mess and the source code broken; after an update,
XXX a throughout warning cleanup must be done
@
text
@----------------
Upgraders beware
----------------

LOCALSTATEDIR has changed, you might need to move things, see below;
current value is: ${LOCALSTATEDIR}

-----------------------------------
openldap-server is almost installed
-----------------------------------

configuration files has been placed in ${PREFIX}/share/examples/openldap
it should be configured and placed into ${SYSCONFDIR}/openldap
$ sudo cp -R ${PREFIX}/share/examples/openldap ${SYSCONFDIR}/

Please create a home for slapd:
$ sudo mkdir -p ${LOCALSTATEDIR}/openldap-{data,slurp}
$ sudo chown -R _slapd:_slapd ${SYSCONFDIR}/openldap/slapd.conf \
    ${LOCALSTATEDIR}/openldap-{data,slurp}
$ sudo chmod -R 0700 ${LOCALSTATEDIR}/openldap-{data,slurp}
$ sudo chmod 0600 ${SYSCONFDIR}/openldap/slapd.conf

Add the following lines to /etc/rc.local:
[[ -x ${PREFIX}/libexec/slapd ]] && if [[ $slapd_flags != NO ]]; then
	echo -n ' openldap'; ${PREFIX}/libexec/slapd $slapd_flags
fi

To start slapd after reboot, add the following line to /etc/rc.conf.local:
| #slapd=NO	# do not start OpenLDAP
| slapd='-u ${USER} -g ${GROUP}'
@


1.2
log
@• use a more sane (not tabcompletion-wrecking) LOCALSTATEDIR
• fix 1024-byte-per-line segfault issue (now it segfaults >2000 bytes…)
@
text
@d5 1
a5 1
LOCALSTATEDIR may have changed, you might need to move things;
d14 1
a14 1
# cp -R ${PREFIX}/share/examples/openldap ${SYSCONFDIR}/openldap
d17 5
a21 4
# mkdir -p ${LOCALSTATEDIR}/{openldap-slurp,openldap-data}
# chown -R _slapd:_slapd ${LOCALSTATEDIR}/ ${SYSCONFDIR}/openldap/slapd.conf
# chmod 700 ${LOCALSTATEDIR}/
# chmod 600 ${SYSCONFDIR}/openldap/slapd.conf
d24 2
a25 2
[[ -x ${PREFIX}/libexec/slapd ]] && if [[ $slapd = YES ]]; then
	echo -n ' openldap'; ${PREFIX}/libexec/slapd -u ${USER} -g ${GROUP}
d29 2
a30 3
| slapd=YES

Enjoy openldap!
@


1.1
log
@gah, this is so antiquated
• Makefile: re-indent, quote, bring up to current standards
• distinfo: regen while here
• INSTALL-server: replace with a MESSAGE-server
• MESSAGE-server:
  ‣ /usr/local → ${PREFIX}
  ‣ use a rc.conf.local “slapd=YES” scheme to activate
  ‣ “chown user.group” has not worked for the last four years or so
• make mental note that this needs an update

problems noticed during setting up a sendmail with LDAP interconnection
at work yesterday (it does operate finely now, as Univention UCS slurpd
slave, though)
@
text
@d1 7
@

