head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2013.01.02.22.26.11;	author tg;	state Exp;
branches;
next	1.3;
commitid	10050E4B4151D531E24;

1.3
date	2008.04.01.15.47.03;	author tg;	state Exp;
branches;
next	1.2;
commitid	10047F259090D420D79;

1.2
date	2007.03.11.20.41.16;	author tg;	state Exp;
branches;
next	1.1;
commitid	10045F469817828FE77;

1.1
date	2006.09.11.01.02.04;	author tg;	state Exp;
branches;
next	;
commitid	1004504B56803FF6E46;


desc
@@


1.4
log
@update GnuPG to fix CVE-2012-6085

also, IDEA is no longer patented, we can include it
@
text
@$MirOS: ports/security/gnupg/patches/patch-util_miscutil_c,v 1.3 2008/04/01 15:47:03 tg Exp $
--- util/miscutil.c.orig	Thu Dec 20 17:22:03 2012
+++ util/miscutil.c	Wed Jan  2 21:56:09 2013
@@@@ -135,7 +135,7 @@@@ strtimestamp( u32 stamp )
     else {
         tp = gmtime( &atime );
         sprintf(buffer,"%04d-%02d-%02d",
-                1900+tp->tm_year, tp->tm_mon+1, tp->tm_mday );
+                (int)(1900+tp->tm_year), tp->tm_mon+1, tp->tm_mday );
     }
     return buffer;
 }
@@@@ -157,7 +157,7 @@@@ isotimestamp (u32 stamp)
     else {
         tp = gmtime( &atime );
         sprintf(buffer,"%04d-%02d-%02d %02d:%02d:%02d",
-                1900+tp->tm_year, tp->tm_mon+1, tp->tm_mday,
+                (int)(1900+tp->tm_year), tp->tm_mon+1, tp->tm_mday,
                 tp->tm_hour, tp->tm_min, tp->tm_sec);
     }
     return buffer;
@


1.3
log
@SECURITY update to 1.4.9:
• cf. http://www.heise.de/newsticker/GnuPG-1-4-9-und-2-0-9-beheben-Schwachstelle--/meldung/105821
• passes regression test
• no longer use libusb on mirbsd/sparc
• unify arch handling (move openbsd/m68k test into mpi config patch)
• add midnightbsd/i386 support (they require a pentium at least, according
  to nightlily, so they get the 586 asm code instead of our 386er)
• add midnightbsd/sparc64 support (same as other bsds: disable asm)
• quell macro redefinition warning in mpi code (MIN, MAX)

XXX maybe disable asm on mirbsd/sparc?
@
text
@d1 4
a4 5
$MirOS: ports/security/gnupg/patches/patch-util_miscutil_c,v 1.2 2007/03/11 20:41:16 tg Exp $
--- util/miscutil.c.orig	Tue Oct 23 07:55:08 2007
+++ util/miscutil.c	Tue Apr  1 15:22:24 2008
@@@@ -123,8 +123,8 @@@@ strtimestamp( u32 stamp )
     }
d7 1
a7 1
-        sprintf(buffer,"%04d-%02d-%02d",
d9 1
a9 2
+        sprintf(buffer,"%04ld-%02d-%02d",
+                1900L+(long)(tp->tm_year), tp->tm_mon+1, tp->tm_mday );
d13 1
a13 2
@@@@ -145,8 +145,8 @@@@ isotimestamp (u32 stamp)
     }
d16 1
a16 1
-        sprintf(buffer,"%04d-%02d-%02d %02d:%02d:%02d",
d18 1
a18 2
+        sprintf(buffer,"%04ld-%02d-%02d %02d:%02d:%02d",
+                1900L+(long)(tp->tm_year), tp->tm_mon+1, tp->tm_mday,
@


1.2
log
@update to 1.4.7, add mailto: keyserver protocol, more docs
@
text
@d1 4
a4 4
$MirOS: ports/security/gnupg/patches/patch-util_miscutil_c,v 1.1 2006/09/11 01:02:04 tg Exp $
--- util/miscutil.c.orig	Mon Oct  2 12:07:00 2006
+++ util/miscutil.c	Sun Mar 11 20:15:29 2007
@@@@ -125,8 +125,8 @@@@ strtimestamp( u32 stamp )
d15 1
a15 1
@@@@ -147,8 +147,8 @@@@ isotimestamp (u32 stamp)
@


1.1
log
@* fix time_t format string issues
* if vm.swapencrypt=1 don't issue secmem warning
  (why didn't the openbsd guys add a simple patch like this?)
* sync MESSAGE with reality
* fix regression test suite (1 fail in verify, but the test
  actually doesn't fail, no idea what's going wrong there,
  maybe a hidden bash dependency?)
* bump patchlevel
@
text
@d1 5
a5 4
$MirOS$
--- util/miscutil.c.orig	Fri May 19 07:36:44 2006
+++ util/miscutil.c	Mon Sep 11 00:32:32 2006
@@@@ -126,7 +126,7 @@@@ strtimestamp( u32 stamp )
d8 1
a8 1
         sprintf(buffer,"%04d-%02d-%02d",
d10 2
a11 1
+                1900+(int)(tp->tm_year), tp->tm_mon+1, tp->tm_mday );
d15 2
a16 1
@@@@ -148,7 +148,7 @@@@ isotimestamp (u32 stamp)
d19 1
a19 1
         sprintf(buffer,"%04d-%02d-%02d %02d:%02d:%02d",
d21 2
a22 1
+                1900+(int)(tp->tm_year), tp->tm_mon+1, tp->tm_mday,
@

