head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2013.07.28.18.01.46;	author tg;	state Exp;
branches;
next	1.4;
commitid	10051F55CA26ED73BD2;

1.4
date	2013.01.02.22.26.10;	author tg;	state Exp;
branches;
next	1.3;
commitid	10050E4B4151D531E24;

1.3
date	2008.04.01.15.47.02;	author tg;	state Exp;
branches;
next	1.2;
commitid	10047F259090D420D79;

1.2
date	2007.03.11.20.41.15;	author tg;	state Exp;
branches;
next	1.1;
commitid	10045F469817828FE77;

1.1
date	2006.09.11.01.02.03;	author tg;	state Exp;
branches;
next	;
commitid	1004504B56803FF6E46;


desc
@@


1.5
log
@SECURITY update to new upstream version: contains mitigation code
for side-channel attacks (only relevant for running MirBSD inside
a Virtual Machine on a system that has access to either other VMs
or Dom0 for (other) users, AIUI)
@
text
@$MirOS: ports/security/gnupg/patches/patch-g10_keyid_c,v 1.4 2013/01/02 22:26:10 tg Exp $
--- g10/keyid.c.orig	Thu Jul 25 08:37:15 2013
+++ g10/keyid.c	Sun Jul 28 17:48:14 2013
@@@@ -460,7 +460,7 @@@@ mk_datestr (char *buffer, time_t atime)
     else {
         tp = gmtime (&atime);
         sprintf (buffer,"%04d-%02d-%02d",
-                 1900+tp->tm_year, tp->tm_mon+1, tp->tm_mday );
+                 (int)(1900+tp->tm_year), tp->tm_mon+1, tp->tm_mday );
     }
     return buffer;
 }
@


1.4
log
@update GnuPG to fix CVE-2012-6085

also, IDEA is no longer patented, we can include it
@
text
@d1 4
a4 4
$MirOS: ports/security/gnupg/patches/patch-g10_keyid_c,v 1.3 2008/04/01 15:47:02 tg Exp $
--- g10/keyid.c.orig	Thu Dec 20 17:22:02 2012
+++ g10/keyid.c	Wed Jan  2 21:56:04 2013
@@@@ -459,7 +459,7 @@@@ mk_datestr (char *buffer, time_t atime)
@


1.3
log
@SECURITY update to 1.4.9:
• cf. http://www.heise.de/newsticker/GnuPG-1-4-9-und-2-0-9-beheben-Schwachstelle--/meldung/105821
• passes regression test
• no longer use libusb on mirbsd/sparc
• unify arch handling (move openbsd/m68k test into mpi config patch)
• add midnightbsd/i386 support (they require a pentium at least, according
  to nightlily, so they get the 586 asm code instead of our 386er)
• add midnightbsd/sparc64 support (same as other bsds: disable asm)
• quell macro redefinition warning in mpi code (MIN, MAX)

XXX maybe disable asm on mirbsd/sparc?
@
text
@d1 4
a4 5
$MirOS: ports/security/gnupg/patches/patch-g10_keyid_c,v 1.2 2007/03/11 20:41:15 tg Exp $
--- g10/keyid.c.orig	Tue Oct 23 07:50:11 2007
+++ g10/keyid.c	Tue Apr  1 15:22:23 2008
@@@@ -448,8 +448,8 @@@@ mk_datestr (char *buffer, time_t atime)
         strcpy (buffer, "????" "-??" "-??"); /* mark this as invalid */
d7 1
a7 1
-        sprintf (buffer,"%04d-%02d-%02d",
d9 1
a9 2
+        sprintf (buffer,"%04ld-%02d-%02d",
+                 1900L+(long)(tp->tm_year), tp->tm_mon+1, tp->tm_mday );
@


1.2
log
@update to 1.4.7, add mailto: keyserver protocol, more docs
@
text
@d1 4
a4 4
$MirOS: ports/security/gnupg/patches/patch-g10_keyid_c,v 1.1 2006/09/11 01:02:03 tg Exp $
--- g10/keyid.c.orig	Tue Dec 20 17:24:09 2005
+++ g10/keyid.c	Sun Mar 11 20:14:50 2007
@@@@ -450,8 +450,8 @@@@ mk_datestr (char *buffer, time_t atime)
@


1.1
log
@* fix time_t format string issues
* if vm.swapencrypt=1 don't issue secmem warning
  (why didn't the openbsd guys add a simple patch like this?)
* sync MESSAGE with reality
* fix regression test suite (1 fail in verify, but the test
  actually doesn't fail, no idea what's going wrong there,
  maybe a hidden bash dependency?)
* bump patchlevel
@
text
@d1 1
a1 1
$MirOS$
d3 3
a5 2
+++ g10/keyid.c	Mon Sep 11 00:47:02 2006
@@@@ -451,7 +451,7 @@@@ mk_datestr (char *buffer, time_t atime)
d8 1
a8 1
         sprintf (buffer,"%04d-%02d-%02d",
d10 2
a11 1
+                 1900+(int)(tp->tm_year), tp->tm_mon+1, tp->tm_mday );
@

