head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2014.04.18.20.04.09;	author tg;	state Exp;
branches;
next	1.3;
commitid	1005351855119BB1CCC;

1.3
date	2012.01.15.13.47.46;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004F12D919735D2719;

1.2
date	2009.11.22.19.32.31;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004B0991C1317436F4;

1.1
date	2009.11.14.21.45.28;	author tg;	state Exp;
branches;
next	;
commitid	1004AFF25061DF717E6;


desc
@@


1.4
log
@skip building userland usb support (not needed, not really working either) as libusb wants C++, to make this buildable
@
text
@# $MirOS: ports/security/ekeyd/Makefile,v 1.3 2012/01/15 13:47:46 tg Exp $

COMMENT=		driver daemons for the Simtec EntropyKey
CATEGORIES=		sysutils security
DISTNAME=		ekeyd-1.1.5
DASH_VER=		1
HOMEPAGE=		http://www.entropykey.co.uk/
RESPONSIBLE=		Thorsten Glaser <tg@@mirbsd.org>

# Historic Permission Clause
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

.include <mirports.sys.mk>

#MASTER_SITES=		${HOMEPAGE}res/download/
MASTER_SITES=		${MASTER_SITE_DEBIAN:=e/ekeyd/}
DISTFILES=		${DISTNAME:S/-/_/}.orig.tar.gz
WRKSRC=			${WRKDIST}/host

USE_GMAKE=		Yes
NO_REGRESS=		Yes
B_R_DEPENDS+=		:lua->=5.1:lang/lua
B_R_DEPENDS+=		::devel/luaposix
B_R_DEPENDS+=		:luasocket->=2.0.1-1:net/luasocket
# only for ulusbd
#LIB_DEPENDS+=		usb::devel/libusb

EXTRA_XAKE_FLAGS+=	PREFIX=${TRUEPREFIX:Q} \
			SYSCONFPREFIX=${SYSCONFDIR:Q}/entropykey \
			MANPREFIX=${TRUEPREFIX:Q}/man/man \
			IN_MIRPORTS=1
.if ${SYSCONFDIR} != "/etc"
EXTRA_XAKE_FLAGS+=	RUNTIMEPREFIX=${LOCALBASE:Q}/db/run
.endif
# disable ulusbd
EXTRA_XAKE_FLAGS+=	BUILD_ULUSBD=no

DOCS=			AUTHORS COPYING ChangeLog THANKS doc/*

post-install:
	mv ${WRKINST}${SYSCONFDIR}/entropykey ${PREFIX}/share/examples/ekeyd
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ekeyd
	cd ${WRKDIST} && ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/ekeyd/
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/ekeyd/munin
	${INSTALL_DATA} ${WRKDIST}/munin/* ${PREFIX}/share/examples/ekeyd/munin/

.include <bsd.port.mk>
@


1.3
log
@update
@
text
@d1 1
a1 1
# $MirOS: ports/security/ekeyd/Makefile,v 1.2 2009/11/22 19:32:31 tg Exp $
d6 1
d28 2
a29 1
LIB_DEPENDS+=		usb::devel/libusb
d38 2
@


1.2
log
@update (most of our patches have been accepted, but ekey-rekey is
really FUBAR’d now in upstream, couldn’t work, and the rest are to
fix some really bad programming practice leading to a strcpy
@
text
@d1 1
a1 1
# $MirOS: ports/security/ekeyd/Makefile,v 1.1 2009/11/14 21:45:28 tg Exp $
d5 1
a5 1
DISTNAME=		ekeyd-1.1.1
d17 4
a20 2
MASTER_SITES=		${HOMEPAGE}res/download/
WRKSRC=			${WRKDIST}/daemon
d23 1
d37 1
a37 2
DOCS=			AUTHORS COPYING ChangeLog WARNING \
			daemon/README* daemon/THANKS
@


1.1
log
@experimental port for the Simtec eKey control software
@
text
@d1 1
a1 1
# $MirOS$
d5 1
a5 1
DISTNAME=		ekeyd-1.1.0
@

