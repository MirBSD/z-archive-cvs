head	1.11;
access;
symbols;
locks; strict;
comment	@# @;


1.11
date	2019.07.26.23.37.27;	author tg;	state Exp;
branches;
next	1.10;
commitid	1005D3B8EC562E6754D;

1.10
date	2018.10.14.14.47.05;	author tg;	state Exp;
branches;
next	1.9;
commitid	1005BC356FF73B9DC25;

1.9
date	2008.03.09.19.16.03;	author tg;	state Exp;
branches;
next	1.8;
commitid	10047D437336B26509B;

1.8
date	2008.03.09.17.23.12;	author tg;	state Exp;
branches;
next	1.7;
commitid	10047D41CAA7E715397;

1.7
date	2007.05.14.04.13.20;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004647E1D729AFA7B9;

1.6
date	2007.05.14.03.40.13;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004647D8D1395085AA;

1.5
date	2007.05.12.23.13.30;	author tg;	state Exp;
branches;
next	1.4;
commitid	10046464A040AEC0AA1;

1.4
date	2007.04.01.21.59.23;	author tg;	state Exp;
branches;
next	1.3;
commitid	10046102B4E7B53828C;

1.3
date	2006.09.14.00.11.16;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045089C0E234154C3;

1.2
date	2005.07.07.21.23.42;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.50.30;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.50.30;	author tg;	state Exp;
branches;
next	;


desc
@@


1.11
log
@update mgp port to first alpha (not public yet, development aid)
@
text
@# $MirOS: ports/misc/magicpoint/Makefile,v 1.10 2018/10/14 14:47:05 tg Exp $

BROKEN=			awaiting first release

COMMENT=		X11-based presentation tool
VSN=			1.2~a1
DASH_VER=		1
CATEGORIES=		misc productivity
HOMEPAGE=		http://www.mirbsd.org/mgp.htm

# BSD, MIT, some GPL
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

DISTNAME=		mgp-${VSN}
PKGNAME=		magicpoint-${VSN:S/~//}-${DASH_VER}
MASTER_SITES=		${_MASTER_SITE_MIRBSD:distfiles/=dist/hosted/magicpoint/}
EXTRACT_SUFX=		.tgz
WRKBUILD=		${WRKDIST}/obj

USE_X11=		Yes
MODULES+=		converters/libiconv
MODULES+=		devel/pkgconfig
LIB_DEPENDS+=		Imlib2.1::graphics/imlib2,no_cxx
RUN_DEPENDS+=		pnmscale::graphics/netpbm
NO_REGRESS=		Yes

XAKE_FLAGS+=		SH=${SH:Q}
XAKE_FLAGS+=		MANDIR='$$(PREFIX)/man'
XAKE_FLAGS+=		INSTALL_SYSCONFIG=
XAKE_FLAGS+=		PREFIX=${TRUEPREFIX:Q}

do-configure:
	cd ${WRKBUILD:Q} && ${SETENV} ${MAKE_ENV} \
	    ${SH} ${WRKSRC:Q}/Build.sh -P 'imlib2 xft'

do-build:
	cd ${WRKBUILD:Q} && ${SETENV} ${MAKE_ENV} \
	    ${MAKE} ${MAKE_FLAGS} ${XAKE_FLAGS}

do-install:
	cd ${WRKBUILD:Q} && ${SETENV} ${MAKE_ENV} \
	    ${MAKE} ${FAKE_FLAGS} ${XAKE_FLAGS} install

.include <bsd.port.mk>
@


1.10
log
@use MODULES for png and freetype1
@
text
@d1 1
a1 2
# $MirOS: ports/misc/magicpoint/Makefile,v 1.9 2008/03/09 19:16:03 tg Exp $
# $OpenBSD: Makefile,v 1.32 2004/04/09 09:52:09 espie Exp $
d3 1
a3 1
ONLY_FOR_PLATFORM=	MirBSD:*:* OpenBSD:*:*
d6 2
a7 2
DISTNAME=		magicpoint-1.10a
DASH_VER=		2
d9 1
a9 2
MASTER_SITES=		ftp://sh.wide.ad.jp/WIDE/free-ware/mgp/
HOMEPAGE=		http://member.wide.ad.jp/wg/mgp/
d11 3
a13 1
# BSD
a15 2
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d17 5
a21 6
FLAVOURS=		no_gif freetype2
FLAVOUR?=

MODULES+=		graphics/png
LIB_DEPENDS+=		mng::graphics/libmng
RUN_DEPENDS+=		pnmscale::graphics/netpbm
a23 14
CONFIGURE_STYLE=	autoconf gnu imake no-autoheader
CONFIGURE_ARGS+=	--disable-vflib
CONFIGURE_ENV+=		mplocalbase=${LOCALBASE:Q}
EXTRA_MAKE_FLAGS+=	CCOPTIONS=

.if !${FLAVOUR:L:Mfreetype2}
CONFIGURE_ARGS+=	--enable-freetype \
			--enable-freetype-charset16 \
			--disable-xft2
MODULES+=		devel/gettext
MODULES+=		print/freetype
.else
CONFIGURE_ARGS+=	--disable-freetype \
			--enable-xft2
d25 3
a27 10
.endif

.if ${FLAVOUR:L:Mno_gif}
CONFIGURE_ARGS+=	--disable-gif
.else
USE_CXX=		Yes
CONFIGURE_ARGS+=	--enable-gif
LIB_DEPENDS+=		ungif.5::graphics/libungif
.endif

d30 16
a45 44
DOCS=			COPYRIGHT COPYRIGHT.jp FAQ README README.fonts \
			README.fonts.jp README.lang README.xft RELNOTES \
			SYNTAX TODO.jp USAGE USAGE.jp
SAMPLES=		README README.jp cloud.jpg dad.eps dad.jpg \
			default.mgp embed-jp.mgp embed.mgp gradation-jp.mgp \
			gradation.mgp mgp-old1.jpg mgp-old2.jpg mgp-old3.jpg \
			mgp.mng mgp1.jpg mgp2.jpg mgp3.jpg mgp3.xbm \
			mgprc-sample multilingual.mgp sample-fr.mgp \
			sample-jp.mgp sample.mgp sendmail6-jp.mgp \
			sendmail6.mgp tutorial-jp.mgp tutorial.mgp v6-jp.mgp \
			v6.mgp v6header.eps v6header.jpg
EMACS=			../mgp-mode.el README mgp.el mgp.sty sample.tex
SCRIPTS=		eqn2eps.sh mgp2html.pl mgp2latex.pl tex2eps.sh

post-extract:
	rm -rf ${WRKDIST}/missing	# crap directory

post-configure:
	cd ${WRKCONF}/contrib/xmindpath && \
	    ${SETENV} ${MODSIMPLE_configure_env} ${SH} ./configure \
	    ${CONFIGURE_ARGS} --prefix='$${DESTDIR}'${PREFIX:Q}

post-build:
	cd ${WRKBUILD}/contrib/xmindpath && \
	    ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mgp/{emacs,sample}
.for _i in ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/${_i} ${PREFIX}/share/doc/mgp/
.endfor
.for _i in ${SAMPLES}
	${INSTALL_DATA} ${WRKSRC}/sample/${_i} ${PREFIX}/share/doc/mgp/sample/
.endfor
.for _i in ${EMACS}
	${INSTALL_DATA} ${WRKSRC}/contrib/mgp-el/${_i} \
	    ${PREFIX}/share/doc/mgp/emacs/
.endfor
.for _i in ${SCRIPTS}
	${INSTALL_SCRIPT} ${WRKSRC}/contrib/${_i} ${PREFIX}/bin/${_i:R}
.endfor
	cd ${WRKBUILD}/contrib/xmindpath && \
	    ${INSTALL_PROGRAM} xmindpath ${PREFIX}/bin/ && \
	    ${INSTALL_MAN} xmindpath.1 ${PREFIX}/man/man1/
@


1.9
log
@by request of bsiegert@@, make all imake-using ports as only for MirOS and
OpenBSD, since they use the -DPorts logic of OpenBSD.cf/MirBSD.cf

since imake.port.mk would be too late, this means touching â€™em all

XXX these openbsd derived ports Makefiles surely look ugly
@
text
@d1 1
a1 1
# $MirOS: ports/misc/magicpoint/Makefile,v 1.8 2008/03/09 17:23:12 tg Exp $
d22 2
a23 2
LIB_DEPENDS+=		png.2::graphics/png \
			mng::graphics/libmng
a35 1
LIB_DEPENDS+=		ttf.1::print/freetype
d37 1
@


1.8
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/misc/magicpoint/Makefile,v 1.7 2007/05/14 04:13:20 tg Exp $
d4 2
@


1.7
log
@fix gettext dependency (weird it's in at all, but who knowsâ€¦)

.oO(damn I just wanted to fix this at about midnight, and now it's getting
bright again and I just killed like 6 hours fixing this beast)
@
text
@d1 1
a1 1
# $MirOS: ports/misc/magicpoint/Makefile,v 1.6 2007/05/14 03:40:13 tg Exp $
d17 2
a18 2
FLAVORS=		no_gif freetype2
FLAVOR?=
d30 1
a30 1
.if !${FLAVOR:L:Mfreetype2}
d42 1
a42 1
.if ${FLAVOR:L:Mno_gif}
@


1.6
log
@make this usable again â€“ weirdly, the fact that this combines autoconf and
imake isn't making it much worse, just that these people use imake at all,
and that they're too stupid for autoconf (and write imake-like tests)

well, japaneseâ€¦ you got it

freetype2 has nice antialiasing, but japanese doesn't work (chinese and
korean does), font loading doesn't work, and I wonder what does â€“ maybe
using the fc-list names would, but I don't know how.

freetype1 looks ugly but works, in all the languages.

But: UTF-8 doesn't work at all. Reading the ${HOMEPAGE} I don't think
it'll be made to work at some time. They prefer ISO-2022-JP. Who wondersâ€¦
Still, upgrading to 1.12a might be worthy.
@
text
@d1 1
a1 1
# $MirOS: ports/misc/magicpoint/Makefile,v 1.5 2007/05/12 23:13:30 tg Exp $
a23 1
MODULES=		devel/gettext
d35 1
d39 1
a39 1
MODULES=		converters/libiconv
@


1.5
log
@break this, this is weird: contrib/xmindpath is reconfigured by post-conf
action hooks of main configure, despite having configured it earlier

best is probably to update port to 1.11{a,b,...} but I'm too drunk for that
@
text
@d1 1
a1 1
# $MirOS: ports/misc/magicpoint/Makefile,v 1.4 2007/04/01 21:59:23 tg Exp $
a3 2
BROKEN=			weird, see commit message

d28 2
a29 1
CONFIGURE_ARGS+=	--enable-freetype-charset16
d32 3
a34 1
CONFIGURE_ARGS+=	--disable-xft2
d36 4
d52 14
d67 1
a67 1
	-rm -rf ${WRKSRC}/missing	# crap...
d70 3
a72 2
	@@cd ${WRKSRC}/contrib/xmindpath && \
	    ./configure --prefix='$${DESTDIR}'${PREFIX:Q}
d75 2
a76 16
	@@cd ${WRKSRC}/contrib/xmindpath && ${MAKE_PROGRAM}
	@@cd ${WRKSRC}/contrib/xwintoppm && ${XMKMF}

DOCS=		COPYRIGHT COPYRIGHT.jp FAQ README README.fonts README.fonts.jp \
		README.lang SYNTAX TODO.jp USAGE USAGE.jp
SAMPLES=	README README.jp cloud.jpg dad.eps dad.jpg default.mgp \
		embed-jp.mgp embed.mgp gradation-jp.mgp \
		gradation.mgp mgp-old1.jpg mgp-old2.jpg mgp-old3.jpg \
		mgp.mng mgp1.jpg mgp2.jpg mgp3.jpg mgp3.xbm mgprc-sample \
		multilingual.mgp sample-fr.mgp sample-jp.mgp sample.mgp \
		sendmail6-jp.mgp sendmail6.mgp tutorial-jp.mgp tutorial.mgp \
		v6-jp.mgp v6.mgp v6header.eps v6header.jpg
EMACS=		README mgp.el mgp.sty sample.tex ../mgp-mode.el

pre-configure:
	cd ${WRKCONF}/contrib/xmindpath && ${_real_simple_configure_call}
d79 17
a95 21
	@@cd ${WRKSRC}/contrib/xmindpath && ${MAKE_PROGRAM} install
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mgp/sample
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mgp/emacs
	@@for i in $(DOCS); do \
	   ${INSTALL_DATA} ${WRKSRC}/$$i ${PREFIX}/share/doc/mgp; \
	done
	@@for i in $(SAMPLES); do \
	   ${INSTALL_DATA} ${WRKSRC}/sample/$$i ${PREFIX}/share/doc/mgp/sample; \
	done
	@@for i in $(EMACS); do \
		 ${INSTALL_DATA} ${WRKSRC}/contrib/mgp-el/$$i \
			 ${PREFIX}/share/doc/mgp/emacs; \
	done
	${INSTALL_SCRIPT} ${WRKSRC}/contrib/eqn2eps.sh \
		 ${PREFIX}/bin/eqn2eps
	${INSTALL_SCRIPT} ${WRKSRC}/contrib/mgp2html.pl \
		${PREFIX}/bin/mgp2html
	${INSTALL_SCRIPT} ${WRKSRC}/contrib/mgp2latex.pl \
		${PREFIX}/bin/mgp2latex
	${INSTALL_SCRIPT} ${WRKSRC}/contrib/tex2eps.sh \
		${PREFIX}/bin/tex2eps
@


1.4
log
@fix homepage, master site
@
text
@d1 1
a1 1
# $MirOS: ports/misc/magicpoint/Makefile,v 1.3 2006/09/14 00:11:16 tg Exp $
d4 2
d8 1
a8 1
DASH_VER=		1
d22 1
a22 2
LIB_DEPENDS+=		ttf.1::print/freetype \
			png.2::graphics/png \
d34 1
d58 2
a59 2
DOCS=	COPYRIGHT COPYRIGHT.jp FAQ README README.fonts README.fonts.jp \
	README.lang SYNTAX TODO.jp USAGE USAGE.jp
d67 4
a70 1
EMACS=	README mgp.el mgp.sty sample.tex ../mgp-mode.el
a71 1
# NOTE: there are some discussions/twists in gzip'ing xmindpath.1.
@


1.3
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/misc/magicpoint/Makefile,v 1.2 2005/07/07 21:23:42 bsiegert Exp $
d4 6
a9 6
COMMENT=			X11-based presentation tool
DISTNAME=	magicpoint-1.10a
PKGNAME=	${DISTNAME}-1
CATEGORIES=	misc productivity
MASTER_SITES=	ftp://ftp.mew.org/pub/MagicPoint/
HOMEPAGE=	http://www.mew.org/mgp/
d17 1
a17 1
FLAVORS=	no_gif freetype2
d20 10
a29 10
LIB_DEPENDS+=	ttf.1::print/freetype \
		png.2::graphics/png \
		mng::graphics/libmng
RUN_DEPENDS+=	pnmscale::graphics/netpbm

MODULES=	devel/gettext
USE_X11=	Yes
CONFIGURE_STYLE=autoconf gnu imake no-autoheader
CONFIGURE_ARGS+= --disable-vflib
CONFIGURE_ARGS+= --enable-freetype-charset16
d32 1
a32 1
CONFIGURE_ARGS+= --disable-xft2
d36 1
a36 1
CONFIGURE_ARGS+= --disable-gif
d38 3
a40 3
USE_CXX=	Yes
CONFIGURE_ARGS+= --enable-gif
LIB_DEPENDS+=	ungif.5::graphics/libungif
d43 1
a43 1
NO_REGRESS=	Yes
d50 1
a50 1
		./configure --prefix='$${DESTDIR}${PREFIX}'
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS$
d4 1
a4 1
COMMENT=	"X11-based presentation tool"
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
