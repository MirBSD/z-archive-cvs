head	1.2;
access;
symbols
	MIRBSD_8_BASE:1.2;
locks; strict;
comment	@# @;


1.2
date	2005.07.05.20.08.32;	author tg;	state Exp;
branches;
next	1.1;
commitid	6fe042cae8bb6f4d;

1.1
date	2005.03.18.15.47.19;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.47.19;	author tg;	state Exp;
branches;
next	;


desc
@@


1.2
log
@* capitalise the initial letter on Distfiles, Packages, etc.
* slightly change the Packages layout

agreed bsiegert@@
@
text
@#!/bin/sh
# Written by Marc Espie, 2000
# Public domain

# Sets up hard links under a distfiles mirror, so that 
# files will be preserved against checksum changes as a last
# ditch attempt.

# Also see REFETCH in bsd.port.mk, and mirroring-ports (7)

DISTDIR=${DISTDIR:-/usr/ports/Distfiles}
cd ${DISTDIR}
CIPHERS=${CIPHERS:-sha1 md5 rmd160}

# Build the find so that existing cipher dirs are avoided
exclude=''
conn=''
for ci in ${CIPHERS}
do
	mkdir -p $ci
	exclude="${exclude}${conn}-type d -name $ci -prune"
	conn=" -o "
done
echo "find . \( $exclude \) -o -type f -print"
find . \( $exclude \) -o -type f -print | while read i
do
	for ci in ${CIPHERS}
	do
		result=`$ci <$i`
		file=`basename $i`
		mkdir -p $ci/$result
		ln -f $i $ci/$result/$file
	done
done
@


1.1
log
@Initial revision
@
text
@d11 1
a11 1
DISTDIR=${DISTDIR:-/usr/ports/distfiles}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
