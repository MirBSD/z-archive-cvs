head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2012.10.18.16.41.28;	author tg;	state Exp;
branches;
next	1.3;
commitid	1005080313B0D9D852C;

1.3
date	2009.12.28.14.55.14;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004B38C6D25E238175;

1.2
date	2008.03.15.23.16.55;	author tg;	state Exp;
branches;
next	1.1;
commitid	10047DC58F316B51020;

1.1
date	2008.03.14.20.19.43;	author tg;	state Exp;
branches;
next	;
commitid	10047DADDAB252C4C44;


desc
@@


1.4
log
@add a way to disable adding stuff to .MAKEFLAGS
for badly behaved sub-makes
@
text
@# $MirOS: ports/infrastructure/mk/p5.port.mk,v 1.3 2009/12/28 14:55:14 tg Exp $

.ifndef MODPERL_ARCH
MODPERL_ARCH!=	/usr/bin/perl -e 'use Config; print $$Config{archname}, "\n";'
.  if ${__MAKEFLAGS_HACKERY:L} == "yes"
.MAKEFLAGS:=	${.MAKEFLAGS} MODPERL_ARCH=${MODPERL_ARCH:Q}
.  endif
.endif
.ifndef P5MAN3EXT
P5MAN3EXT!=	/usr/bin/perl -e 'use Config; print ".".$$Config{man3ext};'
.  if ${__MAKEFLAGS_HACKERY:L} == "yes"
.MAKEFLAGS:=	${.MAKEFLAGS} P5MAN3EXT=${P5MAN3EXT:Q}
.  endif
.endif
.ifndef P5DLEXT
P5DLEXT!=	/usr/bin/perl -e 'use Config; print ".".$$Config{dlext};'
.  if ${__MAKEFLAGS_HACKERY:L} == "yes"
.MAKEFLAGS:=	${.MAKEFLAGS} P5DLEXT=${P5DLEXT:Q}
.  endif
.endif

P5ARCH=		${P5SITE}/${MODPERL_ARCH}

SUBST_VARS+=	P5ARCH P5SITE P5MAN3EXT P5DLEXT
@


1.3
log
@speed up recursive ops by use of .MAKEFLAGS (not MAKEFLAGS like TNF,
since our make is different, apparently)
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/p5.port.mk,v 1.2 2008/03/15 23:16:55 tg Exp $
d5 1
d7 1
d11 1
d13 1
d17 1
d19 1
@


1.2
log
@bsiegert@@ agrees that it’s better to have all the variables in the p5 module
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/p5.port.mk,v 1.1 2008/03/14 20:19:43 tg Exp $
d3 1
d5 3
d9 3
d13 2
@


1.1
log
@add new “p5” module, included implicitly by “perl” module
every non-modperl user of ${P5ARCH} *must* now include that
it contains the real fix for darwin-thread-multi-2level and
x86-interix-thread-multi… and cleans up the confusion between
i386-midnightbsd and i386-freebsd-64int…
@
text
@d1 1
a1 1
# $MirOS$
d4 2
d9 1
a9 1
SUBST_VARS+=	P5ARCH
@

