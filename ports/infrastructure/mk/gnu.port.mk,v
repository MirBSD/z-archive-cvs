head	1.61;
access;
symbols
	MIRBSD_8_BASE:1.10;
locks; strict;
comment	@# @;


1.61
date	2016.10.22.23.03.14;	author tg;	state Exp;
branches;
next	1.60;
commitid	100580BF0466EE266DC;

1.60
date	2015.07.19.12.55.08;	author tg;	state Exp;
branches;
next	1.59;
commitid	10055AB9E3E3B9F3711;

1.59
date	2014.04.18.20.18.55;	author tg;	state Exp;
branches;
next	1.58;
commitid	100535188C775EAD2F7;

1.58
date	2014.04.18.20.13.18;	author tg;	state Exp;
branches;
next	1.57;
commitid	100535187702E3D27C6;

1.57
date	2010.11.17.13.52.20;	author bsiegert;	state Exp;
branches;
next	1.56;
commitid	1004CE3DE14385C2722;

1.56
date	2009.12.06.15.23.05;	author tg;	state Exp;
branches;
next	1.55;
commitid	1004B1BCC6337C6ED2E;

1.55
date	2009.08.16.17.25.44;	author tg;	state Exp;
branches;
next	1.54;
commitid	1004A88411337A62988;

1.54
date	2009.02.09.11.55.59;	author tg;	state Exp;
branches;
next	1.53;
commitid	100499019D654CA2AF3;

1.53
date	2009.01.15.22.44.43;	author tg;	state Exp;
branches;
next	1.52;
commitid	100496FBC5058C54DEC;

1.52
date	2008.11.01.20.24.35;	author tg;	state Exp;
branches;
next	1.51;
commitid	100490CBB102B8F22B9;

1.51
date	2008.11.01.19.59.02;	author tg;	state Exp;
branches;
next	1.50;
commitid	100490CB51311F08F14;

1.50
date	2008.11.01.19.57.15;	author tg;	state Exp;
branches;
next	1.49;
commitid	100490CB4A71D52F59E;

1.49
date	2008.10.13.21.35.15;	author tg;	state Exp;
branches;
next	1.48;
commitid	10048F3BF16418C6C8C;

1.48
date	2008.08.27.10.25.16;	author tg;	state Exp;
branches;
next	1.47;
commitid	10048B52B95077A5A6F;

1.47
date	2008.08.24.13.48.19;	author tg;	state Exp;
branches;
next	1.46;
commitid	10048B166BA31DAE549;

1.46
date	2008.08.19.17.40.28;	author tg;	state Exp;
branches;
next	1.45;
commitid	10048AB059B0853AB2F;

1.45
date	2008.08.17.01.13.40;	author tg;	state Exp;
branches;
next	1.44;
commitid	10048A77B5005A9155D;

1.44
date	2008.05.07.22.48.01;	author tg;	state Exp;
branches;
next	1.43;
commitid	100482231C374D9CA0B;

1.43
date	2008.05.07.21.19.26;	author tg;	state Exp;
branches;
next	1.42;
commitid	10048221CF03D813E80;

1.42
date	2008.05.02.11.37.24;	author tg;	state Exp;
branches;
next	1.41;
commitid	100481AFD061E3E83BF;

1.41
date	2008.03.15.17.38.07;	author bsiegert;	state Exp;
branches;
next	1.40;
commitid	10047DC096003D3BFDA;

1.40
date	2008.03.14.21.56.22;	author tg;	state Exp;
branches;
next	1.39;
commitid	10047DAF48D5D9E197A;

1.39
date	2008.03.14.19.13.03;	author tg;	state Exp;
branches;
next	1.38;
commitid	10047DACE3740B22A2F;

1.38
date	2007.08.06.09.42.14;	author tg;	state Exp;
branches;
next	1.37;
commitid	10046B6ECCF0BE3ACAD;

1.37
date	2007.05.23.09.14.01;	author tg;	state Exp;
branches;
next	1.36;
commitid	100465405EB54B76AA5;

1.36
date	2007.05.18.00.53.38;	author tg;	state Exp;
branches;
next	1.35;
commitid	100464CF90F404EF473;

1.35
date	2007.05.17.22.37.13;	author tg;	state Exp;
branches;
next	1.34;
commitid	100464CD92D4BF31008;

1.34
date	2007.05.16.22.17.25;	author tg;	state Exp;
branches;
next	1.33;
commitid	100464B82554C28BD7A;

1.33
date	2007.05.16.22.11.50;	author tg;	state Exp;
branches;
next	1.32;
commitid	100464B818C502B1933;

1.32
date	2007.05.12.22.36.10;	author tg;	state Exp;
branches;
next	1.31;
commitid	100464641666E97C039;

1.31
date	2007.05.08.20.56.37;	author tg;	state Exp;
branches;
next	1.30;
commitid	1004640E41516652443;

1.30
date	2007.05.08.20.36.06;	author tg;	state Exp;
branches;
next	1.29;
commitid	1004640DF3B123CA40C;

1.29
date	2007.05.07.20.23.34;	author bsiegert;	state Exp;
branches;
next	1.28;
commitid	100463F8A851BC79631;

1.28
date	2007.02.22.21.45.34;	author bsiegert;	state Exp;
branches;
next	1.27;
commitid	10045DE0EE8628237EB;

1.27
date	2006.11.24.01.57.47;	author tg;	state Exp;
branches;
next	1.26;
commitid	100456651AA79B1F426;

1.26
date	2006.11.20.21.20.07;	author tg;	state Exp;
branches;
next	1.25;
commitid	10045621BFB040E6D27;

1.25
date	2006.11.16.23.25.54;	author tg;	state Exp;
branches;
next	1.24;
commitid	100455CF38D396BC1C1;

1.24
date	2006.10.17.22.17.04;	author tg;	state Exp;
branches;
next	1.23;
commitid	100453554CF31EEEA43;

1.23
date	2006.08.26.23.34.17;	author tg;	state Exp;
branches;
next	1.22;
commitid	10044F0D836486F5483;

1.22
date	2006.07.23.15.32.52;	author tg;	state Exp;
branches;
next	1.21;
commitid	10044C39690165431BD;

1.21
date	2006.07.21.18.18.52;	author tg;	state Exp;
branches;
next	1.20;
commitid	10044C11A8E2F34DBA0;

1.20
date	2006.06.30.21.23.45;	author tg;	state Exp;
branches;
next	1.19;
commitid	10044A5966E7769AE31;

1.19
date	2006.06.29.21.56.01;	author tg;	state Exp;
branches;
next	1.18;
commitid	10044A44C803A3CA073;

1.18
date	2006.02.20.18.57.27;	author tg;	state Exp;
branches;
next	1.17;
commitid	10043FA112B240E1B56;

1.17
date	2006.02.09.11.11.54;	author tg;	state Exp;
branches;
next	1.16;
commitid	10043EB23217A35557B;

1.16
date	2006.02.07.20.19.09;	author tg;	state Exp;
branches;
next	1.15;
commitid	10043E900CC2C2D270E;

1.15
date	2006.02.07.20.17.31;	author tg;	state Exp;
branches;
next	1.14;
commitid	10043E9006872B5FC79;

1.14
date	2006.02.05.17.41.11;	author tg;	state Exp;
branches;
next	1.13;
commitid	10043E638C750A2B5F0;

1.13
date	2006.02.05.17.20.03;	author tg;	state Exp;
branches;
next	1.12;
commitid	10043E633D0472D2444;

1.12
date	2006.02.05.17.16.40;	author tg;	state Exp;
branches;
next	1.11;
commitid	10043E632F42429EBF4;

1.11
date	2005.12.29.20.38.24;	author tg;	state Exp;
branches;
next	1.10;
commitid	10043B44937475A1D78;

1.10
date	2005.12.16.01.25.31;	author tg;	state Exp;
branches;
next	1.9;
commitid	10043A2179830C2AC7B;

1.9
date	2005.12.15.01.24.43;	author tg;	state Exp;
branches;
next	1.8;
commitid	10043A0C5D7068BC1DF;

1.8
date	2005.11.10.23.45.07;	author tg;	state Exp;
branches;
next	1.7;
commitid	6cc44373db822a63;

1.7
date	2005.09.23.11.12.26;	author tg;	state Exp;
branches;
next	1.6;
commitid	25b04333e317467c;

1.6
date	2005.09.23.11.06.15;	author tg;	state Exp;
branches;
next	1.5;
commitid	6b014333e19a3a57;

1.5
date	2005.09.12.22.53.19;	author tg;	state Exp;
branches;
next	1.4;
commitid	6e6c432606e897b6;

1.4
date	2005.06.09.20.21.21;	author tg;	state Exp;
branches
	1.4.2.1;
next	1.3;
commitid	7ec842a8a4c67f02;

1.3
date	2005.04.28.20.33.06;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.20.17.00.45;	author bsiegert;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.47.19;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.4.2.1
date	2005.09.01.22.54.22;	author tg;	state Exp;
branches;
next	;
commitid	456b431786a69847;

1.1.7.1
date	2005.03.18.15.47.19;	author tg;	state Exp;
branches;
next	;


desc
@@


1.61
log
@update comment with <bsd.cfwrap.mk>
@
text
@# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.60 2015/07/19 12:55:08 tg Exp $
# $OpenBSD: gnu.port.mk,v 1.19 2004/06/06 11:49:08 espie Exp $

AUTOCONF_NEW?=		No
.if ${AUTOCONF_NEW:L} == "yes"
AUTOCONF_VERSION?=	2.61
.else
AUTOCONF_VERSION?=	2.13
.endif
AUTOMAKE_VERSION?=	1.4

MODGNU_RECURSE_DIRS?=	${WRKSRC}
AUTOGEN?=		${SHELL} ${PORTSDIR}/infrastructure/scripts/autogen.sh
MODGNU_COPIES?=		compile config-ml.in config.guess \
			config.libpath config.rpath config.sub depcomp \
			install-sh m4salt.inc m4sugar.inc \
			mdate-sh missing mkinstalldirs move-if-change \
			reloc-ldflags ylwrap ${MODGNU_EXTRA_COPIES}

PATCH_CHECK_ONLY?=	No
MODGNU_configure=	rm -f ${WRKCONF:Q}/config.cache; \
			${MODSIMPLE_configure}; \
			[[ ! -e ${WRKCONF}/config.log ]] || fgrep -A 1 \
			    'previous declaration' ${WRKCONF}/config.log | \
			    fgrep -v -e '$$? = ' -e ': In function ' \
			    ${MODGNU_TYPESCAN:S/^/-e /} || :
REGRESS_TARGET?=	check
AUTOCONF?=		autoconf
AUTOUPDATE?=		autoupdate
AUTOHEADER?=		autoheader
# missing ?= not an oversight
AUTOCONF_ENV=		PATH=${PORTPATH:Q} PORTSDIR=${PORTSDIR:Q} \
			M4=${M4:Q} \
			AUTOCONF_VERSION=${AUTOCONF_VERSION} \
			AUTOMAKE_VERSION=${AUTOMAKE_VERSION}
MAKE_FLAGS+=		V=1 mkdir_p='mkdir -p' \
			mkinstalldirs='mkdir -p' \
			MAKEINFO="makeinfo --no-split"
FAKE_FLAGS+=		V=1 mkdir_p='mkdir -p' \
			mkinstalldirs='mkdir -p' \
			MAKEINFO="makeinfo --no-split"
CONFIGURE_ENV+=		V=1 \
			MAKEINFO="makeinfo --no-split"

MODGNU_AUTOCONF_DEPS=	::devel/metaauto
.if ${AUTOCONF_VERSION} == "2.13"
MODGNU_AUTOCONF_DEPS+=	:autoconf->=2.13-20080405,<2.14:devel/autoconf/2.13
.elif ${AUTOCONF_VERSION} == "2.60"
MODGNU_AUTOCONF_DEPS+=	:autoconf->=2.60-3,<2.61:devel/autoconf/2.60
.elif ${AUTOCONF_VERSION} == "2.61"
MODGNU_AUTOCONF_DEPS+=	:autoconf->=2.61-1,<2.62:devel/autoconf/2.61
.else
MODGNU_AUTOCONF_DEPS+=	:autoconf-${AUTOCONF_VERSION}*:devel/autoconf/${AUTOCONF_VERSION}
.endif
MODGNU_AUTOMAKE_DEPS=	::devel/metaauto
.if ${AUTOMAKE_VERSION} == "1.9"
MODGNU_AUTOMAKE_DEPS+=	:automake->=1.9.6-5,<1.10:devel/automake/1.9
.else
MODGNU_AUTOMAKE_DEPS+=	:automake-${AUTOMAKE_VERSION}*:devel/automake/${AUTOMAKE_VERSION}
.endif

# Dependencies
.if ${CONFIGURE_STYLE:L:Mautogen}
.  if ${CONFIGURE_STYLE:L:Mno-autoheader}
AUTOCONF_ENV+=		NO_AUTOHEADER=yes
.  endif
# the above BEFORE the below line!
CONFIGURE_STYLE+=	autoconf automake no-autoheader
.endif
.if ${CONFIGURE_STYLE:L:Mautoupdate}
CONFIGURE_STYLE+=	autoconf
.endif

.if ${CONFIGURE_STYLE:L:Mautomake}
BUILD_DEPENDS+=		${MODGNU_AUTOMAKE_DEPS}
.else
REORDER_DEPENDENCIES+=	${PORTSDIR}/infrastructure/templates/automake.dep
.endif

.if ${CONFIGURE_STYLE:L:Mautoconf}
BUILD_DEPENDS+=		${MODGNU_AUTOCONF_DEPS}
MAKE_ENV+=		AUTOCONF_VERSION=${AUTOCONF_VERSION}
CONFIGURE_ENV+=		AUTOCONF_VERSION=${AUTOCONF_VERSION}
.  if !${CONFIGURE_STYLE:L:Mno-autoheader}
CONFIGURE_STYLE+=	autoheader
.  endif
.endif

# needed stuff
.if ${CONFIGURE_STYLE:L:Mautoconf} || ${CONFIGURE_STYLE:L:Mautogen}
MODGNU_MIRLIBTOOL?=	Yes
.endif
MODGNU_MIRLIBTOOL?=	No

.if ${CONFIGURE_STYLE:L:Mgnu}
.  if ${CONFIGURE_STYLE:L:Mdest}
_DESTPFX=		'$${${DESTDIRNAME}}'
.  else
_DESTPFX=
.  endif
CONFIGURE_ARGS+=	--cache-file=${WRKCONF:Q}/config.cache
CONFIGURE_ARGS+=	--prefix=${_DESTPFX}${PREFIX:Q}
.  if empty(CONFIGURE_STYLE:L:Mold)
CONFIGURE_ARGS+=	--sysconfdir=${_DESTPFX}${SYSCONFDIR:Q}
.  endif
.  if ${AUTOCONF_VERSION:E} > 59
CONFIGURE_ARGS+=	--datarootdir=${_DESTPFX}${PREFIX:Q}/share
.  endif
CONFIGURE_ARGS+=	--datadir=${_DESTPFX}${PREFIX:Q}/share
CONFIGURE_ARGS+=	--infodir=${_DESTPFX}${PREFIX:Q}/info
CONFIGURE_ARGS+=	--mandir=${_DESTPFX}${PREFIX:Q}/man
.  if ${AUTOCONF_VERSION:E} > 59
CONFIGURE_ARGS+=	--localedir=${_DESTPFX}${PREFIX:Q}/share/locale
CONFIGURE_ARGS+=	--docdir=${_DESTPFX}${PREFIX:Q}/share/doc/\$${PACKAGE}
.  endif
CONFIGURE_ARGS+=	--disable-libtool-lock
CONFIGURE_ARGS+=	--disable-dependency-tracking
.  if ${OStype} == "MirBSD"
CONFIGURE_ARGS+=	--with-gnu-ld
.  endif
.endif

# Files
.if ${MODGNU_MIRLIBTOOL:L} == "yes"
MODGNU_COPIES+=		libtool.m4 ltmain.sh
.endif
MODGNU_NUKES=		${MODGNU_COPIES} autom4te.cache libtool ltconfig

# post-patch per-directory loop

# 1. copy over MirGNUTOOLS into target directories, no matter what
_MODGNU_loop=	rm -rf ${MODGNU_NUKES}; ( cd ${PORTSDIR}/infrastructure/db/; \
		${INSTALL} -c -m 555 ${MODGNU_COPIES} $$d/ ); F=configure.ac; \
		test -e $$F || F=configure.in; [ -e $$F ] && ACAUX=$$(grep -a \
		^AC_CONFIG_AUX_DIR\( $$F | sed -e 's/AC_CONFIG_AUX_DIR(\[*//' \
		-e 's/\]*).*$$//'); [[ -n $$ACAUX && -d $$ACAUX/. ]] || \
		ACAUX=.; if [[ . != $$ACAUX ]]; then ( cd $$ACAUX && rm -rf \
		${MODGNU_NUKES} || :); ${INSTALL} -c -m 555 ${MODGNU_COPIES} \
		$$ACAUX/; fi; export ACAUX;

# 2. update Libtool to MirLibtool
.if ${MODGNU_MIRLIBTOOL:L} != "no"
.  if (${AUTOCONF_VERSION} != "2.13") && \
    (${AUTOCONF_VERSION} != "2.59") && \
    (${AUTOCONF_VERSION} != "2.61")
_MODGNU_loop+=	print "Warning: MirLibtool might fail in $$d due to use" \
		    "of autoconf-${AUTOCONF_VERSION}!";
.  endif
_MODGNU_loop+=	print "Updating to MirLibtool in $$d"; touch $$F; \
		${MKSH} ${PORTSDIR}/infrastructure/scripts/u2mirlibtool \
		    ${PATCHORIG} $$ACAUX;
.endif

# 3. execute hooks
_MODGNU_loop+=	${_MODGNU_loop_hooks}

# 4. run the various GNU tools
.if !${CONFIGURE_STYLE:L:Mautogen}
.  if ${CONFIGURE_STYLE:L:Mautoupdate}
_MODGNU_loop+=	echo "Running autoupdate-${AUTOCONF_VERSION} in $$d"; \
		${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOUPDATE};
.  endif
.  if ${CONFIGURE_STYLE:L:Mautoconf}
_MODGNU_loop+=	echo "Running autoconf-${AUTOCONF_VERSION} in $$d"; \
		${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF};
.  endif
.  if ${CONFIGURE_STYLE:L:Mdetectheader}
_MODGNU_loop+=	F=configure.ac; test -e $$F || F=configure.in; if \
		    ! test -e $$F || fgrep -qe AC_CONFIG_HEADERS -e \
		    AM_CONFIG_HEADER $$F; then \
		echo "Running autoheader-${AUTOCONF_VERSION} in $$d"; \
		${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOHEADER}; \
		fi;
.  elif ${CONFIGURE_STYLE:L:Mautoheader}
_MODGNU_loop+=	echo "Running autoheader-${AUTOCONF_VERSION} in $$d"; \
		${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOHEADER};
.  endif
.endif

# finally: everything run after patch
.if ${PATCH_CHECK_ONLY:L} != "yes"
MODGNU_post-patch+=	for d in ${MODGNU_RECURSE_DIRS}; do \
				( cd $$d; ${_MODGNU_loop} ); done;

# autogen is an exception, it is run only once in the toplevel directory.
# If you need more, use a custom autogen.sh script.
.if ${CONFIGURE_STYLE:L:Mautogen}
MODGNU_post-patch+=	echo "Running autotools regeneration script in ${WRKSRC}"; \
			cd ${WRKSRC}; \
			${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOGEN};
.endif

.endif

# OS-dependent checks

.if ${MACHINE_OS} == "Interix"
# poll on Interix only works on procfs... so disable its use
CONFIGURE_ENV+=		ac_cv_func_poll=no
CONFIGURE_ENV+=		ac_cv_header_poll_h=no
.elif ${MACHINE_OS} == "BSD"
# reported to be misused by bsiegert@@
CONFIGURE_ENV+=		ac_cv_func_malloc_0_nonnull=yes
# caught by systrace, tries to write to ${LOCALBASE}/lib as check
CONFIGURE_ENV+=		ac_cv_sys_long_file_names=yes
.  if ${OStype} == "MirBSD"
# cannot be used
CONFIGURE_ENV+=		ac_cv_type_long_double=no ac_cv_sizeof_long_double=0
.  endif
.endif

.if defined(LDADD) && !empty(LDADD)
CONFIGURE_ENV+=		LIBS=${LDADD:Q}
.endif

# Mac OSX “Leopard” inlining bug workaround
.if "${OStype}:${OSREV}:${MACHINE_ARCH}" == "Darwin:9.5.0:i386"
CONFIGURE_ENV+=		glib_cv_has__inline=no \
			glib_cv_has__inline__=no \
			glib_cv_hasinline=no
.endif
@


1.60
log
@disable long double, when tested for
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.59 2014/04/18 20:18:55 tg Exp $
d204 1
a204 1
# check prevented by systrace
@


1.59
log
@oops
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.58 2014/04/18 20:13:18 tg Exp $
d206 4
@


1.58
log
@whitelist autoconf 2.59 for MirLibtool
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.57 2010/11/17 13:52:20 bsiegert Exp $
d144 1
a144 1
    (${AUTOCONF_VERSION} != "2.59") &&
@


1.57
log
@set AUTOCONF_VERSION in CONFIGURE_ENV too, unbreaks automake-1.9. Grrr.
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.56 2009/12/06 15:23:05 tg Exp $
d143 3
a145 1
.  if (${AUTOCONF_VERSION} != "2.13") && (${AUTOCONF_VERSION} != "2.61")
@


1.56
log
@unbreak some installs; begin requiring specific minimum AM versions like AC
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.55 2009/08/16 17:25:44 tg Exp $
d83 1
@


1.55
log
@forcibly set V=1 for gnu stuff, as discussed on miros-disgust@@
agreed bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.54 2009/02/09 11:55:59 tg Exp $
a44 2
MODGNU_AUTOMAKE_DEPS=	::devel/metaauto \
			:automake-${AUTOMAKE_VERSION}*:devel/automake/${AUTOMAKE_VERSION}
d55 6
@


1.54
log
@remove autom4te.cache, if included in a distfile, before running autofools
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.53 2009/01/15 22:44:43 tg Exp $
d36 1
a36 1
EXTRA_XAKE_FLAGS+=	mkdir_p='mkdir -p' \
d39 5
a43 1
CONFIGURE_ENV+=		MAKEINFO="makeinfo --no-split"
@


1.53
log
@we no longer provide install-reloc, libiconv works without it too,
as it comes with its own, which is recent enough, and like this,
ohlol won't warn us about GNU GPLv3 any longer
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.52 2008/11/01 20:24:35 tg Exp $
d118 1
a118 1
MODGNU_NUKES=		${MODGNU_COPIES} libtool ltconfig
d123 1
a123 1
_MODGNU_loop=	rm -f ${MODGNU_NUKES}; ( cd ${PORTSDIR}/infrastructure/db/; \
d128 1
a128 1
		ACAUX=.; if [[ . != $$ACAUX ]]; then ( cd $$ACAUX && rm -f \
@


1.52
log
@cater for weird source layouts, be more failsafe || :)
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.51 2008/11/01 19:59:02 tg Exp $
d16 1
a16 1
			install-reloc install-sh m4salt.inc m4sugar.inc \
@


1.51
log
@some things only be run if !autogen
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.50 2008/11/01 19:57:15 tg Exp $
d124 2
a125 2
		install -c -m 555 ${MODGNU_COPIES} $$d/ ); F=configure.ac; \
		test -e $$F || F=configure.in; test -e $$F && ACAUX=$$(grep -a \
d127 4
a130 3
		-e 's/\]*).*$$//'); test -z "$$ACAUX" && ACAUX=.; if [ . != \
		"$$ACAUX" ]; then ( cd $$ACAUX && rm -f ${MODGNU_NUKES} ); \
		install -c -m 555 ${MODGNU_COPIES} $$ACAUX/; fi; export ACAUX;
@


1.50
log
@fix env variable AUTOCONF_VERSION for autogen style
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.49 2008/10/13 21:35:15 tg Exp $
d146 2
a147 1
.if ${CONFIGURE_STYLE:L:Mautoupdate}
d150 2
a151 2
.endif
.if ${CONFIGURE_STYLE:L:Mautoconf}
d154 2
a155 2
.endif
.if ${CONFIGURE_STYLE:L:Mdetectheader}
d162 1
a162 1
.elif ${CONFIGURE_STYLE:L:Mautoheader}
d165 1
@


1.49
log
@work around the glib1 bug (and glib2 and others are, according to the
MacPorts bugtracker, affected as hell)
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.48 2008/08/27 10:25:16 tg Exp $
d60 1
a60 2
CONFIGURE_STYLE+=	automake no-autoheader
BUILD_DEPENDS+=		${MODGNU_AUTOCONF_DEPS}
@


1.48
log
@there is no --localedir and --docdir in autoconf-2.59, apparently
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.47 2008/08/24 13:48:19 tg Exp $
d198 7
@


1.47
log
@fix audio/flac for gecko2, which abuses GNUSYSTEM_AUX_DIR... I think
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.46 2008/08/19 17:40:28 tg Exp $
d104 1
a104 1
.  if ${AUTOCONF_VERSION:E} > 13
@


1.46
log
@grml… AM_CONFIG_HEADER existED but people still use it
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.45 2008/08/17 01:13:40 tg Exp $
d37 1
@


1.45
log
@speed up recursive configure scripts by using an (initially empty) cache
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.44 2008/05/07 22:48:01 tg Exp $
d156 2
a157 1
		    ! test -e $$F || fgrep -q AC_CONFIG_HEADERS $$F; then \
@


1.44
log
@• replace MODGNU_CONFIG_GUESS_DIRS with MODGNU_RECURSE_DIRS
• always place ${WRKSRC} itself at the end of MODGNU_RECURSE_DIRS due to
  recursion issues inside of autoconf itself
• if MODGNU_RECURSE_DIRS=${WRKSRC} stood in the Makefile, nuke it (default)
• remove dead reference to MODGNU_TWIDDLE_DIRS
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.43 2008/05/07 21:19:26 tg Exp $
d21 2
a22 1
MODGNU_configure=	${MODSIMPLE_configure}; \
d92 1
@


1.43
log
@new CONFIGURE_STYLE feature: detectheader
(I mean, d’oh, why aren’t we just always detecting this?)
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.42 2008/05/02 11:37:24 tg Exp $
d12 1
a12 1
MODGNU_CONFIG_GUESS_DIRS?= ${WRKSRC}
d165 1
a165 1
MODGNU_post-patch+=	for d in ${MODGNU_CONFIG_GUESS_DIRS}; do \
@


1.42
log
@• raise explicit autoconf-2.13 dependency to the version to first
  include the new AC_AUTOCONF_VERSION macro
• add explicit autoconf-2.61 dependency to do the same
• add warning that other autoconfen might not work safely with MirLibtool
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.41 2008/03/15 17:38:07 bsiegert Exp $
d152 7
a158 1
.if ${CONFIGURE_STYLE:L:Mautoheader}
@


1.41
log
@Important bugfix: correct automake dependency.
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.40 2008/03/14 21:56:22 tg Exp $
d43 1
a43 1
MODGNU_AUTOCONF_DEPS+=	:autoconf->=2.13-20070223,<2.14:devel/autoconf/2.13
d46 2
d131 4
@


1.40
log
@same tweak as for autoconf… *sigh* that we need it…

@@bsiegert: is this right, too?
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.39 2008/03/14 19:13:03 tg Exp $
d40 1
a40 1
			:automake-${AUTOMAKE_VERSION}-*:devel/automake/${AUTOMAKE_VERSION}
d47 1
a47 1
MODGNU_AUTOCONF_DEPS+=	:autoconf-${AUTOCONF_VERSION}-*:devel/autoconf/${AUTOCONF_VERSION}
@


1.39
log
@• bsd.port.mk: expose mksh as SHELL and CONFIG_SHELL to scripts
• gnu.port.mk: improve dependencies on autoconf
  XXX this is #10 material
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.38 2007/08/06 09:42:14 tg Exp $
d39 2
a40 1
MODGNU_AUTOMAKE_DEPS=	::devel/metaauto ::devel/automake/${AUTOMAKE_VERSION}
@


1.38
log
@• make “upgrade to mirlibtool” an external script for legibility
• do the ed(1) dance twice, the libtool stuff might fail, but
  the versionnr stuff shan't (XXX maybe use an awk(1) script?)
• cover acinclude.m4 as well as aclocal.m4
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.37 2007/05/23 09:14:01 tg Exp $
d46 1
a46 1
MODGNU_AUTOCONF_DEPS+=	::devel/autoconf/${AUTOCONF_VERSION}
@


1.37
log
@fix dependencies (?)
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.36 2007/05/18 00:53:38 tg Exp $
d128 3
a130 13
_MODGNU_loop+=	print "Updating to MirLibtool in $$d"; \
		touch $$F; L=aclocal.m4; test -s $$L || L=$$ACAUX/$$L; touch \
		$$L; for LP in $${L}${PATCHORIG} $$L; do test -e $$LP || \
		continue; print "/^\\\# serial [0-9].* AC_PROG_LIBTOOL/ka\n" \
		"'a,\$$g/^ifelse(\\[AC_DISABLE_FAST_INSTALL])/kb\n" \
		"'b,\$$g/^AC_MSG_RESULT(\\[\$$SED])/+1kb\n'a,'bd\n" \
		",g/m4_if(m4_PACKAGE_VERSION," \
		"/s//m4_if(m4_ifdef([m4_PACKAGE_VERSIONNR]," \
		"[m4_PACKAGE_VERSIONNR]," \
		"[m4_bpatsubst(m4_defn([m4_PACKAGE_VERSION])," \
		"[-.*], [])]), /\nwq" | \
		ed -s $$LP 2>/dev/null || true; print "0a\n" \
		"builtin([include], [libtool.m4])\n.\nwq" | ed -s $$LP; done;
@


1.36
log
@for autoconf 2.13 and 2.60, ensure we d̲o̲ use the bugfixed versions
by hardcoding the dependency minimum versions (XXX syntax check?)
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.35 2007/05/17 22:37:13 tg Exp $
d42 1
a42 1
MODGNU_AUTOCONF_DEPS+=	:autoconf-2.13->=20070223:devel/autoconf/2.13
d44 1
a44 1
MODGNU_AUTOCONF_DEPS+=	:autoconf-2.60->=3:devel/autoconf/2.60
@


1.35
log
@mirbsd always has GNU ld
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.34 2007/05/16 22:17:25 tg Exp $
d40 8
a47 1
MODGNU_AUTOCONF_DEPS=	::devel/metaauto ::devel/autoconf/${AUTOCONF_VERSION}
@


1.34
log
@revert commitid 2d504333e14ab7ab, 6b014333e19a3a57, 25b04333e317467c

the “my special thingie” mentioned in commitid 1004640E41516652443
and introduced first in commitid 100455CF38D396BC1C1 ff. detected,
and the patches in commitid 10045DE3C2C47EB2D4A (autoconf-2.13),
100455CE11A16609189 (autoconf-2.60) and 1004640DF840CA7E1C5 (2.61)
fixed this shortcoming of the combination of autotools together
with mirports default CPPFLAGS+=“-include …/mirmake.h”.
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.33 2007/05/16 22:11:50 tg Exp $
d97 3
@


1.33
log
@instead of
| .if ${foo} == 1
| …
| .endif
| .if ${foo} == 2
| …
| .endif
use
| .if ${foo} == 1
| …
| .elif ${foo} == 2
| …
| .endif
which is obviously the same in faster
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.32 2007/05/12 22:36:10 tg Exp $
a171 5
# mis-detected on MirBSD, OpenBSD due to proto in <sys/types.h>
# probably an autoconf shortcoming though
CONFIGURE_ENV+=		ac_cv_func_ftruncate=yes
CONFIGURE_ENV+=		ac_cv_func_lseek=yes
CONFIGURE_ENV+=		ac_cv_func_truncate=yes
@


1.32
log
@make autoconf-2.61 default for AUTOCONF_NEW=Yes

ok bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.31 2007/05/08 20:56:37 tg Exp $
d171 1
a171 3
.endif

.if ${MACHINE_OS} == "BSD"
@


1.31
log
@use new variable MODGNU_TYPESCAN to shut up my special thingie
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.30 2007/05/08 20:36:06 tg Exp $
d6 1
a6 1
AUTOCONF_VERSION?=	2.60
@


1.30
log
@introduce a hack for autoconf version checking colliding with our branding
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.29 2007/05/07 20:23:34 bsiegert Exp $
d22 4
a25 2
			[[ ! -e ${WRKCONF}/config.log ]] || fgrep -A 4 \
			    "previous declaration" ${WRKCONF}/config.log || :
@


1.29
log
@Use grep -a for ACAUX determination, i.e. treat all files as ascii. Otherwise
the lesstiff configure with its Latin-1 (C) symbol will give this result:

Binary file configure.in matches

which results in this error upon "mmake patch":

/bin/mksh: cd: too many arguments

ok tg@@
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.28 2007/02/22 21:45:34 bsiegert Exp $
d121 7
a127 2
		"'b,\$$g/^AC_MSG_RESULT(\\[\$$SED])/+1kb\n'a,'bd\nwq" \
		| ed -s $$LP 2>/dev/null || true; print "0a\n" \
@


1.28
log
@Globally add --disable-libtool-lock and --disable-dependency-tracking
for all ports with gnu configure style.

proposal and ok tg@@
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.27 2006/11/24 01:57:47 tg Exp $
d108 1
a108 1
		test -e $$F || F=configure.in; test -e $$F && ACAUX=$$(grep \
@


1.27
log
@some check which is cought by systrace
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.26 2006/11/20 21:20:07 tg Exp $
d93 2
@


1.26
log
@*d'oh* fgrep returns false if it doesn't find anything…
this probably accidentally broke almost the entire tree
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.25 2006/11/16 23:25:54 tg Exp $
d172 2
@


1.25
log
@grep for "previous declaration" errors in config.log, proactively
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.24 2006/10/17 22:17:04 tg Exp $
d23 1
a23 1
			    "previous declaration" ${WRKCONF}/config.log
@


1.24
log
@remove that (silly?) GPL infection warning
cf. http://groups.google.com/group/comp.lang.python/msg/29c7588fbecd8289
cf. http://www.rosenlaw.com/html/GPL.PDF
cf. http://www.rosenlaw.com/html/GL18.pdf
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.23 2006/08/26 23:34:17 tg Exp $
d21 3
a23 1
MODGNU_configure=	${MODSIMPLE_configure}
@


1.23
log
@OStype vs MACHINE_OS confusion, try to clean up the mess:

We use MACHINE_OS to distinguish between different OSes, i.e.
 BSD Darwin Interix Linux

Within these, there are OStype per MACHINE_OS, e.g.
 BSD -> MirBSD OpenBSD
 Darwin -> Darwin
 Interix -> Interix MirInterix
 Linux -> Debian

These are only the OStype""s seen until now,
so please use what semantically fits, e.g. on
Interix and MirInterix, you don't have IPv6,
but on MirInterix you won't need an explicit
texinfo dependency since it's in the base system.
Be aware that OStype can be user defined though!
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.22 2006/07/23 15:32:52 tg Exp $
d14 1
a14 1
MODGNU_COPIES?=		_gplwarn.c compile config-ml.in config.guess \
@


1.22
log
@* fix that utf8encodings mistake in screen introduced with autoconf 2.60
* generalise the fix
* clean up the CONFIGURE_ARGS+= logic
* fold the different cases better
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.21 2006/07/21 18:18:52 tg Exp $
d156 1
a156 1
.if ${OStype} == "Interix"
d162 1
a162 1
.if ${OStype:M*BSD}
@


1.21
log
@repair configure style 'dest' (e.g. autoconf-2.13)

spotted by gecko2, my bad
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.20 2006/06/30 21:23:45 tg Exp $
d73 1
a73 3
CONFIGURE_ARGS+=	--prefix='$${${DESTDIRNAME}}${PREFIX}'
CONFIGURE_ARGS+=	--infodir='$${${DESTDIRNAME}}${PREFIX}/info'
CONFIGURE_ARGS+=	--mandir='$${${DESTDIRNAME}}${PREFIX}/man'
d75 1
a75 3
CONFIGURE_ARGS+=	--prefix=${PREFIX:Q}
CONFIGURE_ARGS+=	--infodir=${PREFIX:Q}/info
CONFIGURE_ARGS+=	--mandir=${PREFIX:Q}/man
d77 1
d79 11
a89 5
.    if ${CONFIGURE_STYLE:L:Mdest}
CONFIGURE_ARGS+=	--sysconfdir='$${${DESTDIRNAME}}${SYSCONFDIR}'
.    else
CONFIGURE_ARGS+=	--sysconfdir=${SYSCONFDIR:Q}
.    endif
@


1.20
log
@since autoconf 2.60, infodir/mandir seem to have different defaults
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.19 2006/06/29 21:56:01 tg Exp $
d74 2
d78 2
a88 2
CONFIGURE_ARGS+=	--infodir=${PREFIX:Q}/info
CONFIGURE_ARGS+=	--mandir=${PREFIX:Q}/man
@


1.19
log
@switch to GNU autoconf 2.60
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.18 2006/02/20 18:57:27 tg Exp $
d85 2
@


1.18
log
@add support for _MODGNU_loop_hooks
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.17 2006/02/09 11:11:54 tg Exp $
d6 1
a6 1
AUTOCONF_VERSION?=	2.59
@


1.17
log
@Fix a few abuses:
| CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include/libpng \
|			    -I${LOCALBASE}/include -I${X11BASE}/include" \
| 			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
|			PKGCONFIG_PATH=...

* use Benny's pkgconfig module
  - fixes PKGCONFIG_PATH in all places
  - adds explicit dependencies on pkgconfig where needed
* use a new png module
  - also cought a few implicit dependencies
* use a new freetype1 module in two places (more to come?)
* CPPFLAGS, LDFLAGS are in CONFIGURE_ENV anyway, so correctly
  add to them as CPPFLAGS+=<tab>foo instead
* use EXTRA_{M,X,F}AKE_FLAGS
* CC is given anyway, too
* add MAKEINFO= to gnu style

Still doesn't catch all OpenBSD abuses, but most of them.

Brokenness analysis:
* Automatically done
  - CFLAGS+=CPPFLAGS
  - CXXFLAGS+=CPPFLAGS
  - CPPFLAGS+=-I${LOCALBASE}/include
  - LDFLAGS+=-L${LOCALBASE}/lib
  - CONFIGURE_ENV, MAKE_FLAGS+=
    + LDFLAGS=LDFLAGS
    + CPPFLAGS you get the idea
    + CFLAGS
    + CXXFLAGS
    + CC
    + CXX (if USE_CXX)
* Done if USE_X11=Yes
  - CPPFLAGS+=X11BASE/include
  - LDFLAGS+=X11BASE/lib

Tell me if there are problems, but first try adding
an EXTRA_ before MAKE_FLAGS and FAKE_FLAGS.
Remember EXTRA_XAKE_FLAGS get added to both.
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.16 2006/02/07 20:19:09 tg Exp $
d115 4
a118 1
# 3. run the various GNU tools
@


1.16
log
@some ports dereference $(mkdir_p) during build time, sigh
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.15 2006/02/07 20:17:31 tg Exp $
d31 3
a33 1
EXTRA_XAKE_FLAGS+=	mkdir_p='mkdir -p'
@


1.15
log
@solve the mkdir_p problem globally
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.14 2006/02/05 17:41:11 tg Exp $
d31 1
a31 1
EXTRA_FAKE_FLAGS+=	mkdir_p='mkdir -p'
@


1.14
log
@partially revert, doesn't work as it should
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.13 2006/02/05 17:20:03 tg Exp $
d31 1
@


1.13
log
@* escape with :Q
* allow AUTOCONF_ENV additions
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.12 2006/02/05 17:16:40 tg Exp $
d26 2
a27 1
AUTOCONF_ENV+=		PATH=${PORTPATH:Q} PORTSDIR=${PORTSDIR:Q} \
d29 2
a30 2
			AUTOCONF_VERSION=${AUTOCONF_VERSION:Q} \
			AUTOMAKE_VERSION=${AUTOMAKE_VERSION:Q}
@


1.12
log
@* move autogen.sh from db/ to scripts/
* add ACLOCAL_FLAGS possibility
* remove in (almost?) all cases the need for no-autoheader
  by checking ourselves
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.11 2005/12/29 20:38:24 tg Exp $
d26 1
a26 2
# missing ?= not an oversight
AUTOCONF_ENV=		PATH=${PORTPATH} PORTSDIR=${PORTSDIR} \
d28 2
a29 2
			AUTOCONF_VERSION=${AUTOCONF_VERSION} \
			AUTOMAKE_VERSION=${AUTOMAKE_VERSION}
@


1.11
log
@*FUCK* the Debian project

Hint: do a 'make extract' on libexif-0.6.13 once and look
at how the aclocal.m4 starts...
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.10 2005/12/16 01:25:31 tg Exp $
d13 1
a13 1
AUTOGEN?=		${SHELL} ${PORTSDIR}/infrastructure/db/autogen.sh
@


1.10
log
@fix AC_FUNC_MALLOC problems, our malloc is "always right"
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.9 2005/12/15 01:24:43 tg Exp $
d105 1
a105 1
		continue; print "/^\\\# serial [0-9]* AC_PROG_LIBTOOL/ka\n" \
@


1.9
log
@* use ${FOO:Q} i.p.v. '${FOO}' or "${FOO}"
* replace v='' and v="" with v= while here
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.8 2005/11/10 23:45:07 tg Exp $
d155 2
@


1.8
log
@* add ${LDADD} to LIBS= in CONFIGURE_ENV
* on Interix, add -lbind -ldb to LDADD
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.7 2005/09/23 11:12:26 tg Exp $
d28 1
a28 1
			M4='${M4}' \
d72 1
a72 1
CONFIGURE_ARGS+=	--prefix='${PREFIX}'
d78 1
a78 1
CONFIGURE_ARGS+=	--sysconfdir='${SYSCONFDIR}'
d158 1
a158 1
CONFIGURE_ENV+=		LIBS="${LDADD}"
@


1.7
log
@* sort and split-line the ac_cv_* env sets
* add truncate() and lseek() for MirOS, defined in the same header
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.6 2005/09/23 11:06:15 tg Exp $
d156 4
@


1.6
log
@propagate this change (ftruncate detection) to all autoconf ports,
the same manner as poll(2) is disabled on Interix already
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.5 2005/09/12 22:53:19 tg Exp $
d145 2
a146 1
CONFIGURE_ENV+=		ac_cv_func_poll=no ac_cv_header_poll_h=no
d153 2
@


1.5
log
@join tg-ports-devel branch into HEAD
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.4.2.1 2005/09/01 22:54:22 tg Exp $
d144 1
d147 6
@


1.4
log
@make poll.h / poll() checks always fail on Interix with gnu style
it's easier this way
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.3 2005/04/28 20:33:06 tg Exp $
a2 3
#-
# Largely improved support for GNU stuff, including automatic
# conversion to MirLibtool.
a3 1
# Variables
@


1.4.2.1
log
@shrink some stuff; optimise; remove useless comments
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.4 2005/06/09 20:21:21 tg Exp $
d3 3
d7 1
@


1.3
log
@allow CONFIGURE_STYLE=autogen no-autoheader
@
text
@d1 1
a1 1
# $MirOS: ports/infrastructure/mk/gnu.port.mk,v 1.2 2005/03/20 17:00:45 bsiegert Exp $
d144 6
@


1.2
log
@more paths *sigh*
@
text
@d1 1
a1 1
# $MirOS$
d41 4
@


1.1
log
@Initial revision
@
text
@d51 1
a51 1
REORDER_DEPENDENCIES+=	${PORTSDIR}/infrastructure/mk/automake.dep
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
