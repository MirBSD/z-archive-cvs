head	1.4;
access;
symbols
	bsiegert-cfgfile_BASE:1.4
	bsiegert-cfgfile:1.4.0.2
	MIRBSD_8_BASE:1.3;
locks; strict;
comment	@ * @;


1.4
date	2007.03.30.23.20.10;	author bsiegert;	state Exp;
branches;
next	1.3;
commitid	100460D99284E3410CC;

1.3
date	2005.12.17.02.36.26;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043A378A344C47E91;

1.2
date	2005.05.22.03.52.46;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	5d43428ffdbc7a19;

1.1
date	2005.03.18.15.47.16;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.47.16;	author tg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Implement one of the points from my todo list: @@emul directives for
plists. If EMUL is set in a port's Makefile (e.g. EMUL=linux for a port
which needs linux emulation), this fact is entered into the package.
pkg_add checks for the relevant emulation.

- introduce new piperead() function, which executes a command and reads
  one line of output. Carefully crafted to avoid errors.
- new option for pkg_create: -e gives an initial value for @@emul
- bsd.port.mk: add -e to PKG_ARGS if EMUL given
- new function have_emulation(): Is the emulation enabled (via sysctl
  -n) or, alternatively, are we already running the "right" OS?
- pkg_info: show @@emul directive
- documentation: document EMUL and @@emul
@
text
@/* $MirOS: ports/infrastructure/pkgtools/create/create.h,v 1.3 2005/12/17 02:36:26 tg Exp $ */
/* $OpenBSD: create.h,v 1.4 2003/08/15 00:03:22 espie Exp $ */

/*
 * FreeBSD install - a package for the installation and maintainance
 * of non-core utilities.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * Jordan K. Hubbard
 * 18 July 1993
 *
 * Include and define various things wanted by the create command.
 */

#ifndef _INST_CREATE_H_INCLUDE
#define _INST_CREATE_H_INCLUDE

extern char	*Prefix;
extern char	*Comment;
extern char	*Desc;
extern char	*Display;
extern char	*Install;
extern char	*DeInstall;
extern char	*Contents;
extern char	*Require;
extern char	*SrcDir;
extern char	*ExcludeFrom;
extern char	*Mtree;
extern char	*Pkgdeps;
extern char	*Pkgcfl;
extern char	*Emulations;
extern char	*BaseDir;
extern char	PlayPen[];
extern size_t	PlayPenSize;
extern int	Dereference;
extern bool	PlistOnly;
extern int	WantUSTAR;
extern ld_type_t LdType;

void		check_list(char *, package_t *, bool);
void		copy_plist(char *, package_t *);

#endif	/* _INST_CREATE_H_INCLUDE */
@


1.3
log
@* 4.4BSD.dist: var/spool/ftp and var/cron are permission trouble, nuke
* 4.4BSD.dist: we need one uname and gname for mtree to work
* create/create.h, create/pl.c: (check_list) add syshack flag to change
  man/ into share/man/
* create/perform.c: (pkg_perform) if the Prefix is /usr enable the new
  syshack flag if not just normalising the packaging list; be careful
  to not totally break for FAKE=no operation
* bsd.port.mk: (${WRKPKG}/mtree.spec) replace @@BINOWN@@ and @@BINGRP@@
* bsd.port.mk: (${PORTSDIR}/infrastructure/db/fake.mtree) use it
* bsd.port.mk: (MTREE_FILE+=) add 4.4BSD.dist if PREFIX=/usr
@
text
@d1 1
a1 1
/* $MirOS: ports/infrastructure/pkgtools/create/create.h,v 1.2 2005/05/22 03:52:46 bsiegert Exp $ */
d39 1
@


1.2
log
@Add new PLIST commands: @@option ldcache, @@option gnu-ld, and @@option static.
@@ldcache is now DEPRECATED.
@
text
@d1 1
a1 1
/* $MirOS$ */
d47 1
a47 1
void		check_list(char *, package_t *);
@


1.1
log
@Initial revision
@
text
@d45 1
a45 1
extern int	IsDylib;
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
