head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2011.03.08.19.08.14;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004D767EB44F3A68F8;

1.1
date	2009.09.06.16.31.12;	author tg;	state Exp;
branches;
next	;
commitid	1004AA3E385782410B4;


desc
@@


1.2
log
@update, but keep multibyte disabled after analysis
@
text
@$MirOS: ports/shells/zsh/patches/patch-Completion_Unix_Type__diff_options,v 1.1 2009/09/06 16:31:12 tg Exp $
$OpenBSD: patch-Completion_Unix_Type__diff_options,v 1.1 2006/10/19 13:44:51 naddy Exp $
--- Completion/Unix/Type/_diff_options.orig	Sun Oct 18 19:47:07 2009
+++ Completion/Unix/Type/_diff_options	Tue Mar  8 17:18:07 2011
@@@@ -119,9 +119,35 @@@@ else
         '-S+[set first file in comparison]:start with file:_files'
       )
     ;;
+    mirbsd*|openbsd*)
+      args=(
+        '(-c -e -f -q -u -C -D -U)-n[produce an rcsdiff(1)-compatible diff]'
+        '(-c -e -f -n -u -C -D -U)-q[only print a line when the files differ; does not produce a list of changes]'
+        '(-c -e -f -n -q -C -D -U)-u[produce a unified diff with 3 lines of context]'
+        '(-c -e -f -n -q -u -D -U)-C+[produce a context diff]:number of lines of context'
+        '(-c -e -f -n -q -u -C -U)-D[produce a merged file with preprocessor directives]:preprocessor symbol'
+        '(-c -e -f -n -q -u -C -D)-U+[produce a unified diff with NUMBER lines of context]:number of lines of context'
+        '-a[treat all files as ASCII text]'
+        '-d[try to produce the smallest diff possible]'
+        '-I[ignore changes whose lines match the extended regular expression]:extended regular expression pattern'
+        '-i[ignore case]'
+        '-l[long output format (paginate with pr(1))]'
+        '-L[print a label instead of the file name and time]:label'
+        '-p[show characters from the last line before the context]'
+        '-t[expand tabs in output lines]'
+        '-T[consistently align tabs]'
+        '-w[like -b, but totally ignore whitespace]'
+        '-N[treat absent files in either directory as if they were empty]'
+        '-P[treat absent files in the second directory as if they were empty]'
+        '-s[report files that are the same]'
+        '-S[start a directory diff from a file name]:file name'
+        '-X[Exclude files and subdirectories whose basenames match lines in a file]:file name'
+        '-x[Exclude files and subdirectories whose basenames match a pattern]:pattern'
+      )
+    ;;
   esac
-  
-  _arguments "$args[@@]" \
+
+  _arguments -s "$args[@@]" \
     "(-e -f -u -n)-c[output a context diff]" \
     "(-c -f -u -n)-e[output an ed script]" \
     "(-c -e -u -n)-f[output a reversed ed script]" \
@


1.1
log
@commit an updated zsh, mostly taken from OpenBSD, with a few MirBSD
modifications â€“ just so that it compiles, runs, and almost passes the
testsuite (MidnightBSD and Interix will need more patches; Darwin should
work as-is).

MirBSD testsuite results:
37 successful test scripts, 1 failure, 0 skipped

The reason for this file is documented at the bottom of ./SECURITY
because it led to discovering (at least) one buffer overflow hole
in the multibyte code (and to me not wanting to poke in this code
any longer).
@
text
@d1 1
a1 1
$MirOS$
d3 3
a5 3
--- Completion/Unix/Type/_diff_options.orig	Thu Sep 30 04:28:18 2004
+++ Completion/Unix/Type/_diff_options	Wed Oct 11 14:23:55 2006
@@@@ -120,9 +120,35 @@@@ else
@

