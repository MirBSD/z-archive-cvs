head	1.12;
access;
symbols;
locks; strict;
comment	@# @;


1.12
date	2014.04.02.17.03.33;	author tg;	state Exp;
branches;
next	1.11;
commitid	100533C42EB55B7C141;

1.11
date	2007.03.21.10.39.31;	author bsiegert;	state Exp;
branches;
next	1.10;
commitid	10046010B3736EA8E99;

1.10
date	2007.03.20.19.44.27;	author bsiegert;	state Exp;
branches;
next	1.9;
commitid	100460039931BBCC3A1;

1.9
date	2006.09.14.00.07.01;	author tg;	state Exp;
branches;
next	1.8;
commitid	10045089C0E234154C3;

1.8
date	2006.02.07.20.17.30;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043E9006872B5FC79;

1.7
date	2006.02.01.17.51.55;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043E0F5286548843E;

1.6
date	2006.02.01.17.36.54;	author tg;	state Exp;
branches;
next	1.5;
commitid	10043E0F18235A56745;

1.5
date	2006.02.01.16.28.01;	author tg;	state Exp;
branches;
next	1.4;
commitid	10043E0E1771404AF56;

1.4
date	2005.12.29.20.29.25;	author tg;	state Exp;
branches;
next	1.3;
commitid	10043B4472E05DC30B0;

1.3
date	2005.11.09.20.51.11;	author bsiegert;	state Exp;
branches;
next	1.2;
commitid	51d443726141e2a9;

1.2
date	2005.03.25.23.13.57;	author bsiegert;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.42.52;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.42.52;	author tg;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Record that this needs gettext (for autoconf)
@
text
@# $MirOS: ports/audio/flac/Makefile,v 1.11 2007/03/21 10:39:31 bsiegert Exp $
# $OpenBSD: Makefile,v 1.18 2003/04/18 00:28:40 naddy Exp $

COMMENT=		free lossless audio codec
DISTNAME=		flac-1.1.2
DASH_VER=		3
CATEGORIES=		audio archivers
HOMEPAGE=		http://flac.sourceforge.net/
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=flac/}

# (L)GPL, GFDL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

.include <mirports.sys.mk>

USE_ICONV?=		any
USE_ICONV+=		oldm4

MODULES+=		devel/gettext
LIB_DEPENDS=		ogg::audio/libogg

.if ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=		::lang/nasm
.endif

USE_CXX=		Yes
CONFIGURE_STYLE=	autogen
AUTOCONF_NEW=		Yes
AUTOMAKE_VERSION=	1.9
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--enable-3dnow \
			--with-libiconv-prefix="${ICONV_PREFIX}" \
			--with-ogg="${LOCALBASE}"
CONFIGURE_ENV+=		ac_cv_path_XMMS_CONFIG=false \
			ac_cv_prog_DOXYGEN=false
CPPFLAGS+=		-I${WRKSRC}/include

# "obj" is magic to our make(1)
post-configure:
	@@rm -rf ${WRKSRC}/obj

post-install:
	@@cd ${PREFIX}/share/doc && mv ${DISTNAME} flac

.include <bsd.port.mk>
@


1.11
log
@Use oldm4 for iconv. This needs the latest revision of
converters/iconv/libiconv.port.mk. Bump patchlevel after changes, unbreak
on MirOS-current.
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.10 2007/03/20 19:44:27 bsiegert Exp $
d6 1
a6 1
DASH_VER=		2
d22 1
a22 1
MODULES=		converters/libiconv
@


1.10
log
@flac: break until further investigation of build failure
audacious-plugins: no flac for now
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.9 2006/09/14 00:07:01 tg Exp $
a3 2
BROKEN=			does not build, need to investigate

d6 1
a6 1
PKGNAME?=		${DISTNAME}-1
d9 1
d17 4
a20 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=flac/}
a24 3
# for two .m4 files (no actual code)
BUILD_DEPENDS+=		::devel/gettext

@


1.9
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.8 2006/02/07 20:17:30 tg Exp $
d4 3
a6 1
COMMENT=			free lossless audio codec
@


1.8
log
@solve the mkdir_p problem globally
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.7 2006/02/01 17:51:55 tg Exp $
d4 1
a4 1
COMMENT=		"free lossless audio codec"
@


1.7
log
@shockingly, aclocal'ing here needs devel/gettext installed:
aclocal:configure.in:163: warning: macro `AM_ICONV' not found in library
aclocal:configure.in:164: warning: macro `AM_LANGINFO_CODESET' not found in library

No code from gettext is used though. Should maybe make that another package?
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.6 2006/02/01 17:36:54 tg Exp $
a38 1
EXTRA_FAKE_FLAGS+=	mkdir_p='mkdir -p'
@


1.6
log
@* convert to automake
* as a side effect, lib-link.m4 is no longer used
* with the new LOCALBASE/giconv/ layout, both GNU
  and base libiconv are found and linked correctly
* disable XMMS support - xmms.m4 is not found during
  aclocal time since we do not have a build dependency
  on it nor ever built the xmms plugin
* as another side effect, HTML API documentation is there
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.5 2006/02/01 16:28:01 tg Exp $
d21 3
@


1.5
log
@add USE_ICONV variable to MODULES=converters/libiconv which
defaults to any -> doesn't pull in the port under Darwin and
MirOS-current, uses libiconv (GNU or BSD) in base
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.4 2005/12/29 20:29:25 tg Exp $
d6 1
d26 1
a26 1
CONFIGURE_STYLE=	autoconf
d28 1
@


1.4
log
@* update to 1.1.2
* remove hidden doxygen auto-dependency (grr @@porter)
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.3 2005/11/09 20:51:11 bsiegert Exp $
d29 1
a29 1
			--with-libiconv-prefix="${LOCALBASE}" \
@


1.3
log
@Libtoolise plist, bump patchlevel
@
text
@d1 1
a1 1
# $MirOS: ports/audio/flac/Makefile,v 1.2 2005/03/25 23:13:57 bsiegert Exp $
d4 4
a7 7
COMMENT=	"free lossless audio codec"

DISTNAME=	flac-1.1.0
PKGNAME=	${DISTNAME}-1
CATEGORIES=	audio archivers
HOMEPAGE=	http://flac.sourceforge.net/

d15 1
a15 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=flac/}
d17 2
a18 2
MODULES=	converters/libiconv
LIB_DEPENDS=	ogg::audio/libogg
d21 1
a21 1
BUILD_DEPENDS+=	::lang/nasm
d24 11
a34 9
USE_CXX=	Yes
CONFIGURE_STYLE= autoconf
AUTOCONF_NEW=	Yes
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--enable-3dnow \
		--with-libiconv-prefix="${LOCALBASE}" \
		--with-ogg="${LOCALBASE}"
CONFIGURE_ENV=	CPPFLAGS="-I${WRKSRC}/include" \
		XMMS_CONFIG=/usr/bin/false
@


1.2
log
@Mass-update dependencies to cope with port renames. Mostly done in the train
home from Strasbourg.
@
text
@d1 1
a1 1
# $MirOS$
d7 1
d21 1
a21 1
LIB_DEPENDS=	ogg.4::audio/libogg
@


1.1
log
@Initial revision
@
text
@d23 1
a23 1
BUILD_DEPENDS+=	::devel/nasm
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
