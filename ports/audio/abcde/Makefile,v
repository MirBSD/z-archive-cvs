head	1.10;
access;
symbols;
locks; strict;
comment	@# @;


1.10
date	2009.08.16.17.16.19;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004A883C9B4C196B76;

1.9
date	2009.08.16.16.25.54;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004A882F1F72B43308;

1.8
date	2009.08.16.15.19.58;	author bsiegert;	state Exp;
branches;
next	1.7;
commitid	1004A8823AC443ACD9F;

1.7
date	2008.10.04.19.02.55;	author tg;	state Exp;
branches;
next	1.6;
commitid	10048E7BD9A0842B398;

1.6
date	2008.03.09.17.22.22;	author tg;	state Exp;
branches;
next	1.5;
commitid	10047D41CAA7E715397;

1.5
date	2006.09.14.00.06.57;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045089C0E234154C3;

1.4
date	2006.03.23.21.42.25;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004423165112BB6250;

1.3
date	2006.02.09.12.25.13;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043EB348C1DDC8752;

1.2
date	2005.07.07.21.17.11;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.15.42.49;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.42.49;	author tg;	state Exp;
branches;
next	;


desc
@@


1.10
log
@change all V to VSN (ok bsiegert@@) and some DASH_VER while here
@
text
@# $MirOS: ports/audio/abcde/Makefile,v 1.9 2009/08/16 16:25:54 tg Exp $
# $OpenBSD: Makefile,v 1.7 2004/04/13 21:07:48 brad Exp $

COMMENT=	command-line utility to rip and encode audio cds

VSN=		2.1.19
# cd-diskid version number
V2=		0.9
DISTNAME=	abcde_${VSN}.orig
PKGNAME=	abcde-${VSN}-${DASH_VER}
CATEGORIES=	audio

HOMEPAGE=	http://www.hispalinux.es/~data/abcde.php

# Artistic and GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MS=		http://www.hispalinux.es/~data/files/
MASTER_SITES=	${MS}
MASTER_SITES0=	${MS}cd-discid/
MASTER_SITES1=	http://lly.org/~rcw/id3/
DISTFILES=	${DISTNAME}.tar.gz \
		cd-discid_${V2}.orig.tar.gz:0

RUN_DEPENDS=	:cdparanoia-*:audio/cdparanoia

FLAVOURS=	lame
FLAVOUR?=	

NO_REGRESS=	Yes
WRKDIST=	${WRKDIR}/abcde-${VSN}

.if ${FLAVOUR:L:Mlame}
DISTFILES+=		id3_0.12.orig.tar.gz:1
RUN_DEPENDS+=		:lame-*:audio/lame
USE_X11=		Yes # inherited
PERMIT_PACKAGE_CDROM=	dependency lame not allowed
.else
RUN_DEPENDS+=		:vorbis-tools-*:audio/vorbis-tools
USE_CXX=		Yes # inherited
.endif

post-patch:
.if ${FLAVOUR:L:Mlame}
	perl -pi -e 's,OUTPUTTYPE=ogg,OUTPUTTYPE=mp3,g' ${WRKSRC}/abcde
.endif

do-build:
	cd ${WRKDIR}/cd-discid-${V2} && \
	    ${_PASS_CC:Q} ${CFLAGS} -o cd-discid cd-discid.c
.if ${FLAVOUR:L:Mlame}
	cd ${WRKDIR}/id3-0.12 && \
	    perl -pi -e 's,#include <getopt.h>,/*#include <getopt.h>*/,g' id3.c && \
	    ${_PASS_CC:Q} ${CFLAGS} -o id3 id3.c
.endif

do-install:
	${INSTALL_SCRIPT} ${WRKSRC}/abcde ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/cddb-tool ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKDIR}/cd-discid-${V2}/cd-discid ${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/abcde.1 ${PREFIX}/man/man1
	${INSTALL_MAN} ${WRKSRC}/cddb-tool.1 ${PREFIX}/man/man1
	${INSTALL_MAN} ${WRKDIR}/cd-discid-${V2}/cd-discid.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/abcde
	${INSTALL_DATA} ${WRKSRC}/abcde.conf ${PREFIX}/share/examples/abcde
.if ${FLAVOUR:L:Mlame}
	${INSTALL_PROGRAM} ${WRKDIR}/id3-0.12/id3 ${PREFIX}/bin
	${INSTALL_MAN} ${WRKDIR}/id3-0.12/id3.1 ${PREFIX}/man/man1
.endif

.include <bsd.port.mk>
@


1.9
log
@change
‚Ä¢ _PASS_CC back from „Äåmpcc„Äç to „Äå${WRKDIR}/bin/mpcc„Äç (note that the
  former „Äå${WRKDIR:Q}/bin/mpcc„Äç was wrong)
‚Ä¢ all uses of _PASS_CC to either
  ‚Ä£ ${_PASS_CC:T:Q} (when passing, e.g. for libtool ‚Äì this is for use
    when ${WRKDIR}/bin is in $$PATH)
  ‚Ä£ ${_PASS_CC:Q} (when invoking, e.g. in post-build targets ‚Äì only
    these I saw when mechanically doing this; Benny wants to fix the
    remaining ones; I should‚Äôve introduced no more breakage than was)
‚Ä¢ _PASS_CXX/mpcxx just the same

agreed bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: ports/audio/abcde/Makefile,v 1.8 2009/08/16 15:19:58 bsiegert Exp $
d6 1
a6 1
V=		2.1.19
d9 2
a10 2
DISTNAME=	abcde_$V.orig
PKGNAME=	abcde-$V-0
d34 1
a34 1
WRKDIST=	${WRKDIR}/abcde-$V
@


1.8
log
@Unbreak, add full /path/to/compiler
@
text
@d1 1
a1 1
# $MirOS$
d53 1
a53 1
		${WRKDIR:Q}/bin/${_PASS_CC} ${CFLAGS} -o cd-discid cd-discid.c
d56 2
a57 2
		perl -pi -e 's,#include <getopt.h>,/*#include <getopt.h>*/,g' id3.c && \
		${WRKDIR:Q}/bin/${_PASS_CC} ${CFLAGS} -o id3 id3.c
@


1.7
log
@mass conversion from
‚Ä¢ ${CC}
‚Ä¢ "${CC}"
‚Ä¢ '${CC}'
‚Ä¢ ${CC:Q}
to ${_PASS_CC:Q} (or without :Q if it‚Äôs executed, not assigned), and
same for CXX‚Ä¶ most of these are VERY UGLY, prone to break with ccache
and maybe even without‚Ä¶
@
text
@d1 1
d4 1
a4 1
COMMENT=			command-line utility to rip and encode audio cds
d53 1
a53 1
		${_PASS_CC} ${CFLAGS} -o cd-discid cd-discid.c
d57 1
a57 1
		${_PASS_CC} ${CFLAGS} -o id3 id3.c
@


1.6
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d52 1
a52 1
		${CC} ${CFLAGS} -o cd-discid cd-discid.c
d56 1
a56 1
		${CC} ${CFLAGS} -o id3 id3.c
@


1.5
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ≠ edited by script with manual postprocessing
@
text
@d29 2
a30 2
FLAVORS=	lame
FLAVOR?=	
d35 1
a35 1
.if ${FLAVOR:L:Mlame}
d46 1
a46 1
.if ${FLAVOR:L:Mlame}
d53 1
a53 1
.if ${FLAVOR:L:Mlame}
d68 1
a68 1
.if ${FLAVOR:L:Mlame}
@


1.4
log
@fix a few dependency issues
@
text
@d3 1
a3 1
COMMENT=	"command-line utility to rip and encode audio cds"
@


1.3
log
@first bulk build fallout:
* fix port bugs which are simple to fix (eg. libtoolise)
* break all others so that we get a percentage of what works...
@
text
@d36 4
a39 2
DISTFILES+=	id3_0.12.orig.tar.gz:1
RUN_DEPENDS+=	:lame-*:audio/lame
d41 2
a42 1
RUN_DEPENDS+=	:vorbis-tools-*:audio/vorbis-tools
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d33 1
a33 1
WRKDIST=	${WRKDIR}/${PKGNAME}
@


1.1
log
@Initial revision
@
text
@d9 1
a9 1
PKGNAME=	abcde-$V
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
