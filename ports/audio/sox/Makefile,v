head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2008.03.09.17.22.26;	author tg;	state Exp;
branches;
next	1.3;
commitid	10047D41CAA7E715397;

1.3
date	2006.09.14.00.07.16;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045089C0E234154C3;

1.2
date	2005.06.05.19.03.21;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	e2042a34ac3653d;

1.1
date	2005.03.18.15.43.10;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.43.10;	author tg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@# $MirOS: ports/audio/sox/Makefile,v 1.3 2006/09/14 00:07:16 tg Exp $
# $OpenBSD: Makefile,v 1.31 2005/05/15 19:40:36 naddy Exp $

COMMENT=			SOund eXchange - universal sound sample translator

DISTNAME=	sox-12.17.7
CATEGORIES=	audio
HOMEPAGE=	http://sox.sourceforge.net/


# gsm library has bad license
PERMIT_PACKAGE_CDROM=	"no redistribution"
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	"no redistribution"
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	http://www.cnpbagwell.com/ \
		${MASTER_SITE_SOURCEFORGE:=sox/}

CONFIGURE_STYLE=gnu dest
CONFIGURE_ARGS=	--disable-oss-dsp

FLAVOURS=	mp3 vorbis
FLAVOUR?=

.if ${FLAVOUR:L:Mvorbis}
LIB_DEPENDS+=	vorbis.1,vorbisenc.1,vorbisfile.2::audio/libvorbis
.else
CONFIGURE_ARGS+= --disable-ogg-vorbis
.endif

.if ${FLAVOUR:L:Mmp3}
LIB_DEPENDS+=	mad.2::audio/libmad mp3lame.0::audio/lame
.else
CONFIGURE_ARGS+= --disable-mad --disable-lame
.endif

do-regress:
	@@cd ${WRKSRC}/src && ./tests.sh && ./testall.sh

.include <bsd.port.mk>
@


1.3
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/audio/sox/Makefile,v 1.2 2005/06/05 19:03:21 bsiegert Exp $
d23 2
a24 2
FLAVORS=	mp3 vorbis
FLAVOR?=
d26 1
a26 1
.if ${FLAVOR:L:Mvorbis}
d32 1
a32 1
.if ${FLAVOR:L:Mmp3}
@


1.2
log
@Update sox to 12.17.7, from OpenBSD. Now contains all our patches, wohoo :)
However, kludge around an infrastructure bug:

MirPorts automatically includes <bsd.own.mk> via EXTRA_SYS_MK_INCLUDES.
This seems to make "crtbegin0.o" the default target, breaking "make" without
a target, because of the following line:

${CRTBEGIN} ${CRTEND} ${CRTI} ${CRTN}: .OPTIONAL

tg: can we do anything about this?
@
text
@d1 1
a1 1
# $MirOS$
d4 1
a4 1
COMMENT=	"SOund eXchange - universal sound sample translator"
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.25 2003/12/10 21:28:58 naddy Exp $
d6 1
a6 1
DISTNAME=	sox-12.17.4
d13 1
a13 1
PERMIT_PACKAGE_FTP=	"no redistribution"
d15 1
a15 1
PERMIT_DISTFILES_FTP=	"no redistribution"
d17 2
a18 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=sox/}
d20 2
a21 5
CONFIGURE_STYLE=autoconf
AUTOCONF_NEW=	Yes
CONFIGURE_ARGS=	--disable-sun-audio
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
d38 2
a39 1
NO_REGRESS=	Yes
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
