head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2007.04.03.19.46.08;	author tg;	state dead;
branches;
next	1.4;
commitid	1004612AC977E789195;

1.4
date	2007.03.31.22.02.09;	author tg;	state Exp;
branches;
next	1.3;
commitid	100460EDA5B5AAA6E31;

1.3
date	2006.09.14.00.15.02;	author tg;	state Exp;
branches;
next	1.2;
commitid	10045089C0E234154C3;

1.2
date	2005.07.07.21.28.27;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	66bc42cd9a7ea714;

1.1
date	2005.03.18.16.00.09;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.16.00.09;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@â€¢ remove ports that are simply broken, don't work, for too long, with no
  update or update-willing person in sight, kde stuff, web2.0 stuff that
  we don't want in ports (just stuff it into /var/www yourself, it isn't
  that difficult, right?), stuff for which no new version exists/will be
  and some obsd cruft; adjust dependencies
â€¢ no BUILD_DEPENDS+=RUN_DEPENDS or vice versa any more, *ever*
â€¢ fix some other stuff partially

ok bsiegert@@
@
text
@# $OpenBSD: Makefile,v 1.17 2003/06/21 07:49:24 pvalchev Exp $

BROKEN=			needs porting to python 2.3

COMMENT=		object-oriented web application server

VERSION=	2.6.1

DISTNAME=	Zope-${VERSION}-src
PKGNAME=	zope-${VERSION}-${DASH_VER}
CATEGORIES=     www

HOMEPAGE=	http://www.zope.org/

# Zope Public License (ZPL) 2.0 <http://www.zope.org/Resources/ZPL>
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes


MASTER_SITES=	http://www.zope.org/Products/Zope/${VERSION}/
EXTRACT_SUFX=	.tgz

DIST_SUBDIR=	zope

#MASTER_SITES0=	http://www.zope.org/Members/zigg/UnixSecurityPatch/
#PATCHFILES=	Zope-${VERSION}-unix-security.patch:0
#PATCH_DIST_STRIP=-p1

#HOTFIX_DATE1= 	2002-06-14
#MASTER_SITES1=	http://www.zope.org/Products/Zope/Hotfix_${HOTFIX_DATE1}/

DISTFILES=	${DISTNAME}${EXTRACT_SUFX}

B_R_DEPENDS+=	:python->=2.1.3,<2.2:lang/python/2.3

# Note that the configure script is really just for pcgi, but it's
# the only one in the package.

CONFIGURE_STYLE=gnu

WRKBUILD=			${WRKSRC}/pcgi
MODGNU_CONFIG_GUESS_DIRS= ${WRKBUILD}

ZOPEHOME=	${PREFIX}/lib/zope
PRODUCTSDIR=	${ZOPEHOME}/lib/python/Products

do-build:
	cd ${WRKSRC} && \
		ZDIR=${ZOPEHOME} ${LOCALBASE}/bin/python2.1 w_pcgi.py && \
		ZDIR=${ZOPEHOME} ${LOCALBASE}/bin/python2.1 \
			-O inst/compilezpy.py
	sed -e "s%@@@@PREFIX@@@@%${PREFIX}%g" \
		-e "s%@@@@LOCALBASE@@@@%${LOCALBASE}%g" \
		< ${FILESDIR}/zope-instance > ${WRKSRC}/zope-instance

# All this should give us what closely resembles a zope.org binary
# installation and allow us to rely as much as possible on make
# plist to update to newer versions.

do-install:
	${INSTALL_SCRIPT} ${WRKSRC}/zope-instance ${PREFIX}/bin
	${INSTALL_PROGRAM_DIR} ${ZOPEHOME}
	cp -Rp ${WRKSRC}/* ${ZOPEHOME}
	chown -R ${BINOWN}:${BINGRP} ${ZOPEHOME}
	cd ${ZOPEHOME}/lib && ln -fs ../../python2.1
	rm -r ${ZOPEHOME}/*.txt ${ZOPEHOME}/doc ${ZOPEHOME}/lib/Components \
		${ZOPEHOME}/pcgi/Win32
	find ${ZOPEHOME} -name \*.orig -or -name \*.o -or -name .cvsignore \
		-or -name sedscript -or -name \*.old | xargs rm
	find ${ZOPEHOME}/lib/python -name config.c -or -name Makefile \
		-or -name Makefile.pre -or -name Makefile.pre.in | xargs rm
	rm ${ZOPEHOME}/pcgi/Makefile \
		${ZOPEHOME}/pcgi/config.log ${ZOPEHOME}/pcgi/config.status \
		${ZOPEHOME}/pcgi/config.cache ${ZOPEHOME}/zope-instance \
		${ZOPEHOME}/w*_pcgi.py*
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/zope/changenotes 
	${INSTALL_DATA} ${WRKSRC}/*.txt ${WRKSRC}/doc/*.txt \
		${PREFIX}/share/doc/zope
	${INSTALL_DATA} ${WRKSRC}/doc/changenotes/* \
		${PREFIX}/share/doc/zope/changenotes
	echo "Zope ${VERSION} (MirPorts zope-${VERSION})" \
		> ${PREFIX}/lib/zope/lib/python/version.txt
#	${INSTALL_DATA_DIR} ${PRODUCTSDIR}/Hotfix_${HOTFIX_DATE1}
#	${INSTALL_DATA} \
#		${WRKDIR}/lib/python/Products/Hotfix_${HOTFIX_DATE1}/* \
#		${PRODUCTSDIR}/Hotfix_${HOTFIX_DATE1}

do-regress:
	cd ${WRKSRC} && ${LOCALBASE}/bin/python2.1 utilities/testrunner.py -a

.include <bsd.port.mk>
@


1.4
log
@fix broken dependencies, <bsd.own.mk> inclusion; break other packages
@
text
@@


1.3
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d3 3
a5 1
COMMENT=			object-oriented web application server
a7 1
PORT_VERSION=	${VERSION}
d10 1
a10 1
PKGNAME=	zope-${PORT_VERSION}-0
d36 1
a36 2
BUILD_DEPENDS=	:python->=2.1.3,<2.2:lang/python/2.1
RUN_DEPENDS=	:python->=2.1.3,<2.2:lang/python/2.1
d83 1
a83 1
	echo "Zope ${VERSION} (OpenBSD package zope-${PORT_VERSION})" \
@


1.2
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d3 1
a3 1
COMMENT=	"object-oriented web application server"
@


1.1
log
@Initial revision
@
text
@d9 1
a9 1
PKGNAME=	zope-${PORT_VERSION}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
