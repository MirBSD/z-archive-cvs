head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2007.04.03.19.46.00;	author tg;	state dead;
branches;
next	1.1;
commitid	1004612AC977E789195;

1.1
date	2005.03.18.15.59.37;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.59.37;	author tg;	state Exp;
branches;
next	;


desc
@@


1.2
log
@• remove ports that are simply broken, don't work, for too long, with no
  update or update-willing person in sight, kde stuff, web2.0 stuff that
  we don't want in ports (just stuff it into /var/www yourself, it isn't
  that difficult, right?), stuff for which no new version exists/will be
  and some obsd cruft; adjust dependencies
• no BUILD_DEPENDS+=RUN_DEPENDS or vice versa any more, *ever*
• fix some other stuff partially

ok bsiegert@@
@
text
@$OpenBSD: patch-konq-embed_dropin_klibloader_cpp,v 1.6 2003/08/06 15:45:55 brad Exp $
--- konq-embed/dropin/klibloader.cpp.orig	Thu Jun 12 15:03:24 2003
+++ konq-embed/dropin/klibloader.cpp	Sat Jul  5 15:12:20 2003
@@@@ -27,6 +27,8 @@@@
 #include "kglobal.h"
 #include <kstddirs.h>
 
+#include <stdlib.h>
+#include <string.h>
 #include <assert.h>
 
 #if defined(HAVE_DLFCN)
@@@@ -96,7 +98,19 @@@@ KDLOpenLibrary::~KDLOpenLibrary()
 
 void *KDLOpenLibrary::symbol( const char *name )
 {
-    return dlsym( m_handle, name );
+    void *res = dlsym( m_handle, name );
+#ifdef __OpenBSD__
+    if ( !res ) {
+	char *name2 = (char *)malloc(strlen(name)+2);
+	if (name2) {
+	   name2[0] = '_';
+	   strcpy(name2+1, name);
+	   res = dlsym( m_handle, name2);
+	   free(name2);
+	}
+    }
+#endif
+    return res;
 }
 #endif
 
@@@@ -152,6 +166,9 @@@@ KLibrary *KLibLoader::library( const cha
 
 KLibrary *KLibLoader::globalLibrary( const char *name )
 {
+#ifndef RTLD_GLOBAL
+# define RTLD_GLOBAL 0
+#endif 
 #if defined(HAVE_DLFCN)
     void *handle = dlopen( name, RTLD_LAZY | RTLD_GLOBAL );
     if ( !handle )
@


1.1
log
@Initial revision
@
text
@@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
