head	1.30;
access;
symbols;
locks; strict;
comment	@# @;


1.30
date	2014.04.10.00.20.46;	author tg;	state Exp;
branches;
next	1.29;
commitid	1005345E3F55E4D406F;

1.29
date	2012.10.18.17.24.51;	author tg;	state Exp;
branches;
next	1.28;
commitid	10050803B7600807AB4;

1.28
date	2009.08.16.17.25.53;	author tg;	state Exp;
branches;
next	1.27;
commitid	1004A8841315849D3DC;

1.27
date	2009.08.16.17.19.19;	author tg;	state Exp;
branches;
next	1.26;
commitid	1004A883C9B4C196B76;

1.26
date	2009.06.21.09.37.08;	author tg;	state Exp;
branches;
next	1.25;
commitid	1004A3DFF2C0799F22F;

1.25
date	2009.06.18.20.56.16;	author tg;	state Exp;
branches;
next	1.24;
commitid	1004A3AAA0067EF00FD;

1.24
date	2008.05.02.19.44.32;	author tg;	state Exp;
branches;
next	1.23;
commitid	100481B6F311C9F7843;

1.23
date	2008.05.02.15.43.07;	author tg;	state Exp;
branches;
next	1.22;
commitid	100481B369B1599EEFF;

1.22
date	2008.05.02.15.41.38;	author tg;	state Exp;
branches;
next	1.21;
commitid	100481B3630564C3A3F;

1.21
date	2008.05.02.15.39.45;	author tg;	state Exp;
branches;
next	1.20;
commitid	100481B35D178B4C92D;

1.20
date	2008.05.02.15.32.47;	author tg;	state Exp;
branches;
next	1.19;
commitid	100481B34082D2E8D60;

1.19
date	2008.03.09.17.23.39;	author tg;	state Exp;
branches;
next	1.18;
commitid	10047D41CAA7E715397;

1.18
date	2007.03.31.21.14.21;	author tg;	state Exp;
branches;
next	1.17;
commitid	100460ECF437A87ECCA;

1.17
date	2007.02.23.02.18.38;	author tg;	state Exp;
branches;
next	1.16;
commitid	10045DE4F1551480E35;

1.16
date	2007.02.22.23.11.49;	author tg;	state Exp;
branches;
next	1.15;
commitid	10045DE234A10F41991;

1.15
date	2006.09.14.00.14.57;	author tg;	state Exp;
branches;
next	1.14;
commitid	10045089C0E234154C3;

1.14
date	2006.02.21.17.42.30;	author tg;	state Exp;
branches;
next	1.13;
commitid	10043FB51165FBF37FF;

1.13
date	2006.02.21.16.48.30;	author tg;	state Exp;
branches;
next	1.12;
commitid	10043FB44457CFBADEF;

1.12
date	2006.02.02.21.09.41;	author tg;	state Exp;
branches;
next	1.11;
commitid	10043E274FC2C247460;

1.11
date	2006.02.02.20.13.46;	author tg;	state Exp;
branches;
next	1.10;
commitid	10043E2680B1115BCC7;

1.10
date	2006.01.25.19.00.48;	author tg;	state Exp;
branches;
next	1.9;
commitid	10043D7CAA0016209B3;

1.9
date	2006.01.25.13.54.49;	author tg;	state Exp;
branches;
next	1.8;
commitid	10043D7833044038F88;

1.8
date	2006.01.25.12.48.07;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043D773676CAD7990;

1.7
date	2006.01.01.04.14.50;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043B75745267D3BDB;

1.6
date	2005.07.07.21.28.19;	author bsiegert;	state Exp;
branches;
next	1.5;
commitid	66bc42cd9a7ea714;

1.5
date	2005.05.04.17.07.39;	author tg;	state Exp;
branches;
next	1.4;
commitid	3bcd42790170e5dd;

1.4
date	2005.05.04.16.12.31;	author tg;	state Exp;
branches;
next	1.3;
commitid	1b254278f43e7820;

1.3
date	2005.03.27.22.20.25;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.25.23.13.35;	author bsiegert;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.16.00.00;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.16.00.00;	author tg;	state Exp;
branches;
next	;


desc
@@


1.30
log
@make php-gd compilable w/o t1lib which wants C++
@
text
@# $MirOS: ports/www/php/extensions/Makefile,v 1.29 2012/10/18 17:24:51 tg Exp $
# $OpenBSD: Makefile,v 1.17 2005/12/29 23:06:28 sturm Exp $

FULLPKGNAME=		php-extensions-${VSN}-${DASH_VER}
COMMENT=		informational package about PHP5 extensions

MULTI_PACKAGES=
SUBPACKAGE?=

# extensions get installed under the httpd chroot
PREFIX?=		${CHROOT_DIR}

FLAVOURS=
FLAVOUR?=

BUILD_DEPENDS+=		${CORE_LIB_DEPENDS}
RUN_DEPENDS+=		${CORE_DEPENDENCY}

GRAPHIC_DEPENDS=	jpeg.62::graphics/jpeg
MODPNG_AUTODEPS=	No
MODULES+=		graphics/png
GRAPHIC_DEPENDS+=	${MODPNG_DEPENDS}

GRAPHIC_CONFIG=		--with-jpeg-dir=${LOCALBASE:Q} \
			--with-png-dir=${PNG_BASE:Q} \
			--with-zlib-dir=/usr

.include <mirports.sys.mk>

# bz2
PSEUDO_FLAVOURS+=	no_bz2
.if ${FLAVOUR:L:Mno_bz2}
CONFIGURE_ARGS+=	--without-bz2
.else
MULTI_PACKAGES+=	-bz2
COMMENT-bz2=		bzip2 compression extensions for php
CONFIGURE_ARGS+=	--with-bz2=shared,${LOCALBASE:Q}
BZ2_DEPENDS=		bz2::archivers/bzip2
.endif

# curl
PSEUDO_FLAVOURS+=	no_curl
.if ${FLAVOUR:L:Mno_curl}
CONFIGURE_ARGS+=	--without-curl
.else
MULTI_PACKAGES+=	-curl
COMMENT-curl=		curl URL library extensions for php
CONFIGURE_ARGS+=	--with-curl=shared,${LOCALBASE:Q}
CURL_DEPENDS=		curl::net/curl
.endif

# dba
PSEUDO_FLAVOURS+=	no_dba
.if ${FLAVOUR:L:Mno_dba}
CONFIGURE_ARGS+=	--disable-dba
.else
MULTI_PACKAGES+=	-dba
COMMENT-dba=		dba GDBM access extensions for php
CONFIGURE_ARGS+=	--enable-dba=shared --with-gdbm=${LOCALBASE:Q}
DBA_DEPENDS=		gdbm::databases/gdbm
.endif

# dbase
PSEUDO_FLAVOURS+=	no_dbase
.if ${FLAVOUR:L:Mno_dbase}
CONFIGURE_ARGS+=	--disable-dbase
.else
MULTI_PACKAGES+=	-dbase
COMMENT-dbase=		dBase database access extensions for php
CONFIGURE_ARGS+=	--enable-dbase=shared
.endif

# dbx
PSEUDO_FLAVOURS+=	no_dbx
.if ${FLAVOUR:L:Mno_dbx}
CONFIGURE_ARGS+=	--disable-dbx
.else
MULTI_PACKAGES+=	-dbx
COMMENT-dbx=		dbx database abstraction interface for php
CONFIGURE_ARGS+=	--enable-dbx=shared
.endif

# fam
PSEUDO_FLAVOURS+=	no_fam
.if ${FLAVOUR:L:Mno_fam}
CONFIGURE_ARGS+=	--disable-fam
.else
MULTI_PACKAGES+=	-fam
COMMENT-fam=		filesystem alteration monitor extensions for php
CONFIGURE_ARGS+=	--with-fam=shared,${LOCALBASE:Q}
FAM_DEPENDS=		fam::sysutils/fam
.endif

# filepro
PSEUDO_FLAVOURS+=	no_filepro
.if ${FLAVOUR:L:Mno_filepro}
CONFIGURE_ARGS+=	--disable-filepro
.else
MULTI_PACKAGES+=	-filepro
COMMENT-filepro=	filepro database access extensions for php
CONFIGURE_ARGS+=	--enable-filepro=shared
.endif

# gd
PSEUDO_FLAVOURS+=	no_gd
PSEUDO_FLAVOURS+=	gd_no_t1
.if ${FLAVOUR:L:Mno_gd}
CONFIGURE_ARGS+=	--without-gd --without-xpm-dir --without-ttf \
			--without-freetype-dir
.else
MULTI_PACKAGES+=	-gd
COMMENT-gd=		image manipulation extensions for php
GD_DEPENDS=		${GRAPHIC_DEPENDS}
.if !${FLAVOUR:L:Mgd_no_t1}
GD_DEPENDS+=		t1:t1lib->=5.1.2:devel/t1lib
.endif
USE_X11=		yes
# uses the bundled libgd2, we only have libgd1 in ports
CONFIGURE_ARGS+=	--with-gd=shared \
			${GRAPHIC_CONFIG} \
			--with-freetype-dir=${X11BASE:Q} \
			--enable-gd-native-ttf \
			--with-xpm-dir=${X11BASE:Q}
.if !${FLAVOUR:L:Mgd_no_t1}
CONFIGURE_ARGS+=	--with-t1lib=${LOCALBASE:Q}
.else
CONFIGURE_ARGS+=	--without-t1lib
FULLPKGNAME-gd=		php${i}-${VSN}-${DASH_VER}-gd_no_t1
.endif
.endif

# gmp
PSEUDO_FLAVOURS+=	no_gmp
.if ${FLAVOUR:L:Mno_gmp}
CONFIGURE_ARGS+=	--without-gmp
.else
MULTI_PACKAGES+=	-gmp
COMMENT-gmp=		gmp math library support for php
CONFIGURE_ARGS+=	--with-gmp=shared,${LOCALBASE:Q}
GMP_DEPENDS=		gmp::devel/gmp
.endif

# imap
PSEUDO_FLAVOURS+=	no_imap
.if ${FLAVOUR:L:Mno_imap}
CONFIGURE_ARGS+=	--without-imap --without-kerberos
.else
MULTI_PACKAGES+=	-imap
COMMENT-imap=		imap, pop3 and nntp extensions for php
CONFIGURE_ARGS+=	--with-imap=shared,${LOCALBASE:Q} --with-imap-ssl
.  if ${OStype} == "OpenBSD"
CONFIGURE_ARGS+=	--with-kerberos=/usr
.  endif
BUILD_DEPENDS+=		:c-client->=4.64-7:mailnews/pine,-cclient
.endif

# ldap
PSEUDO_FLAVOURS+=	no_ldap
.if ${FLAVOUR:L:Mno_ldap}
CONFIGURE_ARGS+=	--without-ldap
.else
MULTI_PACKAGES+=	-ldap
COMMENT-ldap=		ldap protocol extensions for php
CONFIGURE_ARGS+=	--with-ldap=shared,${LOCALBASE:Q}
LDAP_DEPENDS=		ldap,lber::databases/openldap
.endif

# mcrypt
PSEUDO_FLAVOURS+=	no_mcrypt
.if ${FLAVOUR:L:Mno_mcrypt}
CONFIGURE_ARGS+=	--without-mcrypt
.else
MULTI_PACKAGES+=	-mcrypt
COMMENT-mcrypt=		mcrypt encryption/decryption extensions for php
CONFIGURE_ARGS+=	--with-mcrypt=shared,${LOCALBASE:Q}
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt ltdl::devel/libtool
.endif

# mhash
PSEUDO_FLAVOURS+=	no_mhash
.if ${FLAVOUR:L:Mno_mhash}
CONFIGURE_ARGS+=	--without-mhash
.else
MULTI_PACKAGES+=	-mhash
COMMENT-mhash=		mhash extensions for php
CONFIGURE_ARGS+=	--with-mhash=shared,${LOCALBASE:Q}
MHASH_DEPENDS=		mhash::security/mhash
.endif

# mysql
PSEUDO_FLAVOURS+=	no_mysql
FLAVOUR+=		no_mysql	# since it's broken
.if ${FLAVOUR:L:Mno_mysql}
CONFIGURE_ARGS+=	--without-mysql
.else
MULTI_PACKAGES+=	-mysql
COMMENT-mysql=		mysql database access extensions for php
CONFIGURE_ARGS+=	--with-mysql=shared,${LOCALBASE:Q}
MYSQL_DEPENDS=		lib/mysql/mysqlclient::databases/mysql
USE_CXX=		Yes
.endif

# ncurses
PSEUDO_FLAVOURS+=	no_ncurses
.if ${FLAVOUR:L:Mno_ncurses}
CONFIGURE_ARGS+=	--without-ncurses
.else
MULTI_PACKAGES+=	-ncurses
COMMENT-ncurses=	ncurses extensions for php
CONFIGURE_ARGS+=	--with-ncurses=shared,${LOCALBASE:Q}
.endif

# odbc
PSEUDO_FLAVOURS+=	no_odbc
.if ${FLAVOUR:L:Mno_odbc}
CONFIGURE_ARGS+=	--without-odbc
.else
MULTI_PACKAGES+=	-odbc
COMMENT-odbc=		odbc database access extensions for php
CONFIGURE_ARGS+=	--with-iodbc=shared
ODBC_DEPENDS=		iodbc::databases/iodbc
.endif

# pgsql
PSEUDO_FLAVOURS+=	no_pgsql
.if ${FLAVOUR:L:Mno_pgsql}
CONFIGURE_ARGS+=	--without-pgsql
.else
MULTI_PACKAGES+=	-pgsql
COMMENT-pgsql=		pgsql database access extensions for php
CONFIGURE_ARGS+=	--with-pgsql=shared,${LOCALBASE:Q}
PGSQL_DEPENDS=		pq::databases/postgresql
.endif

# shmop
PSEUDO_FLAVOURS+=	no_shmop
.if ${FLAVOUR:L:Mno_shmop}
CONFIGURE_ARGS+=	--disable-shmop
.else
MULTI_PACKAGES+=	-shmop
COMMENT-shmop=		shared memory extensions for php
CONFIGURE_ARGS+=	--enable-shmop=shared
.endif

# soap
PSEUDO_FLAVOURS+=	no_soap
.if ${FLAVOUR:L:Mno_soap}
CONFIGURE_ARGS+=	--without-soap
.else
MULTI_PACKAGES+=	-soap
COMMENT-soap=		SOAP functions for php
CONFIGURE_ARGS+=	--enable-soap=shared
.endif

# snmp
PSEUDO_FLAVOURS+=	no_snmp
.if ${FLAVOUR:L:Mno_snmp}
CONFIGURE_ARGS+=	--without-snmp
.else
MULTI_PACKAGES+=	-snmp
COMMENT-snmp=		snmp protocol extensions for php
CONFIGURE_ARGS+=	--with-snmp=shared,${LOCALBASE:Q} --enable-ucd-snmp-hack
SNMP_DEPENDS=		snmp::net/ucd-snmp
.endif

# sybase-ct
PSEUDO_FLAVOURS+=	no_sybase_ct
.if ${FLAVOUR:L:Mno_sybase_ct}
CONFIGURE_ARGS+=	--without-sybase-ct
.else
MULTI_PACKAGES+=	-sybase_ct
COMMENT-sybase_ct=	sybase database access extensions for php
CONFIGURE_ARGS+=	--with-sybase-ct=shared,${LOCALBASE:Q}
SYBASE_CT_DEPENDS=	ct::databases/freetds
.endif

# xml-rpc
PSEUDO_FLAVOURS+=	no_xmlrpc
.if ${FLAVOUR:L:Mno_xmlrpc}
CONFIGURE_ARGS+=	--without-xmlrpc
.else
MULTI_PACKAGES+=	-xmlrpc
COMMENT-xmlrpc=		XML RPC functions for php
CONFIGURE_ARGS+=	--with-xmlrpc=shared
.  if ${OStype} != "MirBSD"
XMLRPC_DEPENDS=		expat::textproc/expat
.  endif
.endif

# xsl
PSEUDO_FLAVOURS+=	no_xsl
.if ${FLAVOUR:L:Mno_xsl}
CONFIGURE_ARGS+=	--without-xsl
.else
MULTI_PACKAGES+=	-xsl
COMMENT-xsl=		XSL functions for php
CONFIGURE_ARGS+=	--with-xsl=shared,${LOCALBASE:Q} --enable-dom
XSL_DEPENDS=		xslt,exslt::textproc/libxslt
.endif

.for i in ${MULTI_PACKAGES}
.  if !defined(FULLPKGNAME${i})
DASH_VER${i}?=		${DASH_VER}
FULLPKGNAME${i}=	php${i}-${VSN}-${DASH_VER${i}}
.  endif
.endfor

.if defined(PACKAGING) && !empty(SUBPACKAGE)
MODULE_NAME=		${SUBPACKAGE:S/-//g}
LIB_DEPENDS+=		${${MODULE_NAME:U}_DEPENDS}
MESSAGE=		${PKGDIR}/MESSAGE
SUBST_VARS=		MODULE_NAME PHP_CONFIG_FILE LOCALBASE
.elif defined(PACKAGING) && empty(SUBPACKAGE)
LIB_DEPENDS=
MESSAGE=		${PKGDIR}/DESCR
.else
.  for i in ${MULTI_PACKAGES}
LIB_DEPENDS+=		${${i:U:S/-//g}_DEPENDS}
.  endfor
.endif

ALL_TARGET=		build-modules

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/${MODULES_SUBDIR}
.for m in ${MULTI_PACKAGES:S/-//g}
	${INSTALL_DATA} ${WRKBUILD}/modules/${m}.so \
		${PREFIX}/${MODULES_SUBDIR}/${m}.so
.endfor

.include <bsd.port.mk>
@


1.29
log
@unbreak the IMAP module and the phpxs script
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.28 2009/08/16 17:25:53 tg Exp $
d106 1
d113 4
a116 2
GD_DEPENDS=		${GRAPHIC_DEPENDS} \
			t1:t1lib->=5.1.2:devel/t1lib
d123 7
a129 2
			--with-xpm-dir=${X11BASE:Q} \
			--with-t1lib=${LOCALBASE:Q}
@


1.28
log
@add VSN to default SUBST_VARS
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.26 2009/06/21 09:37:08 tg Exp $
a136 1
FLAVOUR+=		no_imap		# requires libc-client_pic.a
d146 1
a146 1
BUILD_DEPENDS+=		::mailnews/pine,-cclient
@


1.27
log
@change all V to VSN (ok bsiegert@@) and some DASH_VER while here
@
text
@a308 1
SUBST_VARS=		VSN
@


1.26
log
@Fix php-gd extension again, bump its patchlevel: it shall use its own
libgd2 because libgd1 is what we have in MirPorts, linked against the
XFree86Â®â€™s freetype2 not libttf which libgd1 links against.
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.25 2009/06/18 20:56:16 tg Exp $
d4 1
a4 1
FULLPKGNAME=		php-extensions-${V}-${DASH_VER}
d297 1
a297 1
FULLPKGNAME${i}=	php${i}-${V}-${DASH_VER${i}}
d309 1
a309 1
SUBST_VARS=		V
@


1.25
log
@add missing dependency (unbreak build)
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.24 2008/05/02 19:44:32 tg Exp $
a112 1
			gd::graphics/gd \
d115 2
a116 1
CONFIGURE_ARGS+=	--with-gd=shared,${LOCALBASE:Q} \
d296 2
a297 1
FULLPKGNAME${i}=	php${i}-${V}-${DASH_VER}
@


1.24
log
@make a variable name more self-descriptive

evolutionary process with bsiegert@@ on the phone, okâ€™d by him
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.23 2008/05/02 15:43:07 tg Exp $
d113 1
@


1.23
log
@â€¦aaand bump dash ver
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.22 2008/05/02 15:41:38 tg Exp $
d20 1
a20 1
MODPNG_INHIBIT=		#defined
@


1.22
log
@doh, even gd-no_x11 links against XFree86â€™s libfreetypeâ€¦
remove the hassle altogether, just always install the xbase dist set
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.21 2008/05/02 15:39:45 tg Exp $
d4 1
a4 1
FULLPKGNAME=		php-extensions-${V}-${PV}
d295 1
a295 1
FULLPKGNAME${i}=	php${i}-${V}-${PV}
@


1.21
log
@fix for building gd-no_x11
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.20 2008/05/02 15:32:47 tg Exp $
a3 10
.if ${FLAVOUR} == "no_x11 no_bz2 no_curl no_dba no_dbase no_dbx no_fam no_filepro no_gmp no_imap no_ldap no_mcrypt no_mhash no_mysql no_ncurses no_odbc no_pgsql no_shmop no_soap no_snmp no_sybase_ct no_xmlrpc no_xsl"
# XXX eeevil kludge, probably bug in systrace or something
# XXX symptoms:
# mv: rename autoh24064 to main/php_config.h.in: No such file or directory
# mv: rename autoh3004 to main/php_config.h.in: Invalid argument
# XXX during autoheader run, and many more later
# XXX maybe too long pathnames?
NO_SYSTRACE=		Yes
.endif

d13 1
a13 1
FLAVOURS=		no_x11
d114 1
d119 1
a120 7
.  if !${FLAVOUR:L:Mno_x11}
USE_X11=		yes
CONFIGURE_ARGS+=	--with-xpm-dir=${X11BASE:Q}
.  else
CONFIGURE_ARGS+=	--without-xpm-dir
FULLPKGNAME-gd=		php-gd-${V}-${PV}-no_x11
.  endif
@


1.20
log
@â€¢ use png module
â€¢ port fam
â€¢ fix gd
â€¢ unbreak snmp

missing:
â€£ imap (needs libc-client_pic.a in mailnews/pine, suspended until alpine)
â€£ mysql (databases/mysql is b0rken and I don't have the ressources to fix)
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.19 2008/03/09 17:23:39 tg Exp $
d4 10
@


1.19
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.18 2007/03/31 21:14:21 tg Exp $
d19 4
a22 2
GRAPHIC_DEPENDS=	jpeg.62::graphics/jpeg \
			png.3::graphics/png
d25 1
a25 1
			--with-png-dir=${LOCALBASE:Q} \
a84 1
FLAVOUR+=		no_fam		# not ported yet
d90 2
a91 2
CONFIGURE_ARGS+=	--enable-fam=shared ...
#FAM_DEPENDS=		...
d113 3
a115 2
			t1::devel/t1lib
CONFIGURE_ARGS+=	--with-gd=shared ${GRAPHIC_CONFIG} \
a253 1
FLAVOUR+=		no_snmp		# currently broken
@


1.18
log
@simplify (goal was to try if imap builds with recent libtool change, it still does not)
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.17 2007/02/23 02:18:38 tg Exp $
d13 2
a14 2
FLAVORS=		no_x11
FLAVOR?=
d29 2
a30 2
PSEUDO_FLAVORS+=	no_bz2
.if ${FLAVOR:L:Mno_bz2}
d40 2
a41 2
PSEUDO_FLAVORS+=	no_curl
.if ${FLAVOR:L:Mno_curl}
d51 2
a52 2
PSEUDO_FLAVORS+=	no_dba
.if ${FLAVOR:L:Mno_dba}
d62 2
a63 2
PSEUDO_FLAVORS+=	no_dbase
.if ${FLAVOR:L:Mno_dbase}
d72 2
a73 2
PSEUDO_FLAVORS+=	no_dbx
.if ${FLAVOR:L:Mno_dbx}
d82 3
a84 3
PSEUDO_FLAVORS+=	no_fam
FLAVOR+=		no_fam		# not ported yet
.if ${FLAVOR:L:Mno_fam}
d94 2
a95 2
PSEUDO_FLAVORS+=	no_filepro
.if ${FLAVOR:L:Mno_filepro}
d104 2
a105 2
PSEUDO_FLAVORS+=	no_gd
.if ${FLAVOR:L:Mno_gd}
d117 1
a117 1
.  if !${FLAVOR:L:Mno_x11}
d127 2
a128 2
PSEUDO_FLAVORS+=	no_gmp
.if ${FLAVOR:L:Mno_gmp}
d138 3
a140 3
PSEUDO_FLAVORS+=	no_imap
FLAVOR+=		no_imap		# requires libc-client_pic.a
.if ${FLAVOR:L:Mno_imap}
d153 2
a154 2
PSEUDO_FLAVORS+=	no_ldap
.if ${FLAVOR:L:Mno_ldap}
d164 2
a165 2
PSEUDO_FLAVORS+=	no_mcrypt
.if ${FLAVOR:L:Mno_mcrypt}
d175 2
a176 2
PSEUDO_FLAVORS+=	no_mhash
.if ${FLAVOR:L:Mno_mhash}
d186 3
a188 3
PSEUDO_FLAVORS+=	no_mysql
FLAVOR+=		no_mysql	# since it's broken
.if ${FLAVOR:L:Mno_mysql}
d199 2
a200 2
PSEUDO_FLAVORS+=	no_ncurses
.if ${FLAVOR:L:Mno_ncurses}
d209 2
a210 2
PSEUDO_FLAVORS+=	no_odbc
.if ${FLAVOR:L:Mno_odbc}
d220 2
a221 2
PSEUDO_FLAVORS+=	no_pgsql
.if ${FLAVOR:L:Mno_pgsql}
d231 2
a232 2
PSEUDO_FLAVORS+=	no_shmop
.if ${FLAVOR:L:Mno_shmop}
d241 2
a242 2
PSEUDO_FLAVORS+=	no_soap
.if ${FLAVOR:L:Mno_soap}
d251 3
a253 3
PSEUDO_FLAVORS+=	no_snmp
FLAVOR+=		no_snmp		# currently broken
.if ${FLAVOR:L:Mno_snmp}
d263 2
a264 2
PSEUDO_FLAVORS+=	no_sybase_ct
.if ${FLAVOR:L:Mno_sybase_ct}
d274 2
a275 2
PSEUDO_FLAVORS+=	no_xmlrpc
.if ${FLAVOR:L:Mno_xmlrpc}
d287 2
a288 2
PSEUDO_FLAVORS+=	no_xsl
.if ${FLAVOR:L:Mno_xsl}
@


1.17
log
@remove libttf (freetype1) dependency, use freetype2 from X11 base, enable native TTF support for gd
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.16 2007/02/22 23:11:49 tg Exp $
d16 2
a17 6
MODULES+=		converters/libiconv
RUN_DEPENDS+=		:php-core-${V}-${PV}:www/php/core

CONFIGURE_ARGS+=	--with-apxs=/usr/sbin/apxs \
			--with-iconv=${ICONV_PREFIX:Q} \
			--disable-dom
d318 2
@


1.16
log
@unbreak php/extensions (except few)
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.15 2006/09/14 00:14:57 tg Exp $
d115 1
a115 1
GD_DEPENDS=		ttf::print/freetype ${GRAPHIC_DEPENDS} \
d118 2
a119 1
			--with-ttf=shared,${LOCALBASE:Q} --without-freetype-dir \
@


1.15
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.14 2006/02/21 17:42:30 tg Exp $
a3 2
BROKEN=			porting in progress

d5 1
a5 1
COMMENT=			informational package about PHP5 extensions
d26 2
a27 2
GRAPHIC_CONFIG=		--with-jpeg-dir=${LOCALBASE} \
			--with-png-dir=${LOCALBASE} \
d38 2
a39 2
COMMENT-bz2=			bzip2 compression extensions for php
CONFIGURE_ARGS+=	--with-bz2=shared,${LOCALBASE}
d49 2
a50 2
COMMENT-curl=			curl URL library extensions for php
CONFIGURE_ARGS+=	--with-curl=shared,${LOCALBASE}
d60 2
a61 2
COMMENT-dba=			dba GDBM access extensions for php
CONFIGURE_ARGS+=	--enable-dba=shared --with-gdbm=${LOCALBASE}
d71 1
a71 1
COMMENT-dbase=			dBase database access extensions for php
d81 1
a81 1
COMMENT-dbx=			dbx database abstraction interface for php
d87 1
d92 1
a92 1
COMMENT-fam=			filesystem alteration monitor extensions for php
d103 1
a103 1
COMMENT-filepro=			filepro database access extensions for php
d114 1
a114 1
COMMENT-gd=			image manipulation extensions for php
d118 2
a119 2
			--with-ttf=shared,${LOCALBASE} --without-freetype-dir \
			--with-t1lib=${LOCALBASE}
d122 1
a122 1
CONFIGURE_ARGS+=	--with-xpm-dir=${X11BASE}
d135 2
a136 2
COMMENT-gmp=			gmp math library support for php
CONFIGURE_ARGS+=	--with-gmp=shared,${LOCALBASE}
d142 1
d147 2
a148 2
COMMENT-imap=			imap, pop3 and nntp extensions for php
CONFIGURE_ARGS+=	--with-imap=shared,${LOCALBASE} --with-imap-ssl
d161 2
a162 2
COMMENT-ldap=			ldap protocol extensions for php
CONFIGURE_ARGS+=	--with-ldap=shared,${LOCALBASE}
d172 2
a173 2
COMMENT-mcrypt=			mcrypt encryption/decryption extensions for php
CONFIGURE_ARGS+=	--with-mcrypt=shared,${LOCALBASE}
d183 2
a184 2
COMMENT-mhash=			mhash extensions for php
CONFIGURE_ARGS+=	--with-mhash=shared,${LOCALBASE}
d195 2
a196 2
COMMENT-mysql=			mysql database access extensions for php
CONFIGURE_ARGS+=	--with-mysql=shared,${LOCALBASE}
d207 2
a208 2
COMMENT-ncurses=			ncurses extensions for php
CONFIGURE_ARGS+=	--with-ncurses=shared,${LOCALBASE}
d217 1
a217 1
COMMENT-odbc=			odbc database access extensions for php
d228 2
a229 2
COMMENT-pgsql=			pgsql database access extensions for php
CONFIGURE_ARGS+=	--with-pgsql=shared,${LOCALBASE}
d239 1
a239 1
COMMENT-shmop=			shared memory extensions for php
d249 1
a249 1
COMMENT-soap=			SOAP functions for php
d255 1
d260 2
a261 2
COMMENT-snmp=			snmp protocol extensions for php
CONFIGURE_ARGS+=	--with-snmp=shared,${LOCALBASE} --enable-ucd-snmp-hack
d271 2
a272 2
COMMENT-sybase_ct=			sybase database access extensions for php
CONFIGURE_ARGS+=	--with-sybase-ct=shared,${LOCALBASE}
d282 1
a282 1
COMMENT-xmlrpc=			XML RPC functions for php
d295 2
a296 2
COMMENT-xsl=			XSL functions for php
CONFIGURE_ARGS+=	--with-xsl=shared --enable-dom
@


1.14
log
@remove sqlite, add fam (stub)
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.13 2006/02/21 16:48:30 tg Exp $
d7 1
a7 1
COMMENT=		"informational package about PHP5 extensions"
d40 1
a40 1
COMMENT-bz2=		"bzip2 compression extensions for php"
d51 1
a51 1
COMMENT-curl=		"curl URL library extensions for php"
d62 1
a62 1
COMMENT-dba=		"dba GDBM access extensions for php"
d73 1
a73 1
COMMENT-dbase=		"dBase database access extensions for php"
d83 1
a83 1
COMMENT-dbx=		"dbx database abstraction interface for php"
d93 1
a93 1
COMMENT-fam=		"filesystem alteration monitor extensions for php"
d104 1
a104 1
COMMENT-filepro=	"filepro database access extensions for php"
d115 1
a115 1
COMMENT-gd=		"image manipulation extensions for php"
d136 1
a136 1
COMMENT-gmp=		"gmp math library support for php"
d147 1
a147 1
COMMENT-imap=		"imap, pop3 and nntp extensions for php"
d161 1
a161 1
COMMENT-ldap=		"ldap protocol extensions for php"
d172 1
a172 1
COMMENT-mcrypt=		"mcrypt encryption/decryption extensions for php"
d183 1
a183 1
COMMENT-mhash=		"mhash extensions for php"
d195 1
a195 1
COMMENT-mysql=		"mysql database access extensions for php"
d207 1
a207 1
COMMENT-ncurses=	"ncurses extensions for php"
d217 1
a217 1
COMMENT-odbc=		"odbc database access extensions for php"
d228 1
a228 1
COMMENT-pgsql=		"pgsql database access extensions for php"
d239 1
a239 1
COMMENT-shmop=		"shared memory extensions for php"
d249 1
a249 1
COMMENT-soap=		"SOAP functions for php"
d259 1
a259 1
COMMENT-snmp=		"snmp protocol extensions for php"
d270 1
a270 1
COMMENT-sybase_ct=	"sybase database access extensions for php"
d281 1
a281 1
COMMENT-xmlrpc=		"XML RPC functions for php"
d294 1
a294 1
COMMENT-xsl=		"XSL functions for php"
@


1.13
log
@* sync patches and their location
* move SQLite2 to base to endorse its use (again, do NOT
  enable utf-8 support for sqlite2, it's BROKEN!)
* unbreak iconv'd build
* bump patchlevel
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.12 2006/02/02 21:09:41 tg Exp $
d87 11
@


1.12
log
@can't OpenBSD do a single thing right?
* fix hidden iconv dependencies
* update p5-Text-Iconv to 1.4 (1.2 distfile vanished)

I probably should have bumped the patchlevels... but don't care
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.11 2006/02/02 20:13:46 tg Exp $
a252 12
# sqlite
PSEUDO_FLAVORS+=	no_sqlite
.if ${FLAVOR:L:Mno_sqlite}
CONFIGURE_ARGS+=	--without-sqlite
.else
MULTI_PACKAGES+=	-sqlite
COMMENT-sqlite=		"sqlite database access extensions for php"
# do NOT enable utf8 mode here, it's broken
CONFIGURE_ARGS+=	--with-sqlite=shared,${LOCALBASE} --disable-sqlite-utf8
SQLITE_DEPENDS=		sqlite::databases/sqlite2
.endif

@


1.11
log
@break mysql, since there's no maintainer for it
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.10 2006/01/25 19:00:48 tg Exp $
d18 1
d22 1
a22 2
			--with-iconv-dir=${LOCALBASE} \
			--with-iconv=${LOCALBASE} \
@


1.10
log
@* Makefile.inc:
  - style, quotes
  - enable rpath
  - disable short tags (sync with reality)
  - add TERM=vt100 to configuration env to please GNU shtool
* extensions/Makefile:
  - try without GNU gettext
* extensions:
  - mbstring is part of core
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.9 2006/01/25 13:54:49 tg Exp $
d179 1
@


1.9
log
@unbreak, update and libtoolise gmp; add bsd-mp and mpfr compat too
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.8 2006/01/25 12:48:07 tg Exp $
a18 3
.if !defined(PACKAGING)
MODULES=		devel/gettext
.endif
a154 10
# mbstring
PSEUDO_FLAVORS+=	no_mbstring
.if ${FLAVOR:L:Mno_mbstring}
CONFIGURE_ARGS+=	--disable-mbstring
.else
MULTI_PACKAGES+=	-mbstring
COMMENT-mbstring=	"multibyte characters extensions for php"
CONFIGURE_ARGS+=	--enable-mbstring=shared
.endif

@


1.8
log
@first step in upgrading php:
* mark as broken - upgrade in progress
* sync with OpenBSD
* update hardened-php patch version

note: we use php 5.0.5 not 5.1.2 like I would, because the
OpenBSD team has experienced problems with the 5.1 series,
and I don't want to dig deeper into that again
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.7 2006/01/01 04:14:50 tg Exp $
a123 2
#XXX it's broken
FLAVOR+=		no_gmp
@


1.7
log
@simply adding -0 is BAD BAD BAD
(this needs to be updated anyway)
@
text
@d1 4
a4 2
# $MirOS: ports/www/php/extensions/Makefile,v 1.6 2005/07/07 21:28:19 bsiegert Exp $
# $OpenBSD: Makefile,v 1.3 2004/10/18 15:58:53 robert Exp $
d18 1
a18 1
RUN_DEPENDS=		:php-core-${V}-${PV}:www/php/core
d29 1
a29 2
			png.3::graphics/png \
			tiff.35::graphics/tiff
a32 1
			--with-tiff-dir=${LOCALBASE} \
d45 1
a45 1
BZ2_DEPENDS=		bz2.10::archivers/bzip2
d56 1
a56 1
CURL_DEPENDS=		curl.2::net/curl
d67 1
a67 1
DBA_DEPENDS=		gdbm.2::databases/gdbm
d108 2
a109 2
GD_DEPENDS=		ttf.1::print/freetype ${GRAPHIC_DEPENDS} \
			t1.5::devel/t1lib
d132 1
a132 1
GMP_DEPENDS=		gmp.4::devel/gmp
d143 1
a143 1
.  if ${OSname} == "openbsd"
d146 1
a146 1
IMAP_DEPENDS=		c-client.3::mailnews/pine,-cclient
d157 11
a167 1
LDAP_DEPENDS=		ldap.2,lber::databases/openldap
d178 1
a178 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt
d189 1
a189 1
MHASH_DEPENDS=		mhash.2::security/mhash
d200 1
a200 1
MYSQL_DEPENDS=		lib/mysql/mysqlclient.10::databases/mysql
d222 1
a222 1
ODBC_DEPENDS=		iodbc.2::databases/iodbc
d233 1
a233 1
PGSQL_DEPENDS=		pq.2::databases/postgresql
d246 10
d264 1
a264 1
SNMP_DEPENDS=		snmp.42::net/ucd-snmp
d276 1
a276 1
SQLITE_DEPENDS=		sqlite.8::databases/sqlite2
d287 1
a287 1
SYBASE_CT_DEPENDS=	ct.0::databases/freetds
d298 14
a311 1
XMLRPC_DEPENDS=		expat.2::textproc/expat
d322 1
a322 1
LIB_DEPENDS=		${${MODULE_NAME:U}_DEPENDS}
@


1.6
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.4 2005/05/04 16:12:31 tg Exp $
d4 1
a4 1
FULLPKGNAME=		php-extensions-${V}${PV}-0
d16 1
a16 1
RUN_DEPENDS=		:php-core-${V}${PV}:www/php/core
d118 1
a118 1
FULLPKGNAME-gd=		php-gd-${V}${PV}-no_x11-0
d283 1
a283 1
FULLPKGNAME${i}=	php${i}-${V}${PV}
@


1.5
log
@unbreak mysql
NO_SYSTRACE for jdk bootstraps
(unfinished)
@
text
@d4 1
a4 1
FULLPKGNAME=		php-extensions-${V}${PV}
d118 1
a118 1
FULLPKGNAME-gd=		php-gd-${V}${PV}-no_x11
@


1.4
log
@* gmp is broken
* bsiegert@@ forgot to fix postgresql dependencies on subpackage name change
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.3 2005/03/27 22:20:25 tg Exp $
a183 2
# XXX for now
FLAVOR+=		no_mysql
@


1.3
log
@php5 => php
@
text
@d1 1
a1 1
# $MirOS: ports/www/php/extensions/Makefile,v 1.2 2005/03/25 23:13:35 bsiegert Exp $
d124 2
d225 1
a225 1
PGSQL_DEPENDS=		pq.2::databases/postgresql,-clients
@


1.2
log
@Mass-update dependencies to cope with port renames. Mostly done in the train
home from Strasbourg.
@
text
@d1 1
a1 1
# $MirOS$
d4 1
a4 1
FULLPKGNAME=		php5-extensions-${V}${PV}
d16 1
a16 1
RUN_DEPENDS=		:php5-core-${V}${PV}:www/php/core
d43 1
a43 1
COMMENT-bz2=		"bzip2 compression extensions for php5"
d54 1
a54 1
COMMENT-curl=		"curl URL library extensions for php5"
d65 1
a65 1
COMMENT-dba=		"dba GDBM access extensions for php5"
d76 1
a76 1
COMMENT-dbase=		"dBase database access extensions for php5"
d86 1
a86 1
COMMENT-dbx=		"dbx database abstraction interface for php5"
d96 1
a96 1
COMMENT-filepro=	"filepro database access extensions for php5"
d107 1
a107 1
COMMENT-gd=		"image manipulation extensions for php5"
d118 1
a118 1
FULLPKGNAME-gd=		php5-gd-${V}${PV}-no_x11
d128 1
a128 1
COMMENT-gmp=		"gmp math library support for php5"
d139 1
a139 1
COMMENT-imap=		"imap, pop3 and nntp extensions for php5"
d153 1
a153 1
COMMENT-ldap=		"ldap protocol extensions for php5"
d164 1
a164 1
COMMENT-mcrypt=		"mcrypt encryption/decryption extensions for php5"
d175 1
a175 1
COMMENT-mhash=		"mhash extensions for php5"
d188 1
a188 1
COMMENT-mysql=		"mysql database access extensions for php5"
d200 1
a200 1
COMMENT-ncurses=	"ncurses extensions for php5"
d210 1
a210 1
COMMENT-odbc=		"odbc database access extensions for php5"
d221 1
a221 1
COMMENT-pgsql=		"pgsql database access extensions for php5"
d232 1
a232 1
COMMENT-shmop=		"shared memory extensions for php5"
d242 1
a242 1
COMMENT-snmp=		"snmp protocol extensions for php5"
d253 1
a253 1
COMMENT-sqlite=		"sqlite database access extensions for php5"
d265 1
a265 1
COMMENT-sybase_ct=	"sybase database access extensions for php5"
d276 1
a276 1
COMMENT-xmlrpc=		"XML RPC functions for php5"
d283 1
a283 1
FULLPKGNAME${i}=	php5${i}-${V}${PV}
@


1.1
log
@Initial revision
@
text
@d16 1
a16 1
RUN_DEPENDS=		:php5-core-${V}${PV}:www/php5/core
d256 1
a256 1
SQLITE_DEPENDS=		sqlite.8::databases/sqlite
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
