head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2008.03.09.17.23.03;	author tg;	state Exp;
branches;
next	1.1;
commitid	10047D41CAA7E715397;

1.1
date	2005.03.18.15.47.46;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.47.46;	author tg;	state Exp;
branches;
next	;


desc
@@


1.2
log
@bulk convert FLAVOR to FLAVOUR; nuke unused file; convert to $Mdocdate
@
text
@# $OpenBSD: ocaml.port.mk,v 1.4 2004/03/05 21:54:36 avsm Exp $

# regular file usage for bytecode:
# PLIST               -- bytecode base files
# PFRAG.foo           -- bytecode files for FLAVOUR == foo
# PFRAG.no-foo        -- bytecode files for FLAVOUR != foo
# extended file usage for nativecode:
# PFRAG.native        -- nativecode base files
# PFRAG.native.foo    -- nativecode files for FLAVOUR == foo
# PFRAG.native.no-foo -- nativecode files for FLAVOUR != foo

.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "i386" || \
	${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "amd64"
MODOCAML_NATIVE=Yes

# include nativecode base files
SED_PLIST+=	|sed -e '/^%%native%%$$/r${PKGDIR}/PFRAG.native' -e '//d'

# create sed substitution for nativecode FLAVOURS
.  if !empty(FLAVOURS)
.    for _i in ${FLAVOURS:L}
.      if empty(FLAVOUR:L:M${_i})
SED_PLIST+=	|sed -e '/^!%%native\.${_i}%%$$/r${PKGDIR}/PFRAG.native.no-${_i}' -e '//d' -e '/^%%native\.${_i}%%$$/d'
.      else
SED_PLIST+=	|sed -e '/^!%%native\.${_i}%%$$/d' -e '/^%%native\.${_i}%%$$/r${PKGDIR}/PFRAG.native.${_i}' -e '//d' 
.      endif
.    endfor
.  endif

.else

MODOCAML_NATIVE=No
RUN_DEPENDS+=	::lang/ocaml

# remove native base file entry from PLIST
SED_PLIST+=	|sed -e '/^%%native%%$$/d'

# remove nativecode FLAVOUR entries from PLIST
.  if !empty(FLAVOURS)
.    for _i in ${FLAVOURS:L}
SED_PLIST+=	|sed -e '/^!%%native\.${_i}%%$$/d' -e '/^%%native\.${_i}%%$$/d'
.    endfor
.  endif
.endif

BUILD_DEPENDS+=	::lang/ocaml
@


1.1
log
@Initial revision
@
text
@d5 2
a6 2
# PFRAG.foo           -- bytecode files for FLAVOR == foo
# PFRAG.no-foo        -- bytecode files for FLAVOR != foo
d9 2
a10 2
# PFRAG.native.foo    -- nativecode files for FLAVOR == foo
# PFRAG.native.no-foo -- nativecode files for FLAVOR != foo
d19 4
a22 4
# create sed substitution for nativecode FLAVORS
.  if !empty(FLAVORS)
.    for _i in ${FLAVORS:L}
.      if empty(FLAVOR:L:M${_i})
d38 3
a40 3
# remove nativecode FLAVOR entries from PLIST
.  if !empty(FLAVORS)
.    for _i in ${FLAVORS:L}
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
