head	1.19;
access;
symbols;
locks; strict;
comment	@# @;


1.19
date	2014.05.28.21.26.58;	author tg;	state Exp;
branches;
next	1.18;
commitid	100538654B9251B19C1;

1.18
date	2010.06.25.21.47.18;	author tg;	state Exp;
branches;
next	1.17;
commitid	1004C2523F07B52EBB8;

1.17
date	2010.01.06.17.32.37;	author bsiegert;	state Exp;
branches;
next	1.16;
commitid	1004B44C8F44C0A8C2F;

1.16
date	2009.10.13.19.10.18;	author bsiegert;	state Exp;
branches;
next	1.15;
commitid	1004AD4D00E50F6A852;

1.15
date	2009.05.30.20.39.01;	author tg;	state Exp;
branches;
next	1.14;
commitid	1004A21997D603BB8A8;

1.14
date	2009.05.30.20.38.25;	author tg;	state Exp;
branches;
next	1.13;
commitid	1004A2198964D89D064;

1.13
date	2008.12.06.16.03.06;	author tg;	state Exp;
branches;
next	1.12;
commitid	100493AA2505634C2E2;

1.12
date	2008.10.05.00.41.28;	author tg;	state Exp;
branches;
next	1.11;
commitid	10048E80D490E73828A;

1.11
date	2008.08.26.14.15.09;	author tg;	state Exp;
branches;
next	1.10;
commitid	10048B40FCF4D973C96;

1.10
date	2008.08.19.18.07.29;	author tg;	state Exp;
branches;
next	1.9;
commitid	10048AB0BC837149826;

1.9
date	2008.08.13.13.04.25;	author tg;	state Exp;
branches;
next	1.8;
commitid	10048A2DBE60EDA6B00;

1.8
date	2008.08.12.12.00.01;	author tg;	state Exp;
branches;
next	1.7;
commitid	10048A17B516542A19B;

1.7
date	2008.08.12.09.38.13;	author tg;	state Exp;
branches;
next	1.6;
commitid	10048A159EF29769A9C;

1.6
date	2008.08.08.20.51.07;	author tg;	state Exp;
branches;
next	1.5;
commitid	100489CB19979A49E0E;

1.5
date	2008.08.05.19.11.49;	author bsiegert;	state Exp;
branches;
next	1.4;
commitid	1004898A5A00E8AD207;

1.4
date	2008.08.03.22.06.55;	author tg;	state Exp;
branches;
next	1.3;
commitid	10048962C066AE76CE3;

1.3
date	2008.08.03.21.30.02;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004896236418D2B079;

1.2
date	2008.07.19.17.01.24;	author bsiegert;	state Exp;
branches;
next	1.1;
commitid	10048821DAD20B6D856;

1.1
date	2008.07.15.19.18.51;	author bsiegert;	state Exp;
branches;
next	;
commitid	100487CF80D4D2AD871;


desc
@@


1.19
log
@drop (non-free) sqlite support; fix some regression tests
@
text
@# $MirOS: ports/lang/python/2.5/Makefile,v 1.18 2010/06/25 21:47:18 tg Exp $

VERSION=		2.5
PATCHLEVEL=		.5
DASH_VER=		1

LIB_DEPENDS+=		ffi::devel/libffi
LIB_DEPENDS+=		gdbm::databases/gdbm

CONFIGURE_ARGS+=	--without-cxx
CONFIGURE_ARGS+=	--with-system-ffi
CONFIGURE_ARGS+=	--enable-unicode=ucs2
CONFIGURE_ENV+=		OPT=${CFLAGS:Q}
LDFLAGS+=		-L${WRKSRC:Q} -L${PREFIX:Q}/lib

SUBST_VARS+=		VERSION
USE_GMAKE=		yes
MODULES+=		devel/gettext

.include <mirports.sys.mk>

.if ${OStype:NInterix:NOpenBSD}
CONFIGURE_ARGS+=	--with-wctype-functions
.endif

# cover for possible hidden dependencies
.if exists(${LOCALBASE}/lib/libncursesw.la) && !exists(/usr/lib/libncursesw.a)
LIB_DEPENDS+=		ncursesw::devel/libncursesw
.endif

.include <bsd.port.mk>
@


1.18
log
@speed up Gajim &c. (spotted by gecko2@@) and upgrade while here
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.17 2010/01/06 17:32:37 bsiegert Exp $
d5 1
a8 1
LIB_DEPENDS+=		sqlite3::databases/sqlite
@


1.17
log
@Make this actually usable on Darwin by installing unstripped binaries.
Also quote the tests for MACOSX_DEPLOYMENT_TARGET, which may be empty,
and drop support for old (<10.3) Mac OS versions. Bump 2.5 patchlevel.
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.16 2009/10/13 19:10:18 bsiegert Exp $
d4 1
a4 2
PATCHLEVEL=		.4
DASH_VER=		1
@


1.16
log
@Python builds and works using libffi from ports on Darwin. PFRAG.shared now
contains all the files not installed by default on Darwin.
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.15 2009/05/30 20:39:01 tg Exp $
d5 1
@


1.15
log
@curva!
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.14 2009/05/30 20:38:25 tg Exp $
a4 2
NOT_FOR_PLATFORM=	Darwin:*:*	# until PFRAG.dylib is synched
#					# to avoid needing to bump DASH_VER
@


1.14
log
@• update to the latest 2.5 series Python
• cope for possible hidden dependency on ncursesw
• mark as NOT_FOR_PLATFORM Darwin, because both anakin and jajabings
  are not powered on right now, so I cannot sync PFRAG.dylib, and this
  way we can avoid needing to bump DASH_VER upon doing so (just remove
  the NOT_FOR_PLATFORM clause, commit Makefile and PFRAG.dylib at once)
• make dbhash usable with bsddb185 module ipv bsddb module (gebi@@grml.org)
• make gdbm usable, it’s pulled in anyway if installed, and in py3k there
  will be no bsddb[185] any more anyway (gebi@@grml.org)
• ensure IPv6 is not forcibly enabled on Interix
• add PATCHLEVEL to SUBST_VARS (for egg info)
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.13 2008/12/06 16:03:06 tg Exp $
d6 1
a6 1
					# to avoid needing to bump DASH_VER
@


1.13
log
@* remove obsolete ffi patches, now that we use system ffi
* link to CVSweb in changelog
* chmod u+w before ranlibbing
* use -D_ALL_SOURCE on MirBSD #10 and up (to #99 ;)
* fix shlibs for MidnightBSD
* never pick up /usr/local/{include,lib} - this might be dangerous
  (e.g. wrong libintl on mnbsd) and is not controlled by MirPorts
  but not considered part of the base system either
* never pick up a Berkeley/Sleepycat/Oracle DB3 or DB4, because,
  if it's detected, the bsddb185 module is not built automatically
* bump dashver
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.12 2008/10/05 00:41:28 tg Exp $
d4 3
a6 2
PATCHLEVEL=		.2
DASH_VER=		10
d9 1
d14 1
d28 5
@


1.12
log
@unbreak BitTorrent 3.4.2 with Python 2.4+

XXX upstream sucks, too…
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.11 2008/08/26 14:15:09 tg Exp $
d5 1
a5 1
DASH_VER=		9
a15 2
MODGNU_RECURSE_DIRS?=	${WRKSRC}
MODGNU_RECURSE_DIRS+=	${WRKSRC}/Modules/_ctypes/libffi
@


1.11
log
@who ever came up with the stupid idea of using
CONFIGURE_ENV+=	LDFLAGS=foo
should be larted... LDFLAGS are appended to by the MODULES, as a
make variable! no wonder readline did not work...
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.10 2008/08/19 18:07:29 tg Exp $
d5 1
a5 1
DASH_VER=		8
@


1.10
log
@• introduce the GNU libreadline module and pkgviews!
• required to unbreak and fix gnuplot, and do so
• … including time_t crap
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.9 2008/08/13 13:04:25 tg Exp $
d5 1
a5 1
DASH_VER=		7
d12 2
a13 2
CONFIGURE_ENV+=		OPT=${CFLAGS:Q} \
			LDFLAGS=-L${WRKSRC:Q}\ -L${PREFIX:Q}/lib
@


1.9
log
@fix another coredump trying to run a django server
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.8 2008/08/12 12:00:01 tg Exp $
d5 1
a5 1
DASH_VER=		6
@


1.8
log
@this picks up a hidden dependency of sqlite3 if installed,
so it's most easy to just add an actual dependency
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.7 2008/08/12 09:38:13 tg Exp $
d5 1
a5 1
DASH_VER=		5
@


1.7
log
@unbreak www/py-django: comment back in (almost) all these which were
commented out at the moment; empty modules can still be required ☺

while here, comment out .orig file
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.6 2008/08/08 20:51:07 tg Exp $
d8 1
@


1.6
log
@• pull in libffi, fix ctype module
• use wctype on !Interix !OpenBSD, i.e. locale aware OSes
• build loudly
• fix readline detection and interface
• bump dashver
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.5 2008/08/05 19:11:49 bsiegert Exp $
d5 1
a5 1
DASH_VER=		4
@


1.5
log
@SECURITY: Apply security patches for CVE-2008-2315, CVE-2008-2316 and some
"misc fixes". From Gentoo. Upstream's patch does not apply on their 2.5
branch, of course, only in the trunk. Sigh.

Merge CHANGES.MirPorts with CHANGES.OpenBSD while here.
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.4 2008/08/03 22:06:55 tg Exp $
d5 3
a7 1
DASH_VER=		3
d10 1
d20 6
@


1.4
log
@fix hardcoded 2.3, add @@option no-default-conflict, _ctypes doesn't build
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.3 2008/08/03 21:30:02 tg Exp $
d5 1
a5 1
DASH_VER=		2
@


1.3
log
@quote properly
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.2 2008/07/19 17:01:24 bsiegert Exp $
d5 1
a5 1
DASH_VER=		1
@


1.2
log
@Make this at least build and install on MirOS. Correct some errors
in the plists while here. Bump patchlevel.

Btw: mmake lib-depends-check gives some errors but the offending files are
not installed.
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.5/Makefile,v 1.1 2008/07/15 19:18:51 bsiegert Exp $
d8 2
a9 1
CONFIGURE_ENV+=	OPT='${CFLAGS}' LDFLAGS='-L${WRKSRC} -L${PREFIX}/lib'
@


1.1
log
@New python 2.5 port, still experimental. Contains security fixes that are
no longer applied to the unmaintained 2.3 series.
@
text
@d1 1
a1 1
# $MirOS: ports/lang/python/2.3/Makefile,v 1.8 2007/12/29 16:57:34 bsiegert Exp $
d5 1
a5 1
DASH_VER=		0
d8 1
a8 1
CONFIGURE_ENV+=	OPT='${CFLAGS}' LDFLAGS='-L${WRKSRC}'
d11 2
d14 1
@

