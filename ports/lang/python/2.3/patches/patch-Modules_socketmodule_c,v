head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2005.11.15.19.16.58;	author tg;	state Exp;
branches;
next	1.2;
commitid	3e70437a3435830c;

1.2
date	2005.11.04.14.02.47;	author tg;	state Exp;
branches;
next	1.1;
commitid	35cd436b691eab9c;

1.1
date	2005.03.18.15.47.49;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.47.49;	author tg;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to 2.3.5 (final)
@
text
@$MirOS$
$OpenBSD: patch-Modules_socketmodule_c,v 1.2 2004/08/11 08:11:50 xsa Exp $
--- Modules/socketmodule.c.orig	Thu Dec 30 13:51:55 2004
+++ Modules/socketmodule.c	Tue Nov 15 15:50:07 2005
@@@@ -63,9 +63,6 @@@@ Local naming conventions:
 
 #include "Python.h"
 
-#undef MAX
-#define MAX(x, y) ((x) < (y) ? (y) : (x))
-
 /* Socket object documentation */
 PyDoc_STRVAR(sock_doc,
 "socket([family[, type[, proto]]]) -> socket object\n\
@@@@ -2844,7 +2841,7 @@@@ Convert a 32-bit integer from network to
 static PyObject *
 socket_htons(PyObject *self, PyObject *args)
 {
-	unsigned long x1, x2;
+	int x1, x2;
 
 	if (!PyArg_ParseTuple(args, "i:htons", &x1)) {
 		return NULL;
@@@@ -2915,7 +2912,7 @@@@ socket_inet_aton(PyObject *self, PyObjec
 	struct in_addr buf;
 #else
 	/* Have to use inet_addr() instead */
-	unsigned long packed_addr;
+	int packed_addr;
 #endif
 	char *ip_addr;
 
@@@@ -3046,7 +3043,7 @@@@ socket_inet_ntop(PyObject *self, PyObjec
 #endif
 	
 	/* Guarantee NUL-termination for PyString_FromString() below */
-	memset((void *) &ip[0], '\0', sizeof(ip) + 1);
+	memset((void *) &ip[0], '\0', sizeof(ip));
 
 	if (!PyArg_ParseTuple(args, "is#:inet_ntop", &af, &packed, &len)) {
 		return NULL;
@


1.2
log
@Preliminary commit, to be ok'd by bsiegert@@ later
* remove Python 2.1
* remove Python 2.2
* make the Python 2.3 Makefile easier by shoving stuff into Makefile.inc
* sync patch-configure_in with OpenBSD
  + cc -shared for a.out platforms on 3.8+
  + support for 3.7, 3.8
* add RCS IDs to all patches/files
* sync port and Makefile.inc better against OpenBSD
* sort flavours
* sort Makefile.inc order
* no_cxx flavour now implies _all_ other no_* (missed expat)
* use ${PICFLAG} not -fPIC (invalid on e.g. Darwin, Interix)
* by default, still pull in only the no_cxx flavour as a dependency
  XXX should make no-no_cxx match no_cxx dependency
* XXX update to 2.3.5 missing, will commit that (and 2.4) later
  after this is ok'd by bsiegert@@

untested, WIP
@
text
@d1 1
d3 2
a4 2
--- Modules/socketmodule.c.orig	Sun Apr 11 14:10:03 2004
+++ Modules/socketmodule.c	Wed Aug 11 00:07:43 2004
d15 1
a15 1
@@@@ -2822,7 +2819,7 @@@@ Convert a 32-bit integer from network to
d24 1
a24 1
@@@@ -2893,7 +2890,7 @@@@ socket_inet_aton(PyObject *self, PyObjec
d33 1
a33 1
@@@@ -3024,7 +3021,7 @@@@ socket_inet_ntop(PyObject *self, PyObjec
@


1.1
log
@Initial revision
@
text
@d1 3
a3 4
$MirOS$
$OpenBSD: patch-Modules_socketmodule_c,v 1.1.1.1 2003/12/31 17:38:33 sturm Exp $
--- Modules/socketmodule.c.orig	Sun Apr 11 12:09:41 2004
+++ Modules/socketmodule.c	Fri Oct 22 10:44:14 2004
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
