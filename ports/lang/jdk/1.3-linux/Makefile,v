head	1.8;
access;
symbols;
locks; strict;
comment	@# @;


1.8
date	2008.09.03.10.34.12;	author tg;	state Exp;
branches;
next	1.7;
commitid	10048BE68296B5D2326;

1.7
date	2007.08.10.03.40.29;	author tg;	state Exp;
branches;
next	1.6;
commitid	10046BBDE39517B9978;

1.6
date	2006.12.28.02.32.05;	author tg;	state Exp;
branches;
next	1.5;
commitid	10045932CA76ABDBFA8;

1.5
date	2006.09.14.00.10.22;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045089C0E234154C3;

1.4
date	2005.07.07.21.22.28;	author bsiegert;	state Exp;
branches;
next	1.3;
commitid	66bc42cd9a7ea714;

1.3
date	2005.04.11.15.55.50;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.10.21.50.13;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.18.15.47.55;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.18.15.47.55;	author tg;	state Exp;
branches;
next	;


desc
@@


1.8
log
@fix _13 version and make it use emulators/fedora instead
which makes it work again, sans the opera plugin

opera: /usr/mpkg/jdk1.3.1-linux/jre/lib/i386/classic/libjvm.so: undefined symbol: jdk_sem_post

This might be due to Opera not expecting the green threads plugin mode.
No idea. I'll upgrade first then test again, but for now, I just wanted
this working (unbroken).
@
text
@# $MirOS: ports/lang/jdk/1.3-linux/Makefile,v 1.7 2007/08/10 03:40:29 tg Exp $
# $OpenBSD: Makefile,v 1.23 2004/05/01 14:29:17 sturm Exp $

BROKEN=			1.3.1_13 is no longer available at Sun

ONLY_FOR_PLATFORM=	OpenBSD:*:i386 MirBSD:*:i386
EMUL=			linux

COMMENT=		Java(TM) Development Kit for Java(TM) 2 Standard Edition 1.3
VERSION=		1.3.1_13

DISTNAME=		jdk${VERSION}
PKGNAME=		jdk-linux-${VERSION}-${DASH_VER}
CATEGORIES=		devel java lang
HOMEPAGE=		http://java.sun.com/j2se/
B_R_DEPENDS+=		::emulators/fedora
DISTFILES=		j2sdk-${VERSION:S/./_/g}-linux-i586.bin
EXTRACT_CASES+=	*.bin) \
		    tail `sed -n -e '/^tail/p' -e '/^tail/q' ${FULLDISTDIR}/$$archive \
		    | awk '{print $$2}'` ${FULLDISTDIR}/$$archive >${WRKDIR}/$$archive \
		    && chmod u+x ${WRKDIR}/$$archive && ${WRKDIR}/$$archive -q ;; \

# Sun proprietary
PERMIT_PACKAGE_CDROM=	"Redistribution not permitted"
PERMIT_PACKAGE_FTP=	"Redistribution not permitted"
PERMIT_DISTFILES_CDROM=	"Redistribution not permitted"
PERMIT_DISTFILES_FTP=	"Redistribution not permitted"

NO_BUILD=		Yes
NO_REGRESS=		Yes

FETCH_MANUALLY = " You must fetch the distfile for this port manually"
FETCH_MANUALLY+= " after agreeing to the license agreement at"
FETCH_MANUALLY+= ""
FETCH_MANUALLY+= "     http://java.sun.com/j2se/1.3/download.html"
FETCH_MANUALLY+= ""
FETCH_MANUALLY+= " First choose the following option:"
FETCH_MANUALLY+= " * Download SDK, Windows/Linux/Solaris SPARC/Solaris x86"
FETCH_MANUALLY+= " Then, after several redirects, activate this link:"
FETCH_MANUALLY+= " * self-extracting file, English (${DISTFILES}, ..."
FETCH_MANUALLY+= " Then place the 26'653'147 bytes file just retrieved,"
FETCH_MANUALLY+= " ${DISTFILES} into ${FULLDISTDIR}."

JDK_HOME=		${PREFIX}/jdk1.3.1-linux

# Add empty OpenBSD and MirBSD resource bundle for javah
post-patch:
	mkdir -p ${WRKSRC}/lib/com/sun/tools/javah/resources
	touch ${WRKSRC}/lib/com/sun/tools/javah/resources/OpenBSD_i386.properties
	touch ${WRKSRC}/lib/com/sun/tools/javah/resources/MirBSD_i386.properties
	${WRKSRC}/bin/jar -0uvf ${WRKSRC}/lib/tools.jar -C ${WRKSRC}/lib \
	    com/sun/tools/javah/resources/OpenBSD_i386.properties
	${WRKSRC}/bin/jar -0uvf ${WRKSRC}/lib/tools.jar -C ${WRKSRC}/lib \
	    com/sun/tools/javah/resources/MirBSD_i386.properties

do-install:
	${INSTALL_DATA_DIR} ${JDK_HOME}
	cp -Rp ${WRKDIST}/* ${JDK_HOME}

.include <bsd.port.mk>
@


1.7
log
@make this installable on -current
still segfaults tho, need to get better shlibs
@
text
@d1 1
a1 1
# $MirOS: ports/lang/jdk/1.3-linux/Makefile,v 1.6 2006/12/28 02:32:05 tg Exp $
d4 1
a4 2
BROKEN=			1.3.1_13 is no longer available at Sun,\
			1.3.1_19 does not work (segfaults)
d13 1
a13 1
PKGNAME=		jdk-linux-${VERSION}-0
d16 1
a16 2
BUILD_DEPENDS=		:redhat_base->=6.2:emulators/redhat/base
RUN_DEPENDS=		${BUILD_DEPENDS}
d47 1
a47 1
disabled-post-patch:
d59 1
a59 1
	
@


1.6
log
@break: we can't update (broken), nor can we distribute the
old distfile, which is no longer available at Sun's.
@
text
@d1 1
a1 1
# $MirOS: ports/lang/jdk/1.3-linux/Makefile,v 1.5 2006/09/14 00:10:22 tg Exp $
d49 1
a49 1
post-patch:
@


1.5
log
@clean up COMMENT and HOMEPAGE; regenerate INDEX (2761, 169 marked as broken, probably many many more) ­ edited by script with manual postprocessing
@
text
@d1 1
a1 1
# $MirOS: ports/lang/jdk/1.3-linux/Makefile,v 1.4 2005/07/07 21:22:28 bsiegert Exp $
d4 3
d10 2
a11 2
COMMENT=			Java(TM) Development Kit for Java(TM) 2 Standard Edition 1.3
VERSION=	1.3.1_13
d13 7
a19 7
DISTNAME=	jdk${VERSION}
PKGNAME=	jdk-linux-${VERSION}-0
CATEGORIES=	devel java lang
HOMEPAGE=	http://java.sun.com/j2se/
BUILD_DEPENDS=	:redhat_base->=6.2:emulators/redhat/base
RUN_DEPENDS=	${BUILD_DEPENDS}
DISTFILES=	j2sdk-${VERSION:S/./_/g}-linux-i586.bin
d31 2
a32 2
NO_BUILD=	Yes
NO_REGRESS=	Yes
d46 1
a46 1
JDK_HOME=	${PREFIX}/jdk1.3.1-linux
d50 4
a53 4
	@@mkdir -p ${WRKSRC}/lib/com/sun/tools/javah/resources
	@@touch ${WRKSRC}/lib/com/sun/tools/javah/resources/OpenBSD_i386.properties
	@@touch ${WRKSRC}/lib/com/sun/tools/javah/resources/MirBSD_i386.properties
	@@${WRKSRC}/bin/jar -0uvf ${WRKSRC}/lib/tools.jar -C ${WRKSRC}/lib \
d55 1
a55 1
	@@${WRKSRC}/bin/jar -0uvf ${WRKSRC}/lib/tools.jar -C ${WRKSRC}/lib \
d59 2
a60 2
	@@${INSTALL_DATA_DIR} ${JDK_HOME}
	@@cp -Rp ${WRKDIST}/* ${JDK_HOME}
@


1.4
log
@Semi-automatic update of the remaining ports to the new patchlevel format.

Please correct mistakes if you find them :).
@
text
@d1 1
a1 1
# $MirOS: ports/lang/jdk/1.3-linux/Makefile,v 1.2 2005/04/10 21:50:13 tg Exp $
d7 1
a7 1
COMMENT=	"Java(TM) Development Kit for Java(TM) 2 Standard Edition 1.3"
@


1.3
log
@the port part of platform refinal
@
text
@d11 1
a11 1
PKGNAME=	jdk-linux-${VERSION}
@


1.2
log
@NOPIC_PLATFORMS, LP64_PLATFORMS and general change of
{NOT,ONLY}_FOR_{ARCH{,E,ES},OS} to {NOT,ONLY}_FOR_PLATFORM

some fallout maybe, I hope not
@
text
@d1 1
a1 1
# $MirOS: ports/lang/jdk/1.3-linux/Makefile,v 1.1.7.1 2005/03/18 15:47:55 tg Exp $
d4 1
a4 1
ONLY_FOR_PLATFORM=	OpenBSD:i386 MirBSD:i386
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
d4 3
a6 2
ONLY_FOR_ARCHS=	i386
EMUL=		linux
@


1.1.7.1
log
@Import the MirPorts Framework, many files moved or renamed though, no KDE/QT
@
text
@@
