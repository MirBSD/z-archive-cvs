head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2011.02.19.02.38.53;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004D5F2D4C1F83D852;

1.2
date	2009.03.29.11.12.22;	author tg;	state Exp;
branches;
next	1.1;
commitid	10049CF57985F64333F;

1.1
date	2008.03.27.19.05.12;	author tg;	state Exp;
branches;
next	;
commitid	10047EBEE7D110FDF6B;


desc
@@


1.3
log
@drop stuff that’s no longer not an mksh builtin
@
text
@# $MirOS: src/distrib/dbins/Makefile.sub,v 1.2 2009/03/29 11:12:22 tg Exp $

  SUBDIR+= bin/cat
  SUBDIR+= bin/chmod
  SUBDIR+= bin/cp
  SUBDIR+= bin/date
  SUBDIR+= bin/dd
  SUBDIR+= bin/df
  SUBDIR+= bin/ed
  SUBDIR+= bin/expr
  SUBDIR+= bin/hostname
  SUBDIR+= bin/ln
  SUBDIR+= bin/ls
  SUBDIR+= bin/md5
  SUBDIR+= bin/mkdir
  SUBDIR+= bin/mksh
  SUBDIR+= bin/mt
  SUBDIR+= bin/mv
  SUBDIR+= bin/pax
  SUBDIR+= bin/ps
  SUBDIR+= bin/rm
  SUBDIR+= bin/rmdir
  SUBDIR+= bin/stty
  SUBDIR+= bin/sync
  SUBDIR+= bin/systrace

.if ${MACHINE_ARCH} == "i386"
  SUBDIR+= sbin/ancontrol
.endif
  SUBDIR+= sbin/atactl
  SUBDIR+= sbin/badsect
# SUBDIR+= sbin/bioctl
  SUBDIR+= sbin/brconfig
  SUBDIR+= sbin/ccdconfig
  SUBDIR+= sbin/clri
  SUBDIR+= sbin/dhclient
  SUBDIR+= sbin/disklabel
  SUBDIR+= sbin/dmesg
  SUBDIR+= sbin/dump
  SUBDIR+= sbin/dumpfs
.if ${MACHINE_ARCH} == "i386"
  SUBDIR+= sbin/fdisk
.endif
  SUBDIR+= sbin/ffsinfo
  SUBDIR+= sbin/fsck
  SUBDIR+= sbin/fsck_ext2fs
  SUBDIR+= sbin/fsck_ffs
  SUBDIR+= sbin/fsck_msdos
  SUBDIR+= sbin/fsdb
  SUBDIR+= sbin/growfs
  SUBDIR+= sbin/ifconfig
  SUBDIR+= sbin/init
.if ${MACHINE_ARCH} == "i386"
  SUBDIR+= sbin/iopctl
.endif
# SUBDIR+= sbin/ipsecctl
  SUBDIR+= sbin/isakmpd
  SUBDIR+= sbin/kbd
  SUBDIR+= sbin/lmccontrol
  SUBDIR+= sbin/mknod
  SUBDIR+= sbin/modload
  SUBDIR+= sbin/modunload
  SUBDIR+= sbin/mount
  SUBDIR+= sbin/mount_cd9660
  SUBDIR+= sbin/mount_ext2fs
  SUBDIR+= sbin/mount_fdesc
  SUBDIR+= sbin/mount_ffs
  SUBDIR+= sbin/mount_kernfs
  SUBDIR+= sbin/mount_msdos
  SUBDIR+= sbin/mount_nfs
.if ${MACHINE_ARCH} == "i386"
  SUBDIR+= sbin/mount_ntfs
.endif
  SUBDIR+= sbin/mount_portal
  SUBDIR+= sbin/mount_procfs
  SUBDIR+= sbin/mountd
  SUBDIR+= sbin/ncheck_ffs
  SUBDIR+= sbin/newfs
  SUBDIR+= sbin/newfs_msdos
  SUBDIR+= sbin/nfsd
  SUBDIR+= sbin/nologin
  SUBDIR+= sbin/pfctl
  SUBDIR+= sbin/pflogd
  SUBDIR+= sbin/ping
  SUBDIR+= sbin/ping6
  SUBDIR+= sbin/quotacheck
  SUBDIR+= sbin/raidctl
  SUBDIR+= sbin/reboot
  SUBDIR+= sbin/restore
  SUBDIR+= sbin/route
  SUBDIR+= sbin/routed
  SUBDIR+= sbin/rtsol
  SUBDIR+= sbin/savecore
  SUBDIR+= sbin/scan_ffs
  SUBDIR+= sbin/scsi
  SUBDIR+= sbin/shutdown
  SUBDIR+= sbin/slattach
  SUBDIR+= sbin/swapctl
  SUBDIR+= sbin/sysctl
  SUBDIR+= sbin/ttyflags
  SUBDIR+= sbin/tunefs
  SUBDIR+= sbin/umount
  SUBDIR+= sbin/wicontrol
  SUBDIR+= sbin/wsconsctl

  SUBDIR+= usr.bin/compress
  SUBDIR+= usr.bin/encrypt
  SUBDIR+= usr.bin/ftp
  SUBDIR+= usr.sbin/chroot
  SUBDIR+= usr.sbin/portmap
  SUBDIR+= usr.sbin/pwd_mkdb
  SUBDIR+= usr.sbin/traceroute
  SUBDIR+= usr.sbin/traceroute6
  SUBDIR+= usr.sbin/vnconfig

 SKIPDIR+= sbin/init		# system
.ifdef crunch
 SKIPDIR+= sbin/shutdown	# perms
 SKIPDIR+= sbin/ping		# suid
 SKIPDIR+= sbin/ping6		# suid
 SKIPDIR+= usr.sbin/traceroute	# suid
 SKIPDIR+= usr.sbin/traceroute6	# suid
.endif

___display_makevars:: _SUBDIRUSE

.include <bsd.subdir.mk>
@


1.2
log
@describe to fakeroot users what can/shall/must be done
to operate it without /usr/dbin and /usr/dsbin
@
text
@d1 1
a1 1
# $MirOS: src/distrib/dbins/Makefile.sub,v 1.1 2008/03/27 19:05:12 tg Exp $
a8 1
  SUBDIR+= bin/echo
a11 1
  SUBDIR+= bin/kill
a20 1
  SUBDIR+= bin/pwd
a22 1
  SUBDIR+= bin/sleep
a25 1
  SUBDIR+= bin/test
a115 1
 SKIPDIR+= bin/test		# script
@


1.1
log
@• move all the formerly statically linked binaries to /usr/d{,s}bin/ and
  link them dynamically, except…
  ‣ init(8) since it’s used for system startup (chflags(8) comes to mind)
  ‣ shutdown(8) since it’s 4550 root:operator, which would be hard to do
    in a non-exploitable way otherwise
  ‣ test(1), domainname(1), dhclient-script, since they are shell scripts
  ‣ ldconfig(8) to prevent shooting into ourselves’ feet
• add the build of two crunchgen(1)d binaries, dbins and dbinsuid, collec-
  ting the stuff formerly statically built (dbins is 0555 root:bin, while
  dbinsuid is 4555 root:bin – {ping,traceroute}{,6} only)
• some cosmetical et al. changes to the Makefiles involved
  ‣ spacing, shell
  ‣ utf-8
  ‣ use ${CONFGRP}
• CFLAGS+=-DNFS -I… → CPPFLAGS+=… *sigh*

This enables us to make most out of ports/sysutils/fakeroot

agreed bsiegert@@
“fakeroot ist cool” Jonathan Schleifer
idea from and “:-)” Han Boetes
@
text
@d1 1
a1 1
# $MirOS$
d123 1
d129 1
@

