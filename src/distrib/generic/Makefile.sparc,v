head	1.5;
access;
symbols
	MIRBSD_10:1.4.0.2
	MIRBSD_10_BASE:1.4;
locks; strict;
comment	@# @;


1.5
date	2012.09.02.12.41.49;	author tg;	state Exp;
branches;
next	1.4;
commitid	100504354254A4449E3;

1.4
date	2007.06.10.16.32.58;	author tg;	state Exp;
branches;
next	1.3;
commitid	100466C27B979766031;

1.3
date	2006.07.05.23.14.28;	author tg;	state Exp;
branches;
next	1.2;
commitid	10044AC47E34D40C1CB;

1.2
date	2006.07.05.23.08.31;	author tg;	state Exp;
branches;
next	1.1;
commitid	10044AC46810E652D85;

1.1
date	2006.07.03.22.08.06;	author tg;	state Exp;
branches;
next	;
commitid	10044A9955565E81421;


desc
@@


1.5
log
@also, sudo make install-unstripped here now entropifies, as well as bsd.net
@
text
@# $MirOS: src/distrib/generic/Makefile.sparc,v 1.4 2007/06/10 16:32:58 tg Exp $

CLEANFILES+=	bsd.net{,.tmp}

all: bsd.net

install.md:
	cp bsd.net ${DESTDIR}/snapshot/bsd.net

bsd.net: bsd
	-rm -f $@@.tmp
	gzip -d <bsd >$@@.tmp
	config -ef $@@.tmp <<<'quit'
	elf2aout $@@.tmp $@@ -b
	-rm -f $@@.tmp
@


1.4
log
@• bsd.scsi3 is obsolete, as the install kernel doesn't have that mapping
  either, nor is it offered as kernel to install
• bsd.net was not installed
@
text
@d1 1
a1 1
# $MirOS: src/distrib/generic/Makefile.sparc,v 1.3 2006/07/05 23:14:28 tg Exp $
d13 1
@


1.3
log
@oops, can't build at install time, obviously
@
text
@d1 1
a1 1
# $MirOS: src/distrib/generic/Makefile.sparc,v 1.2 2006/07/05 23:08:31 tg Exp $
d3 1
a3 1
CLEANFILES+=	bsd.net{,.tmp} bsd.scsi3
d5 1
a5 8
all: bsd.scsi3

bsd.scsi3: bsd
	gzip -dc bsd >$@@
	s=$$(print "find sd\nexit" | config -e $@@ | fgrep scsibus | \
	    awk '{print $$1}'); printf \
	    "add sd0\n%s\n%s\nchange %s\ny\n3\n\n\nquit\n" $$s $$s $$s | \
	    config -ef $@@
d8 1
a8 1
	gzip -n9 <bsd.scsi3 >${DESTDIR}/snapshot/bsd.scsi3
@


1.2
log
@oops, kernels are gzipped...
@
text
@d1 1
a1 1
# $MirOS: src/distrib/generic/Makefile.sparc,v 1.1 2006/07/03 22:08:06 tg Exp $
d5 9
a14 6
	-rm -f bsd.scsi3
	gzip -d <${DESTDIR}/snapshot/bsd >bsd.scsi3
	s=$$(printf "find sd\nexit" | config -e bsd.scsi3 | \
	    grep scsibus | awk '{print $$1}'); \
	    printf "add sd0\n%s\n%s\nchange %s\ny\n3\n\n\nquit\n" $$s $$s $$s | \
	    config -ef bsd.scsi3
@


1.1
log
@unify build of GENERIC kernels
@
text
@d1 1
a1 1
# $MirOS: src/distrib/sparc/generic/Makefile,v 1.6 2006/07/01 16:49:34 tg Exp $
d3 1
a3 1
CLEANFILES+=	bsd.net{,.tmp}
d6 3
a8 1
	s=$$(printf "find sd\nexit" | config -e ${DESTDIR}/snapshot/bsd | \
d11 2
a12 1
	    config -e -o ${DESTDIR}/snapshot/bsd.scsi3 ${DESTDIR}/snapshot/bsd
@

