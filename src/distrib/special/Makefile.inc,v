head	1.6;
access;
symbols
	MIRBSD_10:1.6.0.2
	MIRBSD_10_BASE:1.6
	MIRBSD_9_BASE:1.5
	MIRBSD_8:1.1.7.1.0.2
	MIRBSD_8_BASE:1.1.7.1
	mirbsd:1.1.7;
locks; strict;
comment	@# @;


1.6
date	2007.01.26.18.32.48;	author tg;	state Exp;
branches;
next	1.5;
commitid	10045BA495A2E45C94C;

1.5
date	2006.05.26.19.03.29;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004477511018514515;

1.4
date	2006.05.26.19.01.18;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004477508B03746698;

1.3
date	2006.05.26.18.50.31;	author tg;	state Exp;
branches;
next	1.2;
commitid	10044774E083CC2B982;

1.2
date	2006.02.14.20.47.53;	author tg;	state Exp;
branches;
next	1.1;
commitid	10043F2407C51151E2F;

1.1
date	2005.03.06.16.33.39;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.06.16.33.39;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@only add -Os to COPTS if it's not yet there or if there are other -O opts
@
text
@# $MirOS: src/distrib/special/Makefile.inc,v 1.5 2006/05/26 19:03:29 tg Exp $

.ifndef _MODSRC_DISTRIB_SPECIAL_MAKEFILE_INC
_MODSRC_DISTRIB_SPECIAL_MAKEFILE_INC=1

.include <bsd.own.mk>

CPPFLAGS+=	-D_USE_OLD_CURSES_
.if ${COPTS:M-O*:N-Os}
COPTS+=		-Os
.endif
.if !${COPTS:M-Os}
COPTS+=		-Os
.endif
NOMAN=		yes
LDSTATIC=	# empty

.if defined(SRC_PATH)
.PATH: ${SRC_PATH}
CPPFLAGS+=	-isystem ${SRC_PATH}
.endif

.endif
@


1.5
log
@use libocurses throughoutly
@
text
@d1 1
a1 1
# $MirOS: src/distrib/special/Makefile.inc,v 1.4 2006/05/26 19:01:18 tg Exp $
d9 1
d11 4
@


1.4
log
@no need to build these statically
@
text
@d1 1
a1 1
# $MirOS: src/distrib/special/Makefile.inc,v 1.3 2006/05/26 18:50:31 tg Exp $
d8 1
@


1.3
log
@simplify reachover builds
@
text
@d1 1
a1 1
# $MirOS: src/distrib/special/Makefile.inc,v 1.2 2006/02/14 20:47:53 tg Exp $
d10 1
@


1.2
log
@restructure build system for better restartability,
move things to proper places, ensure root-only-access
to .buildnotice hack file, fix a few problems (using
${BSDMAKE} in gcc/Makefile, including wrong files),
use ${SUDO} on different places, ensure DESTDIR is
always correct on make build, move most of the former
'release' targets from src/etc/Makefile to src/Makefile
and remove associated targets in src/etc/Makefile; sync
list of phony targets in both; copy out common code in
distrib/i386/generic/Makefile, distrib/i386/common/Makefile.inc
into new distrib/i386/generic/Makefile.kernel, remove
unused target 'includes' in src/Makefile, rewrite the
distrib-dirs target, shuffle the creation and removal
of the systrace files around, build HTML manual pages
under systrace(1) control, auto-remove tmp buildhome,
check HOME makeenv/environment sync and being tmp, fix
index/checksum file generation, maybe more (read the diff)

untested
@
text
@d1 1
a1 1
# $MirOS: src/distrib/special/Makefile.inc,v 1.1.7.1 2005/03/06 16:33:39 tg Exp $
d9 6
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
a6 1
.include "../Makefile.inc"
@


1.1.7.1
log
@Add some missing files, such as some ISDN4BSD stuff,
documentation, tmac and tab files, TAI64 etc.
@
text
@@
