head	1.9;
access;
symbols
	MIRBSD_9_BASE:1.6
	MIRBSD_8:1.5.0.2
	MIRBSD_8_BASE:1.5
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2006.08.17.19.58.03;	author tg;	state dead;
branches;
next	1.8;
commitid	10044E4CA2D0E8EFBD4;

1.8
date	2006.07.26.22.42.07;	author tg;	state Exp;
branches;
next	1.7;
commitid	10044C7EFC225F44A35;

1.7
date	2006.07.03.22.08.05;	author tg;	state Exp;
branches;
next	1.6;
commitid	10044A9955565E81421;

1.6
date	2006.04.05.23.14.40;	author tg;	state Exp;
branches;
next	1.5;
commitid	10044344F6C1F24E946;

1.5
date	2005.12.04.23.14.39;	author tg;	state Exp;
branches;
next	1.4;
commitid	6ea6439378626964;

1.4
date	2005.12.04.17.11.01;	author tg;	state Exp;
branches;
next	1.3;
commitid	25b843932324064d;

1.3
date	2005.05.01.23.29.48;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.06.18.58.02;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.22.10;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.22.10;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.21.20.45.43;	author tg;	state Exp;
branches;
next	;
commitid	560042e0092f571e;


desc
@@


1.9
log
@* new Makefile structure
* move i386/livecd into baselive/ and sub-directory-structure appropriately
* rid unneeded files
* ifdef out build of rescue tools not needed on certain arches
@
text
@# $MirOS: src/distrib/i386/Makefile,v 1.8 2006/07/26 22:42:07 tg Exp $

.include <bsd.own.mk>

REL_NO_GENERIC?=No
REL_NO_RAMDISK?=No

.if make(obj) || make(clean) || make(cleandir) || make(cleannobsd)
_DESCEND=	yes
.else
_DESCEND=	no
.endif

SUBDIR=

.if ${_DESCEND} == "yes" || ${REL_NO_GENERIC:L} != "yes"
SUBDIR+=	../generic
.endif

.if ${_DESCEND} == "yes" || ${REL_NO_RAMDISK:L} != "yes"
.  if ${_DESCEND} == "yes" || ${REL_NO_GENERIC:L} != "yes"
SUBDIR+=	ramdisk
.  endif
SUBDIR+=	floppy
.endif

SUBDIR+=	livecd	# only for 'obj', 'clean'

cleannobsd: _SUBDIRUSE

unconfig:
	-cd ramdisk && ${MAKE} unconfig

.include <bsd.subdir.mk>
@


1.8
log
@simplify building rules, now that the
special handling of the floppy and ISO is gone
XXX still not completed
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/Makefile,v 1.7 2006/07/03 22:08:05 tg Exp $
@


1.7
log
@unify build of GENERIC kernels
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/Makefile,v 1.6 2006/04/05 23:14:40 tg Exp $
a4 2
REL_NO_KERNEL?=	No
.if ${REL_NO_KERNEL:L} != "yes"
a6 16
REL_NO_FLOPPY?=	No
REL_NO_AUTOISO?=No
.else
REL_NO_GENERIC=	Yes
REL_NO_RAMDISK=	Yes
REL_NO_FLOPPY=	Yes
REL_NO_AUTOISO=	Yes
.endif

.if ${REL_NO_GENERIC:L} == "yes"
REL_NO_RAMDISK=	Yes
.endif

.if ${REL_NO_RAMDISK:L} == "yes"
REL_NO_AUTOISO=	Yes
.endif
d21 1
d23 1
a23 3
.endif

.if ${_DESCEND} == "yes" || ${REL_NO_FLOPPY:L} != "yes"
a26 4
.if ${_DESCEND} == "yes" || ${REL_NO_AUTOISO:L} != "yes"
SUBDIR+=	iso
.endif

@


1.6
log
@add some live cd stuff to aid me in testing this
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/Makefile,v 1.5 2005/12/04 23:14:39 tg Exp $
d35 1
a35 1
SUBDIR+=	generic
@


1.5
log
@* elfrdsetroot: fix size of format string arguments (yeah! openbsd, eat this)
* distrib, etc, sys/arch/conf: shrink size of i386 FLOPPY in-kernel root disc
* distrib/*: re-enable i386 floppy (and lots of free space despite smaller)
* distrib/i386/common/list: enable it to find ssh's sources
* libz: make it usable as an in-kernel library "as is"
  XXX remove zlib.{c,h} from src/sys/dev/
* files.i386: use external libz sources
* pbr: export new public symbol
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/Makefile,v 1.4 2005/12/04 17:11:01 tg Exp $
d50 1
@


1.4
log
@faint attempt at making this more useful, eventually build a floppy
also, remove the -ksh argvlink, it shan't be needed any longer
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/Makefile,v 1.3 2005/05/01 23:29:48 tg Exp $
d43 1
a43 1
#SUBDIR+=	floppy
@


1.3
log
@first shot at making an ISO automatically again,
with systrace constraints in consideration
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/Makefile,v 1.2 2005/03/06 18:58:02 tg Exp $
a3 1
.include "../Makefile.inc"
d43 1
a43 1
SUBDIR+=	floppy
@


1.2
log
@merge src/distrib
@
text
@d1 1
a1 1
# $MirOS$
d48 1
a48 1
#SUBDIR+=	iso
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2003/03/04 09:28:16 deraadt Exp $
d3 50
a52 1
SUBDIR= ramdisk_cd ramdiskA ramdiskB ramdiskC cdfs
d55 1
a55 4
	cd ramdisk_cd; ${MAKE} unconfig
	cd ramdiskA; ${MAKE} unconfig
	cd ramdiskB; ${MAKE} unconfig
	cd ramdiskC; ${MAKE} unconfig
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import almost everything (no ancontrol, ifconfig, pfctl, wicontrol)
of (the undeleted parts of) OpenBSD-current's userland of about 3 hours ago.
Warning: this introduces major breakage!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2004/08/15 21:43:35 deraadt Exp $
d3 1
a3 1
SUBDIR= ramdisk_cd ramdiskA ramdiskB ramdiskC cdfs cdfs-emu
@

