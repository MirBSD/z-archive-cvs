head	1.24;
access;
symbols
	MIRBSD_9_BASE:1.22
	MIRBSD_8:1.7.0.2
	MIRBSD_8_BASE:1.7
	mirbsd:1.1.7;
locks; strict;
comment	@# @;


1.24
date	2006.08.18.20.32.37;	author tg;	state dead;
branches;
next	1.23;
commitid	10044E623F81F0FB780;

1.23
date	2006.07.05.14.53.56;	author tg;	state Exp;
branches;
next	1.22;
commitid	10044ABD2820E05B954;

1.22
date	2006.05.26.19.34.44;	author tg;	state Exp;
branches;
next	1.21;
commitid	100447758342715CF71;

1.21
date	2006.05.26.18.29.49;	author tg;	state Exp;
branches;
next	1.20;
commitid	100447749271D10CE3D;

1.20
date	2006.05.17.13.36.42;	author tg;	state Exp;
branches;
next	1.19;
commitid	100446B26F71091D628;

1.19
date	2006.05.17.11.33.09;	author tg;	state Exp;
branches;
next	1.18;
commitid	100446B09F6679B09E4;

1.18
date	2006.05.17.11.12.13;	author tg;	state Exp;
branches;
next	1.17;
commitid	100446B05022B557DCC;

1.17
date	2006.05.15.19.20.15;	author tg;	state Exp;
branches;
next	1.16;
commitid	1004468D4787674941C;

1.16
date	2006.05.15.18.44.13;	author tg;	state Exp;
branches;
next	1.15;
commitid	1004468CC040283F966;

1.15
date	2006.04.10.12.22.18;	author tg;	state Exp;
branches;
next	1.14;
commitid	100443A4DF36E178247;

1.14
date	2006.04.06.11.13.21;	author tg;	state Exp;
branches;
next	1.13;
commitid	1004434F7D37FD687E6;

1.13
date	2006.02.25.03.12.24;	author tg;	state Exp;
branches;
next	1.12;
commitid	10043FFCB211E900B16;

1.12
date	2006.02.24.12.58.02;	author tg;	state Exp;
branches;
next	1.11;
commitid	10043FF02E109917B90;

1.11
date	2006.02.24.12.51.40;	author tg;	state Exp;
branches;
next	1.10;
commitid	10043FF01650EC76760;

1.10
date	2006.02.24.12.10.05;	author tg;	state Exp;
branches;
next	1.9;
commitid	10043FEF7AE37A267B0;

1.9
date	2006.02.24.11.55.15;	author tg;	state Exp;
branches;
next	1.8;
commitid	10043FEF2EC16671E72;

1.8
date	2006.02.23.17.45.03;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043FDF4AB48218E20;

1.7
date	2005.12.21.17.52.13;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043A9965D295593F2;

1.6
date	2005.07.14.22.26.47;	author tg;	state Exp;
branches;
next	1.5;
commitid	720542d6e6b24bf4;

1.5
date	2005.07.14.22.02.13;	author tg;	state Exp;
branches;
next	1.4;
commitid	644d42d6e0e1ec03;

1.4
date	2005.07.14.21.45.46;	author tg;	state Exp;
branches;
next	1.3;
commitid	60e542d6dd1aa139;

1.3
date	2005.07.08.19.37.54;	author tg;	state Exp;
branches;
next	1.2;
commitid	b4742ced61d26ab;

1.2
date	2005.06.14.13.36.08;	author tg;	state Exp;
branches;
next	1.1;
commitid	f2342aedd454bfe;

1.1
date	2005.03.06.16.33.37;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.06.16.33.37;	author tg;	state Exp;
branches;
next	;


desc
@@


1.24
log
@merge old i386-big stuff
@
text
@# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.23 2006/07/05 14:53:56 tg Exp $

# extra

COPY	${DESTDIR}/usr/mdec/mbrmgr		usr/mdec/mbrmgr
COPY	${DESTDIR}/usr/mdec/pxeboot		usr/mdec/pxeboot

SCRIPT	${CURDIR}/../../miniroot/upgrade.sh	upgrade
SPECIAL	chmod 755 upgrade

COPY	${DESTDIR}/usr/share/man/cat1/ed.0	ed.hlp
SPECIAL	chmod 444 ed.hlp

COPY	${DESTDIR}/usr/share/zoneinfo/UTC	usr/share/zoneinfo/UTC
SPECIAL	ln usr/share/zoneinfo/UTC etc/localtime

SPECIAL	cd dev; ./MAKEDEV rambig ttyC1

COPY	${DESTDIR}/etc/ppp/ppp.conf.sample	etc/ppp/ppp.conf

COPY	${DESTDIR}/etc/isdn/isdnd.sppp.sample	etc/isdn/isdnd.rc
SPECIAL	cd dev; ./MAKEDEV isdns

COPY	${DESTDIR}/etc/dhcpd.conf		etc/dhcpd.conf
COPY	${CURDIR}/inetd.conf			etc/inetd.conf

#SPECIAL	sed 's!.server ntp.example.invalid!server ntp.mirbsd.org!' <${DESTDIR}/etc/ntpd.conf >etc/ntpd.conf

# sync with ports/books/mirex/Makefile
SPECIAL	tail -3 <${DESTDIR}/usr/share/doc/README | grep '^key ' | while IFS="	" read keynr keyfile; do IFS=" :"; set -A keyno $keynr; IFS=; print $keyfile >gzsigkey.${keyno[1]}; done

# kernel PPPD

#LINK	instbin					usr/sbin/pppd
#LINK	instbin					usr/sbin/chat
#COPY	${DESTDIR}/etc/ppp/options.sample	etc/ppp/options
#COPY	${DESTDIR}/etc/ppp/pap-secrets		etc/ppp/pap-secrets
#COPY	${DESTDIR}/etc/ppp/peers/isp.sample	etc/ppp/peers/isp
#COPY	${DESTDIR}/etc/ppp/peers/isp.chat.sample	etc/ppp/peers/isp.chat

# SSH requirements

COPY	${CURDIR}/../../miniroot/login.conf	etc/login.conf
COPY	${DESTDIR}/etc/ssh/ssh_config		etc/ssh/ssh_config

SPECIAL	sed 's!^.*rmitRootLogi.*!PermitRootLogin yes!' <${DESTDIR}/etc/ssh/sshd_config >etc/ssh/sshd_config
SPECIAL	sed 's!^root:.*!root:x:0:0:daemon:0:0:MirOS Ramdisk Root:/:/bin/mksh!' <${DESTDIR}/etc/master.passwd >etc/master.passwd

SPECIAL	/usr/sbin/pwd_mkdb -d ./etc /etc/master.passwd

SPECIAL	mkdir -p .etc/ssh
SPECIAL	chmod 700 .etc .etc/ssh
SPECIAL	cp ${DESTDIR}/etc/skel/.etc/ssh/known_hosts .etc/ssh/known_hosts

# stuff

LINK	instbin					bin/ps
LINK	instbin					bin/sync
LINK	instbin					sbin/ancontrol
LINK	instbin					sbin/atactl
LINK	instbin					sbin/kbd
LINK	instbin					sbin/mount_nfs
LINK	instbin					sbin/mount_ntfs
LINK	instbin					sbin/mountd
LINK	instbin					sbin/newfs_msdos
LINK	instbin					sbin/nfsd
LINK	instbin					sbin/pfctl
LINK	instbin					sbin/ping6
LINK	instbin					sbin/portmap
LINK	instbin					sbin/raidctl
LINK	instbin					sbin/restore
LINK	instbin					sbin/rtsol
LINK	instbin					sbin/scsi
LINK	instbin					usr/bin/awk
LINK	instbin					usr/bin/find
LINK	instbin					usr/bin/gzsig
LINK	instbin					usr/bin/less usr/bin/more
LINK	instbin					usr/bin/passwd
LINK	instbin					usr/bin/printf
LINK	instbin					usr/bin/rpcinfo
LINK	instbin					usr/bin/scp
LINK	instbin					usr/bin/showmount
LINK	instbin					usr/bin/ssh
LINK	instbin					usr/bin/ssh-keygen
LINK	instbin					usr/libexec/tftpd
LINK	instbin					usr/sbin/chroot
LINK	instbin					usr/sbin/dhcpd
LINK	instbin					usr/sbin/fdformat
LINK	instbin					usr/sbin/ifwatchd
LINK	instbin					usr/sbin/inetd
LINK	instbin					usr/sbin/isdnd
LINK	instbin					usr/sbin/ntpd
LINK	instbin					usr/sbin/openssl
LINK	instbin					usr/sbin/ppp
LINK	instbin					usr/sbin/pppoe
LINK	instbin					usr/sbin/pwd_mkdb
LINK	instbin					usr/sbin/spppcontrol
LINK	instbin					usr/sbin/sshd
@


1.23
log
@awk(1) doesn't fit on the sparc ramdisk either, so remove it at least
from the floppy. we will probably not use upkg.
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.22 2006/05/26 19:34:44 tg Exp $
@


1.22
log
@* bring back i586 support, (c)slip and ppp (without tools though)
  to the FLOPPY kernel
* make space for that by removing ping6 and rtsol again (floppy)
-> tools can be brought externally
* reduce amount of entropy, it's sha512'd into rnd(4) anyway
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.21 2006/05/26 18:29:49 tg Exp $
d74 1
@


1.21
log
@bring back date, ping6, rtsol, awk, mktemp to floppy
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.20 2006/05/17 13:36:42 tg Exp $
d68 1
d72 1
@


1.20
log
@don't do that right now, until...
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.19 2006/05/17 11:33:09 tg Exp $
a56 1
LINK	instbin					bin/date
a67 1
LINK	instbin					sbin/ping6
a70 1
LINK	instbin					sbin/rtsol
a71 1
LINK	instbin					usr/bin/awk
a74 1
LINK	instbin					usr/bin/mktemp
@


1.19
log
@move awk and find off the floppy to make space
(yes, no upkg on the floppy (for now, we'll see) this means)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.18 2006/05/17 11:12:13 tg Exp $
d27 1
a27 1
SPECIAL	sed 's!.server ntp.example.invalid!server 81.169.176.177!' <${DESTDIR}/etc/ntpd.conf >etc/ntpd.conf
@


1.18
log
@we can live with 23 seconds off on the floppy,
but not on the "big" ramdisc (which even employs ntpd)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.17 2006/05/15 19:20:15 tg Exp $
d75 2
@


1.17
log
@use the SMALL tools only for the floppy
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.16 2006/05/15 18:44:13 tg Exp $
d14 3
@


1.16
log
@the floppy needs swapctl(8)... definitively...
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.15 2006/04/10 12:22:18 tg Exp $
a39 2
LIBS	-L${BSDOBJDIR}/usr.bin/ssh/lib -lssh  -lssl -lcrypto -lutil -lotermcap -ll -lm -ldes -lkvm -lz

@


1.15
log
@start a second root shell on the install medium if
we use the "big" kernel (i.e. with VC support)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.14 2006/04/06 11:13:21 tg Exp $
a73 1
LINK	instbin					sbin/swapctl
@


1.14
log
@fix up the ramdisk ntpd.conf (only used on install media) to have a server
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.13 2006/02/25 03:12:24 tg Exp $
d14 1
a14 1
SPECIAL	cd dev; ./MAKEDEV rambig
@


1.13
log
@ancontrol(8) is not needed on the floppy (and doesn't fit)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.12 2006/02/24 12:58:02 tg Exp $
d24 1
a24 1
COPY	${DESTDIR}/etc/ntpd.conf		etc/ntpd.conf
@


1.12
log
@it was not make(1) it was sh(1)
* back $$ -> $
* use mksh(1)

now works. tested on maou.
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.11 2006/02/24 12:51:40 tg Exp $
d59 1
@


1.11
log
@fix syntax (use $$ not $), this is processed like make(1)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.10 2006/02/24 12:10:05 tg Exp $
d27 1
a27 1
SPECIAL	tail -3 <${DESTDIR}/usr/share/doc/README | grep '^key ' | while IFS="	" read keynr keyfile; do IFS=" :"; set -A keyno $$keynr; IFS=; print $$keyfile >gzsigkey.$${keyno[1]}; done
@


1.10
log
@copy known_hosts to install medium too
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.9 2006/02/24 11:55:15 tg Exp $
d27 1
a27 1
SPECIAL	tail -3 <${DESTDIR}/usr/share/doc/README | grep '^key ' | while IFS="	" read keynr keyfile; do IFS=" :"; set -A keyno $keynr; IFS=; print $keyfile >gzsigkey.${keyno[1]}; done
@


1.9
log
@* src/distrib/i386/ramdisk/list.local: sync libs list with other
* src/usr.bin/crunch/crunchgen.c: use -Wl,--start-group and
  -Wl,--end-group (XXX rewrite to fully utilise <bsd.prog.mk>)
* src/sys/arch/i386/conf/FLOPPY: DAMN I've done so much work to make
  vnconfig(8) work and then this friggin' kernel comes without vnd(4)
  support so add it to not make my kewl hack go lost in the Attic
* src/sys/arch/i386/conf/FLOPPY: sync with GENERIC while here
* ports/books/mirex/Makefile: add comment
* src/distrib/i386/ramdisk/list.local: split gzsig keys into multiple files
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.8 2006/02/23 17:45:03 tg Exp $
d50 4
@


1.8
log
@make /dev/MAKEDEV on floppy chmod 555
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.7 2005/12/21 17:52:13 tg Exp $
d26 2
a27 1
SPECIAL	fgrep ssh-rsa ${DESTDIR}/usr/share/doc/README >gzsig.keys
d40 1
a40 1
LIBS	-L${BSDOBJDIR}/usr.bin/ssh/lib -lssh  -lutil -lotermcap -ll -lm -lssl -lcrypto -ldes -lkvm -lz
d46 1
a46 1
SPECIAL	sed 's!^root.*!root:x:0:0:daemon:0:0:MirOS Ramdisk Root:/:/bin/mksh!' <${DESTDIR}/etc/master.passwd >etc/master.passwd
@


1.7
log
@first round of fixes
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.6 2005/07/14 22:26:47 tg Exp $
d14 1
a14 1
SPECIAL	cd dev; /bin/mksh MAKEDEV rambig
d19 1
a19 1
SPECIAL	cd dev; /bin/mksh MAKEDEV isdns
@


1.6
log
@with these diffs, gzsig and ntpd work much better on the install ramdisc
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.5 2005/07/14 22:02:13 tg Exp $
a44 1
SPECIAL	echo /bin/mksh >etc/shells
@


1.5
log
@Filesystem  512-blocks     Used    Avail Capacity iused   ifree  %iused  Mounted on
/dev/svnd0a       7806     6970      836    89%     623     655    49%   /usr/obj/distrib/i386/ramdisk/tmpmnt

after adding some additional programmes, which greatly enhance the
usability of the ramdisc (untested)

mostly agreed by bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.4 2005/07/14 21:45:46 tg Exp $
d26 2
d75 1
d77 1
@


1.4
log
@sort and shrink, no changes yet
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.3 2005/07/08 19:37:54 tg Exp $
d3 1
a3 7
# base

LINK	instbin					bin/sync
LINK	instbin					sbin/kbd
LINK	instbin					sbin/restore
LINK	instbin					usr/bin/printf
LINK	instbin					usr/sbin/chroot
d6 1
a10 2
# extra

d13 1
d15 1
d17 1
d21 5
d50 1
d52 3
d57 4
d62 1
d64 1
d66 3
d70 1
d72 1
d76 6
d83 1
@


1.3
log
@* fix a typo
* add kernel PPPoE support to installation ramdisc
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.2 2005/06/14 13:36:08 tg Exp $
d21 1
a21 9

# IPv6

LINK	instbin					sbin/ping6
LINK	instbin					sbin/rtsol

# ISDN

LINK	instbin					usr/sbin/isdnd
a24 21
# use bigger less(1) for more and less

LINK	instbin					usr/bin/less usr/bin/more

# NFS

LINK	instbin					sbin/mount_nfs

# NTFS

LINK	instbin					sbin/mount_ntfs

# userland PPP

LINK	instbin					usr/sbin/ppp
COPY	${DESTDIR}/etc/ppp/ppp.conf.sample	etc/ppp/ppp.conf

# userland PPPoE

LINK	instbin					usr/sbin/pppoe

d34 1
a34 9
# kernel PPPoE

LINK	instbin					usr/sbin/spppcontrol

# RAIDframe

LINK	instbin					sbin/raidctl

# SSH and assorted tools
a37 8
LINK	instbin					bin/ps
LINK	instbin					usr/bin/passwd
LINK	instbin					usr/bin/scp
LINK	instbin					usr/bin/ssh
LINK	instbin					usr/bin/ssh-keygen
LINK	instbin					usr/sbin/pwd_mkdb
LINK	instbin					usr/sbin/sshd

d47 1
a47 1
# when we have libssl anyways...
d49 12
d62 5
@


1.2
log
@* gcc set is gone
* welcome dev set
* ksh -> mksh while here
@
text
@d1 1
a1 1
# $MirOS: src/distrib/i386/ramdisk/list.local,v 1.1.7.1 2005/03/06 16:33:37 tg Exp $
d37 1
a37 1
# NTFS
d41 1
a41 1
# NFS
d63 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
d20 1
a20 1
SPECIAL	cd dev; /bin/ksh MAKEDEV rambig
d31 1
a31 1
SPECIAL	cd dev; /bin/ksh MAKEDEV isdns
d83 2
a84 2
SPECIAL	echo /bin/ksh >etc/shells
SPECIAL	sed 's!^root.*!root:x:0:0:daemon:0:0:MirOS Ramdisk Root:/:/bin/ksh!' <${DESTDIR}/etc/master.passwd >etc/master.passwd
@


1.1.7.1
log
@Add some missing files, such as some ISDN4BSD stuff,
documentation, tmac and tab files, TAI64 etc.
@
text
@@
