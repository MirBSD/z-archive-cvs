head	1.19;
access;
symbols
	MIRBSD_10:1.15.0.2
	MIRBSD_10_BASE:1.15;
locks; strict;
comment	@# @;


1.19
date	2015.10.25.00.35.16;	author tg;	state Exp;
branches;
next	1.18;
commitid	100562C23DD66436B08;

1.18
date	2010.01.17.00.36.25;	author tg;	state Exp;
branches;
next	1.17;
commitid	1004B525B9F5BDD13C4;

1.17
date	2008.12.10.18.03.21;	author tg;	state Exp;
branches;
next	1.16;
commitid	1004940047A091C2C98;

1.16
date	2008.07.12.22.06.14;	author tg;	state Exp;
branches;
next	1.15;
commitid	10048792AAF4F6C5252;

1.15
date	2007.08.28.23.00.20;	author tg;	state Exp;
branches;
next	1.14;
commitid	10046D4A90621088478;

1.14
date	2007.06.22.19.58.59;	author tg;	state Exp;
branches;
next	1.13;
commitid	100467C2A0D72BEE2AC;

1.13
date	2007.06.08.07.32.42;	author tg;	state Exp;
branches;
next	1.12;
commitid	100466905CF2F1046F5;

1.12
date	2007.05.26.23.03.07;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004658BCBB3DADA3B4;

1.11
date	2007.05.24.23.04.05;	author tg;	state Exp;
branches;
next	1.10;
commitid	100465619D44EB31C09;

1.10
date	2007.05.10.13.09.22;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004643195847EA64E6;

1.9
date	2007.02.19.22.19.04;	author tg;	state Exp;
branches;
next	1.8;
commitid	10045DA21973FF281A0;

1.8
date	2007.01.26.19.05.09;	author tg;	state Exp;
branches;
next	1.7;
commitid	10045BA50F367A6564C;

1.7
date	2007.01.26.18.18.00;	author tg;	state Exp;
branches;
next	1.6;
commitid	10045BA45D52FA5FACC;

1.6
date	2007.01.26.18.15.23;	author tg;	state Exp;
branches;
next	1.5;
commitid	10045BA452D00913582;

1.5
date	2007.01.26.16.00.27;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045BA2577659FBC69;

1.4
date	2006.09.29.22.25.36;	author tg;	state Exp;
branches;
next	1.3;
commitid	100451D9D66097EBA5E;

1.3
date	2006.08.19.11.49.05;	author tg;	state Exp;
branches;
next	1.2;
commitid	10044E6FAC43A76B73A;

1.2
date	2006.08.18.20.48.46;	author tg;	state Exp;
branches;
next	1.1;
commitid	10044E627C4580B7224;

1.1
date	2006.08.17.19.34.15;	author tg;	state Exp;
branches;
next	;
commitid	10044E4C48801BF3A85;


desc
@@


1.19
log
@oops
@
text
@# $MirOS: src/distrib/common/listend.i386,v 1.18 2010/01/17 00:36:25 tg Exp $

# devices stuff
SPECIAL	cd dev; mksh MAKEDEV ptm pty0; rm ?typ[a-zA-Z]
SPECIAL	cd dev; mksh MAKEDEV ramdisk
SPECIAL	print '/r:1,32/s//f:1, &/\nwq' | ed -s .profile
@


1.18
log
@• modularise floppy configuration and let sparc/floppy use the common one,
  adding some to it
• nuke printf(1) we have mksh(1) print builtin
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.17 2008/12/10 18:03:21 tg Exp $
d6 1
a6 1
SPECIAL	print '/r:1,128/s//f:1, &/\nwq' | ed -s .profile
@


1.17
log
@always call MAKEDEV with mksh
@
text
@d1 1
a1 17
# $MirOS: src/distrib/common/listend.i386,v 1.16 2008/07/12 22:06:14 tg Exp $

# we want the disklabel without manual page
CRUNCHSPECIAL disklabel	srcdir distrib/special/dl-noman

# extra programmes
LINK	instbin					sbin/fdisk
LINK	instbin					sbin/mount_ext2fs
LINK	instbin					sbin/mount_msdos
LINK	instbin					usr/bin/more usr/bin/less

# these don't fit
SPECIAL	rmdir etc/isdn etc/ssh usr/share/zoneinfo

# replace bigger normal boot by fdboot
SPECIAL	rm usr/mdec/boot
SPECIAL	install -c -o 0 -g 0 -m 555 ${BSDOBJDIR}/sys/arch/i386/stand/fdboot/boot usr/mdec/boot
a6 15

# install stuff
SCRIPT	${TOPDIR}/common/install.i386		install.md
SPECIAL	chmod 755 install.md

# kernel PPPD
#LINK	instbin					usr/sbin/chat
#LINK	instbin					usr/sbin/pppd
#COPY	${DESTDIR}/etc/ppp/options.sample	etc/ppp/options
#COPY	${DESTDIR}/etc/ppp/pap-secrets		etc/ppp/pap-secrets
#COPY	${DESTDIR}/etc/ppp/peers/isp.sample	etc/ppp/peers/isp
#COPY	${DESTDIR}/etc/ppp/peers/isp.chat.sample etc/ppp/peers/isp.chat
#SPECIAL	ln -sf etc/ppp/pap-secrets etc/ppp/chap-secrets
#- or
SPECIAL	rmdir etc/ppp
@


1.16
log
@• sparc, i386: rmdir stuff only for i386-big
• sparc: add upgrade.sh
• move sparc bsd.rd from common+sparc to common/extra+sparc-big
• new sparc: stub for floppy building (experimental)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.15 2007/08/28 23:00:20 tg Exp $
d20 2
a21 2
SPECIAL	cd dev; ./MAKEDEV ptm pty0; rm ?typ[a-zA-Z]
SPECIAL	cd dev; ./MAKEDEV ramdisk
@


1.15
log
@die, wsemul_sun, die
users should use the “wsvtg” terminal type now (or their serial one)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.14 2007/06/22 19:58:59 tg Exp $
d13 1
a13 1
SPECIAL	rmdir etc/isdn etc/ssh
@


1.14
log
@(untested) only access the floppy if we're on a floppy
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.13 2007/06/08 07:32:42 tg Exp $
a21 1
TERMCAP	vt100,vt220,wsvt25,dumb,wsvtg		usr/share/misc/termcap
@


1.13
log
@it's especially annoying if things don't fit, you sqeueeze, and
they still don't fit by 2 bytes, and the FDD has 7 spare KiB anyway
because makefs sucks.

remove wicontrol(8) for once and all (until we deal with this issue)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.12 2007/05/26 23:03:07 tg Exp $
d23 1
@


1.12
log
@wicontrol(8) fits again, that's major cool
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.11 2007/05/24 23:04:05 tg Exp $
a9 1
LINK	instbin					sbin/wicontrol
@


1.11
log
@• listend.i386: use fdboot not boot for /usr/mdec/boot, it's enough for
  bootstrapping a ramdisk kernel to hard disc as well
• install.*: use MI installboot syntax, yay!
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.10 2007/05/10 13:09:22 tg Exp $
d10 1
a10 1
#LINK	instbin					sbin/wicontrol
@


1.10
log
@• fix missing ZCONST
• fix floppy ramdisk not fitting (probably due to whirlpool etc. addition)
• fix symlink'd manpages (XFree86®) missing from the htman set (the MLINKS
  from base are hardlink'd)

not a full sync, but close
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.9 2007/02/19 22:19:04 tg Exp $
d16 4
@


1.9
log
@* we need /dev/{p,t}typ[0-9] (at least a few) and maybe /dev/ptm on the
  floppies because script(1) requires them, obviously
* i386: add 8 ptys to the kernel, make room by removing two GigE NICs
  (XXX sparc kernels not in sync, but that are they anyways)
* i386: since it fits now, INCLUDE_CONFIG_FILE

tested in qemu w/ 16 MiB RAM (9.3 avail for userland => 12 MiB should be safe)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.8 2007/01/26 19:05:09 tg Exp $
d10 1
a10 1
LINK	instbin					sbin/wicontrol
d14 1
d33 2
@


1.8
log
@'REMOVE' doesn't work as planned, revert that part
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.7 2007/01/26 18:18:00 tg Exp $
d16 1
@


1.7
log
@add /usr/bin/find to all (might need to REMOVE on sparc floppy),
remove /sbin/ping6 from i386 floppy since it seems to be too big
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.5 2007/01/26 16:00:27 tg Exp $
a13 5
REMOVE	bin/sync
REMOVE	sbin/ping6
REMOVE	sbin/restore
REMOVE	sbin/scsi
REMOVE	usr/bin/find
@


1.6
log
@unify lists where possible and use REMOVE for non-fits
@
text
@d15 1
d18 1
@


1.5
log
@* kernel pppd(8) doesn't fit on the floppy, remove it
* ping6 will probably fit now
* also remove SLIP - sl(4) - since slattach(8) wasn't on the disc either
* remove /etc/ppp/peers from mtree, ppp(8) doesn't use it
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.4 2006/09/29 22:25:36 tg Exp $
d13 5
@


1.4
log
@really make the disklabel binary with no integrated manpage
only for the i386 small floppy, nothing else
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.3 2006/08/19 11:49:05 tg Exp $
d22 7
a28 7
LINK	instbin					usr/sbin/chat
LINK	instbin					usr/sbin/pppd
COPY	${DESTDIR}/etc/ppp/options.sample	etc/ppp/options
COPY	${DESTDIR}/etc/ppp/pap-secrets		etc/ppp/pap-secrets
COPY	${DESTDIR}/etc/ppp/peers/isp.sample	etc/ppp/peers/isp
COPY	${DESTDIR}/etc/ppp/peers/isp.chat.sample etc/ppp/peers/isp.chat
SPECIAL	ln -sf etc/ppp/pap-secrets etc/ppp/chap-secrets
@


1.3
log
@no comments in mid-line
@
text
@d1 4
a4 1
# $MirOS: src/distrib/common/listend.i386,v 1.2 2006/08/18 20:48:46 tg Exp $
@


1.2
log
@fix paths, etc.
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listend.i386,v 1.1 2006/08/17 19:34:15 tg Exp $
d16 1
a16 2
#SCRIPT	${TOPDIR}/common/upgrade.sh		upgrade
SPECIAL	chmod 755 install.md #upgrade
@


1.1
log
@move stuff required for images from miniroot/ and ramdisk/ to common/

PS: now's probably the time to not merge these with openbsd any more

PPS: this commit sponsored by johl's DEC VT320 @@9600,8n1 on NetBSD 1.6.1/pmax
@
text
@d1 1
a1 1
# $MirOS: src/distrib/ramdisk/listend.i386,v 1.4 2006/08/17 14:09:22 tg Exp $
d16 1
a16 1
#SCRIPT	${TOPDIR}/miniroot/upgrade.sh		upgrade
@

