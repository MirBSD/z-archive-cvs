head	1.16;
access;
symbols;
locks; strict;
comment	@# @;


1.16
date	2010.01.17.00.35.08;	author tg;	state dead;
branches;
next	1.15;
commitid	1004B525B3629110DD5;

1.15
date	2009.09.15.13.33.13;	author tg;	state Exp;
branches;
next	1.14;
commitid	1004AAF97B04FA44156;

1.14
date	2009.04.17.19.19.16;	author tg;	state Exp;
branches;
next	1.13;
commitid	10049E8D64A772236A2;

1.13
date	2009.04.17.19.17.04;	author tg;	state Exp;
branches;
next	1.12;
commitid	10049E8D5B91CAF49DE;

1.12
date	2009.04.16.13.38.21;	author tg;	state Exp;
branches;
next	1.11;
commitid	10049E734AD35026399;

1.11
date	2009.04.16.13.20.23;	author tg;	state Exp;
branches;
next	1.10;
commitid	10049E73089575F8D71;

1.10
date	2008.12.27.00.29.41;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004955770760D5F259;

1.9
date	2008.12.27.00.27.00;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004955765B63334424;

1.8
date	2008.12.18.17.20.33;	author tg;	state Exp;
branches;
next	1.7;
commitid	100494A86645E34F58D;

1.7
date	2008.12.10.18.03.21;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004940047A091C2C98;

1.6
date	2008.10.21.19.37.04;	author tg;	state Exp;
branches;
next	1.5;
commitid	10048FE2F5D4D92AD6C;

1.5
date	2008.07.13.23.53.54;	author tg;	state Exp;
branches;
next	1.4;
commitid	100487A95A274493B29;

1.4
date	2008.07.13.22.47.19;	author tg;	state Exp;
branches;
next	1.3;
commitid	100487A86065EEEF5CC;

1.3
date	2008.07.13.20.06.12;	author tg;	state Exp;
branches;
next	1.2;
commitid	100487A603F3AE6908C;

1.2
date	2008.07.12.22.49.48;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004879351D767D3A7F;

1.1
date	2008.07.12.22.06.14;	author tg;	state Exp;
branches;
next	;
commitid	10048792AAF4F6C5252;


desc
@@


1.16
log
@• modularise floppy configuration and let sparc/floppy use the common one,
  adding some to it
• nuke printf(1) we have mksh(1) print builtin
@
text
@# $MirOS: src/distrib/common/list.sparc-fdd,v 1.15 2009/09/15 13:33:13 tg Exp $

SRCDIRS	distrib/special sys/arch/sparc/stand
SRCDIRS	bin sbin usr.bin usr.sbin

LIBS	-lutil -locurses -lm -lz

# standard tools in the crunched binary
COPY	${OBJDIR}/instbin			instbin
LINK	instbin					bin/cat
LINK	instbin					bin/chmod bin/chgrp sbin/chown usr/bin/chflags
LINK	instbin					bin/cp
LINK	instbin					bin/date
LINK	instbin					bin/dd
LINK	instbin					bin/ed
LINK	instbin					bin/hostname
LINK	instbin					bin/ln
LINK	instbin					bin/ls
LINK	instbin					bin/md5 bin/cksum bin/rmd160 bin/sha1 bin/sum 
LINK	instbin					bin/mkdir
LINK	instbin					bin/mksh bin/sh
LINK	instbin					bin/mv
LINK	instbin					bin/pax bin/cpio bin/tar
LINK	instbin					bin/rm
LINK	instbin					bin/sleep
LINK	instbin					bin/stty
LINK	instbin					sbin/disklabel
LINK	instbin					sbin/dmesg
LINK	instbin					sbin/fsck
LINK	instbin					sbin/fsck_ffs
LINK	instbin					sbin/ifconfig
LINK	instbin					sbin/init
LINK	instbin					sbin/mount
LINK	instbin					sbin/mount_cd9660
LINK	instbin					sbin/mount_ffs
LINK	instbin					sbin/mount_nfs
LINK	instbin					sbin/newfs sbin/mount_mfs
LINK	instbin					sbin/reboot sbin/halt
LINK	instbin					sbin/route
LINK	instbin					sbin/scsi
LINK	instbin					sbin/swapctl
LINK	instbin					sbin/umount
LINK	instbin					usr/bin/compress usr/bin/gunzip usr/bin/gzip
LINK	instbin					usr/bin/ftp
LINK	instbin					usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin					usr/bin/mktemp
LINK	instbin					usr/bin/more usr/bin/less
LINK	instbin					usr/bin/nc
LINK	instbin					usr/bin/script
LINK	instbin					usr/bin/sed
LINK	instbin					usr/mdec/installboot
LINK	instbin					usr/sbin/chkuterm
LINK	instbin					usr/sbin/eeprom
LINK	instbin					usr/sbin/rdate
LINK	instbin					usr/sbin/sysctl
ARGVLINK cp					mv_cp
ARGVLINK mksh					-mksh
ARGVLINK mksh					-sh
ARGVLINK rm					mv_rm

SPECIAL	rmdir etc/isdn etc/ppp etc/ssh usr/libexec usr/share/zoneinfo

# devices stuff
SCRIPT	${DESTDIR}/dev/MAKEDEV			dev/MAKEDEV
SPECIAL	chmod 555 dev/MAKEDEV

# etc population
SCRIPT	${DESTDIR}/etc/disktab			etc/disktab.shadow
SYMLINK	/tmp/disktab.shadow			etc/disktab
SYMLINK	/tmp/fstab.shadow			etc/fstab
COPY	${TOPDIR}/common/group			etc/group
SYMLINK	/tmp/hosts				etc/hosts
COPY	${TOPDIR}/common/protocols		etc/protocols
SYMLINK	/tmp/resolv.conf.shadow			etc/resolv.conf
COPY	${TOPDIR}/common/services		etc/services
COPY	${TOPDIR}/common/shells			etc/shells
COPY	${TOPDIR}/common/spwd.db		etc/spwd.db
SPECIAL	chown root:_shadow etc/spwd.db
SPECIAL	chmod 640 etc/spwd.db
TERMCAP	vt100,vt220,wsvtg,wsvt25,dumb		usr/share/misc/termcap

# install stuff
SCRIPT	${TOPDIR}/common/dot.profile		.profile
SCRIPT	${TOPDIR}/common/functions		etc/functions
SCRIPT	${TOPDIR}/common/install.sh		install
SCRIPT	${TOPDIR}/common/install.sub		install.sub
SPECIAL	chmod 755 install

# misc stuff
COPY	${DESTDIR}/usr/mdec/boot		usr/mdec/boot
COPY	${DESTDIR}/usr/mdec/bootxx		usr/mdec/bootxx

# devices stuff
SPECIAL	cd dev; mksh MAKEDEV ramdisk
SPECIAL	cd dev; mksh MAKEDEV ptm pty0; rm ?typ[a-zA-Z] {,r}sd[12]*

# install stuff
SCRIPT	${TOPDIR}/common/install.sparc		install.md
SPECIAL	chmod 755 install.md
@


1.15
log
@The FLOPPY kernel was 1111 bytes larger than the makefs+ffs maximum
of 1409024 bytes, which makes me wish even more fervently for ustarfs
or something similar. Shrink it down to 1402093 bytes (to give us some
space for very-soon-upcoming even more mksh growth) by removing sync,
chroot (the one installed is static anyway) and, with tears, hexdump.
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.14 2009/04/17 19:19:16 tg Exp $
@


1.14
log
@nuke libexec too
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.13 2009/04/17 19:17:04 tg Exp $
a26 1
LINK	instbin					bin/sync
a45 1
LINK	instbin					usr/bin/hexdump usr/bin/hd usr/bin/od
a52 1
LINK	instbin					usr/sbin/chroot
@


1.13
log
@shrink to make floppy fit again :(

NFS is more important than df(1) and find(1) tho ;)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.12 2009/04/16 13:38:21 tg Exp $
d4 1
a4 1
SRCDIRS	bin sbin usr.bin usr.sbin libexec
d64 1
a64 1
SPECIAL	rmdir etc/isdn etc/ppp etc/ssh usr/share/zoneinfo
@


1.12
log
@add NFS client and a couple more user-space utilities to the sparc
floppy, as these should now fit better (24K vs 60K boot)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.11 2009/04/16 13:20:23 tg Exp $
a14 1
LINK	instbin					bin/df
a44 1
LINK	instbin					usr/bin/find
@


1.11
log
@• make use of the imbedded patch area to note the file(!) offset of
  the __defkernel patch field (and with possible future extensions)
• strip /usr/mdec/boot now by default ☺
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.10 2008/12/27 00:29:41 tg Exp $
d15 1
d26 1
d28 1
d38 1
d46 1
d57 1
@


1.10
log
@save on the group file instead
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.9 2008/12/27 00:27:00 tg Exp $
a90 3
SPECIAL	chmod 600 usr/mdec/boot
SPECIAL	strip --target=a.out-sunos-big usr/mdec/boot
SPECIAL	chmod 555 usr/mdec/boot
@


1.9
log
@use a common bunch of functions too

XXX throw ask* and initterm there as well some day
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.8 2008/12/18 17:20:33 tg Exp $
d70 1
a70 1
COPY	${DESTDIR}/etc/group			etc/group
@


1.8
log
@extra small password database for the ramdiscs
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.7 2008/12/10 18:03:21 tg Exp $
d44 1
d83 1
@


1.7
log
@always call MAKEDEV with mksh
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.6 2008/10/21 19:37:04 tg Exp $
d75 3
a77 1
COPY	${DESTDIR}/etc/spwd.db			etc/spwd.db
@


1.6
log
@sparc bootloader must now be stripped (luckily, this does it while
retaining the “special” object format)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.5 2008/07/13 23:53:54 tg Exp $
d92 2
a93 2
SPECIAL	cd dev; ./MAKEDEV ramdisk
SPECIAL	cd dev; ./MAKEDEV ptm pty0; rm ?typ[a-zA-Z] {,r}sd[12]*
@


1.5
log
@nuke NFS again, hope it fits now
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.4 2008/07/13 22:47:19 tg Exp $
d87 3
@


1.4
log
@/usr/sbin/sysctl is REQUIRED
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.3 2008/07/13 20:06:12 tg Exp $
a34 1
LINK	instbin					sbin/mount_nfs
@


1.3
log
@bring, at some cost, ed(1) and NFS client support to the floppy
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.2 2008/07/12 22:49:48 tg Exp $
d54 1
@


1.2
log
@no NFS, won't fit IIRC
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/list.sparc-fdd,v 1.1 2008/07/12 22:06:14 tg Exp $
d15 1
a15 1
LINK	instbin					bin/df
d35 1
a51 1
LINK	instbin					usr/sbin/chroot
a53 1
LINK	instbin					usr/sbin/sysctl
a88 1
SPECIAL	cd dev; ./MAKEDEV ptm pty0; rm ?typ[a-zA-Z]
d90 1
@


1.1
log
@• sparc, i386: rmdir stuff only for i386-big
• sparc: add upgrade.sh
• move sparc bsd.rd from common+sparc to common/extra+sparc-big
• new sparc: stub for floppy building (experimental)
@
text
@d1 1
a1 1
# $MirOS: src/distrib/common/listbeg.sparc,v 1.2 2006/08/18 20:48:46 tg Exp $
a34 1
LINK	instbin					sbin/mount_nfs
@

