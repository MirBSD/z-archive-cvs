head	1.4;
access;
symbols
	cvs-201403122330:1.1.1.2
	MIRBSD_10:1.3.0.2
	MIRBSD_10_BASE:1.3
	OPENBSD_4_0:1.1.1.1
	MIRBSD_9_BASE:1.2
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	cvs-200507211800:1.1.1.1
	cvs-200504291700:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2014.03.13.00.37.35;	author tg;	state Exp;
branches;
next	1.3;
commitid	1005320FDE718E443A8;

1.3
date	2007.04.28.00.12.46;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004632918E6CE6474D;

1.2
date	2005.03.13.18.32.41;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.29.22;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.29.22;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2014.03.12.23.56.45;	author tg;	state Exp;
branches;
next	;
commitid	1005320F456704D6170;


desc
@@


1.4
log
@merge and __CRAZY clean
@
text
@# $MirOS: src/usr.bin/awk/Makefile,v 1.3 2007/04/28 00:12:46 tg Exp $
# $OpenBSD: Makefile,v 1.14 2013/08/18 22:06:44 miod Exp $

PROG=		awk
SRCS=		awkgram.y b.c lex.c lib.c main.c parse.c proctab.c run.c tran.c
LDADD=		-lm
DPADD=		${LIBM}
CLEANFILES+=	proctab.c maketab
CPPFLAGS+=	-I. -DHAS_ISBLANK -DNDEBUG
HOSTCFLAGS?=	${CFLAGS}

CFLAGS_b.o+=	-Wno-cast-qual
CFLAGS_run.o+=	-Wno-bad-function-cast
CFLAGS_run.o+=	-Wno-unused-parameter

# This just gets installed verbatim
.if make(install)
SUBDIR+=	 USD.doc
.endif

proctab.c: maketab
	./maketab >proctab.c

maketab: awkgram.h maketab.c
	${HOSTCC} ${HOSTCFLAGS} ${CPPFLAGS} ${.CURDIR}/maketab.c -o $@@

.include <bsd.prog.mk>
@


1.3
log
@more lex/yacc overhaul, tentatively
@
text
@d1 2
a2 2
# $MirOS: src/usr.bin/awk/Makefile,v 1.2 2005/03/13 18:32:41 tg Exp $
# $OpenBSD: Makefile,v 1.7 2004/12/30 01:52:48 millert Exp $
a4 1
LINKS=		${BINDIR}/awk ${BINDIR}/nawk
d11 4
a14 1
MLINKS=		awk.1 nawk.1
@


1.2
log
@merge src/usr.bin
@
text
@d1 1
a1 1
# $MirOS$
d4 6
a9 6
PROG=	awk
LINKS=	${BINDIR}/awk ${BINDIR}/nawk
SRCS=	ytab.c lex.c b.c main.c parse.c proctab.c tran.c lib.c run.c
LDADD=	-lm
DPADD=	${LIBM}
CLEANFILES+=	proctab.c maketab ytab.c ytab.h
d12 1
a12 1
MLINKS=	awk.1 nawk.1
d16 1
a16 1
SUBDIR+= USD.doc
a18 5
ytab.c ytab.h: awkgram.y
	${YACC} -d ${.CURDIR}/awkgram.y
	mv y.tab.c ytab.c
	mv y.tab.h ytab.h

d22 1
a22 1
maketab: ytab.h maketab.c
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.7 2004/12/30 01:52:48 millert Exp $
d9 3
a11 2
CLEANFILES+=proctab.c maketab ytab.c ytab.h
CFLAGS+=-I. -I${.CURDIR} -DHAS_ISBLANK -DNDEBUG
d28 1
a28 1
	${HOSTCC} ${CFLAGS} ${.CURDIR}/maketab.c -o $@@
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@get newer awk
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2013/08/18 22:06:44 miod Exp $
d4 1
d10 6
a15 1
HOSTCFLAGS+=-I. -I${.CURDIR} -DHAS_ISBLANK -DNDEBUG
d26 1
a26 1
	${HOSTCC} ${HOSTCFLAGS} ${.CURDIR}/maketab.c -o $@@
@

