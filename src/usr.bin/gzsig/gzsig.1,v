head	1.4;
access;
symbols
	MIRBSD_10:1.4.0.2
	MIRBSD_10_BASE:1.4
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	cvs-200507211800:1.1.1.1
	cvs-200507072320:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@.\" @;


1.4
date	2007.03.11.21.21.00;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045F472CC308C9743;

1.3
date	2006.01.30.16.06.41;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043DE39762C44BDA7;

1.2
date	2005.07.07.23.26.29;	author tg;	state Exp;
branches;
next	1.1;
commitid	2e3d42cdba292c69;

1.1
date	2005.07.07.23.20.47;	author tg;	state Exp;
branches
	1.1.1.1;
next	;
commitid	50d442cdb8d9adf2;

1.1.1.1
date	2005.07.07.23.20.47;	author tg;	state Exp;
branches;
next	;
commitid	50d442cdb8d9adf2;


desc
@@


1.4
log
@document my idea for gzsig version 2 as bug of version 1
@
text
@.\" $MirOS: src/usr.bin/gzsig/gzsig.1,v 1.3 2006/01/30 16:06:41 tg Exp $
.\" $OpenBSD: gzsig.1,v 1.6 2005/06/01 08:14:53 jmc Exp $
.\"
.\"  Copyright (c) 2001 Dug Song <dugsong@@arbor.net>
.\"  Copyright (c) 2001 Arbor Networks, Inc.
.\"
.\"    Redistribution and use in source and binary forms, with or without
.\"    modification, are permitted provided that the following conditions
.\"    are met:
.\"
.\"    1. Redistributions of source code must retain the above copyright
.\"       notice, this list of conditions and the following disclaimer.
.\"    2. Redistributions in binary form must reproduce the above copyright
.\"       notice, this list of conditions and the following disclaimer in the
.\"       documentation and/or other materials provided with the distribution.
.\"    3. The names of the copyright holders may not be used to endorse or
.\"       promote products derived from this software without specific
.\"       prior written permission.
.\"
.\"    THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
.\"    INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
.\"    AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
.\"    THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
.\"    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
.\"    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
.\"    OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
.\"    WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
.\"    OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
.\"    ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd July 6, 2001
.Dt GZSIG 1
.Sh NAME
.Nm gzsig
.Nd gzip signing utility
.Sh SYNOPSIS
.Nm gzsig sign
.Op Fl qv
.Op Fl f Ar secret_file
.Ar privkey
.Op Ar
.Pp
.Nm gzsig verify
.Op Fl qv
.Ar pubkey
.Op Ar
.Sh DESCRIPTION
.Nm
embeds or verifies RSA PKCS #1 v2.0 or DSA SHA1 signatures in
.Xr gzip 1
compressed files using SSH identity keys, RSA public keys, or
X509 certificates.
.Pp
The
.Ar file
operands are processed in command-line order.
If
.Ar file
is a single dash
.Pq Sq \&-
or absent,
.Nm
reads from the standard input.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Nm sign
Sign the input using the private key in
.Ar privkey .
.It Nm verify
Verify the signature using the public key in
.Ar pubkey .
.It Fl q
Enable quiet mode.
.It Fl v
Disable quiet mode.
.It Fl f Ar secret_file
Indicates that the passphrase for the key should be read from
.Ar secret_file
instead of being supplied manually.
.El
.Pp
The
.Nm
utility exits 0 on success or >0 if an error occured.
.Sh EXAMPLES
Sign
.Ar file1
and
.Ar file2
with the SSH2 identity key in
.Ar ~/.ssh/id_rsa :
.Pp
.Dl $ gzsig sign ~/.ssh/id_rsa file1 file2
.Pp
Sign
.Ar file1
with the SSH2 identity key, saving the signed file in
.Ar file2 :
.Pp
.Dl $ gzsig sign ~/.ssh/id_rsa < file1 > file2
.Pp
Verify the signature on
.Ar file1
using the SSL certificate in
.Ar /etc/ssl/server.crt :
.Pp
.Dl $ gzsig verify /etc/ssl/server.crt < file1
.Sh SEE ALSO
.Xr gzip 1 ,
.Xr ssh-keygen 1 ,
.Xr ssl 8
.Sh AUTHORS
Dug Song
.Aq dugsong@@arbor.net
.Pp
SSH2 support by
Marius Eriksen
.Aq marius@@openbsd.org
.Pp
RSA public key (in the format generated by
.Nm ssh-keygen Fl E Ns )
by
.An Thorsten Glaser Aq tg@@mirbsd.de .
.Sh BUGS
.Nm gzsig
version 1 only supports SHA-1 hashes.
The extension field format consists of a magic,
.Dq GS ,
a version identifier
.Pq 1 ,
and the hash.
A proposed version 2 would write out both the
version 1 field and a version 2 field supporting
multiple hashes at the same time, all of which are
checked, together with some kind of algorithm ID.
This would be used to prevent attacks against a single
algorithm or family of hash algorithms.
Ideally, you'd combine the version 1 SHA-1 or a
version 2 RIPEMD-160 with a version 2 TIGER or
WHIRLPOOL and a version 2 CRC (cksum, sum, sysvsum, suma, sfv).
@


1.3
log
@this can now read RSA PEM public keys (without X.509 certificate
armour), too - code from x509.c and ssh-keygen.c by me

thus, ssh-keygen (-E and -I) and gzsig now share a common set of
interconvertible formats
@
text
@d1 1
a1 1
.\" $MirOS: src/usr.bin/gzsig/gzsig.1,v 1.2 2005/07/07 23:26:29 tg Exp $
d125 17
@


1.2
log
@* fix syntax
* document -v
@
text
@d1 1
a1 1
.\" $MirOS$
d51 2
a52 1
compressed files using SSH identity keys or X509 certificates.
d120 5
@


1.1
log
@Initial revision
@
text
@d1 1
a2 1
.\" $Id: gzsig.1,v 1.6 2005/06/01 08:14:53 jmc Exp $
d38 2
a39 1
.Op Fl q
d44 1
a44 2
.Op Fl q
.Op Fl f Ar secret_file
d74 2
@


1.1.1.1
log
@Embed signatures into zlib streams.
@
text
@@
