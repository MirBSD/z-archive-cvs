head	1.9;
access;
symbols
	MIRBSD_10:1.6.0.2
	MIRBSD_10_BASE:1.6
	cvs-200707151930:1.1.1.3
	OPENBSD_4_0:1.1.1.2
	MIRBSD_9_BASE:1.4
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	cvs-200504291700:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2009.03.29.13.04.22;	author tg;	state Exp;
branches;
next	1.8;
commitid	10049CF71B654F9EF54;

1.8
date	2008.03.27.14.53.24;	author tg;	state Exp;
branches;
next	1.7;
commitid	10047EBB4DA2B6DE010;

1.7
date	2008.03.27.13.41.33;	author tg;	state Exp;
branches;
next	1.6;
commitid	10047EBA38C76760782;

1.6
date	2007.07.15.20.01.07;	author tg;	state Exp;
branches;
next	1.5;
commitid	100469A7CFC300FC2D9;

1.5
date	2006.10.03.19.22.16;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004522B87E42B315D1;

1.4
date	2006.05.26.18.48.50;	author tg;	state Exp;
branches;
next	1.3;
commitid	10044774DA3188964D4;

1.3
date	2005.04.13.16.10.27;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.13.18.32.59;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.29.34;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.29.34;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2006.10.03.19.10.02;	author tg;	state Exp;
branches;
next	1.1.1.3;
commitid	1004522B592570E1901;

1.1.1.3
date	2007.07.15.19.51.35;	author tg;	state Exp;
branches;
next	;
commitid	100469A7AC943312E80;


desc
@@


1.9
log
@• take care of dbins
• #!/bin/mksh shebang, in most places
• rcsid while here
@
text
@# $MirOS: src/usr.bin/ftp/Makefile,v 1.8 2008/03/27 14:53:24 tg Exp $
# $OpenBSD: Makefile,v 1.22 2007/06/13 13:52:26 pyr Exp $

.include <bsd.own.mk>

# Uncomment the following to provide defaults for gate-ftp operation
#CPPFLAGS+=	-DGATE_SERVER=\"ftp-gw.host\" # -DGATE_PORT=21

.if (defined(USE_SOCKS) && ${USE_SOCKS:L} == "yes")
LOCALBASE?=	/usr/mpkg
CPPFLAGS+=	-DSOCKS -I${LOCALBASE}/include
LDADD+=		-lsocks5
.endif

PROG=	ftp
SRCS=	cmds.c cmdtab.c complete.c domacro.c fetch.c ftp.c main.c ruserpass.c \
	cookie.c stringlist.c util.c

.ifndef NO_INET6
CPPFLAGS+=	-DINET6
.endif
.ifdef SMALL
CPPFLAGS+=	-DSMALL
.else
LDADD+=		-ledit -lssl -lcrypto
DPADD+=		${LIBEDIT} ${LIBSSL} ${LIBCRYPTO}
.endif

LDADD+=		-lcurses -lutil
DPADD+=		${LIBCURSES} ${LIBUTIL}

CFLAGS+=	-Wall

LDSTATIC=	-static

.include <bsd.prog.mk>
@


1.8
log
@• install these into /usr/dbin, /usr/dsbin instead
• split compressutil (zmore, zdiff, etc.) from compress
  and install them into /usr/bin as usual
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/ftp/Makefile,v 1.7 2008/03/27 13:41:33 tg Exp $
a14 2
BINDIR?=	/usr/dbin

d34 2
@


1.7
log
@• do not make these statically linked any more:
  ‣ kdump, ktrace, timedc
• temporarily remove ${STATIC} from LDSTATIC for:
  ‣ ping, ping6, portmap, traceroute, traceroute6 (/sbin)
  ‣ compress, ftp, chroot, vnconfig (system recovery)
  ‣ encrypt, pwd_mkdb (used by ramdisc installer for now)
• hardcode LDSTATIC=-static for ldconfig, as ${STATIC} can
  be set to "" by the user (for dynamically linked /bin /sbin)
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/ftp/Makefile,v 1.6 2007/07/15 20:01:07 tg Exp $
d15 2
@


1.6
log
@fastmerge and fix their bugs (tree breaker, but they don't seem to care,
it's been broken for 25 days…)
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/ftp/Makefile,v 1.5 2006/10/03 19:22:16 tg Exp $
a32 1
LDSTATIC=	${STATIC}
@


1.5
log
@merge
@
text
@d1 2
a2 2
# $MirOS: src/usr.bin/ftp/Makefile,v 1.4 2006/05/26 18:48:50 tg Exp $
# $OpenBSD: Makefile,v 1.21 2006/05/16 16:20:42 deraadt Exp $
d17 1
a17 1
	stringlist.c util.c
@


1.4
log
@simplify reachover build
@
text
@d1 2
a2 2
# $MirOS: src/usr.bin/ftp/Makefile,v 1.3 2005/04/13 16:10:27 tg Exp $
# $OpenBSD: Makefile,v 1.20 2003/11/20 23:32:26 tedu Exp $
d25 2
a26 2
LDADD+=		-ledit
DPADD+=		${LIBEDIT}
@


1.3
log
@make IPv6 optional (for portable only!)
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/ftp/Makefile,v 1.2 2005/03/13 18:32:59 tg Exp $
d4 1
a4 2
# Define SMALL to disable command line editing
#CPPFLAGS+=	-DSMALL
d10 2
a11 1
CPPFLAGS+=	-DSOCKS -I/usr/local/include
d22 10
a32 3

LDADD+=		-ledit -lcurses -lutil
DPADD+=		${LIBEDIT} ${LIBCURSES} ${LIBUTIL}
@


1.2
log
@merge src/usr.bin
@
text
@d1 1
a1 1
# $MirOS$
d19 1
d21 1
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.20 2003/11/20 23:32:26 tedu Exp $
d5 1
a5 1
#CFLAGS+=-DSMALL
d8 1
a8 1
#CFLAGS+=-DGATE_SERVER=\"ftp-gw.host\" # -DGATE_PORT=21
d11 2
a12 2
CFLAGS += -DSOCKS -I/usr/local/include
LDADD += -lsocks5
d19 2
a20 1
CPPFLAGS+= -DINET6
d22 3
a24 5
LDADD+=	-ledit -lcurses -lutil
DPADD+=	${LIBEDIT} ${LIBCURSES} ${LIBUTIL}
LDSTATIC= ${STATIC}

#COPTS+= -Wall -Wconversion -Wstrict-prototypes -Wmissing-prototypes
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import OpenBSD 4.0's ftp(1) which downgraded to HTTP/1.0
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2006/05/16 16:20:42 deraadt Exp $
d3 1
a3 1
# Define SMALL to disable command line editing and https support
d20 1
a20 1
LDADD+=	-ledit -lcurses -lutil -lssl -lcrypto
@


1.1.1.3
log
@the FTP on-the wire protocol must die, but we nevertheless could use -k
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2007/06/13 13:52:26 pyr Exp $
d16 1
a16 1
	cookie.c stringlist.c util.c
@


