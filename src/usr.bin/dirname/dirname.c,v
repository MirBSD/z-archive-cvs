head	1.3;
access;
symbols
	MIRBSD_10:1.2.0.2
	MIRBSD_10_BASE:1.2
	MIRBSD_9_BASE:1.1.1.2
	MIRBSD_8:1.1.1.2.0.2
	MIRBSD_8_BASE:1.1.1.2
	cvs-200507211800:1.1.1.2
	cvs-200504291700:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@ * @;


1.3
date	2016.01.02.21.33.11;	author tg;	state Exp;
branches;
next	1.2;
commitid	10056884200442406AA;

1.2
date	2007.07.05.23.09.39;	author tg;	state Exp;
branches;
next	1.1;
commitid	100468D7A224CDB6D5A;

1.1
date	2005.02.05.17.29.28;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.29.28;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.04.29.17.06.02;	author tg;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove #ifndef __MirBSD__ before setlocale(); related changes
@
text
@/*	$OpenBSD: dirname.c,v 1.11 2005/04/07 07:16:21 otto Exp $	*/

/*
 * Copyright (c) 1997 Todd C. Miller <Todd.Miller@@courtesan.com>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

#include <err.h>
#include <libgen.h>
#include <locale.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

__RCSID("$MirOS: src/usr.bin/dirname/dirname.c,v 1.2 2007/07/05 23:09:39 tg Exp $");

void usage(void);

int
main(int argc, char *argv[])
{
	int ch;
	char *dir;

	setlocale(LC_ALL, "");

	while ((ch = getopt(argc, argv, "")) != -1) {
		switch (ch) {
		default:
			usage();
		}
	}
	argc -= optind;
	argv += optind;

	if (argc != 1)
		usage();

	if ((dir = dirname(argv[0])) == NULL)
		err(1, "%s", argv[0]);
	puts(dir);
	exit(0);
}

extern char *__progname;

void
usage(void)
{
	(void)fprintf(stderr, "Usage: %s pathname\n", __progname);
	exit(1);
}
@


1.2
log
@• #ifdef __MirBSD__
  do not use setlocale() and nl_langinfo(), hardcode it
  #endif
• rcs ids

should greatly reduce space usage of ramdisc
@
text
@d26 1
a26 1
__RCSID("$MirOS$");
a35 1
#ifndef __MirBSD__
a36 1
#endif
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$OpenBSD: dirname.c,v 1.10 2003/07/10 00:06:50 david Exp $	*/
a18 4
#ifndef lint
static char rcsid[] = "$OpenBSD: dirname.c,v 1.10 2003/07/10 00:06:50 david Exp $";                                         
#endif /* not lint */                                                      

d24 5
d33 1
a34 1
	extern char *__progname;
d36 1
d38 1
d40 5
a44 3
	if (argc != 2) {
		(void)fprintf(stderr, "Usage: %s pathname\n", __progname);
		exit(1);
d46 5
d52 2
a53 2
	if ((dir = dirname(argv[1])) == NULL)
		err(1, NULL);
d57 9
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@improve my Frankenstein OS (*wink* you know who you are) further
sans wchar_t of course

this is the essence of reading >1200 commit messages which suck
due to not having the new format of ours...
@
text
@d1 1
a1 1
/*	$OpenBSD: dirname.c,v 1.11 2005/04/07 07:16:21 otto Exp $	*/
d20 1
a20 1
static char rcsid[] = "$OpenBSD: dirname.c,v 1.11 2005/04/07 07:16:21 otto Exp $";                                         
a27 3
#include <unistd.h>

void usage(void);
a31 1
	int ch;
d33 1
d37 3
a39 5
	while ((ch = getopt(argc, argv, "")) != -1) {
		switch (ch) {
		default:
			usage();
		}
a40 5
	argc -= optind;
	argv += optind;

	if (argc != 1)
		usage();
d42 2
a43 2
	if ((dir = dirname(argv[0])) == NULL)
		err(1, "%s", argv[0]);
a46 9

extern char *__progname;

void
usage(void)
{
	(void)fprintf(stderr, "Usage: %s pathname\n", __progname);
	exit(1);
}
@

