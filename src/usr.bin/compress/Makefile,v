head	1.11;
access;
symbols
	MIRBSD_10:1.4.0.2
	MIRBSD_10_BASE:1.4
	cvs-200704292000:1.1.1.2
	MIRBSD_9_BASE:1.2
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	cvs-200507211800:1.1.1.1
	cvs-200504291700:1.1.1.1
	cvs-200504141130:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2013.08.06.17.06.27;	author tg;	state Exp;
branches;
next	1.10;
commitid	10052012D144F7753C5;

1.10
date	2013.08.05.22.06.17;	author tg;	state Exp;
branches;
next	1.9;
commitid	100520021D16E80D23B;

1.9
date	2009.10.27.19.27.15;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004AE749AA68A87F69;

1.8
date	2009.03.29.13.04.21;	author tg;	state Exp;
branches;
next	1.7;
commitid	10049CF71B654F9EF54;

1.7
date	2008.03.27.14.53.24;	author tg;	state Exp;
branches;
next	1.6;
commitid	10047EBB4DA2B6DE010;

1.6
date	2008.03.27.13.41.32;	author tg;	state Exp;
branches;
next	1.5;
commitid	10047EBA38C76760782;

1.5
date	2008.03.19.18.34.47;	author tg;	state Exp;
branches;
next	1.4;
commitid	10047E15CD82FB39C72;

1.4
date	2007.05.08.21.52.55;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004640F14A456E3051;

1.3
date	2007.04.29.21.24.44;	author tg;	state Exp;
branches;
next	1.2;
commitid	10046350D16540EBAE7;

1.2
date	2005.03.13.18.32.49;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.29.26;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.29.26;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2007.04.29.20.07.00;	author tg;	state Exp;
branches;
next	1.1.1.3;
commitid	1004634FAED5BC54DF0;

1.1.1.3
date	2009.10.27.19.19.37;	author tg;	state Exp;
branches;
next	;
commitid	1004AE747D77105067E;


desc
@@


1.11
log
@get rid of the now useless ZLIB_CONST
@
text
@# $MirOS: src/usr.bin/compress/Makefile,v 1.10 2013/08/05 22:06:17 tg Exp $
# $OpenBSD: Makefile,v 1.21 2007/05/20 00:27:27 jsg Exp $

PROG=	compress
SRCS=	main.c zopen.c gzopen.c nullopen.c
MAN=	compress.1 gzip.1
LINKS=	${BINDIR}/compress ${BINDIR}/uncompress \
	${BINDIR}/compress ${BINDIR}/zcat \
	${BINDIR}/compress ${BINDIR}/gzip \
	${BINDIR}/compress ${BINDIR}/gunzip \
	${BINDIR}/compress ${BINDIR}/gzcat

MLINKS+=compress.1 uncompress.1 compress.1 zcat.1
MLINKS+=gzip.1 gunzip.1 gzip.1 gzcat.1

LDADD=		-lz
DPADD=		${LIBZ}

LDSTATIC=	-static

.include <bsd.prog.mk>
@


1.10
log
@-DZCONST=const → -DZLIB_CONST

XXX sys/conf/Makefile.inc does it twice?
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/compress/Makefile,v 1.9 2009/10/27 19:27:15 tg Exp $
a17 1
CPPFLAGS+=	-DZLIB_CONST
@


1.9
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/compress/Makefile,v 1.8 2009/03/29 13:04:21 tg Exp $
d18 1
a18 1
CPPFLAGS+=	-DZCONST=const
@


1.8
log
@• take care of dbins
• #!/bin/mksh shebang, in most places
• rcsid while here
@
text
@d1 2
a2 2
# $MirOS: src/usr.bin/compress/Makefile,v 1.7 2008/03/27 14:53:24 tg Exp $
# $OpenBSD: Makefile,v 1.20 2007/01/24 10:53:43 jmc Exp $
@


1.7
log
@• install these into /usr/dbin, /usr/dsbin instead
• split compressutil (zmore, zdiff, etc.) from compress
  and install them into /usr/bin as usual
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/compress/Makefile,v 1.6 2008/03/27 13:41:32 tg Exp $
a3 2
BINDIR?=/usr/dbin

d20 2
@


1.6
log
@• do not make these statically linked any more:
  ‣ kdump, ktrace, timedc
• temporarily remove ${STATIC} from LDSTATIC for:
  ‣ ping, ping6, portmap, traceroute, traceroute6 (/sbin)
  ‣ compress, ftp, chroot, vnconfig (system recovery)
  ‣ encrypt, pwd_mkdb (used by ramdisc installer for now)
• hardcode LDSTATIC=-static for ldconfig, as ${STATIC} can
  be set to "" by the user (for dynamically linked /bin /sbin)
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/compress/Makefile,v 1.5 2008/03/19 18:34:47 tg Exp $
d4 2
d8 1
a8 1
MAN=	compress.1 gzexe.1 gzip.1 zdiff.1 zforce.1 zmore.1 znew.1
d13 1
a13 2
	${BINDIR}/compress ${BINDIR}/gzcat \
	${BINDIR}/zdiff ${BINDIR}/zcmp
a16 4
MLINKS+=zdiff.1 zcmp.1

LINKS+=	${BINDIR}/zmore ${BINDIR}/zless
MLINKS+=zmore.1 zless.1
a21 6
afterinstall:
	install -c -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
	    ${.CURDIR}/zmore ${.CURDIR}/zdiff \
	    ${.CURDIR}/zforce ${.CURDIR}/gzexe ${.CURDIR}/znew \
	    ${DESTDIR}${BINDIR}

@


1.5
log
@add zless(1)
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/compress/Makefile,v 1.4 2007/05/08 21:52:55 tg Exp $
a22 1
LDSTATIC?=	${STATIC}
@


1.4
log
@ZCONST
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/compress/Makefile,v 1.3 2007/04/29 21:24:44 tg Exp $
d18 3
@


1.3
log
@merge openbsd changes; fix manpages; etc.
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/compress/Makefile,v 1.2 2005/03/13 18:32:49 tg Exp $
d21 1
@


1.2
log
@merge src/usr.bin
@
text
@d1 2
a2 2
# $MirOS$
# $OpenBSD: Makefile,v 1.19 2003/09/05 04:46:35 tedu Exp $
d6 1
a6 1
MAN=	compress.1 zmore.1 zdiff.1 zforce.1 gzexe.1 znew.1
d14 3
a16 6
MLINKS= compress.1 uncompress.1 \
	compress.1 zcat.1 \
	compress.1 gzip.1 \
	compress.1 gunzip.1 \
	compress.1 gzcat.1 \
	zdiff.1 zcmp.1
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.19 2003/09/05 04:46:35 tedu Exp $
d21 3
a23 2
LDADD=-lz
DPADD=${LIBZ}
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@import openbsd compress, ssh, perl, sendmail for minor bugfixes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2007/01/24 10:53:43 jmc Exp $
d5 1
a5 1
MAN=	compress.1 gzexe.1 gzip.1 zdiff.1 zforce.1 zmore.1 znew.1
d13 6
a18 3
MLINKS+=compress.1 uncompress.1 compress.1 zcat.1
MLINKS+=gzip.1 gunzip.1 gzip.1 gzcat.1
MLINKS+=zdiff.1 zcmp.1
@


1.1.1.3
log
@backport some of obsd fixes but not changes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2007/05/20 00:27:27 jsg Exp $
d11 1
a11 2
	${BINDIR}/zdiff ${BINDIR}/zcmp \
	${BINDIR}/zmore ${BINDIR}/zless
a15 1
MLINKS+=zmore.1 zless.1
@


