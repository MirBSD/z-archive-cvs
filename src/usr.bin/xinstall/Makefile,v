head	1.8;
access;
symbols
	MIRBSD_10:1.3.0.4
	MIRBSD_10_BASE:1.3
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2008.05.07.13.50.22;	author tg;	state Exp;
branches;
next	1.7;
commitid	1004821B3A342AA83EE;

1.7
date	2008.04.07.00.30.58;	author tg;	state Exp;
branches;
next	1.6;
commitid	10047F96B40291AF676;

1.6
date	2008.04.06.22.48.19;	author tg;	state Exp;
branches;
next	1.5;
commitid	10047F95344756F123A;

1.5
date	2008.03.27.17.42.44;	author tg;	state Exp;
branches;
next	1.4;
commitid	10047EBDC9C02851476;

1.4
date	2008.03.14.14.26.55;	author tg;	state Exp;
branches;
next	1.3;
commitid	10047DA8B463F9BCD9B;

1.3
date	2005.06.02.22.47.53;	author tg;	state Exp;
branches;
next	1.2;
commitid	5ade429f8caaf991;

1.2
date	2005.06.02.22.45.53;	author tg;	state Exp;
branches;
next	1.1;
commitid	2eae429f8c3413fd;

1.1
date	2005.02.05.17.30.18;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.30.18;	author tg;	state Exp;
branches;
next	;


desc
@@


1.8
log
@prepare for new MACHINE_OS type "GNU"
will be explained in the commit introducing it
@
text
@# $MirOS: src/usr.bin/xinstall/Makefile,v 1.7 2008/04/07 00:30:58 tg Exp $

PROG=	xinstall
SRCS=	${PROG}.c
MAN=	install.1

.include <bsd.own.mk>

.if (${MACHINE_OS} == "Linux") || (${MACHINE_OS} == "GNU")
HAVE_SETMODE?=	0
.endif
HAVE_SETMODE?=	1

.if ${HAVE_SETMODE} != 1
.PATH: ${.CURDIR}/../../bin/mksh
SRCS+=		setmode.c
CPPFLAGS+=	-DNEED_SETMODE_DECL
.endif

realinstall:
.if ${OBJECT_FMT} == "Mach-O"
	@@echo Relinking ${PROG}
	${LINK.prog} -o ${PROG}
.endif
	${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} \
	    -m ${BINMODE} ${PROG} ${DESTDIR}${BINDIR}/install

.include <bsd.prog.mk>
@


1.7
log
@LINK.prog is always set when we have PROG and SRCS/OBJS,
but later than we need to check for it, so trust is better,
since it actually works, instead of what we tried here…
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/xinstall/Makefile,v 1.6 2008/04/06 22:48:19 tg Exp $
d9 1
a9 1
.if ${MACHINE_OS} == "Linux"
@


1.6
log
@to always use UCB tools can be annoying…
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/xinstall/Makefile,v 1.5 2008/03/27 17:42:44 tg Exp $
d21 1
a21 1
.if (${OBJECT_FMT} == "Mach-O") && (${LINK.prog} != "NO")
@


1.5
log
@it's not good to name a programme “install” if we have a phony install tgt…
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/xinstall/Makefile,v 1.4 2008/03/14 14:26:55 tg Exp $
d4 1
d9 11
@


1.4
log
@simplify
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/xinstall/Makefile,v 1.3 2005/06/02 22:47:53 tg Exp $
d3 12
a14 2
PROG=	install
SRCS=	xinstall.c
@


1.3
log
@oops, forgot the rename
@
text
@d1 1
a1 1
# $MirOS: src/usr.bin/xinstall/Makefile,v 1.2 2005/06/02 22:45:53 tg Exp $
d3 2
a4 5
PROG=	xinstall
MAN=	install.1

afterinstall:
	cd ${DESTDIR}${BINDIR} && mv ${PROG} install
@


1.2
log
@optimise
@
text
@d1 1
a1 1
# $MirOS$
d6 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2000/07/19 19:29:16 mickey Exp $
a3 1
SRCS=	xinstall.c
a5 4
realinstall:
	${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} \
	    -m ${BINMODE} ${PROG} ${DESTDIR}${BINDIR}/install

@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
