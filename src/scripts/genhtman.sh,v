head	1.20;
access;
symbols
	MIRBSD_10:1.15.0.2
	MIRBSD_10_BASE:1.15
	MIRBSD_9_BASE:1.10
	MIRBSD_8:1.10.0.2
	MIRBSD_8_BASE:1.10;
locks; strict;
comment	@# @;


1.20
date	2013.08.23.23.06.40;	author tg;	state Exp;
branches;
next	1.19;
commitid	1005217EB0F5C372567;

1.19
date	2013.03.29.19.10.56;	author tg;	state Exp;
branches;
next	1.18;
commitid	1005155E7527597E152;

1.18
date	2013.03.29.18.46.11;	author tg;	state Exp;
branches;
next	1.17;
commitid	1005155E17F408A3AFA;

1.17
date	2012.05.21.21.30.47;	author tg;	state Exp;
branches;
next	1.16;
commitid	1004FBAB3EE0D44F066;

1.16
date	2011.12.03.18.21.12;	author tg;	state Exp;
branches;
next	1.15;
commitid	1004EDA68A45651E3E3;

1.15
date	2007.10.21.15.43.49;	author tg;	state Exp;
branches;
next	1.14;
commitid	100471B73B9787100A6;

1.14
date	2007.01.25.11.06.17;	author tg;	state Exp;
branches;
next	1.13;
commitid	10045B88F3C4439B7C0;

1.13
date	2007.01.25.11.04.42;	author tg;	state Exp;
branches;
next	1.12;
commitid	10045B88ED8498E9CE0;

1.12
date	2007.01.25.10.42.34;	author tg;	state Exp;
branches;
next	1.11;
commitid	10045B88990107B7A28;

1.11
date	2006.10.15.00.16.49;	author tg;	state Exp;
branches;
next	1.10;
commitid	10045317E073EC69753;

1.10
date	2005.12.22.01.12.34;	author tg;	state Exp;
branches;
next	1.9;
commitid	10043A9FD7D2436905D;

1.9
date	2005.12.17.05.46.22;	author tg;	state Exp;
branches;
next	1.8;
commitid	10043A3A3E65E20A413;

1.8
date	2005.06.05.15.22.55;	author tg;	state Exp;
branches;
next	1.7;
commitid	663a42a318e15dac;

1.7
date	2005.03.29.12.27.49;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2005.03.29.12.21.16;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2005.03.29.12.20.08;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2005.03.29.10.49.07;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.29.00.21.33;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.14.20.52.32;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.06.16.08.16;	author tg;	state Exp;
branches;
next	;


desc
@@


1.20
log
@make extra documentation available on the web, here: just lksh(1)
@
text
@#!/bin/mksh
# $MirOS: src/scripts/genhtman.sh,v 1.19 2013/03/29 19:10:56 tg Exp $
#-
# Copyright © 2005, 2007, 2011, 2012, 2013
#	Thorsten Glaser <tg@@mirbsd.org>
#
# Provided that these terms and disclaimer and all copyright notices
# are retained or reproduced in an accompanying document, permission
# is granted to deal in this work without restriction, including un‐
# limited rights to use, publicly perform, distribute, sell, modify,
# merge, give away, or sublicence.
#
# This work is provided “AS IS” and WITHOUT WARRANTY of any kind, to
# the utmost extent permitted by applicable law, neither express nor
# implied; without malicious intent or gross negligence. In no event
# may a licensor, author or contributor be held liable for indirect,
# direct, other damage, loss, or other issues arising in any way out
# of dealing in the work, even if advised of the possibility of such
# damage or existence of a defect, except proven that it results out
# of said person’s immediate fault when using the work as intended.
#-
# Build the HTML format manual pages. This is part of the MirOS con-
# tribuional and base system release process.

hm=$BSDOBJDIR/htman
hr=$BSDRELDIR/htman
arch=${MACHINE:-$(uname -m)}

. $BSDSRCDIR/scripts/roff2htm
mkdir -p $hm/{man,htm}

if [[ -e $BSDRELDIR/rel/htmi$OSrev.ngz ]]; then
	cd $BSDRELDIR/x11/usr/X11R6/man
	cpio -pdlu $hm/man <$BSDSRCDIR/distrib/lists/htman/list.x11.$arch
	cd $BSDRELDIR/base/usr/share/man
	cpio -pdlu $hm/man <$BSDSRCDIR/distrib/lists/htman/list.base.$arch

	cd $hr; tar xzf $BSDRELDIR/rel/htmi$OSrev.ngz
else
	cd $BSDRELDIR/x11/usr/X11R6/man
	find * -type f -o -type l | cpio -pdlu $hm/man
	cd $BSDRELDIR/base/usr/share/man
	find * -type f -o -type l | cpio -pdlu $hm/man
	cd $hm
	tar xzf $BSDRELDIR/rel/ports$OSrev.ngz usr/ports/Setup.sh.8
	nrcon -mdoc usr/ports/Setup.sh.8 >man/cat8/Setup.sh.0
	tar xzf $BSDRELDIR/rel/pkgutl$OSrev.ngz usr/mpkg/man/cat\?/\*.0
	cd $hm/usr/mpkg/man
	find * -type f -o -type l | cpio -pdlu $hm/man
	for doc in papers psd smm usd; do
		mkdir -p $hm/papers/$doc
		cd $hm/papers/$doc
		lndir $BSDRELDIR/base/usr/share/doc/$doc
	done
	mkdir $hm/texinfo
	cd $BSDSRCDIR
	nrcon -mdoc bin/mksh/lksh.1 >$hm/man/cat1/lksh.0
	make do-htinfopapers
	cp $BSDOBJDIR/share/doc/legal/LICENCE-BSD.0 $hm/man/cat7/BSD-Licence.0

	set_conversion_paper
	for s in papers psd smm usd; do
		typeset -u u=$s
		mkdir -p $hm/htm/man$u
		output_htaccess >$hm/htm/man$u/.htaccess
		[[ -e $hm/papers/$s/Title.txt ]] && \
		    do_conversion_verbose Title $u \
		    $hm/papers/$s/Title.txt $hm/htm/man$u/Title.htm
		[[ -e $hm/papers/$s/contents.txt ]] && \
		    do_conversion_verbose Contents $u \
		    $hm/papers/$s/contents.txt $hm/htm/man$u/Contents.htm
		for f in $hm/papers/$s/*/paper.txt; do
			t=${f#$hm/papers/$s/}
			t=${t%/paper.txt}
			do_conversion_verbose $t $u $f $hm/htm/man$u/$t.htm
		done
	done

	output_htaccess >$hm/H
	mkdir -p $hr/man{DOCS,INFO}
	cd $hm/texinfo; pax -rw *.html $hr/manINFO/
	cd $BSDRELDIR/base/usr/share/doc/html; pax -rw * $hr/manDOCS/
	cd $hr/manDOCS; find . -type f -a ! -name '*.htm' -a ! -name '*.html' \
	    -a ! -name '*.jpg' -print0 | xargs -0 rm -f --
	{
		output_header sendmail.cf DOCS
		print -n '<pre>'
		set -A convs -- -e 's/&/\&amp;/g' \
		    -e 's/</\&lt;/g' -e 's/>/\&gt;/g' \
		    -e 's#\([0-9A-z][-.,0-9A-z:]*\)(\([1-9]\))#<a href="../man\2/\1.htm">&</a>#g'
		set -A jumps
		<$BSDSRCDIR/gnu/usr.sbin/sendmail/cf/README \
		    tr '\n' '' | \
		    sed 's/+-*+|//g' | \
		    tr '' '\n' | \
		    fgrep '' | \
		    sed -e 's/^ *//g' -e 's/ *|*$//g' |&
		njumps=0
		while IFS= read -pr x; do
			jumps[j = njumps++]=$x
			i=-1
			while (( ++i < j )); do
				[[ -n ${jumps[i]} ]] || continue
				[[ $x = *"${jumps[i]}"* ]] || continue
				jumps[njumps++]=${jumps[i]}
				unset jumps[i]
			done
		done
		set -A jumps -- "${jumps[@@]}"
		njumps=${#jumps[*]}
		i=-1
		while (( ++i < njumps )); do
			set -A convs+ -- -e "s!${jumps[i]}!${i}!g"
		done
		i=-1
		while (( ++i < njumps )); do
			set -A convs+ -- -e "s!${i}!<a href=\"#${jumps[i]//[ \?,-]/_}\">${jumps[i]}</a>!g"
		done
		set -A convs+ -- \
		    -e 's#in op\.me)#in <a href="../manSMM/08.sendmailop.htm">op.me</a>)#' \
		    -e 's#doc/op/op\.\*#doc/op/op.me#' \
		    -e 's#in op\.me)#in doc/op/op.me)#' \
		    -e 's#doc/op/op\.me#<a href="../manSMM/08.sendmailop.htm">&</a>#g' \
		    -e 's#doc/op/op\..me,ps,txt.#<a href="../manSMM/08.sendmailop.htm">&</a>#g'
		<$BSDSRCDIR/gnu/usr.sbin/sendmail/cf/README \
		    sed "${convs[@@]}" | \
		    tr '\n' '' | \
		    sed -e 's-+| <a href="#\([^<]*\)</a> |+--+| <span id="\1</span> |+-g' | \
		    tr '' '\n'
		print '</pre>'
		output_footer
	} >$hr/manDOCS/sendmail.cf.htm
	mkdir -p $hr/manINFO/gpc/{demos,images}
	cd $BSDSRCDIR/gcc/gcc/p/demos; for x in *; do
		[[ -f $x ]] && cp "$x" $hr/manINFO/gpc/demos/
	done
	cd $BSDSRCDIR/gcc/gcc/p/doc/images; for x in *; do
		[[ $x = README ]] && continue
		[[ -f $x ]] && cp "$x" $hr/manINFO/gpc/images/
	done
	cd $hr/manINFO; for x in gpc{,-*}.*; do
		ed -s "$x" <<-'EOF'
			,g!src="\.\./!s!!src="gpc/!g
			,g!href="\.\./!s!!href="gpc/!g
			wq
		EOF
	done
	output_htaccess >$hr/.htaccess
	output_htaccess >$hr/manDOCS/.htaccess
	{
		output_htaccess
		print "AddType 'text/html; charset=utf-8' html"
	} >$hr/manINFO/.htaccess
fi

cd $hm/htm
set_conversion_man
convert_all $hm/man $hm/htm
find * -type f -o -type l | cpio -pdlu $hr
exit 0
@


1.19
log
@also install the gpc demos and images and fixup links to them
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.18 2013/03/29 18:46:11 tg Exp $
d57 1
@


1.18
log
@provide an HTML version (even hypertexted!) of sendmail “cf/README”
@
text
@d2 1
a2 1
# $MirOS: src/share/misc/licence.template,v 1.28 2008/11/14 15:33:44 tg Rel $
d132 15
@


1.17
log
@• ensure all texinfo-generated HTML pages are UTF-8
• iconv all those from GNU Pascal
• warn loudly in makeinfo when not
• use utf-8 as encoding in .htaccess in manINFO/
@
text
@d2 19
a20 1
# $MirOS: src/scripts/genhtman.sh,v 1.16 2011/12/03 18:21:12 tg Exp $
d84 48
@


1.16
log
@introduct set_conversion_{man,paper} to skip <h2> and <h3> generation
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.15 2007/10/21 15:43:49 tg Exp $
d70 1
a70 1
		print "AddType 'text/html; charset=iso-8859-1' html"
@


1.15
log
@simplify manpage generation; implement MD-only generation
untested (both modūs operandi)
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.14 2007/01/25 11:06:17 tg Exp $
d42 1
d75 1
@


1.14
log
@further simplification
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.13 2007/01/25 11:04:42 tg Exp $
d8 2
d12 62
d75 1
a75 16
for s in papers psd smm usd; do
	typeset -u u=$s
	mkdir -p $hm/htm/man$u
	output_htaccess >$hm/htm/man$u/.htaccess
	[[ -e $hm/papers/$s/Title.txt ]] && \
	    do_conversion_verbose Title $u \
	    $hm/papers/$s/Title.txt $hm/htm/man$u/Title.htm
	[[ -e $hm/papers/$s/contents.txt ]] && \
	    do_conversion_verbose Contents $u \
	    $hm/papers/$s/contents.txt $hm/htm/man$u/Contents.htm
	for f in $hm/papers/$s/*/paper.txt; do
		t=${f#$hm/papers/$s/}
		t=${t%/paper.txt}
		do_conversion_verbose $t $u $f $hm/htm/man$u/$t.htm
	done
done
@


1.13
log
@* new do_conversion_verbose() to simplify code
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.12 2007/01/25 10:42:34 tg Exp $
d7 2
d10 1
a10 1
convert_all $BSDOBJDIR/htman/man $BSDOBJDIR/htman/htm
d13 3
a15 3
	mkdir -p $BSDOBJDIR/htman/htm/man$u
	output_htaccess >$BSDOBJDIR/htman/htm/man$u/.htaccess
	[[ -e $BSDOBJDIR/htman/papers/$s/Title.txt ]] && \
d17 2
a18 3
	    $BSDOBJDIR/htman/papers/$s/Title.txt \
	    $BSDOBJDIR/htman/htm/man$u/Title.htm
	[[ -e $BSDOBJDIR/htman/papers/$s/contents.txt ]] && \
d20 5
a24 6
	    $BSDOBJDIR/htman/papers/$s/contents.txt \
	    $BSDOBJDIR/htman/htm/man$u/Contents.htm
	for f in $BSDOBJDIR/htman/papers/$s/*/paper.txt; do
		t="${f#$BSDOBJDIR/htman/papers/$s/}"
		t="${t%/paper.txt}"
		do_conversion_verbose $t $u $f $BSDOBJDIR/htman/htm/man$u/$t.htm
@


1.12
log
@* roff2htm, genhtman: new output_htaccess() [no functional change]
* roff2htm: use cat{1,2,...} instead of cat* and optimise
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.11 2006/10/15 00:16:49 tg Exp $
d14 3
a16 3
	    do_conversion Title $u \
	    <$BSDOBJDIR/htman/papers/$s/Title.txt \
	    >$BSDOBJDIR/htman/htm/man$u/Title.htm
d18 3
a20 3
	    do_conversion Contents $u \
	    <$BSDOBJDIR/htman/papers/$s/contents.txt \
	    >$BSDOBJDIR/htman/htm/man$u/Contents.htm
d24 1
a24 1
		do_conversion $t $u <$f >$BSDOBJDIR/htman/htm/man$u/$t.htm
@


1.11
log
@sync licences
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.10 2005/12/22 01:12:34 tg Exp $
d12 1
a12 1
	print DirectoryIndex /dev/null >$BSDOBJDIR/htman/htm/man$u/.htaccess
@


1.10
log
@* add BSD-Licence(7) to the list of generated HTML manual pages,
  for ports/Setup.sh(8)
* fix .htaccess files missing problem
@
text
@d2 1
a2 20
# $MirOS: src/scripts/genhtman.sh,v 1.9 2005/12/17 05:46:22 tg Exp $
#-
# Copyright (c) 2005
#	Thorsten "mirabile" Glaser <tg@@mirbsd.de>
#
# Licensee is hereby permitted to deal in this work without restric-
# tion, including unlimited rights to use, publicly perform, modify,
# merge, distribute, sell, give away or sublicence, provided all co-
# pyright notices above, these terms and the disclaimer are retained
# in all redistributions or reproduced in accompanying documentation
# or other materials provided with binary redistributions.
#
# Licensor offers the work "AS IS" and WITHOUT WARRANTY of any kind,
# express, or implied, to the maximum extent permitted by applicable
# law, without malicious intent or gross negligence; in no event may
# licensor, an author or contributor be held liable for any indirect
# or other damage, or direct damage except proven a consequence of a
# direct error of said person and intended use of this work, loss or
# other issues arising in any way out of its use, even if advised of
# the possibility of such damage or existence of a nontrivial bug.
@


1.9
log
@big fat licence update (I left some which are bsiegert@@'s alone though)
also, remove licence boilerplate from some .h files who don't deserve it
and remove and add some advertising clauses because I say so
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.8 2005/06/05 15:22:55 tg Exp $
d5 1
a5 1
#	Thorsten "mirabile" Glaser <tg@@66h.42h.de>
d31 9
a39 10
	[[ -e $BSDOBJDIR/htman/papers/$s/Title.txt ]] && {
		output_header Title $u
		do_convert <$BSDOBJDIR/htman/papers/$s/Title.txt
		output_footer
	} >$BSDOBJDIR/htman/htm/man$u/Title.htm
	[[ -e $BSDOBJDIR/htman/papers/$s/contents.txt ]] && {
		output_header Contents $u
		do_convert <$BSDOBJDIR/htman/papers/$s/contents.txt
		output_footer
	} >$BSDOBJDIR/htman/htm/man$u/contents.htm
d43 1
a43 5
		{
			output_header $t $u
			do_convert <$f
			output_footer
		} >$BSDOBJDIR/htman/htm/man$u/$t.htm
@


1.8
log
@mksh sweep
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.7 2005/03/29 12:27:49 tg Exp $
d14 8
a21 7
# Licensor hereby provides this work "AS IS" and WITHOUT WARRANTY of
# any kind, expressed or implied, to the maximum extent permitted by
# applicable law, but with the warranty of being written without ma-
# licious intent or gross negligence; in no event shall licensor, an
# author or contributor be held liable for any damage, direct, indi-
# rect or other, however caused, arising in any way out of the usage
# of this work, even if advised of the possibility of such damage.
@


1.7
log
@mop up
@
text
@d1 2
a2 2
#!/bin/ksh
# $MirOS: src/scripts/genhtman.sh,v 1.6 2005/03/29 12:21:16 tg Exp $
@


1.6
log
@don't use subshells
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.5 2005/03/29 12:20:08 tg Exp $
d25 1
a25 7
cd $BSDRELDIR
if ! [[ -e base && -e gcc && -e x11 ]]; then
	print Invoke with BSDRELDIR
	exit 1
fi

. /usr/src/scripts/roff2htm
@


1.5
log
@move out as much stuff as possible to the Makefile
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.4 2005/03/29 10:49:07 tg Exp $
d36 10
a45 12
	if [[ -e $BSDOBJDIR/htman/papers/$s/Title.txt ]]; then
		( output_header Title $u
		  do_convert <$BSDOBJDIR/htman/papers/$s/Title.txt
		  output_footer
		) >$BSDOBJDIR/htman/htm/man$u/Title.htm
	fi
	if [[ -e $BSDOBJDIR/htman/papers/$s/contents.txt ]]; then
		( output_header Contents $u
		  do_convert <$BSDOBJDIR/htman/papers/$s/contents.txt
		  output_footer
		) >$BSDOBJDIR/htman/htm/man$u/contents.htm
	fi
d49 5
a53 4
		( output_header $t $u
		  do_convert <$f
		  output_footer
		) >$BSDOBJDIR/htman/htm/man$u/$t.htm
@


1.4
log
@hack some of the genhtman script
more to follow
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.3 2005/03/29 00:21:33 tg Exp $
d27 1
a27 1
	print Invoke in BSDRELDIR
d32 1
a32 5
mkdir -p /usr/obj/htman/{man,htm}
for s in x11 gcc base; do
	( cd $s/usr/share/man; find * -type f | cpio -pdlu /usr/obj/htman/man )
done
convert_all /usr/obj/htman/man /usr/obj/htman/htm
d35 2
a36 3
	mkdir -p /usr/obj/htman/papers/$s /usr/obj/htman/htm/man$u
	( cd /usr/obj/htman/papers/$s; lndir base/usr/share/doc/$s; make )
	if [[ -e /usr/obj/htman/papers/$s/Title.txt ]]; then
d38 1
a38 1
		  do_convert </usr/obj/htman/papers/$s/Title.txt
d40 1
a40 1
		) >/usr/obj/htman/htm/man$u/Title.htm
d42 1
a42 1
	if [[ -e /usr/obj/htman/papers/$s/contents.txt ]]; then
d44 1
a44 1
		  do_convert </usr/obj/htman/papers/$s/contents.txt
d46 1
a46 1
		) >/usr/obj/htman/htm/man$u/contents.htm
d48 2
a49 2
	for f in /usr/obj/htman/papers/$s/*/paper.txt; do
		t="${f#/usr/obj/htman/papers/$s/}"
d54 1
a54 1
		) >/usr/obj/htman/htm/man$u/$t.htm
a56 7

$SUDO mkdir -p htman
( cd /usr/obj/htman/htm; find man* -name \*.htm | cpio -o ) \
    | ( cd htman; $SUDO cpio -id )
$SUDO chown -R 0:0 htman
$SUDO chmod -R a=rX htman
rm -rf /usr/obj/htman
@


1.3
log
@experimental build script
htman generation missing;
untested
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.2 2005/03/14 20:52:32 tg Exp $
d25 35
a59 41
print XXX not ported
exit 0

# for a in papers psd smm usd; do (cd papers; for x in $a.*; do (cd ../man$(print $a|tr '[:lower:]' '[:upper:]'); ln -s ../papers/$x ${x#$a.}); done); done                                                                       


...:
	mkdir -p ${MYDESTDIR}/htman || ${SUDO} mkdir -p ${MYDESTDIR}/htman
	cd ${.CURDIR}/etc && exec ${MAKE} htman RELEASEDIR=${MYRELDIR} \
	    DESTDIR=${MYDESTDIR}/htman BASEDESTDIR=${MYDESTDIR}/base

htman:
	@@echo "Building HTML format manual pages."
	${SHELL} -c ". ${BSDSRCDIR}/scripts/man2htm; \
	    convert_all ${BASEDESTDIR}/usr/share/man ${DESTDIR}"
	@@echo "Building ASCII to HTML format papers."
	mkdir -p ${DESTDIR}/papers
	-rm -rf ${BSDOBJDIR}/htman
.for _i in papers psd smm usd
	mkdir -p ${BSDOBJDIR}/htman/${_i}
	( cd ${BSDOBJDIR}/htman/${_i} \
	    && lndir ${BASEDESTDIR}/usr/share/doc/${_i} \
	    && ${MAKE} )
	[[ ! -e ${BSDOBJDIR}/htman/${_i}/Title.txt ]] \
	    || ${SHELL} -c ". ${BSDSRCDIR}/scripts/man2htm; \
	    output_header Title ${_i:U}; \
	    do_convert <${BSDOBJDIR}/htman/${_i}/Title.txt; \
	    output_footer" >${DESTDIR}/papers/${_i}-Title.htm
	[[ ! -e ${BSDOBJDIR}/htman/${_i}/contents.txt ]] \
	    || ${SHELL} -c ". ${BSDSRCDIR}/scripts/man2htm; \
	    output_header Contents ${_i:U}; \
	    do_convert <${BSDOBJDIR}/htman/${_i}/contents.txt; \
	    output_footer" >${DESTDIR}/papers/${_i}-contents.htm
	for f in ${BSDOBJDIR}/htman/${_i}/*/paper.txt; do \
		t=$$(print "$$f" | sed \
		    -e 's#${BSDOBJDIR}/htman/${_i}/##' \
		    -e 's#/paper.txt##'); \
		${SHELL} -c ". ${BSDSRCDIR}/scripts/man2htm; \
		    output_header $$t ${_i:U}; \
		    do_convert <$$f; \
		    output_footer" >${DESTDIR}/papers/${_i}.$$t.htm; \
d61 1
a61 15
.endfor
	@@echo "============================================================"
	@@echo "Checking files:"
	@@echo ""
	-cd ${.CURDIR}/../distrib/lists/htman && RELEASEDIR="${RELEASEDIR}" \
	    DESTDIR="${DESTDIR}" ${SHELL} ${BSDSRCDIR}/scripts/checkflist
	@@echo "============================================================"
.  ifdef WAIT_CHECKFLIST
	@@read a?'Press Return to continue...'
.  endif
	-cd ${.CURDIR}/../distrib/lists/htman && RELEASEDIR="${RELEASEDIR}" \
	    DESTDIR="${DESTDIR}" ${SUDO} ${SHELL} \
	    ${BSDSRCDIR}/scripts/maketars ${OSrev}
	-cd ${RELEASEDIR}; md5 htman${OSrev}.ngz | ${SUDO} tee -a MD5; \
	    cksum htman${OSrev}.ngz | ${SUDO} tee -a CKSUM
d63 7
@


1.2
log
@better structure, for the webserver
@
text
@d2 1
a2 1
# $MirOS: src/scripts/genhtman.sh,v 1.1 2005/03/06 16:08:16 tg Exp $
d26 1
a26 1
exit 1
@


1.1
log
@ye good olde tools
@
text
@d2 1
a2 1
# $MirOS: src/share/misc/licence.template,v 1.2 2005/03/03 19:43:30 tg Rel $
d28 3
@

