head	1.5;
access;
symbols
	cvs-200908101630:1.1.1.1
	MIRBSD_10:1.5.0.2
	MIRBSD_10_BASE:1.5
	MIRBSD_9_BASE:1.4
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2008.03.04.00.09.33;	author tg;	state Exp;
branches;
next	1.4;
commitid	10047CC921C5CA48A48;

1.4
date	2006.06.16.22.55.10;	author tg;	state Exp;
branches;
next	1.3;
commitid	100449336D54F3F56E1;

1.3
date	2005.03.15.16.26.17;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.06.19.38.53;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.27.18;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.27.18;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@according to groff_char(7) and my own hard experiences, there is more wrong
with GNU groff – add some special handling to the BSD mdoc macros for it so
that the manual pages look good in both utf8 and ps (PDF) mode; also fix in
mksh wrong display of ` (groff: ‘), ' (groff: ’), \' (groff: ´), \- (groff:
U+2212 −), the en dash (nroff doesn’t have it, use the em dash there ONLY),
and ~ and ^ (groff: placed atop and size-reduced, for use as diacritics, in
manual pages bad since these are control characters there)
→ PDF manpage now has ‘’ “” and good-looking hyphens and mini and ~ and ^
→ utf8 manpage now has ‘’ “”, good-looking hyphens, cut’n’pasteable mini
→ nroff manpage still has '' "" instead of ugly `' ``'' or even `´
→ Debian lintian won’t complain any longer
@
text
@# $MirOS: src/share/tmac/mdoc/Makefile,v 1.4 2006/06/16 22:55:10 tg Exp $
# $OpenBSD: Makefile,v 1.4 2003/04/08 01:44:59 millert Exp $
# @@(#)Makefile	8.1 (Berkeley) 6/8/93

MSRCS=	doc doc-ditroff doc-common doc-groff doc-nroff doc-syms
BINDIR=	/usr/share/tmac/mdoc
LINKS=	${BINDIR}/doc ${BINDIR}/../tmac.doc

STRIP_SED=	${.CURDIR}/../strip.sed
NOOBJ=		yes

all clean cleandir depend lint tags:

beforeinstall:
	install -c -o ${BINOWN} -g ${BINGRP} -m ${SHAREMODE} \
	    ${.CURDIR}/README ${DESTDIR}${BINDIR}/../README.mdoc
	for i in ${MSRCS}; do \
		rm -f ${DESTDIR}${BINDIR}/$$i; \
		sed -f ${STRIP_SED} <$$i >${DESTDIR}${BINDIR}/$$i; \
		chown ${BINOWN}:${BINGRP} ${DESTDIR}${BINDIR}/$$i; \
		chmod ${SHAREMODE} ${DESTDIR}${BINDIR}/$$i; \
	done

.include <bsd.prog.mk>
@


1.4
log
@make 'share' cross-buildable and installable as non-root;
don't build I18N modules if NOPIC
@
text
@d1 1
a1 1
# $MirOS: src/share/tmac/mdoc/Makefile,v 1.3 2005/03/15 16:26:17 tg Exp $
d5 1
a5 1
MSRCS=	doc doc-ditroff doc-common doc-nroff doc-syms
@


1.3
log
@remove regression test, now that all the bugs are worked around or fixed
@
text
@d1 1
a1 1
# $MirOS: src/share/tmac/mdoc/Makefile,v 1.2 2005/03/06 19:38:53 tg Exp $
d18 1
@


1.2
log
@merge src/share
@
text
@d1 1
a1 1
# $MirOS$
d15 2
a16 2
	install -c -o ${BINOWN} -g ${BINGRP} -m 444 ${.CURDIR}/README \
		${DESTDIR}${BINDIR}/../README.mdoc
a22 13
.PHONY: check check-loud check-silent

check:
	@@echo "Type 'make check-loud' or 'make check-silent' to test!"

check-loud:
	@@echo "Remember to have done 'sudo make install' first!\n"
	nroff -mandoc ${.CURDIR}/test.5

check-silent:
	@@echo "Remember to have done 'sudo make install' first!\n"
	nroff -mandoc ${.CURDIR}/test.5 >/dev/null

@


1.1
log
@Initial revision
@
text
@d1 3
a3 2
#	$OpenBSD: Makefile,v 1.4 2003/04/08 01:44:59 millert Exp $
#	@@(#)Makefile	8.1 (Berkeley) 6/8/93
d9 2
a10 2
STRIP_SED = ${.CURDIR}/../strip.sed
NOOBJ=	noobj
d15 2
d18 1
a18 1
		sed -f ${STRIP_SED} < $$i > ${DESTDIR}${BINDIR}/$$i; \
d20 1
a20 1
		chmod 444 ${DESTDIR}${BINDIR}/$$i; \
d23 13
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
