head	1.3;
access;
symbols
	MIRBSD_10:1.3.0.2
	MIRBSD_10_BASE:1.3
	MIRBSD_9_BASE:1.3
	cvs-200601311430:1.1.3.1
	netbsd:1.1.3;
locks; strict;
comment	@# @;


1.3
date	2006.01.31.16.26.48;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043DF8FD027294506;

1.2
date	2006.01.31.16.22.25;	author tg;	state Exp;
branches;
next	1.1;
commitid	10043DF8ECF7902F05D;

1.1
date	2006.01.31.14.38.24;	author tg;	state Exp;
branches
	1.1.3.1;
next	;
commitid	10043DF766A2E4773F3;

1.1.3.1
date	2006.01.31.14.38.24;	author tg;	state Exp;
branches;
next	;
commitid	10043DF766A2E4773F3;


desc
@@


1.3
log
@finish; works now, looks like on a netbsd system; CLEANFILES in sync too
@
text
@# $NetBSD: Makefile.part,v 1.3 2003/10/21 10:01:21 lukem Exp $

.for code in ${CODE}  # XXX: immediately expand ${CODE}

PARTFILE_${code}?=	${.CURDIR}/${code}/${code}.part
ALIASFILE_${code}?=	${.CURDIR}/${code}/${code}.alias
SEP_${code}?=		-
SUBDIR_${code}?=	${code}
${code}_PART!=		sed '/^\#/d;/^ *$$/d' ${PARTFILE_${code}}
CODESETS_${code}?=	${${code}_PART:C/^/${code}${SEP_${code}}/}
ESDB_${code}?=		${CODESETS_${code}:C/$/.esdb/:S/:/@@/}

FILES+=		${ESDB_${code}}
CLEANFILES+=	${ESDB_${code}}
.for i in ${ESDB_${code}}
FILESDIR_$i?=	${BINDIR}/${SUBDIR_${code}}
.endfor
_ALLFDIRS+= ${BINDIR}/${SUBDIR_${code}}


# ----------------------------------------------------------------------
# esdb.dir
#
esdb.dir.${code}: ${PARTFILE_${code}}
	${_MKTARGET_CREATE}
	echo "# ${code}" > $@@
.for i in ${${code}_PART}
	printf "%-32s%s\n" "${code}${SEP_${code}}$i" \
		"${SUBDIR_${code}}/${code}${SEP_${code}}${i:S/:/@@/}.esdb" >> $@@
.endfor
	echo >> $@@
SRC_esdb.dir+=	esdb.dir.${code}
CLEANFILES+=	esdb.dir.${code}

# ----------------------------------------------------------------------
# esdb.alias
#
.for i in ${${code}_PART:S/:/@@/}
${code}_$i_aliases!= \
	sed '/^\#/d;/^ *$$/d;/^${i:S/@@/:/}[ 	]/!d;s/^[^ 	]*[ 	]*//' \
		${ALIASFILE_${code}}
.endfor
esdb.alias.${code}: ${PARTFILE_${code}} ${ALIASFILE_${code}}
	${_MKTARGET_CREATE}
	echo "# ${code}" > $@@
.for i in ${${code}_PART:S/:/@@/}
.for j in ${${code}_$i_aliases}
	printf "%-32s%s\n" "$j" "${code}${SEP_${code}}${i:S/@@/:/}" >> $@@
.endfor
.endfor
	echo >> $@@
SRC_esdb.alias+=esdb.alias.${code}
CLEANFILES+=	esdb.alias.${code}

.endfor # code
@


1.2
log
@kludge: ;; -> ; (makes 'make obj' work)
@
text
@d18 2
@


1.1
log
@Initial revision
@
text
@d38 1
a38 1
	sed '/^\#/d;/^ *$$/d;/^${i:S/@@/:/}[ 	]/!d;;s/^[^ 	]*[ 	]*//' \
@


1.1.3.1
log
@Import I18N data files from TNF
@
text
@@
