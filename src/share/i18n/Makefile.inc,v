head	1.3;
access;
symbols
	MIRBSD_10:1.3.0.2
	MIRBSD_10_BASE:1.3
	MIRBSD_9_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2006.01.31.19.13.45;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043DFB6DF5492A8E6;

1.2
date	2006.01.31.16.26.48;	author tg;	state Exp;
branches;
next	1.1;
commitid	10043DF8FD027294506;

1.1
date	2006.01.31.15.59.28;	author tg;	state Exp;
branches;
next	;
commitid	10043DF897631FD3B71;


desc
@@


1.3
log
@commit a working, stripped-down (may be cleaning up the attic later,
but not for now) BSD-licenced libiconv replacement
@
text
@# $MirOS: src/share/i18n/Makefile.inc,v 1.2 2006/01/31 16:26:48 tg Exp $

.ifndef _MODSRC_SHARE_I18N_MAKEFILE_INC
_MODSRC_SHARE_I18N_MAKEFILE_INC=1

_MKTARGET_CREATE?=@@:

# $NetBSD: bsd.files.mk,v 1.37 2004/05/17 12:58:17 lukem Exp $

##### Basic targets
realinstall:	filesinstalldirs .WAIT filesinstall

##### Default values
FILESDIR?=	${BINDIR}
FILESOWN?=	${BINOWN}
FILESGRP?=	${BINGRP}
FILESMODE?=	${NONBINMODE}

.for F in ${FILES}
FILESOWN_${F:T}?=${FILESOWN}
FILESGRP_${F:T}?=${FILESGRP}
FILESMODE_${F:T}?=${FILESMODE}
FILESDIR_${F:T}?=${FILESDIR}
FILESNAME_${F:T}?=${FILESNAME}

_FDIR:=		${FILESDIR_${F}}			# dir override
_FNAME:=	${FILESNAME_${F}}			# name override
_F:=		${DESTDIR}${_FDIR}/${_FNAME}		# installed path

${_F}!		${F}					# install rule
	${INSTALL} ${INSTALL_COPY} \
	    -o ${FILESOWN_${F:T}} \
	    -g ${FILESGRP_${F:T}} \
	    -m ${FILESMODE_${F:T}} \
	    ${SYSPKGTAG} $> ${.TARGET}
.if !defined(BUILD) && !make(all) && !make(${F})
${_F}!		.MADE					# no build at install
.endif

filesinstall::	${_F}
.PRECIOUS: 	${_F}					# keep if install fails
.endfor

filesinstalldirs:
.if defined(_ALLFDIRS) && !empty(_ALLFDIRS)
.  for _i in ${_ALLFDIRS}
	mkdir -p ${DESTDIR}${_i}
.  endfor
.endif

.endif
@


1.2
log
@finish; works now, looks like on a netbsd system; CLEANFILES in sync too
@
text
@d1 1
a1 1
# $MirOS: src/share/i18n/Makefile.inc,v 1.1 2006/01/31 15:59:28 tg Exp $
a5 2
CPPFLAGS+=	-D'_DIAGASSERT(x)='

@


1.1
log
@commit current state of affairs
@
text
@d1 1
a1 1
# $MirOS$
d37 1
a37 1
	    ${SYSPKGTAG} ${F} ${.TARGET}
@

