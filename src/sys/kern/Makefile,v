head	1.4;
access;
symbols
	tg-beforemerge-ksrc10:1.1.1.1
	MIRBSD_10:1.4.0.2
	MIRBSD_10_BASE:1.4
	MIRBSD_9_BASE:1.4
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2006.06.17.22.12.47;	author tg;	state Exp;
branches;
next	1.3;
commitid	10044947A600871A477;

1.3
date	2005.10.18.20.32.03;	author tg;	state Exp;
branches;
next	1.2;
commitid	d3e43555bce40e5;

1.2
date	2005.03.06.21.28.00;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.28.50;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.28.50;	author tg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@remove more of these AMD64 remains
@
text
@# $MirOS: src/sys/kern/Makefile,v 1.3 2005/10/18 20:32:03 tg Exp $
# $OpenBSD: Makefile,v 1.10 2002/12/31 16:22:26 miod Exp $

# Makefile for kernel tags files, init_sysent, etc.

ARCH=	i386 sparc

all:	init_sysent.c vnode_if.c

SYSCALLSRC = makesyscalls.sh syscalls.conf syscalls.master
SYSCALLGEN = init_sysent.c syscalls.c ../sys/syscall.h ../sys/syscallargs.h
${SYSCALLGEN}: ${SYSCALLSRC}
	${SHELL} makesyscalls.sh syscalls.conf syscalls.master

VNODEIFSRC = vnode_if.sh vnode_if.src
VNODEIFGEN = vnode_if.c ../sys/vnode_if.h
${VNODEIFGEN}: ${VNODEIFSRC}
	${SHELL} vnode_if.sh vnode_if.src

# Kernel tags:
# Tags files are built in the top-level directory for each architecture,
# with a makefile listing the architecture-dependent files, etc.  The list
# of common files is in ./Make.tags.inc.  Links to the correct tags file
# are placed in each source directory.  We need to have links to tags files
# from the generic directories that are relative to the machine type, even
# via remote mounts; therefore we use symlinks to $SYSTAGS, which points at
# ${SYSDIR}/${MACHINE}/tags.

SYSTAGS=/var/db/sys_tags
SYSDIR=/sys

# Directories in which to place tags links (other than machine-dependent)
DGEN=	compat compat/common compat/openbsd compat/linux \
	conf \
	ddb \
	dev dev/ic dev/isa dev/pci dev/pcmcia dev/cardbus dev/rcons \
	dev/sun \
	isofs isofs/cd9660 \
	kern \
	lib libkern \
	miscfs miscfs/deadfs miscfs/fdesc miscfs/fifofs miscfs/kernfs \
	miscfs/nullfs miscfs/portal miscfs/procfs \
	miscfs/specfs miscfs/umapfs miscfs/union \
	msdosfs \
	net netisdn netinet netinet6 netipx \
	nfs \
	scsi \
	sys \
	ufs ufs/ffs ufs/mfs ufs/ufs

tags::
	-for i in ${ARCH}; do \
	    (cd ../arch/$$i && make ${MFLAGS} tags); done

links::
	rm -f ${SYSTAGS}
	ln -s ${SYSDIR}/arch/${MACHINE}/tags ${SYSTAGS}
	-for i in ${DGEN}; do \
	    (cd ../$$i && { rm -f tags; ln -s ${SYSTAGS} tags; }) done
	-for i in ${ARCH}; do \
	    (cd ../arch/$$i && make ${MFLAGS} SYSTAGS=${SYSTAGS} links); done

cleangen::
	-rm -f ${SYSCALLGEN} ${VNODEIFGEN}
@


1.3
log
@add "cleangen" target to remove generated files
@
text
@d1 1
a1 1
# $MirOS: src/sys/kern/Makefile,v 1.2 2005/03/06 21:28:00 tg Exp $
d6 1
a6 1
ARCH=	amd64 i386 macppc sparc
@


1.2
log
@* merge src/sys/
  (at least the better part of it)
* revert IPv6 networking to OpenBSD, since
  I didn't get IPV4_MAPPED addresses working :(
@
text
@d1 1
a1 1
# $MirOS$
d11 2
a12 1
init_sysent.c syscalls.c ../sys/syscall.h ../sys/syscallargs.h: ${SYSCALLSRC}
d16 2
a17 1
vnode_if.c ../sys/vnode_if.h: ${VNODEIFSRC}
d62 3
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.10 2002/12/31 16:22:26 miod Exp $
d6 1
a6 2
ARCH=	alpha hp300 hppa i386 m68k mac68k mvme68k mvme88k \
	mvmeppc powerpc sparc sparc64 vax
d12 1
a12 1
	sh makesyscalls.sh syscalls.conf syscalls.master
d16 1
a16 1
	sh vnode_if.sh vnode_if.src
d31 1
a31 3
DGEN=	adosfs \
	compat compat/common compat/freebsd compat/hpux compat/ibcs2 \
	compat/linux compat/osf1 compat/sunos compat/svr4 compat/ultrix \
d34 2
a35 3
	dev dev/eisa dev/ic dev/isa dev/pci dev/pcmcia dev/cardbus dev/rcons \
	dev/sun dev/tc \
	gnu \
d43 1
a43 1
	net netccitt netinet netiso netns \
d47 1
a47 2
	ufs ufs/ffs ufs/lfs ufs/mfs ufs/ufs \
	vm
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
