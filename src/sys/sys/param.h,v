head	1.106;
access;
symbols
	tg-beforemerge-ksrc10:1.1.1.1
	MIRBSD_10:1.74.0.4
	MIRBSD_10_BASE:1.74
	tg-release_reconsider:1.68
	MIRBSD_9_BASE:1.44
	MIRBSD_8:1.30.0.2
	MIRBSD_8_BASE:1.30
	openbsd:1.1.1;
locks; strict;
comment	@ * @;


1.106
date	2018.04.28.06.40.03;	author tg;	state Exp;
branches;
next	1.105;
commitid	1005AE4174433053689;

1.105
date	2017.08.07.20.18.35;	author tg;	state Exp;
branches;
next	1.104;
commitid	1005988C69344442E37;

1.104
date	2017.04.02.22.33.30;	author tg;	state Exp;
branches;
next	1.103;
commitid	10058E17C4B6583E8B5;

1.103
date	2015.10.24.19.48.18;	author tg;	state Exp;
branches;
next	1.102;
commitid	100562BE0930D590F1D;

1.102
date	2015.07.19.01.04.21;	author tg;	state Exp;
branches;
next	1.101;
commitid	10055AAF66673FA175E;

1.101
date	2015.02.11.21.42.23;	author tg;	state Exp;
branches;
next	1.100;
commitid	10054DBCCD452D127A7;

1.100
date	2015.02.09.21.50.45;	author tg;	state Exp;
branches;
next	1.99;
commitid	10054D92BCB3E6955C8;

1.99
date	2015.02.09.21.46.03;	author tg;	state Exp;
branches;
next	1.98;
commitid	10054D92AB15D0B8652;

1.98
date	2014.02.20.01.01.00;	author tg;	state Exp;
branches;
next	1.97;
commitid	100530553E421091CD1;

1.97
date	2013.08.06.20.34.01;	author tg;	state Exp;
branches;
next	1.96;
commitid	10052015DD07D9B7A5C;

1.96
date	2013.05.31.23.27.51;	author tg;	state Exp;
branches;
next	1.95;
commitid	10051A931CB73794C1D;

1.95
date	2012.12.31.21.08.13;	author tg;	state Exp;
branches;
next	1.94;
commitid	10050E1FED458946E2C;

1.94
date	2012.09.02.11.02.18;	author tg;	state Exp;
branches;
next	1.93;
commitid	10050433CBA6822A3F3;

1.93
date	2012.01.14.22.28.44;	author tg;	state Exp;
branches;
next	1.92;
commitid	1004F1201B2586590CB;

1.92
date	2011.07.17.22.34.27;	author tg;	state Exp;
branches;
next	1.91;
commitid	1004E23638A312ABEDA;

1.91
date	2011.01.15.21.52.45;	author tg;	state Exp;
branches;
next	1.90;
commitid	1004D32173B08BB4E36;

1.90
date	2010.09.20.00.07.26;	author tg;	state Exp;
branches;
next	1.89;
commitid	1004C96A5A724DDF8E1;

1.89
date	2010.08.14.19.49.05;	author tg;	state Exp;
branches;
next	1.88;
commitid	1004C66F34849DCDB80;

1.88
date	2010.01.10.19.16.46;	author tg;	state Exp;
branches;
next	1.87;
commitid	1004B4A27AF50BE9BD3;

1.87
date	2009.12.13.00.32.15;	author tg;	state Exp;
branches;
next	1.86;
commitid	1004B2436206D706B48;

1.86
date	2009.08.10.05.16.54;	author tg;	state Exp;
branches;
next	1.85;
commitid	1004A7FAD5D0AD545CD;

1.85
date	2009.06.29.19.19.07;	author tg;	state Exp;
branches;
next	1.84;
commitid	1004A4913C16EB27F4B;

1.84
date	2009.06.07.13.20.18;	author tg;	state Exp;
branches;
next	1.83;
commitid	1004A2BBEAA4F76F1E3;

1.83
date	2009.04.05.13.38.45;	author tg;	state Exp;
branches;
next	1.82;
commitid	10049D8B47C087F1BC8;

1.82
date	2009.01.29.18.11.02;	author tg;	state Exp;
branches;
next	1.81;
commitid	1004981F14E69A8DA6E;

1.81
date	2009.01.02.05.16.32;	author tg;	state Exp;
branches;
next	1.80;
commitid	100495DA33F62ABDC14;

1.80
date	2008.11.30.11.22.39;	author tg;	state Exp;
branches;
next	1.79;
commitid	1004932777B60FD9CFC;

1.79
date	2008.11.10.21.10.21;	author tg;	state Exp;
branches;
next	1.78;
commitid	1004918A32F7C57CF28;

1.78
date	2008.11.08.23.04.25;	author tg;	state Exp;
branches;
next	1.77;
commitid	10049161AB22DF5DFC5;

1.77
date	2008.10.12.17.40.40;	author tg;	state Exp;
branches;
next	1.76;
commitid	10048F236AE38EC76E7;

1.76
date	2008.08.02.00.46.10;	author tg;	state Exp;
branches;
next	1.75;
commitid	1004893AE670C97A071;

1.75
date	2008.03.10.15.40.56;	author tg;	state Exp;
branches;
next	1.74;
commitid	10047D556921423B9B5;

1.74
date	2007.08.01.22.50.13;	author tg;	state Exp;
branches
	1.74.4.1;
next	1.73;
commitid	10046B10E2C2D15F9CC;

1.73
date	2007.07.07.22.53.23;	author tg;	state Exp;
branches;
next	1.72;

1.72
date	2007.06.30.03.03.44;	author tg;	state Exp;
branches;
next	1.71;
commitid	1004685C82627EC801C;

1.71
date	2007.06.21.14.40.19;	author tg;	state Exp;
branches;
next	1.70;
commitid	100467A8D2C4D7EEFFE;

1.70
date	2007.06.16.15.41.49;	author tg;	state Exp;
branches;
next	1.69;
commitid	100467404D10F2EE204;

1.69
date	2007.06.04.09.05.39;	author tg;	state Exp;
branches;
next	1.68;
commitid	1004663D5F31FA91204;

1.68
date	2007.05.26.23.09.50;	author tg;	state Exp;
branches;
next	1.67;
commitid	1004658BE4A1272605F;

1.67
date	2007.05.16.22.03.54;	author tg;	state Exp;
branches;
next	1.66;
commitid	100464B7E545A2B0094;

1.66
date	2007.05.07.14.07.41;	author tg;	state Exp;
branches;
next	1.65;
commitid	100463F329F71EBE9B2;

1.65
date	2007.04.17.22.13.53;	author tg;	state Exp;
branches;
next	1.64;
commitid	100462546B84113BC9D;

1.64
date	2007.04.04.21.45.38;	author tg;	state Exp;
branches;
next	1.63;
commitid	10046141C903A248AA9;

1.63
date	2007.03.18.02.19.53;	author tg;	state Exp;
branches;
next	1.62;
commitid	10045FCA1C84D39F03D;

1.62
date	2007.03.08.09.01.57;	author tg;	state Exp;
branches;
next	1.61;
commitid	10045EFD11B3F2287E1;

1.61
date	2007.02.26.02.37.50;	author tg;	state Exp;
branches;
next	1.60;
commitid	10045E2480645CA4095;

1.60
date	2007.02.17.03.07.15;	author tg;	state Exp;
branches;
next	1.59;
commitid	10045D671797452A315;

1.59
date	2007.02.07.18.10.54;	author tg;	state Exp;
branches;
next	1.58;
commitid	10045CA1636076AEB1C;

1.58
date	2007.02.07.02.49.18;	author tg;	state Exp;
branches;
next	1.57;
commitid	10045C93DD444B71B4F;

1.57
date	2007.02.07.01.37.50;	author tg;	state Exp;
branches;
next	1.56;
commitid	10045C92D5521A28D65;

1.56
date	2007.01.25.15.52.27;	author tg;	state Exp;
branches;
next	1.55;
commitid	10045B8D24749EA7142;

1.55
date	2006.12.11.20.48.35;	author tg;	state Exp;
branches;
next	1.54;
commitid	100457DC42E7BEFE7A2;

1.54
date	2006.11.17.03.20.29;	author tg;	state Exp;
branches;
next	1.53;
commitid	100455D2A9325B8F77C;

1.53
date	2006.11.09.02.43.45;	author tg;	state Exp;
branches;
next	1.52;
commitid	100455295F8672F03E0;

1.52
date	2006.11.03.18.11.58;	author tg;	state Exp;
branches;
next	1.51;
commitid	100454B868055826018;

1.51
date	2006.10.27.15.53.03;	author tg;	state Exp;
branches;
next	1.50;
commitid	10045422B51340FA673;

1.50
date	2006.10.17.23.16.56;	author tg;	state Exp;
branches;
next	1.49;
commitid	1004535647F31E3C9E5;

1.49
date	2006.10.07.03.30.53;	author tg;	state Exp;
branches;
next	1.48;
commitid	10045271F5E7E1A8D13;

1.48
date	2006.10.02.23.24.15;	author tg;	state Exp;
branches;
next	1.47;
commitid	10045219FB4683B88EC;

1.47
date	2006.09.29.22.01.23;	author tg;	state Exp;
branches;
next	1.46;
commitid	100451D97C43276261F;

1.46
date	2006.09.24.17.48.33;	author tg;	state Exp;
branches;
next	1.45;
commitid	1004516C4FA585E8AEF;

1.45
date	2006.06.27.14.15.30;	author tg;	state Exp;
branches;
next	1.44;
commitid	10044A13D8E1CD39631;

1.44
date	2006.06.21.21.23.59;	author tg;	state Exp;
branches;
next	1.43;
commitid	1004499B8FF57A08170;

1.43
date	2006.06.17.17.12.33;	author tg;	state Exp;
branches;
next	1.42;
commitid	100449437FA37D49D71;

1.42
date	2006.06.15.18.11.37;	author tg;	state Exp;
branches;
next	1.41;
commitid	1004491A2D56D07D882;

1.41
date	2006.06.11.02.33.58;	author tg;	state Exp;
branches;
next	1.40;
commitid	100448B811E25A010FD;

1.40
date	2006.06.09.00.31.37;	author tg;	state Exp;
branches;
next	1.39;
commitid	1004488C173518BB89D;

1.39
date	2006.06.01.23.00.42;	author tg;	state Exp;
branches;
next	1.38;
commitid	100447F717560592A14;

1.38
date	2006.05.25.13.00.31;	author tg;	state Exp;
branches;
next	1.37;
commitid	1004475AA6108F8B7AC;

1.37
date	2006.04.06.11.10.50;	author tg;	state Exp;
branches;
next	1.36;
commitid	1004434F7486C593217;

1.36
date	2006.03.27.19.33.45;	author tg;	state Exp;
branches;
next	1.35;
commitid	10044283E2F398B099E;

1.35
date	2006.02.22.00.49.08;	author tg;	state Exp;
branches;
next	1.34;
commitid	10043FBB51A1C316D30;

1.34
date	2006.02.01.14.44.58;	author tg;	state Exp;
branches;
next	1.33;
commitid	10043E0C97C535FB4EB;

1.33
date	2006.01.18.10.21.37;	author tg;	state Exp;
branches;
next	1.32;
commitid	10043CE16C030E424E4;

1.32
date	2006.01.13.03.50.44;	author tg;	state Exp;
branches;
next	1.31;
commitid	10043C723A458BC9FB5;

1.31
date	2005.12.23.19.59.46;	author tg;	state Exp;
branches;
next	1.30;
commitid	10043AC573F41AFA44F;

1.30
date	2005.12.20.01.06.31;	author tg;	state Exp;
branches
	1.30.2.1;
next	1.29;
commitid	10043A7590A11651175;

1.29
date	2005.12.19.23.14.48;	author tg;	state Exp;
branches;
next	1.28;
commitid	10043A73EF32AC23069;

1.28
date	2005.12.17.05.57.55;	author tg;	state Exp;
branches;
next	1.27;
commitid	10043A3A8D2077BDEA8;

1.27
date	2005.12.04.13.22.55;	author tg;	state Exp;
branches;
next	1.26;
commitid	5c504392edbcad6a;

1.26
date	2005.11.21.19.51.17;	author tg;	state Exp;
branches;
next	1.25;
commitid	3729438225477ea0;

1.25
date	2005.11.21.19.31.55;	author tg;	state Exp;
branches;
next	1.24;
commitid	60294382208fe0fe;

1.24
date	2005.10.21.10.51.17;	author tg;	state Exp;
branches;
next	1.23;
commitid	58344358c8011f43;

1.23
date	2005.09.20.18.52.51;	author tg;	state Exp;
branches;
next	1.22;
commitid	615043305a8af783;

1.22
date	2005.08.26.20.55.52;	author tg;	state Exp;
branches;
next	1.21;
commitid	65f3430f81e61ad8;

1.21
date	2005.07.21.21.52.25;	author tg;	state Exp;
branches;
next	1.20;
commitid	181c42e0191f67ef;

1.20
date	2005.07.07.18.42.01;	author tg;	state Exp;
branches;
next	1.19;
commitid	53c042cd778da2cb;

1.19
date	2005.07.04.03.36.38;	author tg;	state Exp;
branches;
next	1.18;
commitid	27eb42c8ae53acb0;

1.18
date	2005.07.03.20.13.49;	author tg;	state Exp;
branches;
next	1.17;
commitid	47c142c8470bb45a;

1.17
date	2005.06.14.13.47.38;	author tg;	state Exp;
branches;
next	1.16;
commitid	7c9942aedfb6942d;

1.16
date	2005.06.07.15.58.08;	author tg;	state Exp;
branches;
next	1.15;
commitid	524a42a5c4051647;

1.15
date	2005.05.26.20.27.37;	author tg;	state Exp;
branches;
next	1.14;
commitid	155f429631266953;

1.14
date	2005.05.23.10.26.24;	author tg;	state Exp;
branches;
next	1.13;
commitid	31434291afe5d5d7;

1.13
date	2005.05.14.18.02.10;	author tg;	state Exp;
branches;
next	1.12;
commitid	53c842863d35cb9b;

1.12
date	2005.05.06.00.17.44;	author tg;	state Exp;
branches;
next	1.11;
commitid	11d3427ab777584c;

1.11
date	2005.05.04.18.32.45;	author tg;	state Exp;
branches;
next	1.10;
commitid	3acd42791563318d;

1.10
date	2005.05.01.21.54.17;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2005.04.29.15.13.54;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2005.04.29.00.22.36;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2005.04.26.04.23.12;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2005.04.19.20.13.47;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2005.04.14.19.33.03;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2005.03.25.22.43.32;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.06.22.30.42;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.06.21.28.34;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.29.17;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.74.4.1
date	2008.03.12.19.11.18;	author tg;	state Exp;
branches;
next	;
commitid	10047D82AEC01A2B6BA;

1.30.2.1
date	2005.12.23.22.50.36;	author tg;	state Exp;
branches;
next	;
commitid	10043AC7F366BCB58B1;

1.1.1.1
date	2005.02.05.17.29.17;	author tg;	state Exp;
branches;
next	;


desc
@@


1.106
log
@bump version after the recent changes, except do it early
(a few are yet to come) because propagating on sparc takes ages
@
text
@/**	$MirOS: src/sys/sys/param.h,v 1.105 2017/08/07 20:18:35 tg Exp $ */
/*	$OpenBSD: param.h,v 1.54 2004/02/27 18:06:55 deraadt Exp $	*/
/*	$NetBSD: param.h,v 1.23 1996/03/17 01:02:29 thorpej Exp $	*/

/*-
 * Copyright (c) 2003, 2004, 2005, 2006, 2009, 2011, 2012, 2013, 2014
 *	The MirOS Project.  All rights reserved.
 * Copyright (c) 2002, 2003, 2007, 2008, 2015, 2017, 2018
 *	mirabilos <m@@mirbsd.org>
 * Copyright (c) 1982, 1986, 1989, 1993
 *	The Regents of the University of California.  All rights reserved.
 * (c) UNIX System Laboratories, Inc.
 * All or some portions of this file are derived from material licensed
 * to the University of California by American Telephone and Telegraph
 * Co. or Unix System Laboratories, Inc. and are reproduced herein with
 * the permission of UNIX System Laboratories, Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)param.h	8.2 (Berkeley) 1/21/94
 */

#ifndef	_SYS_PARAM_H
#define	_SYS_PARAM_H

#define	BSD	199306		/* System version (year & month). */
#define BSD4_3	1
#define BSD4_4	1
#define	MirBSD	0x0AB9		/* minor 10-7F=prerelease; 80=release
				 * minor 81-9F=stable; A0-FF=unlocked
				 */
#ifndef _LOCORE
#include <sys/types.h>
#include <sys/simplelock.h>
#endif

#ifndef NULL
#ifdef __GNUG__
#define	NULL		__null
#elif defined(lint) || defined(__cplusplus)
#define	NULL		0UL
#else
/*
 * unfortunately, this does not save our portable projects
 * from needing to work with a NULL defined as just "0" :(
 */
#define	NULL		((void *)((__PTRDIFF_TYPE__)0UL))
#endif
#endif

/*
 * Machine-independent constants (some used in following include files).
 * Redefined constants are from POSIX 1003.1 limits file.
 *
 * MAXCOMLEN should be >= sizeof(ac_comm) (see <acct.h>)
 * MAXLOGNAME should be >= UT_NAMESIZE (see <utmp.h>)
 */
#include <sys/syslimits.h>

#define	MAXCOMLEN	16		/* max command name remembered */
#define	MAXINTERP	64		/* max interpreter file name length */
#define	MAXLOGNAME	32		/* max login name length */
#define	MAXUPRC		CHILD_MAX	/* max simultaneous processes */
#define	NCARGS		ARG_MAX		/* max bytes for an exec function */
#define	NGROUPS		NGROUPS_MAX	/* max number groups */
#define	NOFILE		OPEN_MAX	/* max open files per process (soft) */
#define	NOFILE_MAX	1024		/* max open files per process (hard) */
#define	NOGROUP		65535		/* marker for empty group set member */
#define MAXHOSTNAMELEN	256		/* max hostname size */

/* More types and definitions used throughout the kernel. */
#ifdef _KERNEL
#include <sys/cdefs.h>
#include <sys/errno.h>
#include <sys/time.h>
#include <sys/resource.h>
#include <sys/ucred.h>
#include <sys/uio.h>
#endif

/* Signals. */
#include <sys/signal.h>

/* Machine type dependent parameters. */
#include <sys/limits.h>
#include <machine/param.h>

/*
 * Priorities.  Note that with 32 run queues, differences less than 4 are
 * insignificant.
 */
#define	PSWP	0
#define	PVM	4
#define	PINOD	8
#define	PRIBIO	16
#define	PVFS	20
#define	PZERO	22		/* No longer magic, shouldn't be here.  XXX */
#define	PSOCK	24
#define	PWAIT	32
#define	PLOCK	36
#define	PPAUSE	40
#define	PUSER	50
#define	MAXPRI	127		/* Priorities range from 0 through MAXPRI. */

#define	PRIMASK		0x0ff
#define	PCATCH		0x100	/* OR'd with pri for tsleep to check signals */
#define PNORELOCK	0x200	/* OR'd with pri for ltsleep to not relock
				   the interlock */

#define	NBPW	sizeof(int)	/* number of bytes per word (integer) */

#define	CMASK	022		/* default file mask: S_IWGRP|S_IWOTH */
#define	NODEV	(dev_t)(-1)	/* non-existent device */
#define NETDEV	(dev_t)(-2)	/* network device (for nfs swap) */

#define	CBLOCK	64		/* Clist block size, must be a power of 2. */
#define CBQSIZE	(CBLOCK/NBBY)	/* Quote bytes/cblock - can do better. */
				/* Data chars/clist. */
#define	CBSIZE	(CBLOCK - sizeof(struct cblock *) - CBQSIZE)
#define	CROUND	(CBLOCK - 1)	/* Clist rounding. */

/*
 * Filesystem parameters and macros.
 *
 * The filesystem is made out of blocks of at most MAXBSIZE units, with
 * smaller units (fragments) only in the last direct block.  MAXBSIZE
 * primarily determines the size of buffers in the buffer pool.  It may be
 * made larger without any effect on existing filesystems; however making
 * it smaller makes some filesystems unmountable.
 */
#ifndef MAXBSIZE	/* XXX temp until sun3 DMA chaining */
#define	MAXBSIZE	MAXPHYS
#endif
#define MAXFRAG 	8

/*
 * MAXPATHLEN defines the longest permissable path length after expanding
 * symbolic links. It is used to allocate a temporary buffer from the buffer
 * pool in which to do the name expansion, hence should be a power of two,
 * and must be less than or equal to MAXBSIZE.  MAXSYMLINKS defines the
 * maximum number of symbolic links that may be expanded in a path name.
 * It should be set high enough to allow all legitimate uses, but halt
 * infinite loops reasonably quickly.
 */
#define	MAXPATHLEN	PATH_MAX
#define MAXSYMLINKS	32

/* Macros to set/clear/test flags. */
#ifdef _KERNEL
#define SET(t, f)	((t) |= (f))
#define CLR(t, f)	((t) &= ~(f))
#define ISSET(t, f)	((t) & (f))
#endif

/* Bit map related macros. */
#define	setbit(a,i)	((a)[(i)/NBBY] |= 1<<((i)%NBBY))
#define	clrbit(a,i)	((a)[(i)/NBBY] &= ~(1<<((i)%NBBY)))
#define	isset(a,i)	((a)[(i)/NBBY] & (1<<((i)%NBBY)))
#define	isclr(a,i)	(((a)[(i)/NBBY] & (1<<((i)%NBBY))) == 0)

/* Macros for counting, rounding and bounding */
#ifndef howmany
#define	howmany(x, y)	(((x)+((y)-1))/(y))
#endif
#define	roundup(x,y)	(howmany((x), (y)) * (y))
#define	powerof2(x)	((((x)-1)&(x))==0)
#define	MIN(a,b)	(((a)<(b))?(a):(b))
#define	MAX(a,b)	(((a)>(b))?(a):(b))

#define	__BOUNDINT(minv,maxv,v)	\
	( ((v) < (minv)) ? (minv) : ( ((v) > (maxv)) ? (maxv) : (v) ) )
#define __BOUNDINT0(maxv,x)	__BOUNDINT(0,(maxv),(x))
#define __BOUNDINTU(maxv,x)	MIN((maxv),(x))

/* Macros for calculating the offset of a field */
#if !defined(offsetof) && (defined(_KERNEL) || defined(_STANDALONE))
#define offsetof(s, e)	((size_t)&((s *)0)->e)
#endif

/*
 * Constants for setting the parameters of the kernel memory allocator.
 *
 * 2 ** MINBUCKET is the smallest unit of memory that will be
 * allocated. It must be at least large enough to hold a pointer.
 *
 * Units of memory less or equal to MAXALLOCSAVE will permanently
 * allocate physical memory; requests for these size pieces of
 * memory are quite fast. Allocations greater than MAXALLOCSAVE must
 * always allocate and free physical memory; requests for these
 * size allocations should be done infrequently as they will be slow.
 *
 * Constraints: PAGE_SIZE <= MAXALLOCSAVE <= 2 ** (MINBUCKET + 14), and
 * MAXALLOCSIZE must be a power of two.
 */
#define MINBUCKET	4		/* 4 => min allocation of 16 bytes */
#define MAXALLOCSAVE	(2 * PAGE_SIZE)

/*
 * Scale factor for scaled integers used to count %cpu time and load avgs.
 *
 * The number of CPU 'tick's that map to a unique '%age' can be expressed
 * by the formula (1 / (2 ^ (FSHIFT - 11))).  The maximum load average that
 * can be calculated (assuming 32 bits) can be closely approximated using
 * the formula (2 ^ (2 * (16 - FSHIFT))) for (FSHIFT < 15).
 *
 * For the scheduler to maintain a 1:1 mapping of CPU 'tick' to '%age',
 * FSHIFT must be at least 11; this gives us a maximum load avg of ~1024.
 */
#define	FSHIFT	11		/* bits to right of fixed binary point */
#define FSCALE	(1<<FSHIFT)

/*
 * rfork() options.
 *
 * XXX currently, operations without RFPROC set are not supported.
 */
#define RFNAMEG		(1<<0)	/* UNIMPL new plan9 'name space' */
#define RFENVG		(1<<1)	/* UNIMPL copy plan9 'env space' */
#define RFFDG		(1<<2)	/* copy fd table */
#define RFNOTEG		(1<<3)	/* UNIMPL create new plan9 'note group' */
#define RFPROC		(1<<4)	/* change child (else changes curproc) */
#define RFMEM		(1<<5)	/* share 'address space' */
#define RFNOWAIT	(1<<6)	/* parent need not wait() on child */
#define RFCNAMEG	(1<<10) /* UNIMPL zero plan9 'name space' */
#define RFCENVG		(1<<11) /* UNIMPL zero plan9 'env space' */
#define RFCFDG		(1<<12)	/* zero fd table */

#endif /* ndef _SYS_PARAM_H */
@


1.105
log
@filesystem
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.104 2017/04/02 22:33:30 tg Exp $ */
d8 1
a8 1
 * Copyright (c) 2002, 2003, 2007, 2008, 2015, 2017
d51 1
a51 1
#define	MirBSD	0x0AB8		/* minor 10-7F=prerelease; 80=release
@


1.104
log
@the next snapshot shall bear a bumped minor
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.102 2015/07/19 01:04:21 tg Exp $ */
d145 1
a145 1
 * File system parameters and macros.
d147 1
a147 1
 * The file system is made out of blocks of at most MAXBSIZE units, with
d150 2
a151 2
 * made larger without any effect on existing file systems; however making
 * it smaller makes some file systems unmountable.
@


1.103
log
@bump after recent <*.mk> changes and before upcoming imports
@
text
@d8 1
a8 1
 * Copyright (c) 2002, 2003, 2007, 2008, 2015
d51 1
a51 1
#define	MirBSD	0x0AB7		/* minor 10-7F=prerelease; 80=release
d65 4
@


1.102
log
@bump; post-SSL-SHA; pre SSL-RNG, sendmail update, Unicode 8, mksh fixes, DH params, honour cipher order
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.101 2015/02/11 21:42:23 tg Exp $ */
d9 1
a9 1
 *	mirabilos <tg@@mirbsd.org>
d51 1
a51 1
#define	MirBSD	0x0AB6		/* minor 10-7F=prerelease; 80=release
@


1.101
log
@nice workaround for C++ brokenness: 0L taken from musl via ycombinator, but it must be unsigned of course, so 0UL
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.100 2015/02/09 21:50:45 tg Exp $ */
d9 1
a9 1
 *	Thorsten “mirabilos” Glaser <tg@@mirbsd.org>
d51 1
a51 1
#define	MirBSD	0x0AB5		/* minor 10-7F=prerelease; 80=release
@


1.100
log
@harmonise tabs inside the files
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.99 2015/02/09 21:46:03 tg Exp $ */
d63 1
a63 1
#define	NULL		0
@


1.99
log
@fix C++ (except G++) definition of NULL; revalidate C/POSIX one
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.98 2014/02/20 01:01:00 tg Exp $ */
d61 1
a61 1
#define	NULL			__null
d63 1
a63 1
#define	NULL			0
d65 1
a65 1
#define	NULL			((void *)((__PTRDIFF_TYPE__)0UL))
@


1.98
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.97 2013/08/06 20:34:01 tg Exp $ */
d8 1
a8 1
 * Copyright (c) 2002, 2003, 2007, 2008
d61 3
a63 3
#define	NULL		__null
#elif defined(lint)
#define	NULL		0
d65 1
a65 1
#define	NULL		((void *)((__PTRDIFF_TYPE__)0UL))
@


1.97
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.96 2013/05/31 23:27:51 tg Exp $ */
d6 1
a6 1
 * Copyright (c) 2003, 2004, 2005, 2006, 2009, 2011, 2012, 2013
d51 1
a51 1
#define	MirBSD	0x0AB4		/* minor 10-7F=prerelease; 80=release
@


1.96
log
@Replace wcwidth code by mine based on Unicode 6.2.0
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.95 2012/12/31 21:08:13 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AB3		/* minor 10-7F=prerelease; 80=release
@


1.95
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.94 2012/09/02 11:02:18 tg Exp $ */
d6 1
a6 1
 * Copyright (c) 2003, 2004, 2005, 2006, 2009, 2011, 2012
d51 1
a51 1
#define	MirBSD	0x0AB2		/* minor 10-7F=prerelease; 80=release
@


1.94
log
@* for the "foo.sh -> foo" implicit rule, chmod +x $@@ in the object dir
* bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.93 2012/01/14 22:28:44 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AB1		/* minor 10-7F=prerelease; 80=release
@


1.93
log
@bump; the current state warrants one (libm, bootloader fix), and when we have fixed everything “needed” we can just bump again (pd, bump ssh/lynx/cvs, …)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.92 2011/07/17 22:34:27 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AB0		/* minor 10-7F=prerelease; 80=release
@


1.92
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.91 2011/01/15 21:52:45 tg Exp $ */
d6 1
a6 1
 * Copyright (c) 2003, 2004, 2005, 2006, 2009, 2011
d51 1
a51 1
#define	MirBSD	0x0AAF		/* minor 10-7F=prerelease; 80=release
@


1.91
log
@Introduce /etc/ssh/root:config and /etc/ssh/root:known_hosts
and /etc/ssh/root:authorised_keys for the superuser if his
HOME directory is unset, empty or, not normalised, "/" (root).
十̲CVS: ----------------------------------------------------------------------
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.90 2010/09/20 00:07:26 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AAE		/* minor 10-7F=prerelease; 80=release
@


1.90
log
@fallout from the build, and bump patchlevel

todo: check locking twice (user+kernel) and convert all userspace to
the new pushb_fast call; more reliability checks
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.89 2010/08/14 19:49:05 tg Exp $ */
d6 1
a6 1
 * Copyright (c) 2003, 2004, 2005, 2006, 2009
d51 1
a51 1
#define	MirBSD	0x0AAD		/* minor 10-7F=prerelease; 80=release
@


1.89
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.88 2010/01/10 19:16:46 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AAC		/* minor 10-7F=prerelease; 80=release
@


1.88
log
@we need offsetof() in the bootloader code, too
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.87 2009/12/13 00:32:15 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AAB		/* minor 10-7F=prerelease; 80=release
@


1.87
log
@i386 sync
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.86 2009/08/10 05:16:54 tg Exp $ */
d194 1
a194 1
#if !defined(offsetof) && defined(_KERNEL)
@


1.86
log
@sync
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.85 2009/06/29 19:19:07 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AAA		/* minor 10-7F=prerelease; 80=release
@


1.85
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.84 2009/06/07 13:20:18 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA9		/* minor 10-7F=prerelease; 80=release
@


1.84
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.83 2009/04/05 13:38:45 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA8		/* minor 10-7F=prerelease; 80=release
@


1.83
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.82 2009/01/29 18:11:02 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA7		/* minor 10-7F=prerelease; 80=release
@


1.82
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.81 2009/01/02 05:16:32 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA6		/* minor 10-7F=prerelease; 80=release
@


1.81
log
@bump, regenerate, etc.
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.80 2008/11/30 11:22:39 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA5		/* minor 10-7F=prerelease; 80=release
@


1.80
log
@bump patchlevel; allow cpp change
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.79 2008/11/10 21:10:21 tg Exp $ */
d6 1
a6 1
 * Copyright (c) 2003, 2004, 2005, 2006
d51 1
a51 1
#define	MirBSD	0x0AA4		/* minor 10-7F=prerelease; 80=release
@


1.79
log
@• add minimal Fortran support to <sys.mk>, <bsd.prog.mk>, <bsd.lib.mk>
  ‣ untested except for 99 bottles of beer example
• bump OS to MirBSD #10uA3, so that people can actually compile LLVM
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.78 2008/11/08 23:04:25 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA3		/* minor 10-7F=prerelease; 80=release
@


1.78
log
@more mass conversions, including ancient eMail addresses
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.77 2008/10/12 17:40:40 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA2		/* minor 10-7F=prerelease; 80=release
@


1.77
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.76 2008/08/02 00:46:10 tg Exp $ */
d9 1
a9 1
 *	Thorsten “mirabilos” Glaser <tg@@66h.42h.de>
@


1.76
log
@time to bump, still in progress
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.75 2008/03/10 15:40:56 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA1		/* minor 10-7F=prerelease; 80=release
@


1.75
log
@unlock, MirOS #10-current 0AuA0, 2008
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.74 2007/08/01 22:50:13 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0AA0		/* minor 10-7F=prerelease; 80=release
@


1.74
log
@for all it's worth, from here on it's #10-RELEASE.
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.73 2007/07/07 22:53:23 tg Exp $ */
d8 1
a8 1
 * Copyright (c) 2002, 2003, 2007
d51 1
a51 1
#define	MirBSD	0x0A80		/* minor 10-7F=prerelease; 80=release
@


1.74.4.1
log
@bump to #10-stable 0As81
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.74 2007/08/01 22:50:13 tg Exp $ */
d8 1
a8 1
 * Copyright (c) 2002, 2003, 2007, 2008
d51 1
a51 1
#define	MirBSD	0x0A81		/* minor 10-7F=prerelease; 80=release
@


1.73
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.71 2007/06/21 14:40:19 tg Exp $ */
d9 1
a9 1
 *	Thorsten "mirabilos" Glaser <tg@@66h.42h.de>
d51 1
a51 1
#define	MirBSD	0x0A1C		/* minor 10-7F=prerelease; 80=release
@


1.72
log
@bump
@
text
@d51 1
a51 1
#define	MirBSD	0x0A1B		/* minor 10-7F=prerelease; 80=release
@


1.71
log
@• libedit, libm, libocurses, libsectok, libskey, libssl, libusbhid, libutil:
  do something I should've long done and bump their majors – ABI changes are
  not only removals (or changes) of T/D symbols but also additions(!) of U
  symbols (i.e. imports); these changed during the <ctype.h> changes from a
  while ago and depend on newer libc; I did an nm(1) comparision against #9
  (release) to allow upgrading by source
• libc, uname: since I'm bumping a lot of other shlibs, it's a good time to
  bump the libc major as well and finally get rid of that struct utsname bug
  I introduced when I had no idea what I was doing, in MirOS #1 or so…
• libpthread: requires a major bump if libc major is bumped, or so they say
• bump os patchlevel

agreed bsiegert@@
XXX any more changes to do before release?
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.70 2007/06/16 15:41:49 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A1A		/* minor 10-7F=prerelease; 80=release
@


1.70
log
@sync’n’bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.69 2007/06/04 09:05:39 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A19		/* minor 10-7F=prerelease; 80=release
@


1.69
log
@for all practical reasons, this is MirOS #10; bump everything except the ospatchlevel to -RELEASE already
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.68 2007/05/26 23:09:50 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A18		/* minor 10-7F=prerelease; 80=release
@


1.68
log
@fixing the bootloader issue rectifies a bump here
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.67 2007/05/16 22:03:54 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A17		/* minor 10-7F=prerelease; 80=release
@


1.67
log
@okay, time to clear up one of the earliest messes in MirBSD's history…
(yes I was young and stup^Wunknowingly did this)

• lib/libc/gen/uname.c: do not fill in the struct utsname.patchlevel
  field any more.
• X11/xc/config/imake/imake.c: use sysctl kern.ospatchlevel, instead
  of relying on non-standard/unsafe struct utsname.patchlevel.
• lib/libc/gen/uname.c: in order to avoid a libc version bump, bzero
  the struct utsname * argument, so that the former patchlevel field
  becomes a NUL string.
• sys/sys/utsname.h: revert, i.e. delete the “patchlevel” field from
  struct utsname. Do NOT bump the os patchlevel, because this change
  does not affect the kernel/userland interface – that field has ne-
  ver been used in kernel land. This change, back then, was not safe
  as per ABI policy.
• lib/libc/gen/uname.c, share/mk/sys.mk, sys/sys/param.h: patchlevel
  bump for size change of struct utsname, used in gen/uname.c to add
  1 to the number of octets to bzero(), ifdef'd (so that new source,
  old includes, is safe).
• lib/libc/Makefile: mention gen/uname.c change for next major bump.

All other users of struct utsname in the base system have been taken
care of already (most notably uname(1); the others didn't use the os
patchlevel anyway).
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.66 2007/05/07 14:07:41 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A16		/* minor 10-7F=prerelease; 80=release
@


1.66
log
@bump
• sdiff
• *.h, *.mk fixes
• whirlpool
• pkgsrc® known to work
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.65 2007/04/17 22:13:53 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A15		/* minor 10-7F=prerelease; 80=release
@


1.65
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.64 2007/04/04 21:45:38 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A14		/* minor 10-7F=prerelease; 80=release
@


1.64
log
@the occasional bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.63 2007/03/18 02:19:53 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A12		/* minor 10-7F=prerelease; 80=release
@


1.63
log
@bump patchlevel ― bootloader fix (intel macs), security fix (mbufs patch#2)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.62 2007/03/08 09:01:57 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A11		/* minor 10-7F=prerelease; 80=release
@


1.62
log
@MirOS #10-beta
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.61 2007/02/26 02:37:50 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0A10		/* minor 10-7F=prerelease; 80=release
@


1.61
log
@bump time, major changes in the bootloader are being tested
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.60 2007/02/17 03:07:15 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09AD		/* minor 10-7F=prerelease; 80=release
@


1.60
log
@bump (for FOSDEM; bug fixes)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.59 2007/02/07 18:10:54 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09AC		/* minor 10-7F=prerelease; 80=release
@


1.59
log
@*sigh* gcc braced-group expression deficiency also affects MAX()
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.58 2007/02/07 02:49:18 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09AB		/* minor 10-7F=prerelease; 80=release
@


1.58
log
@gcc doesn't manage to do
	struct foo {
		int bar[somemacro(someconst,someotherconst)];
	}
when somemacro uses ({ … }) style evaluation, even if the
result can be calculated at compile time or even is constant
and the braced-group is only used to prevent side effects
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.57 2007/02/07 01:37:50 tg Exp $ */
a184 21

#ifdef __GNUC__
#define MIN(x,y)	__extension__({		\
	typeof (x) __SP_x = (x);		\
	typeof (y) __SP_y = (y);		\
	((__SP_x < __SP_y) ? __SP_x : __SP_y);	\
})
#define MAX(x,y)	__extension__({		\
	typeof (x) __SP_x = (x);		\
	typeof (y) __SP_y = (y);		\
	((__SP_x > __SP_y) ? __SP_x : __SP_y);	\
})
#define __BOUNDINT(minv,maxv,x)	__extension__({	\
	typeof (minv) __SP_minv = (minv);	\
	typeof (maxv) __SP_maxv = (maxv);	\
	typeof (x) __SP_x = (x);		\
	( (__SP_x < __SP_minv) ? __SP_minv :	\
	  (__SP_x > __SP_maxv) ? __SP_maxv :	\
	  __SP_x );				\
})
#else
d187 1
a189 2
#endif /* !__GNUC__ */

@


1.57
log
@* if __GNUC__ add side-effect-safe versions of a few macros
  as extensions
* bump after gcc changes and during kernel and kernbase changes
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.56 2007/01/25 15:52:27 tg Exp $ */
a179 1
#ifdef __GNUC__
d181 1
a181 5
#define howmany(x,y)	__extension__({		\
	typeof (x) __SP_x = (x);		\
	typeof (y) __SP_y = (y);		\
	((__SP_x + (__SP_y - 1)) / __SP_y);	\
})
d183 4
a186 9
#define roundup(x,y)	__extension__({		\
	typeof (x) __SP_x = (x);		\
	typeof (y) __SP_y = (y);		\
	(howmany(__SP_x, __SP_y) * __SP_y);	\
})
#define powerof2(x)	__extension__({		\
	typeof (x) __SP_x = (x);		\
	(((__SP_x - 1) & __SP_x) == 0);		\
})
a205 5
#ifndef howmany
#define	howmany(x, y)	(((x)+((y)-1))/(y))
#endif
#define	roundup(x, y)	((((x)+((y)-1))/(y))*(y))
#define	powerof2(x)	((((x)-1)&(x))==0)
a207 1

d211 1
@


1.56
log
@fixing the integer overflow problem is worth me a bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.55 2006/12/11 20:48:35 tg Exp $ */
d8 1
a8 1
 * Copyright (c) 2002, 2003
d51 1
a51 1
#define	MirBSD	0x09AA		/* minor 10-7F=prerelease; 80=release
d180 36
d226 3
a228 2
#define	__BOUNDINT0(maxv,v)	__BOUNDINT(0,(maxv),(v))
#define	__BOUNDINTU(maxv,v)	( ((v) > (maxv)) ? (maxv) : (v) )
@


1.55
log
@bump for 23C3 edition; it's been a lot of changes recently anyway
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.54 2006/11/17 03:20:29 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A9		/* minor 10-7F=prerelease; 80=release
@


1.54
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.53 2006/11/09 02:43:45 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A8		/* minor 10-7F=prerelease; 80=release
@


1.53
log
@finally, bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.52 2006/11/03 18:11:58 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A7		/* minor 10-7F=prerelease; 80=release
@


1.52
log
@time to bump these I suppose
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.51 2006/10/27 15:53:03 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A6		/* minor 10-7F=prerelease; 80=release
@


1.51
log
@* sys.mk, param.h: bump OS patchlevel
* sys.mk, sys.mk.ed: simplify CPPFLAGS generation
* limits.h, stdlib.h: crank MB_LEN_MAX to (2*real-MB_LEN_MAX - 1)
  to account for functions such as wcrtomb(3) to process an mbstate_t
* machine/limits.h: do *not* define MB_LEN_MAX=1 unconditionally,
  broke libncursesw(!); protect against multiple inclusion
* bsd.port.mk: default 'mmake uninstall' to pkg_delete -c
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.50 2006/10/17 23:16:56 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A5		/* minor 10-7F=prerelease; 80=release
@


1.50
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.49 2006/10/07 03:30:53 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A4		/* minor 10-7F=prerelease; 80=release
@


1.49
log
@bump <sys.mk> patchlevel because the makefile includes changed
recently (C++ reliability fixes); <sys/param.h> is tied to it,
so bump it too.
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.48 2006/10/02 23:24:15 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A3		/* minor 10-7F=prerelease; 80=release
@


1.48
log
@bump for changed components
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.47 2006/09/29 22:01:23 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A2		/* minor 10-7F=prerelease; 80=release
@


1.47
log
@it's AFLAGS not ASFLAGS
bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.46 2006/09/24 17:48:33 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A1		/* minor 10-7F=prerelease; 80=release
@


1.46
log
@bsiegert@@ and I decided this is #9-current, going on #10
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.45 2006/06/27 14:15:30 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x09A0		/* minor 10-7F=prerelease; 80=release
@


1.45
log
@MirOS #9-stable (yes, in -rHEAD, that's right, for now)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.44 2006/06/21 21:23:59 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0981		/* minor 10-7F=prerelease; 80=release
@


1.44
log
@bump to #9-RELEASE
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.43 2006/06/17 17:12:33 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0980		/* minor 10-7F=prerelease; 80=release
@


1.43
log
@* <bsd.cfwrap.mk> provide CC_FOR_BUILD, CFLAGS_FOR_BUILD (host stuff),
  unbreaks cross-built native gcc configure
* others: bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.42 2006/06/15 18:11:37 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0912		/* minor 10-7F=prerelease; 80=release
@


1.42
log
@switch to DEBUGLIBS?=No, MALLOC_TYPE?=brk for release
bump os patchlevel

agreed bsiegert@@
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.41 2006/06/11 02:33:58 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0911		/* minor 10-7F=prerelease; 80=release
@


1.41
log
@surprise, surprise
this is almost MirOS #9-beta ;)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.40 2006/06/09 00:31:37 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0910		/* minor 10-7F=prerelease; 80=release
@


1.40
log
@just to be safe, bump (indicate new fxp(4) code, among others)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.39 2006/06/01 23:00:42 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A9		/* minor 10-7F=prerelease; 80=release
@


1.39
log
@bump libc version; fix includes; bump os patchlevel
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.38 2006/05/25 13:00:31 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A8		/* minor 10-7F=prerelease; 80=release
@


1.38
log
@bump os patchlevel
todo: release new mksh, mircksum; fix errors; release snapshot
then: start obsd3.9 merge (maybe)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.37 2006/04/06 11:10:50 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A7		/* minor 10-7F=prerelease; 80=release
@


1.37
log
@these changes justify another version number bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.36 2006/03/27 19:33:45 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A6		/* minor 10-7F=prerelease; 80=release
@


1.36
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.35 2006/02/22 00:49:08 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A5		/* minor 10-7F=prerelease; 80=release
@


1.35
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.34 2006/02/01 14:44:58 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A4		/* minor 10-7F=prerelease; 80=release
@


1.34
log
@bump version number (libiconv)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.33 2006/01/18 10:21:37 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A3		/* minor 10-7F=prerelease; 80=release
@


1.33
log
@bump kernel version (ET_DYN exec capab)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.32 2006/01/13 03:50:44 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A2		/* minor 10-7F=prerelease; 80=release
@


1.32
log
@bump patchlevels, let's do a snapshot
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.31 2005/12/23 19:59:46 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x08A1		/* minor 10-7F=prerelease; 80=release
@


1.31
log
@bump to MirOS #8-current
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.30 2005/12/20 01:06:31 tg Exp $ */
d6 1
a6 1
 * Copyright (c) 2003, 2004, 2005
d9 1
a9 1
 *	Thorsten "mirabile" Glaser <tg@@66h.42h.de>
d51 1
a51 1
#define	MirBSD	0x08A0		/* minor 10-7F=prerelease; 80=release
@


1.30
log
@for all practical reasons, this code _is_ MirOS #8 (BSD, GCC, X11)
set the version number; last fixes and tagging will be done later.
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.29 2005/12/19 23:14:48 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0880		/* minor 10-7F=prerelease; 80=release
@


1.30.2.1
log
@I hereby declare the MirOS #8-stable branch *snip* open
and its maintainer Benny Siegert (bsiegert@@)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.30 2005/12/20 01:06:31 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0881		/* minor 10-7F=prerelease; 80=release
@


1.29
log
@* make kernel build
* bump OS patchlevel
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.28 2005/12/17 05:57:55 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x083D		/* minor 10-7F=prerelease; 80=release
@


1.28
log
@bsiegert@@ decided it wouldn't be that good an idea to include debugging
symbols in all libraries for the release (but we'll do for snapshots).

bump mirmake and miros patchlevels
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.27 2005/12/04 13:22:55 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x083C		/* minor 10-7F=prerelease; 80=release
@


1.27
log
@this will be MirOS 08u3B
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.26 2005/11/21 19:51:17 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x083B		/* minor 10-7F=prerelease; 80=release
@


1.26
log
@bump according to <sys.mk>
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.25 2005/11/21 19:31:55 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x083A		/* minor 10-7F=prerelease; 80=release
@


1.25
log
@First round of system include "fixes":
let GCC decide the length of ptrdiff_t, size_t, wchar_t, wint_t
(the first three adapted from gcc fixincludes run[1])
and adapt ssize_t accordingly (untested)
also fix limits

[1] which we don't run during gcc module build tho
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.24 2005/10/21 10:51:17 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0839		/* minor 10-7F=prerelease; 80=release
d65 1
a65 1
#define	NULL	((void *)((__PTRDIFF_TYPE__)0UL))
@


1.24
log
@* sys.mk, param.h: bump (sys.mk += 2 even)
  -> library changes, timekeeping fixes
* bsd.prog.mk: do not attempt to objcopy on DEBUGPROGS install if
  INSTALL_SCRIPT is empty (it doesn't like scripts, and besides,
  if we don't strip out debug information anyway...)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.23 2005/09/20 18:52:51 tg Exp $ */
d65 1
a65 1
#define	NULL		((void *)((_BSD_PTRDIFF_T_)0UL))
@


1.23
log
@BSD4_3, BSD4_4: I don't know why these vanished, but back they are.

Spotted by bsiegert@@
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.22 2005/08/26 20:55:52 tg Exp $ */
d51 1
a51 1
#define	MirBSD	0x0838		/* minor 10-7F=prerelease; 80=release
@


1.22
log
@bump to 0837 (changes: gcc)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.21 2005/07/21 21:52:25 tg Exp $ */
d49 3
a51 1
#define	MirBSD	0x0837		/* minor 10-7F=prerelease; 80=release
@


1.21
log
@merge and bump patchlevel (kernel only)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.20 2005/07/07 18:42:01 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0836		/* minor 10-7F=prerelease; 80=release
@


1.20
log
@fix build; bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.19 2005/07/04 03:36:38 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0835		/* minor 10-7F=prerelease; 80=release
@


1.19
log
@* finish outstanding merges
* make that damn thing build again
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.18 2005/07/03 20:13:49 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0834		/* minor 10-7F=prerelease; 80=release
@


1.18
log
@0833 for a long time... forgot to ci
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.17 2005/06/14 13:47:38 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0833		/* minor 10-7F=prerelease; 80=release
@


1.17
log
@* use ${LINKER} not ${CC} in <bsd.lib.mk>, like <bsd.prog.mk>
* set LINKER to ${CXX} if ${SRCS} contains a C++ file
  (unused within MirOS source tree though)
  XXX could we add -lobjc to LDADD if SRCS contain an ObjC/ObjC++ file?
* enable DEBUGLIBS to show off that it isn't broken ;)
* bump patchlevel
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.16 2005/06/07 15:58:08 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0832		/* minor 10-7F=prerelease; 80=release
@


1.16
log
@double default message buffer size on i386 and macppc
(not doable "without great pain" on sparc)

it's quite small already with K7 PowerNow(tm)! in effect.
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.15 2005/05/26 20:27:37 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0831		/* minor 10-7F=prerelease; 80=release
@


1.15
log
@bump to 0830:
* gcc 3.4.5 (yay!)
* binutils, gdb 20050514
* idle loop
* mksh R22
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.14 2005/05/23 10:26:24 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0830		/* minor 10-7F=prerelease; 80=release
@


1.14
log
@bump MirOS patchlevel
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.13 2005/05/14 18:02:10 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x082F		/* minor 10-7F=prerelease; 80=release
@


1.13
log
@bump a bit
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.12 2005/05/06 00:17:44 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x082E		/* minor 10-7F=prerelease; 80=release
@


1.12
log
@* bump OS patchlevel again
* start pretending we're the #8 release in some parts
  of the documentation already
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.11 2005/05/04 18:32:45 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x082D		/* minor 10-7F=prerelease; 80=release
@


1.11
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.10 2005/05/01 21:54:17 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x082C		/* minor 10-7F=prerelease; 80=release
d58 2
a59 2
#ifdef 	__GNUG__
#define	NULL	__null
d61 1
a61 1
#define	NULL	0
d63 1
a63 1
#define	NULL	((void *)((_BSD_PTRDIFF_T_)0UL))
@


1.10
log
@disable boehm-gc for gcj and Objective C
cf. http://www.monkey.org/openbsd/archive/ports/0304/msg00263.html
and today's IRC log
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.9 2005/04/29 15:13:54 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x082B		/* minor 10-7F=prerelease; 80=release
@


1.9
log
@bump (early - some changes still comming, don't build now)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.8 2005/04/29 00:22:36 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x082A		/* minor 10-7F=prerelease; 80=release
@


1.8
log
@post-RC1 grave changes: gcc EH, <.mk>
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.7 2005/04/26 04:23:12 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0829		/* minor 10-7F=prerelease; 80=release
@


1.7
log
@these changes justify a version bump (*winks* hi MirPorts)
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.6 2005/04/19 20:13:47 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0828		/* minor 10-7F=prerelease; 80=release
@


1.6
log
@hack on gdb
make it somehow work (i386, sparc, powerpc)
add readline docs from rl 5.0
nuke generated files
make make build work again
bump OS version
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.5 2005/04/14 19:33:03 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0827		/* minor 10-7F=prerelease; 80=release
@


1.5
log
@bump
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.4 2005/03/25 22:43:32 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0826		/* minor 10-7F=prerelease; 80=release
@


1.4
log
@adding EH and shared libgcc justifies bumping,
as do all the other small improvements
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.3 2005/03/06 22:30:42 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0825		/* minor 10-7F=prerelease; 80=release
@


1.3
log
@sys/sys/param.h: remove some compat defines
sys/sys/param.h, share/mk/sys.mk: bump OS patch level
@
text
@d1 1
a1 1
/**	$MirOS: src/sys/sys/param.h,v 1.2 2005/03/06 21:28:34 tg Exp $ */
d49 1
a49 1
#define	MirBSD	0x0824		/* minor 10-7F=prerelease; 80=release
@


1.2
log
@* merge src/sys/
  (at least the better part of it)
* revert IPv6 networking to OpenBSD, since
  I didn't get IPV4_MAPPED addresses working :(
@
text
@d1 1
a1 1
/**	$MirOS$ */
d7 2
a8 2
 *	The MirOS Project. All rights reserved.
 * Copyright (c) 2002, 2003, 2004
d49 1
a49 4
#define BSD4_3	1
#define BSD4_4	1

#define	MirBSD	0x0823		/* minor 10-7F=prerelease; 80=release
a51 6

/*** MirOS/ekkoBSD/whatever operating system type (eg. for make) ***/
#define	_MACHINE_OS	BSD	/* Do not change this. Possible values	*/
#define	MACHINE_OS	"BSD"	/*  are: "BSD" "Linux" (...)		*/


@


1.1
log
@Initial revision
@
text
@d1 1
d6 4
d45 3
d52 13
a64 2
#define OpenBSD	200405		/* OpenBSD version (year & month). */
#define OpenBSD3_5 1		/* OpenBSD 3.5 */
d69 2
d72 1
a72 1
#define	NULL	0L
a75 5
#ifndef _LOCORE
#include <sys/types.h>
#include <sys/simplelock.h>
#endif

d140 1
a140 1
	
d186 1
a186 1
/* Macros for counting and rounding. */
d191 8
a198 5
#define powerof2(x)	((((x)-1)&(x))==0)

/* Macros for min/max. */
#define	MIN(a,b) (((a)<(b))?(a):(b))
#define	MAX(a,b) (((a)>(b))?(a):(b))
d202 1
a202 1
#define offsetof(s, e) ((size_t)&((s *)0)->e)
d226 1
a226 1
 * The number of CPU `tick's that map to a unique `%age' can be expressed
d231 1
a231 1
 * For the scheduler to maintain a 1:1 mapping of CPU `tick' to `%age',
d242 2
a243 2
#define RFNAMEG		(1<<0)	/* UNIMPL new plan9 `name space' */
#define RFENVG		(1<<1)	/* UNIMPL copy plan9 `env space' */
d245 1
a245 1
#define RFNOTEG		(1<<3)	/* UNIMPL create new plan9 `note group' */
d247 4
a250 4
#define RFMEM		(1<<5)	/* share `address space' */
#define RFNOWAIT	(1<<6)	/* parent need not wait() on child */ 
#define RFCNAMEG	(1<<10) /* UNIMPL zero plan9 `name space' */
#define RFCENVG		(1<<11) /* UNIMPL zero plan9 `env space' */
d252 2
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
