head	1.1;
access;
symbols
	tg-use_ldscript:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2009.10.27.15.10.50;	author tg;	state dead;
branches
	1.1.2.1;
next	;
commitid	1004AE70D6303F6EF50;

1.1.2.1
date	2009.10.27.15.10.50;	author tg;	state Exp;
branches;
next	;
commitid	1004AE70D6303F6EF50;


desc
@@


1.1
log
@file loader.ld was initially added on branch tg-use_ldscript.
@
text
@@


1.1.2.1
log
@attempt to move *all* of .bss to 3000:0000h and up
(when loaded via gPXE+PXELINUX, fighting memory corruption?)

XXX we *really* need a position-independent or relocatable boot
XXX loader; sadly, gcc’s idea of PIC/PIE cannot be of any help…
@
text
@a0 19
/* $MirOS$ */

OUTPUT_FORMAT("elf32-i386", "elf32-i386", "elf32-i386")
OUTPUT_ARCH(i386)
ENTRY(_start)
SECTIONS
{
	. = 0x30000;
	__bss_start = .;
	.bss : { *(.bss) *(COMMON) }
	. = ALIGN(32 / 8);
	__bss_end = .;

	. = 0x40000;
	.text : { *(.text) *(.rodata) }
	.data : { *(.data) }
	. = ALIGN(32 / 8);
	PROVIDE (end = .);
}
@

