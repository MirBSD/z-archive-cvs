head	1.13;
access;
symbols
	tg-use_ldscript:1.13.0.2
	MIRBSD_10:1.4.0.2
	MIRBSD_10_BASE:1.4
	MIRBSD_9_BASE:1.3;
locks; strict;
comment	@# @;


1.13
date	2009.08.30.14.16.31;	author tg;	state Exp;
branches;
next	1.12;
commitid	1004A9A89BA3643FC73;

1.12
date	2009.06.29.17.44.55;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004A48FDAD7A8A4284;

1.11
date	2009.06.29.16.20.42;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004A48E9B2175E8B71;

1.10
date	2009.02.23.09.44.46;	author tg;	state Exp;
branches;
next	1.9;
commitid	10049A270153771C516;

1.9
date	2009.02.02.21.31.34;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004987664C12E820E3;

1.8
date	2009.02.01.10.47.36;	author tg;	state Exp;
branches;
next	1.7;
commitid	10049857DD7211662E4;

1.7
date	2009.02.01.10.44.17;	author tg;	state Exp;
branches;
next	1.6;
commitid	10049857D1225B78D79;

1.6
date	2009.01.17.12.18.23;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004971CC9C6D611754;

1.5
date	2009.01.17.12.04.26;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004971C95B717A11AE;

1.4
date	2007.03.18.04.46.22;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045FCC4347FA0AC5C;

1.3
date	2006.05.15.20.47.42;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004468E8FB2983A48D;

1.2
date	2006.04.06.10.58.15;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004434F45B25DCB235;

1.1
date	2006.04.05.22.12.17;	author tg;	state Exp;
branches;
next	;
commitid	1004434408D12C01CCC;


desc
@@


1.13
log
@begin an experimental MirOS bsd4me, derived from MirOS bsd4grml, for
something Christian Hofstaedtler «ch:#grml» told us…
@
text
@# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.12 2009/06/29 17:44:55 tg Exp $

BOOTSELECT_HOOK=yes
BOOTLDR_PATH=	${.CURDIR}/../boot
NOMAN=		yes

BSD4GRML?=	No
BSD4ME?=	No
.if ${BSD4GRML:L} != "no"
DUALIVE=	No
GRML=		No
CPPFLAGS+=	-DFORGRML
MBSD_PREFIX=	/boot/addons/bsd4grml
NOMAN=		No
.  if ${BSD4GRML:L} == "iso"
CPPFLAGS+=	-DNOGRUB
.  endif
.endif
.if ${BSD4ME:L} != "no"
DUALIVE=	No
GRML=		No
BOOTSELECT_HOOK=No
MBSD_PREFIX=	/bsd4me
NOMAN=		No
.endif

DUALIVE?=	No
.if ${DUALIVE:L} == "yes"
CPPFLAGS+=	-DHAVE_DUALIVE
.endif

GRML?=		No
.if ${GRML:L} == "yes"
CPPFLAGS+=	-DHAVE_GRML
.endif

CPPFLAGS+=	-Dmbsd_major=\"${OSrev:Q}\"
.if ${OSrpl} < 128
CPPFLAGS+=	-Dmbsd_type=\"-beta\"
.elif ${OSrpl} == 128
CPPFLAGS+=	-Dmbsd_type=\"\"
.elif ${OSrpl} == 130
CPPFLAGS+=	-Dmbsd_type=\"bis\"
.elif ${OSrpl} == 132
CPPFLAGS+=	-Dmbsd_type=\"ter\"
.elif ${OSrpl} == 134
CPPFLAGS+=	-Dmbsd_type=\"quater\"
.elif ${OSrpl} == 136
CPPFLAGS+=	-Dmbsd_type=\"quinquies\"
.elif ${OSrpl} < 160
CPPFLAGS+=	-Dmbsd_type=\"-stable\"
.else
CPPFLAGS+=	-Dmbsd_type=\"-current\"
.endif

# This doesn't get installed
install:

.PATH: ${BOOTLDR_PATH}
.include "${BOOTLDR_PATH}/Makefile"

.if ((${BSD4GRML:L} != "no") || (${BSD4ME:L} != "no")) && (${NOMAN:L} == "no")
all: ldbsd.txt

ldbsd.txt: __MANALL
	col -bx <boot.cat8 >$@@ || (rm -f $@@; exit 1)
.endif

CLEANFILES+=	ldbsd.txt
@


1.12
log
@honour NOMAN
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.11 2009/06/29 16:20:42 tg Exp $
d8 1
d19 7
d62 1
a62 1
.if (${BSD4GRML:L} != "no") && (${NOMAN:L} == "no")
@


1.11
log
@• add a way to build an ldbsd.com for MirOS bsd4grml without the menu
  option to jump back to GNU GRUB2, for use with the LinuxMagazin DVD
  which is over 4 GiB in size, which seems to confuse boot(8/i386)
  XXX we don’t know at the moment if it’s 2 GiB or 4 GiB…
• MirOS BSD → MirOS bsd4grml if appropriate
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.10 2009/02/23 09:44:46 tg Exp $
d54 1
a54 1
.if ${BSD4GRML:L} != "no"
@


1.10
log
@changed /boot/mirbsd/ to /boot/addons/bsd4grml/ by request of mikap (IRC)
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.9 2009/02/02 21:31:34 tg Exp $
d8 1
a8 1
.if ${BSD4GRML:L} == "yes"
d14 3
d54 1
a54 1
.if ${BSD4GRML:L} == "yes"
@


1.9
log
@sync CLEANFILES
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.8 2009/02/01 10:47:36 tg Exp $
d12 1
a12 1
MBSD_PREFIX=	/boot/mirbsd
@


1.8
log
@bsd4grml wants an ASCII documentation too
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.7 2009/02/01 10:44:17 tg Exp $
d57 2
@


1.7
log
@special boot menu for bsd4grml ☺
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.6 2009/01/17 12:18:23 tg Exp $
d13 1
d50 7
@


1.6
log
@add grml, reserve boot.9 slot for grml too
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.5 2009/01/17 12:04:26 tg Exp $
d7 8
@


1.5
log
@use ifdef to specify what CD we have
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.4 2007/03/18 04:46:22 tg Exp $
d12 5
@


1.4
log
@no "Nothing to do here for now..." any more
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.3 2006/05/15 20:47:42 tg Exp $
d7 24
@


1.3
log
@don't let fdboot, liveboot build boot's man page
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.2 2006/04/06 10:58:15 tg Exp $
d7 1
a8 1
	# This doesn't get installed
@


1.2
log
@use .PATH
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/liveboot/Makefile,v 1.1 2006/04/05 22:12:17 tg Exp $
d5 1
@


1.1
log
@add the ability to hook something into the (CD) boot loader,
and select a different 'boot.cfg' file (boot.%d) based upon it
@
text
@d1 1
a1 1
# $MirOS$
d4 1
d9 2
a10 1
.include "${.CURDIR}/../boot/Makefile"
@

