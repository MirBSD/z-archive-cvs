head	1.7;
access;
symbols
	tg-beforemerge-ksrc10:1.1.1.1
	MIRBSD_10:1.6.0.2
	MIRBSD_10_BASE:1.6
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2008.08.01.15.47.15;	author tg;	state dead;
branches;
next	1.6;
commitid	100489330121217368F;

1.6
date	2007.05.10.13.09.22;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004643195847EA64E6;

1.5
date	2007.03.02.03.13.27;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045E7958604F58BEB;

1.4
date	2006.10.07.21.36.21;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045281D5D49EB8626;

1.3
date	2006.06.11.00.15.12;	author tg;	state Exp;
branches;
next	1.2;
commitid	100448B6089366B48DB;

1.2
date	2005.03.06.21.27.27;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.27.43;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.27.43;	author tg;	state Exp;
branches;
next	;


desc
@@


1.7
log
@switch the sparc bootloader too – untested
@
text
@# $MirOS: src/sys/arch/sparc/stand/libz/Makefile,v 1.6 2007/05/10 13:09:22 tg Exp $

.include <bsd.own.mk>

# This is needed for libz in the boot loader
S=		${.CURDIR}/../../../..
CFLAGS+=	${SACFLAGS} ${DEBUGFLAGS}
CPPFLAGS+=	-I${S}/lib/libsa
CPPFLAGS+=	-DZCONST=const

# This is used to build a small libz
CPPFLAGS+=	-DSLOW -DSMALL -DNOBYFOUR -DNO_GZIP
CPPFLAGS+=	-DDYNAMIC_CRC_TABLE -DBUILDFIXED

LIB=		z
SRCS=		crc32.c infback.c inffast.c inflate.c inftrees.c
.PATH: ${BSDSRCDIR}/lib/libz ${S}/lib/libsa

NOPIC=		Yes
DEBUGLIBS=	No

install:

.include <bsd.lib.mk>
@


1.6
log
@• fix missing ZCONST
• fix floppy ramdisk not fitting (probably due to whirlpool etc. addition)
• fix symlink'd manpages (XFree86®) missing from the htman set (the MLINKS
  from base are hardlink'd)

not a full sync, but close
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libz/Makefile,v 1.5 2007/03/02 03:13:27 tg Exp $
@


1.5
log
@• make the kernel use the adler32() stuff in src/kern, whose sources
  live in the z part but that, logically, more belongs to the c part
• export adler32 (over <sys/systm.h> -> libkern -> <libckern.h>) and
  the rnd_bootpool (via <sys/systm.h> directly) to all of the kernel
• adler32 for the kernel moves to libkern
• adler32 for the i386 bootloader moves to libsa
• adler32 for the sparc bootloader moves to libkern
• userland libz is not affected (yet); make depend still pulls it in

tested by building a GENERIC, a bsd.rd with it, a cdrom9.fs with the
new bootloader (i386), qemu'ing that
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libz/Makefile,v 1.4 2006/10/07 21:36:21 tg Exp $
d9 1
@


1.4
log
@add a full compliant portable C implementation of the adler32.c file
found in libc, without the adler32_combine function (unneeded in the
kernel and especially the bootloader), to the MirOS BSD kernel (note
in sys/conf/files) and the sparc bootloader (the i386 bootloader al-
ready uses the same code as assembly version, except that that comes
without the "return 1 if (buf == NULL)" functionality); sync all our
adler32 implementations and lint a little
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libz/Makefile,v 1.3 2006/06/11 00:15:12 tg Exp $
d15 1
a15 1
SRCS=		adler32s.c crc32.c infback.c inffast.c inflate.c inftrees.c
@


1.3
log
@* bring the sparc kernel in shape to maybe cross-compile it
* add machine description for mirbsd-sparc to gcc
* fix including problem
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/i386/stand/libz/Makefile,v 1.4 2005/07/07 12:46:12 tg Exp $
d15 2
a16 2
SRCS=		adler32.c crc32.c infback.c inffast.c inflate.c inftrees.c
.PATH: ${BSDSRCDIR}/lib/libz
@


1.2
log
@* merge src/sys/
  (at least the better part of it)
* revert IPv6 networking to OpenBSD, since
  I didn't get IPV4_MAPPED addresses working :(
@
text
@d1 1
a1 2
# $MirOS$
# $OpenBSD: Makefile,v 1.1 1997/09/17 10:46:24 downsj Exp $
d3 1
a3 1
LIB=	z
d5 4
a8 1
.PATH:  ${.CURDIR}/../../../../lib/libz
d10 3
a12 1
CFLAGS= -O2 -D_ZLIB_PRIVATE -I${.CURDIR}/../../../../lib/libz
d14 3
a16 2
SRCS=	adler32.c crc32.c infblock.c infcodes.c inffast.c \
	inflate.c inftrees.c infutil.c
d18 2
a19 1
${OBJS}:	${.CURDIR}/../Makefile.inc
a22 2
NOPIC=	yes

@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.3 2003/12/17 05:01:06 millert Exp $
d4 1
a4 2
S=${.CURDIR}/../../../..
ZDST=${.OBJDIR}
d6 1
a6 1
.PATH: ${S}/lib/libz
d8 12
a19 1
.include "${S}/lib/libz/Makefile"
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
