head	1.14;
access;
symbols
	tg-beforemerge-ksrc10:1.1.1.1
	MIRBSD_10:1.4.0.2
	MIRBSD_10_BASE:1.4
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2018.04.27.20.48.53;	author tg;	state Exp;
branches;
next	1.13;
commitid	1005AE38CC3722E4266;

1.13
date	2013.08.06.17.06.26;	author tg;	state Exp;
branches;
next	1.12;
commitid	10052012D144F7753C5;

1.12
date	2013.08.05.22.06.16;	author tg;	state Exp;
branches;
next	1.11;
commitid	100520021D16E80D23B;

1.11
date	2011.01.03.19.02.52;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004D221D691CE0C01C;

1.10
date	2010.01.16.20.56.08;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004B5227F669D8B3E6;

1.9
date	2008.10.16.15.09.34;	author tg;	state Exp;
branches;
next	1.8;
commitid	10048F7593D4F6E8B8D;

1.8
date	2008.08.03.21.02.04;	author tg;	state Exp;
branches;
next	1.7;
commitid	10048961CCE67B72AC5;

1.7
date	2008.08.01.18.45.41;	author tg;	state Exp;
branches;
next	1.6;
commitid	100489359DF7EF4507F;

1.6
date	2008.08.01.18.09.32;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004893513244B11E80;

1.5
date	2008.08.01.15.47.15;	author tg;	state Exp;
branches;
next	1.4;
commitid	100489330121217368F;

1.4
date	2007.06.12.21.58.26;	author tg;	state Exp;
branches;
next	1.3;
commitid	100466F170341A3478B;

1.3
date	2006.06.16.21.52.53;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004493283B5D0D1060;

1.2
date	2005.03.06.21.27.26;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.27.43;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.27.43;	author tg;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Remove libsa exec.c, not used by anything anymore; all boot blocks now use
loadfile or a derivative of. (miod@@)
@
text
@# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.13 2013/08/06 17:06:26 tg Exp $
# $OpenBSD: Makefile,v 1.3 2004/07/13 21:03:39 marc Exp $

.include "${.CURDIR}/../Makefile.inc"

LIB=	sa

.PATH:	${.CURDIR}/../../../../lib/libsa
.PATH:	${.CURDIR}/../../../../lib/libkern
.PATH:	${.CURDIR}/../../../../lib/libkern/arch/sparc

S=		${.CURDIR}/../../../..
SADIR=		${.CURDIR}/..
DIR_SA=		$S/lib/libsa
DIR_KERN=	$S/lib/libkern
CPPFLAGS+=	-I$S/stand/boot -I$S/lib/libsa
CPPFLAGS+=	-D__INTERNAL_LIBSA_CREAD #-DCOMPAT_UFS
DEBUGLIBS=	No
KERNSTAND=	#defined
SMALL=		#defined

.include "${KERNBASE}/c/Makefile.inc"
.include "${KERNBASE}/z/Makefile.adler32"
.include "${KERNBASE}/z/Makefile.inc"

# Build a small zlib
CPPFLAGS+=	-DSLOW -DSMALL -DNOBYFOUR -DNO_GZIP
CPPFLAGS+=	-DDYNAMIC_CRC_TABLE -DBUILDFIXED
SRCS+=		crc32.c infback.c inffast.c inflate.c inftrees.c

CLEANFILES+=	${ZLIB_CLEANFLS}

beforedepend: ${ZLIB_GENHDRS}

# stand routines
SRCS+=	alloc.c exit.c getfile.c gets.c globals.c \
	printf.c snprintf.c strerror.c

# io routines
SRCS+=	close.c closeall.c dev.c disklabel.c dkcksum.c fstat.c ioctl.c lseek.c \
	open.c read.c stat.c write.c cread.c

# network routines
SRCS+=	arp.c ether.c in_cksum.c net.c netif.c rpc.c

# network info services
SRCS+=	bootp.c bootparam.c rarp.c

# boot filesystems
SRCS+=	ufs.c nfs.c cd9660.c ustarfs.c

${OBJS}:	${.CURDIR}/../Makefile.inc

NOPIC=	yes

install:

.include <bsd.lib.mk>
@


1.13
log
@get rid of the now useless ZLIB_CONST
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.12 2013/08/05 22:06:16 tg Exp $
d36 1
a36 1
SRCS+=	alloc.c exit.c exec.c getfile.c gets.c globals.c \
@


1.12
log
@-DZCONST=const → -DZLIB_CONST

XXX sys/conf/Makefile.inc does it twice?
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.11 2011/01/03 19:02:52 tg Exp $
a30 2
CPPFLAGS+=	-DZLIB_CONST
HOSTCPPFLAGS+=	-DZLIB_CONST
@


1.11
log
@move strchr, strrchr, strncpy to kern; remove redundant strncmp, strncasecmp protos
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.10 2010/01/16 20:56:08 tg Exp $
d31 2
a32 2
CPPFLAGS+=	-DZCONST=const
HOSTCPPFLAGS+=	-DZCONST=const
@


1.10
log
@add ustarfs to the floppy bootloader (untested)
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.9 2008/10/16 15:09:34 tg Exp $
d39 1
a39 1
	printf.c snprintf.c strerror.c strncpy.c strncmp.c
@


1.9
log
@let libsa find its headers again
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.8 2008/08/03 21:02:04 tg Exp $
d52 1
a52 1
SRCS+=	ufs.c nfs.c cd9660.c
@


1.8
log
@Hacked in the train to Zwitserland:

• new: memcpy()=bcopy()=memmove()
• new macro: __strong_alias (incidentally, TNF has exactly the same name
  and exactly (except an ‘a’ more) the same implementation)
• use __strong_alias and #ifdef lint instead of duplicate code via unifdef
  abuse
• sprinkle a few uses of _ALIGN_TEXT
• remove duplicate memmove, memcpy, bcopy and ovbcopy implementations
  from the i386 kernel
• _ALIGN_TEXT is a nop #ifdef SMALL
• remove more duplicate definitions, etc.
• remove more dead code from bootloader -D_TEST
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.7 2008/08/01 18:45:41 tg Exp $
d16 1
a16 1
CPPFLAGS+=	-I${S} -I${S}/stand/boot
@


1.7
log
@fold libkern remnants into libsa now here, too
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.6 2008/08/01 18:09:32 tg Exp $
d39 1
a39 1
	memcpy.c printf.c snprintf.c strerror.c strncpy.c strncmp.c
@


1.6
log
@more migration

(in case you wonder: goal is to make libc, kernel and bootloaders share
the code currently in libkern, (some of) libsa, and libz, and to move
the bootloaders out of src/sys/ and into some more sane place)
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.5 2008/08/01 15:47:15 tg Exp $
d9 2
d39 1
a39 1
	memcpy.c printf.c snprintf.c strerror.c strncpy.c
@


1.5
log
@switch the sparc bootloader too – untested
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.4 2007/06/12 21:58:26 tg Exp $
d37 1
a37 1
	memcmp.c memcpy.c memset.c printf.c snprintf.c strerror.c strncpy.c
@


1.4
log
@make cross-buildable (or rather buildable at all)
i386: constify a little
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.3 2006/06/16 21:52:53 tg Exp $
d14 1
a14 1
CPPFLAGS+=	-I${S} -I${S}/stand/boot -I${S}/lib -I${BSDSRCDIR}/lib/libz
d22 12
@


1.3
log
@with virtue and a cross-developing environment,
make this almost usable (not tested the result)
@
text
@d1 1
a1 1
# $MirOS: src/sys/arch/sparc/stand/libsa/Makefile,v 1.2 2005/03/06 21:27:26 tg Exp $
d4 2
d16 6
d24 1
a24 1
SRCS=	alloc.c exit.c exec.c getfile.c gets.c globals.c \
@


1.2
log
@* merge src/sys/
  (at least the better part of it)
* revert IPv6 networking to OpenBSD, since
  I didn't get IPV4_MAPPED addresses working :(
@
text
@d1 1
a1 1
# $MirOS$
d8 6
a13 4
CPPFLAGS+= -D__INTERNAL_LIBSA_CREAD -Derrno=errno \
	-I${.CURDIR} -I${.CURDIR}/../include -I${.CURDIR}/../.. \
	-I${.CURDIR}/../../.. -I${.CURDIR}/../../../.. \
	-I${.CURDIR}/../../../../lib/libsa
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.3 2004/07/13 21:03:39 marc Exp $
d8 1
a8 1
CFLAGS= -O2 -D__INTERNAL_LIBSA_CREAD -Derrno=errno \
d32 1
a32 2
NOPROFILE=
NOPIC=
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
