head	1.31;
access;
symbols
	MIRBSD_10:1.22.0.2
	MIRBSD_10_BASE:1.22
	ncurses-5_2-devel:1.18.0.2
	MIRBSD_9_BASE:1.15
	MIRBSD_8:1.10.0.2
	MIRBSD_8_BASE:1.10
	cvs-200509221800:1.1.1.2
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2019.09.29.17.57.20;	author tg;	state Exp;
branches;
next	1.30;
commitid	1005D90F0782D5AF1B7;

1.30
date	2015.10.26.21.51.15;	author tg;	state Exp;
branches;
next	1.29;
commitid	100562EA05D2E7E1817;

1.29
date	2015.10.26.21.49.46;	author tg;	state Exp;
branches;
next	1.28;
commitid	100562EA00C64D3DD8D;

1.28
date	2013.09.10.21.24.19;	author tg;	state Exp;
branches;
next	1.27;
commitid	100522F8E1B1B771E75;

1.27
date	2011.11.20.18.54.42;	author tg;	state Exp;
branches;
next	1.26;
commitid	1004EC94CC144CEC290;

1.26
date	2010.10.08.20.39.14;	author tg;	state Exp;
branches;
next	1.25;
commitid	1004CAF817A31CA43A0;

1.25
date	2010.08.14.20.53.04;	author tg;	state Exp;
branches;
next	1.24;
commitid	1004C6702403C804E92;

1.24
date	2008.12.06.18.21.52;	author tg;	state Exp;
branches;
next	1.23;
commitid	100493AC2D330E37F2A;

1.23
date	2008.09.06.22.32.00;	author tg;	state Exp;
branches;
next	1.22;
commitid	10048C304E12697A3C1;

1.22
date	2007.05.07.16.15.58;	author tg;	state Exp;
branches;
next	1.21;
commitid	100463F507166871BCE;

1.21
date	2007.05.07.15.21.17;	author tg;	state Exp;
branches;
next	1.20;
commitid	100463F43D3067E6553;

1.20
date	2007.05.07.14.06.06;	author tg;	state Exp;
branches;
next	1.19;
commitid	100463F322D3CC3A59A;

1.19
date	2006.10.28.19.07.31;	author tg;	state Exp;
branches;
next	1.18;
commitid	1004543AA865C08B5DD;

1.18
date	2006.10.02.07.41.59;	author tg;	state Exp;
branches;
next	1.17;
commitid	1004520C2D965EE04A6;

1.17
date	2006.09.29.22.10.08;	author tg;	state Exp;
branches;
next	1.16;
commitid	100451D99CE46DC0EEA;

1.16
date	2006.09.17.19.28.58;	author tg;	state Exp;
branches;
next	1.15;
commitid	100450DA20303EFF79D;

1.15
date	2006.06.09.01.23.35;	author tg;	state Exp;
branches;
next	1.14;
commitid	1004488CDA120C587B1;

1.14
date	2006.06.09.01.21.29;	author tg;	state Exp;
branches;
next	1.13;
commitid	1004488CD21330A9B3F;

1.13
date	2006.05.21.12.15.32;	author tg;	state Exp;
branches;
next	1.12;
commitid	100447059DA615790A5;

1.12
date	2006.04.19.19.30.07;	author tg;	state Exp;
branches;
next	1.11;
commitid	10044468FC819FFBA41;

1.11
date	2006.01.31.14.19.17;	author tg;	state Exp;
branches;
next	1.10;
commitid	10043DF71D85814559E;

1.10
date	2005.12.04.20.24.40;	author tg;	state Exp;
branches;
next	1.9;
commitid	1690439350885778;

1.9
date	2005.12.04.17.50.19;	author tg;	state Exp;
branches;
next	1.8;
commitid	7a7843932c649625;

1.8
date	2005.11.03.22.28.39;	author tg;	state Exp;
branches;
next	1.7;
commitid	3c95436a8f2cf83f;

1.7
date	2005.10.21.11.33.25;	author tg;	state Exp;
branches;
next	1.6;
commitid	275f4358cfde0f84;

1.6
date	2005.10.21.10.47.23;	author tg;	state Exp;
branches;
next	1.5;
commitid	9004358c73f3492;

1.5
date	2005.09.22.19.53.04;	author tg;	state Exp;
branches;
next	1.4;
commitid	c1343330b86894d;

1.4
date	2005.07.25.19.16.10;	author tg;	state Exp;
branches;
next	1.3;
commitid	59fb42e53a855a3d;

1.3
date	2005.03.29.13.09.07;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.06.19.13.40;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.24.33;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.24.33;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.21.20.52.04;	author tg;	state Exp;
branches;
next	;
commitid	560042e0092f571e;


desc
@@


1.31
log
@chown symlinks, not their targets (from OpenBSD)

also (from OpenBSD) switch to -print0 and xargs -0r,
but (not from them) use numeric perms and do dirs first
@
text
@# $MirOS: src/include/Makefile,v 1.30 2015/10/26 21:51:15 tg Exp $
# $OpenBSD: Makefile,v 1.135 2005/07/10 06:53:44 grange Exp $
# $NetBSD: Makefile,v 1.59 1996/05/15 21:36:43 jtc Exp $
# @@(#)Makefile	5.45.1.1 (Berkeley) 5/6/91

# The "rm -rf"s used below are safe because rm doesn't follow symbolic
# links.

.include <bsd.own.mk>

# Missing: mp.h
FILES=	a.out.h adler32.h ar.h assert.h bitstring.h blf.h bm.h bsd_auth.h \
	cast.h cpio.h ctype.h curses.h db.h dbm.h des.h dirent.h disktab.h \
	dlfcn.h elf_abi.h err.h fnmatch.h fstab.h fts.h ftw.h getopt.h glob.h \
	gnu-versions.h grp.h iconv.h ieeefp.h ifaddrs.h inttypes.h iso646.h \
	kvm.h langinfo.h libgen.h limits.h link.h link_aout.h link_elf.h \
	locale.h login_cap.h malloc.h math.h md4.h memory.h \
	mpool.h ndbm.h netdb.h netgroup.h nl_types.h nlist.h ohash.h \
	olf_abi.h paths.h poll.h pwd.h ranlib.h re_comp.h \
	readpassphrase.h regex.h resolv.h rmd160.h search.h setjmp.h \
	sfv.h sgtty.h sha1.h sha2.h signal.h skipjack.h stab.h stdbool.h \
	stdint.h stdio.h stdlib.h string.h strings.h struct.h \
	suma.h sysexits.h tar.h tiger.h time.h ttyent.h tzfile.h unistd.h \
	utf.h utime.h utmp.h vis.h wchar.h wctype.h whirlpool.h

MFILES=	float.h frame.h
LFILES=	errno.h fcntl.h stddef.h syslog.h termios.h stdarg.h varargs.h
KFILES=	md5.h

DIRS=	arpa protocols rpc
LDIRS=	altq crypto ddb dev isofs miscfs net netatalk netinet netinet6 \
	netipx netisdn netnatm nfs ntfs scsi sys ufs uvm

# Directories with an includes target
RDIRS=	../lib/libcompat ../lib/libedit ../lib/libevent ../lib/libexpat \
	../lib/libform ../lib/libkeynote ../lib/libmbfun ../lib/libmenu \
	../lib/libncurses ../lib/libocurses ../lib/libossaudio \
	../lib/libpanel ../lib/libpcap ../lib/libpng ../lib/libpthread \
	../lib/librpcsvc ../lib/libsectok ../lib/libskey ../lib/libssl \
	../lib/libusbhid ../lib/libutil ../lib/libz ../kern/include \
	../usr.bin/lex ../gnu/usr.sbin/sendmail

# Places using Makefile that needs a prerequisite target met before includes
PRDIRS=	../lib/libncurses ../lib/librpcsvc ../lib/libssl/crypto

NOOBJ=	yes

prereq:
	@@for i in ${PRDIRS}; do \
		echo preparing in ${.CURDIR}/$$i; \
		cd ${.CURDIR}/$$i && ${MAKE} prereq; \
	done

includes:
	@@echo installing ${LDIRS}
	@@for i in ${LDIRS}; do \
		rm -rf ${DESTDIR}/usr/include/$$i && \
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
		    ${DESTDIR}/usr/include/$$i ; \
	done
	cd ../sys; \
	pax -rw -pa -L \
	    $$(find ${LDIRS} -follow -type f -name '*.h' \
	    '!' -path 'dev/microcode/*' -print) ${DESTDIR}/usr/include
	cd ${DESTDIR}/usr/include && rm -rf ${MACHINE} ${MACHINE_ARCH} machine
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
	    ${DESTDIR}/usr/include/${MACHINE}
	cd ${.CURDIR}/../sys/arch/${MACHINE}/include/ && \
	    pax -rw -pa *.h ${DESTDIR}/usr/include/${MACHINE}/
	if [[ ${MACHINE} != ${MACHINE_ARCH} && \
	    -d ../sys/arch/${MACHINE_ARCH}/include ]]; then \
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
    	    	    ${DESTDIR}/usr/include/${MACHINE_ARCH}; \
		cd ${.CURDIR}/../sys/arch/${MACHINE_ARCH}/include && \
		    pax -rw -pa *.h ${DESTDIR}/usr/include/${MACHINE_ARCH}/; \
	fi
	ln -sf ${MACHINE} ${DESTDIR}/usr/include/machine
	@@echo installing ${FILES}
	@@for i in ${FILES}; do \
		cmp -s $$i ${DESTDIR}/usr/include/$$i || \
		    ${INSTALL} ${INSTALL_COPY} -m ${NONBINMODE} \
		    $$i ${DESTDIR}/usr/include/$$i; \
	done
	@@echo installing ${DIRS}
	@@for i in ${DIRS}; do \
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
		    ${DESTDIR}/usr/include/$$i; \
		cd ${.CURDIR}/$$i && for j in *.[ih]; do \
			cmp -s $$j ${DESTDIR}/usr/include/$$i/$$j || \
			    ${INSTALL} ${INSTALL_COPY} -m ${NONBINMODE} \
			    $$j ${DESTDIR}/usr/include/$$i/$$j; \
		done; \
	done
	@@rm -f ${DESTDIR}/usr/include/ssl && \
	    ln -sf openssl ${DESTDIR}/usr/include/ssl
	@@rm -f ${DESTDIR}/usr/include/MirBSD && \
	    ln -sf . ${DESTDIR}/usr/include/MirBSD
	@@echo installing ${KFILES}
	@@for i in ${KFILES}; do \
		rm -f ${DESTDIR}/usr/include/$$i && \
		ln -s syskern/$$i ${DESTDIR}/usr/include/$$i; \
	done
	@@echo installing ${LFILES}
	@@for i in ${LFILES}; do \
		rm -f ${DESTDIR}/usr/include/$$i && \
		ln -s sys/$$i ${DESTDIR}/usr/include/$$i; \
	done
	@@echo installing ${MFILES}
	@@for i in ${MFILES}; do \
		rm -f ${DESTDIR}/usr/include/$$i && \
		ln -s machine/$$i ${DESTDIR}/usr/include/$$i; \
	done
	@@for i in ${RDIRS}; do \
		echo installing in ${.CURDIR}/$$i; \
		cd ${.CURDIR}/$$i && ${MAKE} includes; \
	done
	chown -RP ${BINOWN}:${BINGRP} ${DESTDIR}/usr/include
	find ${DESTDIR}/usr/include -type d -print0 | xargs -0r chmod 755
	find ${DESTDIR}/usr/include -type f -print0 | xargs -0r chmod 444

.PHONY: prereq includes
.include <bsd.prog.mk>
@


1.30
log
@ship a /usr/include/MirBSD → . symlink so we can #include <MirBSD/md5.h>
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.28 2013/09/10 21:24:19 tg Exp $
d117 3
a119 3
	chown -R ${BINOWN}:${BINGRP} ${DESTDIR}/usr/include
	find ${DESTDIR}/usr/include -type f | xargs chmod a=r
	find ${DESTDIR}/usr/include -type d | xargs chmod u=rwx,go=rx
@


1.29
log
@fixup some rather moronic/backwards code
@
text
@d96 2
@


1.28
log
@move <stddef.h> to <sys/stddef.h>
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.27 2011/11/20 18:54:42 tg Exp $
d68 4
a71 5
	pax -rw -pa -s "|\.\./sys/arch/${MACHINE}/include||" \
	    ../sys/arch/${MACHINE}/include/*.h \
	    ${DESTDIR}/usr/include/${MACHINE}
	if test ${MACHINE} != ${MACHINE_ARCH} -a \
	    -d ../sys/arch/${MACHINE_ARCH}/include; then \
d74 2
a75 3
		pax -rw -pa -s "|\.\./sys/arch/${MACHINE_ARCH}/include||" \
		    ../sys/arch/${MACHINE_ARCH}/include/*.h \
		    ${DESTDIR}/usr/include/${MACHINE_ARCH}; \
@


1.27
log
@• use common <syskern/md5.h> with /usr/include/md5.h@@ for userspace compat
• switch kernel <crypto/md5.h> users to <syskern/md5.h>
• fix underestimated __attribute__((__bounded__ …)) argument
• this is an interface definition and as such not copyrightable
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.26 2010/10/08 20:39:14 tg Exp $
d22 1
a22 1
	stddef.h stdint.h stdio.h stdlib.h string.h strings.h struct.h \
d27 1
a27 1
LFILES=	errno.h fcntl.h syslog.h termios.h stdarg.h varargs.h
@


1.26
log
@oh well, it’s unbelievable how deep we sink with this abomination, but…
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.25 2010/08/14 20:53:04 tg Exp $
d17 1
a17 1
	locale.h login_cap.h malloc.h math.h md4.h md5.h memory.h \
d28 1
d98 5
@


1.25
log
@new library for all those pesky functions like cdblockedread() or
my arc4random extensions or ambstowcs(3) or whatever other MirBSD
specific functions we provide – this way, they can be shared on a
crunchgen(1)d executable (such as ramdisks’ instbin) but need not
affect libc or other shared libraries’ versions

XXX manpages ought to still be mandated
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.24 2008/12/06 18:21:52 tg Exp $
d14 3
a16 3
	dlfcn.h elf_abi.h err.h fnmatch.h fstab.h fts.h ftw.h getopt.h \
	glob.h grp.h iconv.h ieeefp.h ifaddrs.h inttypes.h iso646.h kvm.h \
	langinfo.h libgen.h limits.h link.h link_aout.h link_elf.h \
@


1.24
log
@static file lists are pathetic
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.23 2008/09/06 22:32:00 tg Exp $
d35 6
a40 5
	../lib/libform ../lib/libkeynote ../lib/libmenu ../lib/libncurses \
	../lib/libocurses ../lib/libossaudio ../lib/libpanel ../lib/libpcap \
	../lib/libpng ../lib/libpthread ../lib/librpcsvc ../lib/libsectok \
	../lib/libskey ../lib/libssl ../lib/libusbhid ../lib/libutil \
	../lib/libz ../kern/include ../usr.bin/lex ../gnu/usr.sbin/sendmail
@


1.23
log
@install libckern.h and change path so that LKMs can be built with
an empty /usr/src (tested with kqemu)
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.22 2007/05/07 16:15:58 tg Exp $
d24 1
a24 1
	utime.h utmp.h vis.h wchar.h wctype.h whirlpool.h
@


1.22
log
@• make HASH API functions for ADLER32 in libc, too (size-optimised but no asm)
• cross-reference them all in the man pages
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.21 2007/05/07 15:21:17 tg Exp $
d39 1
a39 1
	../lib/libz ../usr.bin/lex ../gnu/usr.sbin/sendmail
@


1.21
log
@add suma and sfv hashes in the standard format, too
(can't do adler32 that easily for now, later; sum/cksum/sysvsum differ, never)
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.20 2007/05/07 14:06:06 tg Exp $
d12 2
a13 2
FILES=	a.out.h ar.h assert.h bitstring.h blf.h bm.h bsd_auth.h cast.h \
	cpio.h ctype.h curses.h db.h dbm.h des.h dirent.h disktab.h \
@


1.20
log
@introduce the whirlpool hash function (finally!)
code taken from TNF pkgsrc® pkgtools/digest tool
actual source is the public domain reference implementation

XXX test this on big-endian platforms
XXX adjust mirmake

this libc addition rides on yesterday's minor bump
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.19 2006/10/28 19:07:31 tg Exp $
d21 1
a21 1
	sgtty.h sha1.h sha2.h signal.h skipjack.h stab.h stdbool.h \
d23 2
a24 2
	sysexits.h tar.h tiger.h time.h ttyent.h tzfile.h unistd.h utime.h \
	utmp.h vis.h wchar.h wctype.h whirlpool.h
@


1.19
log
@switch to libncurses (for now)
agreed bsiegert@@

ncurses/Makefile: also install HTML docs

switched: libform libmenu libpanel and a few progs, lynx
not switched: tset/clear (but modernised), we use obsd code here
fixed: window
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.18 2006/10/02 07:41:59 tg Exp $
d24 1
a24 1
	utmp.h vis.h wchar.h wctype.h
@


1.18
log
@unbreak after last
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.17 2006/09/29 22:10:08 tg Exp $
d34 6
a39 7
RDIRS=	../lib/libcompat ../lib/libcurses ../lib/libedit \
	../lib/libevent ../lib/libexpat ../lib/libform ../lib/libkeynote \
	../lib/libmenu ../lib/libocurses ../lib/libossaudio ../lib/libpanel \
	../lib/libpcap ../lib/libpng ../lib/libpthread ../lib/librpcsvc \
	../lib/libsectok ../lib/libskey ../lib/libssl ../lib/libusbhid \
	../lib/libutil ../lib/libz \
	../usr.bin/lex ../gnu/usr.sbin/sendmail
d42 1
a42 1
PRDIRS=	../lib/librpcsvc ../lib/libssl/crypto
@


1.17
log
@nuke SYS_INCLUDE for good, we always do copies
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.16 2006/09/17 19:28:58 tg Exp $
d54 25
a114 27
includes:
	@@echo copies: ${LDIRS}
	@@for i in ${LDIRS}; do \
		rm -rf ${DESTDIR}/usr/include/$$i && \
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
		    ${DESTDIR}/usr/include/$$i ; \
	done
	cd ../sys; \
	pax -rw -pa -L \
	    $$(find ${LDIRS} -follow -type f -name '*.h' \
	    '!' -path 'dev/microcode/*' -print) ${DESTDIR}/usr/include
	cd ${DESTDIR}/usr/include && rm -rf ${MACHINE} ${MACHINE_ARCH} machine
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
	    ${DESTDIR}/usr/include/${MACHINE}
	pax -rw -pa -s "|\.\./sys/arch/${MACHINE}/include||" \
	    ../sys/arch/${MACHINE}/include/*.h \
	    ${DESTDIR}/usr/include/${MACHINE}
	if test ${MACHINE} != ${MACHINE_ARCH} -a \
	    -d ../sys/arch/${MACHINE_ARCH}/include; then \
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
    	    	    ${DESTDIR}/usr/include/${MACHINE_ARCH}; \
		pax -rw -pa -s "|\.\./sys/arch/${MACHINE_ARCH}/include||" \
		    ../sys/arch/${MACHINE_ARCH}/include/*.h \
		    ${DESTDIR}/usr/include/${MACHINE_ARCH}; \
	fi
	ln -sf ${MACHINE} ${DESTDIR}/usr/include/machine

@


1.16
log
@add the SFV (from cksfv) and TIGER hashes
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.15 2006/06/09 01:23:35 tg Exp $
a46 2
# Change SYS_INCLUDE in bsd.own.mk to "symlinks" if you don't want copies

d90 1
a90 1
copies:
d117 1
a117 18
symlinks:
	@@echo symlinks: ${LDIRS}
	@@for i in ${LDIRS}; do \
		rm -rf ${DESTDIR}/usr/include/$$i && \
		ln -s /sys/$$i ${DESTDIR}/usr/include/$$i; \
	done
	cd ${DESTDIR}/usr/include && rm -rf ${MACHINE} ${MACHINE_ARCH} machine
	ln -s /sys/arch/${MACHINE}/include ${DESTDIR}/usr/include/${MACHINE}
	if test ${MACHINE} != ${MACHINE_ARCH} -a \
	    -d ../sys/arch/${MACHINE_ARCH}/include ; then \
		ln -s /sys/arch/${MACHINE_ARCH}/include \
		    ${DESTDIR}/usr/include/${MACHINE_ARCH} ; \
	fi
	ln -sf ${MACHINE} ${DESTDIR}/usr/include/machine

includes: ${SYS_INCLUDE}

.PHONY: prereq includes copies symlink
@


1.15
log
@none of our arches has an includes: target in sys
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.14 2006/06/09 01:21:29 tg Exp $
d23 1
a23 1
	sysexits.h tar.h time.h ttyent.h tzfile.h unistd.h utime.h \
@


1.14
log
@* Makefile: allow re-start of failed builds
* include/Makefile: libcdk is no more
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.13 2006/05/21 12:15:32 tg Exp $
d40 1
a40 2
	../usr.bin/lex ../gnu/usr.sbin/sendmail \
	../sys/arch/${MACHINE}
d43 1
a43 1
PRDIRS=	../lib/librpcsvc ../lib/libssl/crypto ../sys/arch/${MACHINE}/stand
@


1.13
log
@* "#ifdef notyet" out stuff we do not yet have (the functions
  which we have currently are singlebyte stubs), like wchar.h
* install wctype.h again
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.12 2006/04/19 19:30:07 tg Exp $
d34 1
a34 1
RDIRS=	../lib/libcdk ../lib/libcompat ../lib/libcurses ../lib/libedit \
d44 1
a44 2
PRDIRS=	../lib/libcdk ../lib/librpcsvc ../lib/libssl/crypto \
	../sys/arch/${MACHINE}/stand
@


1.12
log
@fix /usr/include/openssl/openssl -> openssl link showing up sometimes
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.11 2006/01/31 14:19:17 tg Exp $
d24 1
a24 1
	utmp.h vis.h wchar.h #wctype.h
@


1.11
log
@In the hope that bsiegert@@ won't entirely kill me...
add an OpenGroup compliant and GNU libiconv compatible
header file exposing the iconv_t type and iconv(3) interface
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.10 2005/12/04 20:24:40 tg Exp $
d74 2
a75 1
	@@ln -sf openssl ${DESTDIR}/usr/include/ssl
@


1.10
log
@don't install <wctype.h> for now, since the supporting code is missing...
and some GNU code jumps to unexpected conclusions this way
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.9 2005/12/04 17:50:19 tg Exp $
d15 1
a15 1
	glob.h grp.h ieeefp.h ifaddrs.h inttypes.h iso646.h kvm.h \
@


1.9
log
@make make include include under systrace
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.8 2005/11/03 22:28:39 tg Exp $
d24 1
a24 1
	utmp.h vis.h wchar.h wctype.h
@


1.8
log
@Descend into libexpat
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.7 2005/10/21 11:33:25 tg Exp $
d44 2
a45 1
PRDIRS=	../lib/libcdk ../lib/librpcsvc ../lib/libssl/crypto
a84 3
	chown -R ${BINOWN}:${BINGRP} ${DESTDIR}/usr/include
	find ${DESTDIR}/usr/include -type f | xargs chmod a=r
	find ${DESTDIR}/usr/include -type d | xargs chmod u=rwx,go=rx
d89 3
d118 1
a118 1
	ln -sf ${MACHINE} ${DESTDIR}/usr/include/machine; \
@


1.7
log
@* un-hook bin/ksh, usr.bin/xmlwf and lib/libexpat from the build
  - expat as discussed with bsiegert@@ today on the phone
  - ksh as announced earlier on the lists
* un-hook lib/libexpat from make includes
* remove /usr/include/{,open}ssl upgrade workaround from includes/Makefile
* nuke old bin/ksh
* nuke libexpat and xmlwf
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.6 2005/10/21 10:47:23 tg Exp $
d35 1
a35 1
	../lib/libevent ../lib/libform ../lib/libkeynote \
@


1.6
log
@remove an obsolete OpenBSD reference
(XXX this rm shouldn't be needed any more anyway)
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.5 2005/09/22 19:53:04 tg Exp $
d35 1
a35 1
	../lib/libevent ../lib/libexpat ../lib/libform ../lib/libkeynote \
a72 2
	@@rm -rf ${DESTDIR}/usr/include/openssl ${DESTDIR}/usr/include/ssl
	@@mkdir ${DESTDIR}/usr/include/openssl
@


1.5
log
@first attempt at merging internationalisation frameworks
(Citrix, Bruno Haible's libutf8, SUSv3, my own) into MirOS

The API should(tm) match POSIX, but has no __attribute__
checks (nonnull, format, ...) yet
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.4 2005/07/25 19:16:10 tg Exp $
d73 1
a73 3
	@@rm -rf ${DESTDIR}/usr/include/openssl ${DESTDIR}/usr/include/ssl \
		${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd/ssl \
		${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd/openssl
@


1.4
log
@merge src/include
TODO: wchar stuff
@
text
@d1 1
a1 1
# $MirOS: src/include/Makefile,v 1.3 2005/03/29 13:09:07 tg Exp $
d24 1
a24 2
	utmp.h vis.h
#	wchar.h wctype.h
@


1.3
log
@fallout
@
text
@d1 2
a2 2
# $MirOS: src/include/Makefile,v 1.2 2005/03/06 19:13:40 tg Exp $
# $OpenBSD: Makefile,v 1.126 2004/05/17 22:11:32 drahn Exp $
d25 1
d61 2
a62 1
		    ${INSTALL} ${INSTALL_COPY} -m 444 $$i ${DESTDIR}/usr/include/$$i; \
d66 2
a67 2
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m 755 \
			${DESTDIR}/usr/include/$$i; \
d70 2
a71 1
			${INSTALL} ${INSTALL_COPY} -m 444 $$j ${DESTDIR}/usr/include/$$i/$$j; \
d90 2
a91 4
	find ${DESTDIR}/usr/include -type f | \
		xargs chmod a=r
	find ${DESTDIR}/usr/include -type d | \
		xargs chmod u=rwx,go=rx
d101 2
a102 2
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m 755 \
			${DESTDIR}/usr/include/$$i ; \
d109 2
a110 2
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m 755 \
		${DESTDIR}/usr/include/${MACHINE}
d116 1
a116 1
		${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m 755 \
@


1.2
log
@merge src/include
@
text
@d1 1
a1 1
# $MirOS$
d39 1
a39 1
	../lib/libutil ../lib/libwrap ../lib/libz \
@


1.1
log
@Initial revision
@
text
@d1 4
a4 2
#	$OpenBSD: Makefile,v 1.126 2004/05/17 22:11:32 drahn Exp $
#	$NetBSD: Makefile,v 1.59 1996/05/15 21:36:43 jtc Exp $
d6 1
a6 3
#	@@(#)Makefile	5.45.1.1 (Berkeley) 5/6/91

# The ``rm -rf''s used below are safe because rm doesn't follow symbolic
a8 1

a9 1
USE_GCC3?=No
d15 5
a19 4
	glob.h grp.h ifaddrs.h inttypes.h iso646.h kvm.h langinfo.h \
	libgen.h limits.h locale.h login_cap.h malloc.h math.h md4.h \
	md5.h memory.h mpool.h ndbm.h netdb.h netgroup.h nlist.h nl_types.h \
	ohash.h olf_abi.h paths.h poll.h pwd.h ranlib.h re_comp.h \
d21 4
a24 5
	sgtty.h sha1.h sha2.h skipjack.h signal.h stab.h stdbool.h stddef.h \
	stdio.h stdlib.h string.h strings.h struct.h sysexits.h tar.h \
	time.h ttyent.h tzfile.h unistd.h utime.h utmp.h vis.h

FILES+=	link.h link_aout.h link_elf.h
d26 1
a26 5
.if (${MACHINE_ARCH} != "vax")
FILES+= ieeefp.h
.endif

MFILES=	float.h frame.h 
d29 3
a31 3
DIRS=	arpa protocols rpc rpcsvc
LDIRS=	crypto ddb dev isofs miscfs net netatalk netccitt netinet altq \
	netinet6 netipx netiso netnatm netns nfs scsi sys ufs uvm xfs
d34 7
a40 7
RDIRS=	../lib/libpthread ../lib/libcompat ../lib/libcurses \
	../lib/libcurses++ ../lib/libform ../lib/libssl ../lib/libmenu \
	../lib/libocurses ../lib/libossaudio ../lib/libpanel ../lib/librpcsvc \
	../lib/libskey ../lib/libsectok ../lib/libedit ../lib/libpcap \
	../lib/libutil ../lib/libusbhid ../lib/libwrap ../lib/libz \
	../lib/libkeynote ../lib/libevent \
	../usr.bin/lex ../gnu/lib/libreadline \
d44 1
a44 4
PRDIRS=

# Directories with an includes target that use Makefile.bsd-wrapper
WDIRS=	../usr.sbin/httpd ../gnu/usr.bin/binutils
d46 1
a46 15
# Places using Makefile.bsd-wrapper that needs a prerequisite target met
# before includes
PWDIRS=	../usr.sbin/httpd ../gnu/usr.bin/binutils

.if ${USE_GCC3:L} == "yes"
WDIRS+= ../gnu/lib/libstdc++ ../gnu/usr.bin/gcc ../gnu/lib/libobjc \
	../gnu/lib/libf2c
PWDIRS+= ../gnu/lib/libstdc++ ../gnu/lib/libf2c
.else
WDIRS+= ../gnu/egcs/libio ../gnu/egcs/libstdc++ \
	../gnu/egcs/libf2c ../gnu/egcs/libobjc ../gnu/egcs/gcc
PWDIRS+= ../gnu/egcs/libf2c
.endif

NOOBJ=	noobj
a48 4
SYS_INCLUDE?=	copies
.if ${KERBEROS5:L} == "yes"
RDIRS+= ../lib/libkrb5 ../lib/libgssapi ../lib/libkadm5srv
.endif
a54 4
	@@for i in ${PWDIRS}; do \
		echo preparing in ${.CURDIR}/$$i; \
		cd ${.CURDIR}/$$i && ${MAKE} -f Makefile.bsd-wrapper prereq; \
	done
a94 4
	@@for i in ${WDIRS}; do \
		echo installing in ${.CURDIR}/$$i; \
		cd ${.CURDIR}/$$i && ${MAKE} -f Makefile.bsd-wrapper includes; \
	done
d105 2
a106 2
	    `find ${LDIRS} -follow -type f -name '*.h' \
	    '!' -path 'dev/microcode/*' -print` ${DESTDIR}/usr/include
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import almost everything (no ancontrol, ifconfig, pfctl, wicontrol)
of (the undeleted parts of) OpenBSD-current's userland of about 3 hours ago.
Warning: this introduces major breakage!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.135 2005/07/10 06:53:44 grange Exp $
d24 1
a24 2
	time.h ttyent.h tzfile.h unistd.h utime.h utmp.h vis.h \
	wchar.h wctype.h
d36 2
a37 2
LDIRS=	crypto ddb dev isofs miscfs net netatalk netinet altq \
	netinet6 netipx netnatm net80211 netbt nfs scsi sys ufs uvm xfs
d41 1
a41 1
	../lib/libform ../lib/libssl ../lib/libmenu \
d45 2
a46 2
	../lib/libkeynote ../lib/libevent ../usr.bin/lex \
	../gnu/lib/libreadline ../gnu/usr.sbin/sendmail/libmilter \
d65 1
a65 1
	../gnu/egcs/libf2c ../gnu/lib/libobjc ../gnu/egcs/gcc
@

