head	1.3;
access;
symbols;
locks; strict;
comment	@ * @;


1.3
date	2014.11.30.21.30.55;	author tg;	state dead;
branches;
next	1.2;
commitid	100547B8BEB4A8A38F2;

1.2
date	2014.11.30.02.39.08;	author tg;	state Exp;
branches;
next	1.1;
commitid	100547A835B35D7584C;

1.1
date	2013.09.10.17.38.33;	author tg;	state Exp;
branches;
next	;
commitid	100522F591E5F5DCD75;


desc
@@


1.3
log
@• timingsafe_memcmp is not the same as timingsafe_bcmp, remove
• remove timingsafe_bcmp from libkern
• (re-)add timingsafe_bcmp and timingsafe_memcmp to libc
• update omalloc
• newly add reallocarray to libc
• add strnlen to libc, fix strndup to not read beyond size with that
• update manpages and add MLINKS: strndup, strnlen, timingsafe_*cmp
@
text
@/*	$OpenBSD: timingsafe_bcmp.c,v 1.1 2010/07/20 15:28:44 matthew Exp $	*/
/*
 * Copyright (c) 2010 Damien Miller.  All rights reserved.
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

#include <libckern.h>

__RCSID("$MirOS: src/kern/c/timingsafe_bcmp.c,v 1.2 2014/11/30 02:39:08 tg Exp $");

int
timingsafe_bcmp(const void *b1, const void *b2, size_t n)
{
	const unsigned char *p1 = b1, *p2 = b2;
	int ret = 0;

	for (; n > 0; n--)
		ret |= *p1++ ^ *p2++;
	return (ret != 0);
}

#ifdef lint
char *
timingsafe_memcmp(const void *b1, const void *b2, size_t n)
{
	return (timingsafe_bcmp(b1, b2, n));
}
#else
__strong_alias(timingsafe_memcmp, timingsafe_bcmp);
#endif /* lint */
@


1.2
log
@OpenBSD has timingsafe_memcmp now too… whatever for…
@
text
@d20 1
a20 1
__RCSID("$MirOS: src/kern/c/timingsafe_bcmp.c,v 1.1 2013/09/10 17:38:33 tg Exp $");
@


1.1
log
@constant-time memory buffer comparison, for cryptographic use, from OpenBSD
@
text
@d20 1
a20 1
__RCSID("$MirOS: src/kern/c/explicit_bzero.c,v 1.2 2011/07/17 20:39:26 tg Exp $");
d32 10
@

