head	1.6;
access;
symbols
	MIRBSD_10:1.5.0.2
	MIRBSD_10_BASE:1.5
	MIRBSD_9_BASE:1.4
	MIRBSD_8:1.4.0.2
	MIRBSD_8_BASE:1.4
	cvs-200509212000:1.1.1.3
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2009.11.09.21.30.49;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004AF88A0F18F30769;

1.5
date	2007.02.05.20.16.12;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045C78FD963274EDA;

1.4
date	2005.09.22.20.40.02;	author tg;	state Exp;
branches;
next	1.3;
commitid	2258433316aba805;

1.3
date	2005.07.09.13.23.31;	author tg;	state Exp;
branches;
next	1.2;
commitid	156f42cfcfe741cc;

1.2
date	2005.03.06.20.28.42;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.24.46;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.24.46;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.09.13.04.57;	author tg;	state Exp;
branches;
next	1.1.1.3;
commitid	500642cfcb8db32b;

1.1.1.3
date	2005.09.21.20.34.22;	author tg;	state Exp;
branches;
next	;
commitid	20cd4331c3c732a2;


desc
@@


1.6
log
@fix __CRAZY=Yes build (or work around bugs we canâ€™t fix atm)
@
text
@# $MirOS: src/lib/libc/net/Makefile.inc,v 1.5 2007/02/05 20:16:12 tg Exp $
# $OpenBSD: Makefile.inc,v 1.41 2005/08/06 20:30:03 espie Exp $

# net sources
.PATH: ${LIBCSRCDIR}/arch/${MACHINE_ARCH}/net ${LIBCSRCDIR}/net

CPPFLAGS+= -DRESOLVSORT

SRCS+=	base64.c freeaddrinfo.c gai_strerror.c getaddrinfo.c gethostnamadr.c \
	getifaddrs.c getnameinfo.c getnetbyaddr.c getnetbyname.c getnetent.c \
	getnetnamadr.c getproto.c getprotoent.c getprotoname.c \
	getservbyname.c getservbyport.c getservent.c getrrsetbyname.c \
	herror.c if_indextoname.c if_nameindex.c if_nametoindex.c inet_addr.c \
	inet_lnaof.c inet_makeaddr.c inet_neta.c inet_netof.c inet_network.c \
	inet_net_ntop.c inet_net_pton.c inet_ntoa.c inet_ntop.c inet_pton.c \
	ipx_addr.c ipx_ntoa.c linkaddr.c net_addrcmp.c \
	rcmd.c rresvport.c recv.c res_comp.c res_data.c res_debug.c \
	res_debug_syms.c \
	res_init.c res_mkquery.c res_query.c res_random.c res_send.c send.c \
	sethostent.c ethers.c rcmdsh.c

# IPv6
SRCS+=	ip6opt.c rthdr.c vars6.c

# for now...
.ifdef __CRAZY
CFLAGS_getaddrinfo.o+= -Wno-error
CFLAGS_gethostnamadr.o+= -Wno-error
CFLAGS_getnameinfo.o+= -Wno-error
CFLAGS_herror.o+= -Wno-cast-qual
CFLAGS_linkaddr.o+= -Wno-cast-qual
CFLAGS_rcmd.o+= -Wno-cast-qual
CFLAGS_res_debug.o+= -Wno-error
CFLAGS_res_debug_syms.o+= -Wno-error
CFLAGS_res_init.o+= -Wno-error
CFLAGS_res_mkquery.o+= -Wno-error
CFLAGS_res_query.o+= -Wno-error
CFLAGS_res_send.o+= -Wno-error
CFLAGS_rcmdsh.o+= -Wno-error
CFLAGS_rthdr.o+= -Wno-error
CFLAGS_ip6opt.o+= -Wno-error
.endif

MAN+=	byteorder.3 ethers.3 gai_strerror.3 getaddrinfo.3 gethostbyname.3 \
	getifaddrs.3 getnameinfo.3 getnetent.3 getprotoent.3 \
	getrrsetbyname.3 getservent.3 if_indextoname.3 inet.3 \
	inet_net.3 inet6_option_space.3 inet6_rthdr_space.3 \
	ipx.3 link_addr.3 net_addrcmp.3 \
	rcmd.3 rcmdsh.3 resolver.3

MLINKS+=byteorder.3 htonl.3 byteorder.3 htons.3 byteorder.3 ntohl.3 \
	byteorder.3 ntohs.3 byteorder.3 htobe16.3 byteorder.3 htobe32.3 \
	byteorder.3 htobe64.3 byteorder.3 betoh16.3 byteorder.3 betoh32.3 \
	byteorder.3 betoh64.3 byteorder.3 htole16.3 byteorder.3 htole32.3 \
	byteorder.3 htole64.3 byteorder.3 letoh16.3 byteorder.3 letoh32.3 \
	byteorder.3 letoh64.3 byteorder.3 swap16.3 byteorder.3 swap32.3 \
	byteorder.3 swap64.3
MLINKS+=ethers.3 ether_aton.3 ethers.3 ether_hostton.3 ethers.3 ether_line.3 \
	ethers.3 ether_ntoa.3 ethers.3 ether_ntohost.3 ethers.3 ether_addr.3
MLINKS+=getaddrinfo.3 freeaddrinfo.3
MLINKS+=gethostbyname.3 endhostent.3 gethostbyname.3 gethostbyaddr.3 \
	gethostbyname.3 sethostent.3 gethostbyname.3 gethostent.3 \
	gethostbyname.3 herror.3 gethostbyname.3 gethostbyname2.3 \
	gethostbyname.3 hstrerror.3
MLINKS+=getifaddrs.3 freeifaddrs.3
MLINKS+=getnetent.3 endnetent.3 getnetent.3 getnetbyaddr.3 \
	getnetent.3 getnetbyname.3 getnetent.3 setnetent.3
MLINKS+=getprotoent.3 endprotoent.3 getprotoent.3 getprotobyname.3 \
	getprotoent.3 getprotobynumber.3 getprotoent.3 setprotoent.3 \
	getprotoent.3 getprotoent_r.3 getprotoent.3 getprotobyname_r.3 \
	getprotoent.3 getprotobynumber_r.3 getprotoent.3 setprotoent_r.3 \
	getprotoent.3 endprotoent_r.3
MLINKS+=getservent.3 endservent.3 getservent.3 getservbyname.3 \
	getservent.3 getservbyport.3 getservent.3 setservent.3 \
	getservent.3 getservent_r.3 getservent.3 getservbyname_r.3 \
	getservent.3 getservbyport_r.3 setservent.3 setservent_r.3 \
	setservent.3 endservent_r.3
MLINKS+= if_indextoname.3 if_nametoindex.3 if_indextoname.3 if_nameindex.3 \
	if_indextoname.3 if_freenameindex.3
MLINKS+=inet.3 addr.3 inet.3 inet_addr.3 inet.3 inet_aton.3 \
	inet.3 inet_lnaof.3 inet.3 inet_makeaddr.3 inet.3 inet_netof.3 \
	inet.3 inet_network.3 inet.3 inet_ntoa.3 inet.3 network.3 \
	inet.3 ntoa.3 inet.3 inet_ntop.3 inet.3 inet_pton.3
MLINKS+=inet_net.3 inet_net_ntop.3 inet_net.3 inet_net_pton.3
MLINKS+=link_addr.3 link_ntoa.3
MLINKS+=ipx.3 ipx_addr.3 ipx.3 ipx_ntoa.3
MLINKS+=rcmd.3 iruserok.3 rcmd.3 rresvport.3 rcmd.3 ruserok.3 \
	rcmd.3 rresvport_af.3 rcmd.3 rcmd_af.3 rcmd.3 iruserok_sa.3
MLINKS+=resolver.3 dn_comp.3 resolver.3 dn_expand.3 resolver.3 res_init.3 \
	resolver.3 res_mkquery.3 resolver.3 res_send.3 resolver.3 res_query.3 \
	resolver.3 res_search.3
MLINKS+=getrrsetbyname.3 freerrset.3
MLINKS+=inet6_option_space.3 inet6_option_init.3 \
	inet6_option_space.3 inet6_option_append.3 \
	inet6_option_space.3 inet6_option_alloc.3 \
	inet6_option_space.3 inet6_option_next.3 \
	inet6_option_space.3 inet6_option_find.3
MLINKS+=inet6_rthdr_space.3 inet6_rthdr_init.3 \
	inet6_rthdr_space.3 inet6_rthdr_add.3 \
	inet6_rthdr_space.3 inet6_rthdr_lasthop.3 \
	inet6_rthdr_space.3 inet6_rthdr_reverse.3 \
	inet6_rthdr_space.3 inet6_rthdr_segments.3 \
	inet6_rthdr_space.3 inet6_rthdr_getaddr.3 \
	inet6_rthdr_space.3 inet6_rthdr_getflags.3
@


1.5
log
@proof-of-concept implementation of a few functions for the
new "kern" directory containing stuff shared between
* userland (-fhosted -lgcc)
* kernel (-ffreestanding -D_KERNEL -nostdlib)
* bootloader (-ffreestanding -D_STANDALONE -nostdlib)

Here, userland and kernel share some functions not for the
bootloader (e.g. utf-8 stuff), while kernel and bootloader
share a few libgcc replacement functions.

I took the htonl() &c. functions because they were pretty
easy to implement; no sparc assembly version because it's
a 'no-op' and I trust gcc so much as to produce optimised
output for the type foo(type x) { return (x); } case.

Not tested.

Most of the functions will be written "on demand" and re-
written from scratch by me.
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/net/Makefile.inc,v 1.4 2005/09/22 20:40:02 tg Exp $
d25 19
@


1.4
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/net/Makefile.inc,v 1.3 2005/07/09 13:23:31 tg Exp $
a24 6
# machine-dependent net sources
# m-d Makefile.inc must include sources for:
#	htonl() htons() ntohl() ntohs()

.include "${LIBCSRCDIR}/arch/${MACHINE_ARCH}/net/Makefile.inc"

@


1.3
log
@merge
@
text
@d1 2
a2 2
# $MirOS: src/lib/libc/net/Makefile.inc,v 1.2 2005/03/06 20:28:42 tg Exp $
# $OpenBSD: Makefile.inc,v 1.40 2005/06/17 20:36:16 henning Exp $
d18 1
@


1.2
log
@merge src/lib
@
text
@d1 2
a2 2
# $MirOS$
# $OpenBSD: Makefile.inc,v 1.39 2005/01/06 04:24:14 itojun Exp $
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile.inc,v 1.39 2005/01/06 04:24:14 itojun Exp $
d7 1
a7 1
CFLAGS+=-DRESOLVSORT
d16 1
a16 3
	ipx_addr.c ipx_ntoa.c linkaddr.c ns_addr.c ns_ntoa.c \
	nsap_addr.c \
	net_addrcmp.c \
d34 1
a34 1
	ipx.3 link_addr.3 net_addrcmp.3 ns.3 \
a72 1
MLINKS+=ns.3 ns_addr.3 ns.3 ns_ntoa.3
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@sync resolver code with OpenBSD (better)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.40 2005/06/17 20:36:16 henning Exp $
d15 3
a17 1
	ipx_addr.c ipx_ntoa.c linkaddr.c net_addrcmp.c nsap_addr.c \
d35 1
a35 1
	ipx.3 link_addr.3 net_addrcmp.3 \
d74 1
@


1.1.1.3
log
@Import OpenBSD's libc as of today, minus some of the locale stuff,
and with brk malloc instead of mmap malloc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.41 2005/08/06 20:30:03 espie Exp $
a16 1
	res_debug_syms.c \
@


