head	1.2;
access;
symbols
	MIRBSD_10:1.2.0.2
	MIRBSD_10_BASE:1.2
	MIRBSD_9_BASE:1.1.1.3
	MIRBSD_8:1.1.1.3.0.2
	MIRBSD_8_BASE:1.1.1.3
	cvs-200509212000:1.1.1.3
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@.\" @;


1.2
date	2006.07.04.21.38.13;	author tg;	state Exp;
branches;
next	1.1;
commitid	10044AADFD122F51E6C;

1.1
date	2005.02.05.17.24.55;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.24.55;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.21.20.53.03;	author tg;	state Exp;
branches;
next	1.1.1.3;
commitid	560042e0092f571e;

1.1.1.3
date	2005.09.21.20.34.27;	author tg;	state Exp;
branches;
next	;
commitid	20cd4331c3c732a2;


desc
@@


1.2
log
@make unsetenv(3) SUSv3-conforming
found by Frank Denis
@
text
@.\" Copyright (c) 1988, 1991, 1993
.\"    The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" the American National Standards Committee X3, on Information
.\" Processing Systems.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	$OpenBSD: getenv.3,v 1.11 2005/07/26 04:20:23 jaredy Exp $
.\"
.Dd December 11, 1993
.Dt GETENV 3
.Os
.Sh NAME
.Nm getenv ,
.Nm putenv ,
.Nm setenv ,
.Nm unsetenv
.Nd environment variable functions
.Sh SYNOPSIS
.Fd #include <stdlib.h>
.Ft char *
.Fn getenv "const char *name"
.Ft int
.Fn setenv "const char *name" "const char *value" "int overwrite"
.Ft int
.Fn putenv "const char *string"
.Ft int
.Fn unsetenv "const char *name"
.Sh DESCRIPTION
These functions set, unset, and fetch environment variables from the host
.Em environment list .
For compatibility with differing environment conventions, the given arguments
.Fa name
and
.Fa value
may be appended and prepended, respectively, with an equal sign
.Dq Li \&= .
.Pp
The
.Fn getenv
function obtains the current value of the environment variable
.Fa name .
If the variable
.Fa name
is not in the current environment, a null pointer is returned.
.Pp
The
.Fn setenv
function inserts or resets the environment variable
.Fa name
in the current environment list.
If the variable
.Fa name
does not exist in the list, it is inserted with the given
.Fa value .
If the variable does exist, the argument
.Fa overwrite
is tested; if
.Fa overwrite
is zero, the variable is not reset, otherwise it is reset to the given
.Fa value .
.Pp
The
.Fn putenv
function takes an argument of the form
.Ar name Ns = Ns Ar value
and is equivalent to:
.Bd -literal -offset indent
setenv(name, value, 1);
.Ed
.Pp
The
.Fn unsetenv
function deletes all instances of the variable name pointed to by
.Fa name
from the list.
.Sh RETURN VALUES
The functions
.Fn setenv ,
.Fn putenv ,
and
.Fn unsetenv
return zero if successful; otherwise the global variable
.Va errno
is set to indicate the error and \-1 is returned.
.Pp
If
.Fn getenv
is successful, the string returned should be considered read-only.
.Sh ERRORS
.Bl -tag -width Er
.It Bq Er ENOMEM
The function
.Fn setenv
or
.Fn putenv
failed because they were unable to allocate memory for the environment.
.It Bq Er EINVAL
The function
.Fn unsetenv
failed because the argument was a NULL pointer, an empty string, or
a string containing an
.Sq =
character.
.El
.Sh SEE ALSO
.Xr csh 1 ,
.Xr sh 1 ,
.Xr execve 2 ,
.Xr environ 7
.Sh STANDARDS
The
.Fn getenv
function conforms to
.St -ansiC .
.Pp
The
.Fn unsetenv
function conforms to
.St -susv3 .
.Sh HISTORY
The function
.Fn getenv
appeared in
.At v7
and
.Bx 3 .
The functions
.Fn setenv
and
.Fn unsetenv
appeared in
.Bx 4.3 Tahoe .
The
.Fn putenv
function appeared in
.Bx 4.3 Reno .
@


1.1
log
@Initial revision
@
text
@d32 1
a32 1
.\"	$OpenBSD: getenv.3,v 1.9 2004/01/23 23:08:46 jmc Exp $
d51 1
a51 1
.Ft void
d65 1
a65 1
function obtains the current value of the environment variable,
d103 2
a104 1
.Fn setenv
d106 1
a106 1
.Fn putenv
d115 1
a115 1
.Bl -tag -width [ENOMEM]
d122 7
d140 5
d146 6
d157 1
a157 1
.At v7 .
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import almost everything (no ancontrol, ifconfig, pfctl, wicontrol)
of (the undeleted parts of) OpenBSD-current's userland of about 3 hours ago.
Warning: this introduces major breakage!
@
text
@d32 1
a32 1
.\"	$OpenBSD: getenv.3,v 1.10 2005/05/11 20:09:44 otto Exp $
a132 6
The function
.Fn getenv
appeared in
.At v7
and
.Bx 3 .
d138 1
a138 1
.Bx 4.3 Tahoe .
@


1.1.1.3
log
@Import OpenBSD's libc as of today, minus some of the locale stuff,
and with brk malloc instead of mmap malloc
@
text
@d32 1
a32 1
.\"	$OpenBSD: getenv.3,v 1.11 2005/07/26 04:20:23 jaredy Exp $
d65 1
a65 1
function obtains the current value of the environment variable
d114 1
a114 1
.Bl -tag -width Er
@


