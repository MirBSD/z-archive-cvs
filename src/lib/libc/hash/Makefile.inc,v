head	1.9;
access;
symbols
	MIRBSD_10:1.6.0.2
	MIRBSD_10_BASE:1.6
	MIRBSD_9_BASE:1.2
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	cvs-200509212000:1.1.1.1
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2011.11.20.18.28.10;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004EC946C40BECB1D6;

1.8
date	2010.01.07.22.34.51;	author tg;	state Exp;
branches;
next	1.7;
commitid	1004B46615B7479BC1B;

1.7
date	2009.11.09.21.36.39;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004AF88B6210E6BBB3;

1.6
date	2007.05.07.16.15.56;	author tg;	state Exp;
branches;
next	1.5;
commitid	100463F507166871BCE;

1.5
date	2007.05.07.15.21.18;	author tg;	state Exp;
branches;
next	1.4;
commitid	100463F43D3067E6553;

1.4
date	2007.05.07.14.06.07;	author tg;	state Exp;
branches;
next	1.3;
commitid	100463F322D3CC3A59A;

1.3
date	2006.09.17.19.28.58;	author tg;	state Exp;
branches;
next	1.2;
commitid	100450DA20303EFF79D;

1.2
date	2005.02.26.13.55.09;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.24.46;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.24.46;	author tg;	state Exp;
branches;
next	;


desc
@@


1.9
log
@move digits and hashpad into kern to be shared
@
text
@# $MirOS: src/lib/libc/hash/Makefile.inc,v 1.8 2010/01/07 22:34:51 tg Exp $
# $OpenBSD: Makefile.inc,v 1.17 2004/05/03 17:30:14 millert Exp $

# hash functions
.PATH: ${LIBCSRCDIR}/hash

HELPER=	md4hl.c md5hl.c rmd160hl.c sha1hl.c sha256hl.c sha384hl.c sha512hl.c \
	adler32hl.c sfvhl.c sumahl.c tigerhl.c whirlpoolhl.c
SRCS+=	adh32.c md4.c md5.c rmd160.c sfv.c sha1.c sha2.c tiger.c whirlpool.c \
	${HELPER}
MAN+=	adler32.3 md4.3 md5.3 rmd160.3 sfv.3 sha1.3 sha2.3 suma.3 tiger.3 \
	whirlpool.3

.if exists(suma-${MACHINE_ARCH}.S)
SRCS+=	suma-${MACHINE_ARCH}.S
.else
SRCS+=	suma.c
.endif

MLINKS+=adler32.3 ADLER32Init.3    adler32.3 ADLER32Update.3
MLINKS+=adler32.3 ADLER32Data.3
MLINKS+=adler32.3 ADLER32Final.3   adler32.3 ADLER32End.3
MLINKS+=adler32.3 ADLER32File.3    adler32.3 ADLER32FileChunk.3
MLINKS+=md4.3 MD4Transform.3 md4.3 MD4Init.3 md4.3 MD4Final.3
MLINKS+=md4.3 MD4Update.3    md4.3 MD4End.3  md4.3 MD4File.3
MLINKS+=md4.3 MD4FileChunk.3 md4.3 MD4Pad.3  md4.3 MD4Data.3
MLINKS+=md5.3 MD5Transform.3 md5.3 MD5Init.3 md5.3 MD5Final.3
MLINKS+=md5.3 MD5Update.3    md5.3 MD5End.3  md5.3 MD5File.3
MLINKS+=md5.3 MD5FileChunk.3 md5.3 MD5Pad.3  md5.3 MD5Data.3
MLINKS+=rmd160.3 RMD160Transform.3 rmd160.3 RMD160Init.3 rmd160.3 RMD160Final.3
MLINKS+=rmd160.3 RMD160Update.3    rmd160.3 RMD160End.3  rmd160.3 RMD160File.3
MLINKS+=rmd160.3 RMD160FileChunk.3 rmd160.3 RMD160Pad.3  rmd160.3 RMD160Data.3
MLINKS+=sfv.3 SFVInit.3        sfv.3 SFVUpdate.3
MLINKS+=sfv.3 SFVPad.3         sfv.3 SFVData.3
MLINKS+=sfv.3 SFVFinal.3       sfv.3 SFVEnd.3
MLINKS+=sfv.3 SFVFile.3        sfv.3 SFVFileChunk.3
MLINKS+=sha1.3 SHA1Transform.3 sha1.3 SHA1Init.3 sha1.3 SHA1Final.3
MLINKS+=sha1.3 SHA1Update.3    sha1.3 SHA1End.3  sha1.3 SHA1File.3
MLINKS+=sha1.3 SHA1FileChunk.3 sha1.3 SHA1Pad.3  sha1.3 SHA1Data.3
MLINKS+=sha2.3 SHA256_Init.3 sha2.3 SHA256_Update.3 sha2.3 SHA256_Final.3
MLINKS+=sha2.3 SHA256_End.3  sha2.3 SHA256_File.3   sha2.3 SHA256_Data.3
MLINKS+=sha2.3 SHA256_Pad.3  sha2.3 SHA256_FileChunk.3
MLINKS+=sha2.3 SHA384_Init.3 sha2.3 SHA384_Update.3 sha2.3 SHA384_Final.3
MLINKS+=sha2.3 SHA384_End.3  sha2.3 SHA384_File.3   sha2.3 SHA384_Data.3
MLINKS+=sha2.3 SHA384_Pad.3  sha2.3 SHA384_FileChunk.3
MLINKS+=sha2.3 SHA512_Init.3 sha2.3 SHA512_Update.3 sha2.3 SHA512_Final.3
MLINKS+=sha2.3 SHA512_End.3  sha2.3 SHA512_File.3   sha2.3 SHA512_Data.3
MLINKS+=sha2.3 SHA512_Pad.3  sha2.3 SHA512_FileChunk.3
MLINKS+=suma.3 SUMAInit.3    suma.3 SUMAUpdate.3
MLINKS+=suma.3 SUMAPad.3     suma.3 SUMAData.3
MLINKS+=suma.3 SUMAFinal.3   suma.3 SUMAEnd.3
MLINKS+=suma.3 SUMAFile.3    suma.3 SUMAFileChunk.3
MLINKS+=tiger.3 TIGERInit.3  tiger.3 TIGERUpdate.3    tiger.3 TIGERPad.3
MLINKS+=tiger.3 TIGERFinal.3 tiger.3 TIGERTransform.3 tiger.3 TIGEREnd.3
MLINKS+=tiger.3 TIGERFile.3  tiger.3 TIGERFileChunk.3 tiger.3 TIGERData.3
MLINKS+=whirlpool.3 WHIRLPOOLInit.3  whirlpool.3 WHIRLPOOLUpdate.3
MLINKS+=whirlpool.3 WHIRLPOOLPad.3   whirlpool.3 WHIRLPOOLData.3
MLINKS+=whirlpool.3 WHIRLPOOLFinal.3 whirlpool.3 WHIRLPOOLEnd.3
MLINKS+=whirlpool.3 WHIRLPOOLFile.3  whirlpool.3 WHIRLPOOLFileChunk.3
CLEANFILES+= ${HELPER} md[45].3

.if !defined(NOMAN) || ${NOMAN:L} == "no"
all:	md4.3 md5.3

md4.3:  mdX.3
	sed -e 's/mdX/md4/g' -e 's/mdY/md5/g' -e 's/MDX/MD4/g' $> > $@@

md5.3:  mdX.3
	sed -e 's/mdX/md5/g' -e 's/mdY/md4/g' -e 's/MDX/MD5/g' $> > $@@
.endif

adler32hl.c:	helper.c
	sed -e 's/hashinc/adler32.h/g' -e 's/HASH/ADLER32/g' $> > $@@

md4hl.c:	helper.c
	sed -e 's/hashinc/md4.h/g' -e 's/HASH/MD4/g' $> > $@@

md5hl.c:	helper.c
	sed -e 's/hashinc/md5.h/g' -e 's/HASH/MD5/g' $> > $@@

rmd160hl.c:	helper.c
	sed -e 's/hashinc/rmd160.h/g' -e 's/HASH/RMD160/g' $> > $@@

sfvhl.c:	helper.c
	sed -e 's/hashinc/sfv.h/g' -e 's/HASH/SFV/g' $> > $@@

sha1hl.c:	helper.c
	sed -e 's/hashinc/sha1.h/g' -e 's/HASH/SHA1/g' $> > $@@

sha256hl.c:	helper.c
	sed -e 's/hashinc/sha2.h/g' -e 's/HASH_\{0,1\}/SHA256_/g' $> > $@@

sha384hl.c:	helper.c
	sed -e 's/hashinc/sha2.h/g' -e 's/HASH_\{0,1\}/SHA384_/g' $> > $@@

sha512hl.c:	helper.c
	sed -e 's/hashinc/sha2.h/g' -e 's/HASH_\{0,1\}/SHA512_/g' $> > $@@

sumahl.c:	helper.c
	sed -e 's/hashinc/suma.h/g' -e 's/HASH/SUMA/g' $> > $@@

tigerhl.c:	helper.c
	sed -e 's/hashinc/tiger.h/g' -e 's/HASH/TIGER/g' $> > $@@

whirlpoolhl.c:	helper.c
	sed -e 's/hashinc/whirlpool.h/g' -e 's/HASH/WHIRLPOOL/g' $> > $@@

beforedepend: ${HELPER}
@


1.8
log
@facilitate code and data sharing: move some passwd(8) functions
sources by other stuff into libc or libutil; make commons out of
things like digits, base64 data or code, etc. (publish the data
parts as well, justin case) plus do some const cleanup
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/hash/Makefile.inc,v 1.7 2009/11/09 21:36:39 tg Exp $
d10 1
a10 1
	${HELPER} digits.c hashpad.c
@


1.7
log
@bump libc minor, to be able to pull in OAAT hash helper functions,
as well as globalise the hashpad things; sync mirmake and kernel
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/hash/Makefile.inc,v 1.6 2007/05/07 16:15:56 tg Exp $
d10 1
a10 1
	${HELPER} hashpad.c
@


1.6
log
@• make HASH API functions for ADLER32 in libc, too (size-optimised but no asm)
• cross-reference them all in the man pages
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/hash/Makefile.inc,v 1.5 2007/05/07 15:21:18 tg Exp $
d10 1
a10 1
	${HELPER}
@


1.5
log
@add suma and sfv hashes in the standard format, too
(can't do adler32 that easily for now, later; sum/cksum/sysvsum differ, never)
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/hash/Makefile.inc,v 1.4 2007/05/07 14:06:07 tg Exp $
d8 5
a12 3
	sfvhl.c sumahl.c tigerhl.c whirlpoolhl.c
SRCS+=	md4.c md5.c rmd160.c sfv.c sha1.c sha2.c tiger.c whirlpool.c ${HELPER}
MAN+=	md4.3 md5.3 rmd160.3 sfv.3 sha1.3 sha2.3 suma.3 tiger.3 whirlpool.3
d20 4
d72 3
@


1.4
log
@introduce the whirlpool hash function (finally!)
code taken from TNF pkgsrc® pkgtools/digest tool
actual source is the public domain reference implementation

XXX test this on big-endian platforms
XXX adjust mirmake

this libc addition rides on yesterday's minor bump
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/hash/Makefile.inc,v 1.3 2006/09/17 19:28:58 tg Exp $
d8 9
a16 3
	tigerhl.c whirlpoolhl.c
SRCS+=	md4.c md5.c rmd160.c sha1.c sha2.c tiger.c whirlpool.c ${HELPER}
MAN+=	md4.3 md5.3 rmd160.3 sha1.3 sha2.3 tiger.3 whirlpool.3
d27 4
d43 4
d75 3
d90 3
@


1.3
log
@add the SFV (from cksfv) and TIGER hashes
@
text
@d1 2
a2 2
# $MirOS: src/lib/libc/hash/Makefile.inc,v 1.2 2005/02/26 13:55:09 tg Exp $
#	$OpenBSD: Makefile.inc,v 1.17 2004/05/03 17:30:14 millert Exp $
d8 3
a10 3
	tigerhl.c
SRCS+=	md4.c md5.c rmd160.c sha1.c sha2.c tiger.c ${HELPER}
MAN+=	md4.3 md5.3 rmd160.3 sha1.3 sha2.3 tiger.3
d36 4
d76 3
@


1.2
log
@merge hashes
@
text
@d1 1
a1 1
# $MirOS$
d7 4
a10 3
HELPER=	md4hl.c md5hl.c rmd160hl.c sha1hl.c sha256hl.c sha384hl.c sha512hl.c
SRCS+=	md4.c md5.c rmd160.c sha1.c sha2.c ${HELPER}
MAN+=	md4.3 md5.3 rmd160.3 sha1.3 sha2.3
d33 3
d69 4
a72 1
beforedepend: md4hl.c md5hl.c rmd160hl.c sha1hl.c sha256hl.c sha384hl.c sha512hl.c
@


1.1
log
@Initial revision
@
text
@d1 1
d34 1
a34 1
.ifndef NOMAN
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
