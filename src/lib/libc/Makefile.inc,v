head	1.13;
access;
symbols
	MIRBSD_10:1.10.0.2
	MIRBSD_10_BASE:1.10
	MIRBSD_9_BASE:1.6
	MIRBSD_8:1.6.0.2
	MIRBSD_8_BASE:1.6
	cvs-200509212000:1.1.1.2
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2011.10.25.20.28.57;	author bsiegert;	state Exp;
branches;
next	1.12;
commitid	1004EA71C1C27A10989;

1.12
date	2009.09.15.16.27.29;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004AAFC06B14538FAA;

1.11
date	2008.08.01.16.14.47;	author tg;	state Exp;
branches;
next	1.10;
commitid	10048933682721C5382;

1.10
date	2007.02.06.15.55.11;	author tg;	state Exp;
branches;
next	1.9;
commitid	10045C8A4D97F43883D;

1.9
date	2007.02.06.15.51.57;	author tg;	state Exp;
branches;
next	1.8;
commitid	10045C8A3FD0635CC8D;

1.8
date	2006.11.21.02.53.36;	author tg;	state Exp;
branches;
next	1.7;
commitid	10045626A132AE542D0;

1.7
date	2006.11.21.01.04.08;	author tg;	state Exp;
branches;
next	1.6;
commitid	100456250830E53C5DB;

1.6
date	2005.09.22.21.49.14;	author tg;	state Exp;
branches;
next	1.5;
commitid	132f433326ebe795;

1.5
date	2005.09.22.20.39.58;	author tg;	state Exp;
branches;
next	1.4;
commitid	2258433316aba805;

1.4
date	2005.07.01.13.51.24;	author tg;	state Exp;
branches;
next	1.3;
commitid	5ba942c54a6b05f8;

1.3
date	2005.04.17.01.42.54;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.06.20.28.26;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.24.34;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.24.34;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.21.20.52.11;	author tg;	state Exp;
branches;
next	;
commitid	560042e0092f571e;


desc
@@


1.13
log
@Connect thread-stub directory to the build, no-op for now.
@
text
@# $MirOS: src/lib/libc/Makefile.inc,v 1.12 2009/09/15 16:27:29 tg Exp $
# $OpenBSD: Makefile.inc,v 1.11 2005/06/17 20:37:31 drahn Exp $

.ifndef LIBCSRCDIR
all:
	@@echo "need to define LIBCSRCDIR" >&2; exit 1
.endif

CPPFLAGS+=	-DLIBC_SCCS -DSYSLIBC_SCCS
CPPFLAGS+=	-I${LIBCSRCDIR}/include

LLIBS=
AINC=   -I${LIBCSRCDIR}/arch/${MACHINE_ARCH}
.if defined(DESTDIR)
AINC+=  -nostdinc -idirafter ${DESTDIR}/usr/include
.endif

.if exists (${LIBCSRCDIR}/arch/${MACHINE_ARCH}/Makefile.inc)
.PATH:	${LIBCSRCDIR}/arch/${MACHINE_ARCH}
.include "${LIBCSRCDIR}/arch/${MACHINE_ARCH}/Makefile.inc"
.endif

.include "${LIBCSRCDIR}/compat-43/Makefile.inc"
.include "${LIBCSRCDIR}/crypt/Makefile.inc"
.include "${LIBCSRCDIR}/db/Makefile.inc"
.include "${LIBCSRCDIR}/dlfcn/Makefile.inc"
.include "${LIBCSRCDIR}/gen/Makefile.inc"
.include "${LIBCSRCDIR}/hash/Makefile.inc"
.include "${LIBCSRCDIR}/i18n/Makefile.inc"
.include "${LIBCSRCDIR}/net/Makefile.inc"
.include "${LIBCSRCDIR}/ohash/Makefile.inc"
.include "${LIBCSRCDIR}/regex/Makefile.inc"
.include "${LIBCSRCDIR}/rpc/Makefile.inc"
.include "${LIBCSRCDIR}/stdio/Makefile.inc"
.include "${LIBCSRCDIR}/stdlib/Makefile.inc"
.include "${LIBCSRCDIR}/string/Makefile.inc"
.include "${LIBCSRCDIR}/sys/Makefile.inc"
.include "${LIBCSRCDIR}/termios/Makefile.inc"
.include "${LIBCSRCDIR}/thread/Makefile.inc"
.include "${LIBCSRCDIR}/thread-stub/Makefile.inc"
.include "${LIBCSRCDIR}/time/Makefile.inc"

LIBKERN=	${LIBCSRCDIR}/../../sys/lib/libkern
@


1.12
log
@remove symbols common to libc/libgcc_s from libgcc; add to libmdsup if
they havenâ€™t been there before
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.11 2008/08/01 16:14:47 tg Exp $
d40 1
@


1.11
log
@no more KSRCS, copy-to-libkern, etc. as we migrate to common source
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.10 2007/02/06 15:55:11 tg Exp $
a31 1
.include "${LIBCSRCDIR}/quad/Makefile.inc"
@


1.10
log
@move UNIFDEF_SRCS functionality to bottom of kern/c/Makefile.inc
so include that after any others that need this functionality in libc
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.9 2007/02/06 15:51:57 tg Exp $
a43 7

KSRCS=	memcmp.c bzero.c ffs.c strcmp.c strlen.c strncmp.c \
	strncpy.c htonl.c htons.c ntohl.c ntohs.c
KSRCS+=	adddi3.c anddi3.c ashldi3.c ashrdi3.c cmpdi2.c divdi3.c iordi3.c \
	lshldi3.c lshrdi3.c moddi3.c muldi3.c negdi2.c notdi2.c qdivrem.c \
	subdi3.c  ucmpdi2.c udivdi3.c umoddi3.c xordi3.c
KINCLUDES+=	quad/quad.h
@


1.9
log
@change UNIFDEF_SRCS(dest,source,flags) third argument to be a
comma-separated list of -Dfoo -Ubar flags passed to unifdef(1)
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.8 2006/11/21 02:53:36 tg Exp $
a42 10
.for _z _q _s in ${UNIFDEF_SRCS}
SRCS+=		${_z}
CLEANFILES+=	${_z}

${_z}: ${_q}
	-unifdef ${_s:S/,/ /g} $> >$@@

beforedepend: ${_z}
.endfor

@


1.8
log
@remove dead and insecure code
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.7 2006/11/21 01:04:08 tg Exp $
d48 1
a48 1
	-unifdef -D${_s} $> >$@@
@


1.7
log
@get rid of the need to have several stub files consisting just of a
define and an include; simplify a lot; rewrite some code to simplify
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.6 2005/09/22 21:49:14 tg Exp $
d55 1
a55 1
KSRCS=	memcmp.c bzero.c ffs.c strcat.c strcmp.c strcpy.c strlen.c strncmp.c \
@


1.6
log
@* sort
* dive into new i18n dir
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.5 2005/09/22 20:39:58 tg Exp $
d43 10
@


1.5
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.4 2005/07/01 13:51:24 tg Exp $
d23 2
a26 1
.include "${LIBCSRCDIR}/compat-43/Makefile.inc"
a27 1
.include "${LIBCSRCDIR}/crypt/Makefile.inc"
d29 1
d38 1
a41 1
.include "${LIBCSRCDIR}/sys/Makefile.inc"
@


1.4
log
@remove extattr => bump major
@
text
@d1 2
a2 2
# $MirOS: src/lib/libc/Makefile.inc,v 1.3 2005/04/17 01:42:54 tg Exp $
# $OpenBSD: Makefile.inc,v 1.9 2004/04/28 16:56:49 millert Exp $
@


1.3
log
@make stage2 lint library build successfully
stage1 leaves still much to be desired though
@
text
@d1 1
a1 1
# $MirOS: src/lib/libc/Makefile.inc,v 1.2 2005/03/06 20:28:26 tg Exp $
a40 1
.include "${LIBCSRCDIR}/posix1e/Makefile.inc"
@


1.2
log
@merge src/lib
@
text
@d1 1
a1 1
# $MirOS$
d45 1
a45 1
KSRCS=	bcmp.c bzero.c ffs.c strcat.c strcmp.c strcpy.c strlen.c strncmp.c \
@


1.1
log
@Initial revision
@
text
@d1 2
a2 4
#	$OpenBSD: Makefile.inc,v 1.9 2004/04/28 16:56:49 millert Exp $
#
# This file contains make rules used to build libc
#
d9 2
a10 8
CFLAGS+=	-DLIBC_SCCS -DSYSLIBC_SCCS -I${LIBCSRCDIR}/include

# Include link-time warnings about unsafe API uses (ie. strcpy)
#CFLAGS+=-DAPIWARN

.if (${YP:L} == "yes")
CFLAGS+=-DYP -I${LIBCSRCDIR}/yp
.endif
a27 1
.include "${LIBCSRCDIR}/gmon/Makefile.inc"
a28 1
.include "${LIBCSRCDIR}/locale/Makefile.inc"
a29 1
.include "${LIBCSRCDIR}/nls/Makefile.inc"
a30 1
.if (${MACHINE_ARCH} != "alpha")
a31 1
.endif
a41 5
.if (${YP:L} == "yes")
.include "${LIBCSRCDIR}/yp/Makefile.inc"
.endif

CFLAGS+=-DNLS
a46 1
.if (${MACHINE_ARCH} != "alpha")
a50 2
.endif

@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import almost everything (no ancontrol, ifconfig, pfctl, wicontrol)
of (the undeleted parts of) OpenBSD-current's userland of about 3 hours ago.
Warning: this introduces major breakage!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 2005/06/17 20:37:31 drahn Exp $
d14 1
a14 1
CFLAGS+=-DAPIWARN
d54 1
@

