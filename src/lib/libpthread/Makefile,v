head	1.9;
access;
symbols
	MIRBSD_10:1.8.0.2
	MIRBSD_10_BASE:1.8
	MIRBSD_9_BASE:1.6
	MIRBSD_8:1.6.0.2
	MIRBSD_8_BASE:1.6
	cvs-200509222040:1.1.1.1
	cvs-200507211800:1.1.1.1
	cvs-200505141745:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2017.08.08.15.16.31;	author tg;	state Exp;
branches;
next	1.8;
commitid	1005989D5DF25F53E9B;

1.8
date	2007.06.21.14.40.21;	author tg;	state Exp;
branches;
next	1.7;
commitid	100467A8D2C4D7EEFFE;

1.7
date	2007.05.19.22.08.26;	author tg;	state Exp;
branches;
next	1.6;
commitid	100464F755548D7A3DB;

1.6
date	2005.09.22.20.42.41;	author tg;	state Exp;
branches;
next	1.5;
commitid	563e4333175600d6;

1.5
date	2005.07.01.13.51.23;	author tg;	state Exp;
branches;
next	1.4;
commitid	5ba942c54a6b05f8;

1.4
date	2005.05.14.17.51.06;	author tg;	state Exp;
branches;
next	1.3;
commitid	65f942863a9f3a40;

1.3
date	2005.04.29.18.34.51;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.06.20.29.19;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.25.27;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.25.27;	author tg;	state Exp;
branches;
next	;


desc
@@


1.9
log
@bump, as requested by lib/libc/Makefile
@
text
@# $MirOS: src/lib/libpthread/Makefile,v 1.8 2007/06/21 14:40:21 tg Exp $
# $OpenBSD: Makefile,v 1.22 2004/01/18 23:54:20 marc Exp $
#
# The pthread library is formed from the FreeBSD uthread sources of 
# libc_r, and exploits weak symbols in libc.

SRCDIR=		${.CURDIR}
LIBCSRCDIR=	${.CURDIR}/../libc

SHLIB_VERSION?=	11.1
LIB=		pthread
LINTFLAGS=	-z
CPPFLAGS+=	-DPTHREAD_KERNEL -D_POSIX_THREADS -D_THREAD_SAFE -DLIBC_SCCS
CFLAGS+=	-Wall -Wpointer-arith -Wwrite-strings -Wstrict-prototypes
CFLAGS+=	-Wmissing-prototypes -Wsign-compare
CPPFLAGS+=	-I${SRCDIR}/uthread
CPPFLAGS+=	-I${SRCDIR}/include
CPPFLAGS+=	-I${LIBCSRCDIR}/include
AINC+=		-I${SRCDIR}/uthread

# Uncomment this if you want libpthread to contain debug information for
# thread locking.
CPPFLAGS+=	-D_LOCK_DEBUG
#DEBUG=		-g

# enable extra internal consistency checks
CPPFLAGS+=	-D_PTHREADS_INVARIANTS

# for now. gcc 3.4.4 is too strict, and I don't know its inline asm
CFLAGS__atomic_lock.o = -Wno-error

.include "${SRCDIR}/include/Makefile.inc"
.include "${SRCDIR}/sys/Makefile.inc"
.include "${SRCDIR}/thread/Makefile.inc"
.include "${SRCDIR}/uthread/Makefile.inc"
.include "${SRCDIR}/man/Makefile.inc"

.include <bsd.lib.mk>
@


1.8
log
@• libedit, libm, libocurses, libsectok, libskey, libssl, libusbhid, libutil:
  do something I should've long done and bump their majors – ABI changes are
  not only removals (or changes) of T/D symbols but also additions(!) of U
  symbols (i.e. imports); these changed during the <ctype.h> changes from a
  while ago and depend on newer libc; I did an nm(1) comparision against #9
  (release) to allow upgrading by source
• libc, uname: since I'm bumping a lot of other shlibs, it's a good time to
  bump the libc major as well and finally get rid of that struct utsname bug
  I introduced when I had no idea what I was doing, in MirOS #1 or so…
• libpthread: requires a major bump if libc major is bumped, or so they say
• bump os patchlevel

agreed bsiegert@@
XXX any more changes to do before release?
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpthread/Makefile,v 1.7 2007/05/19 22:08:26 tg Exp $
d10 1
a10 1
SHLIB_VERSION?=	11.0
@


1.7
log
@bump minor: new system calls have been added
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpthread/Makefile,v 1.6 2005/09/22 20:42:41 tg Exp $
d10 1
a10 1
SHLIB_VERSION?=	10.1
@


1.6
log
@bump/merge
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpthread/Makefile,v 1.5 2005/07/01 13:51:23 tg Exp $
d10 1
a10 1
SHLIB_VERSION?=	10.0
@


1.5
log
@remove extattr => bump major
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpthread/Makefile,v 1.4 2005/05/14 17:51:06 tg Exp $
d10 1
a10 1
SHLIB_VERSION?=	9.0
@


1.4
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpthread/Makefile,v 1.3 2005/04/29 18:34:51 tg Exp $
d10 1
a10 1
SHLIB_VERSION?=	8.1
@


1.3
log
@(tentative) merge, more to come
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpthread/Makefile,v 1.2 2005/03/06 20:29:19 tg Exp $
d10 1
a10 1
SHLIB_VERSION?=	8.0
@


1.2
log
@merge src/lib
@
text
@d1 1
a1 1
# $MirOS$
d10 1
a10 1
SHLIB_VERSION?=	7.0
@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
#	$OpenBSD: Makefile,v 1.22 2004/01/18 23:54:20 marc Exp $

a5 1
#
d10 1
d13 6
a18 6
CFLAGS+=	-DPTHREAD_KERNEL -D_POSIX_THREADS -D_THREAD_SAFE -Wall
CFLAGS+=	-Wpointer-arith -Wwrite-strings -Wstrict-prototypes
CFLAGS+=	-Wmissing-prototypes -Wsign-compare # -Werror
CFLAGS+=	-I${SRCDIR}/uthread
CFLAGS+=	-I${SRCDIR}/include
CFLAGS+=	-I${LIBCSRCDIR}/include
d23 1
a23 1
CFLAGS+=	-D_LOCK_DEBUG
d27 4
a30 1
CFLAGS+=	-D_PTHREADS_INVARIANTS
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
