head	1.6;
access;
symbols
	MIRBSD_10:1.5.0.2
	MIRBSD_10_BASE:1.5
	ncurses-5_2-devel:1.3.0.4
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2009.08.30.18.01.19;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004A9ABE8244CB065F;

1.5
date	2007.05.17.18.38.32;	author tg;	state Exp;
branches;
next	1.4;
commitid	100464CA0BC3310E768;

1.4
date	2006.10.28.19.07.46;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004543AA865C08B5DD;

1.3
date	2005.10.21.11.02.48;	author tg;	state Exp;
branches;
next	1.2;
commitid	6c0b4358cac0ef88;

1.2
date	2005.03.06.20.29.10;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.25.21;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.25.21;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@fix DPADD/LDADD
@
text
@# $MirOS: src/lib/libmenu/Makefile,v 1.5 2007/05/17 18:38:32 tg Exp $

LIB=		menu
DPADD+=		${LIBCURSES}
LDADD+=		-lcurses
LIBLINKS=	menuw
SHLIB_VERSION?=	6.0

NCMANSRCS+=	menu.3x
NCMANSRCS+=	menu_attributes.3x
NCMANSRCS+=	menu_cursor.3x
NCMANSRCS+=	menu_driver.3x
NCMANSRCS+=	menu_format.3x
NCMANSRCS+=	menu_hook.3x
NCMANSRCS+=	menu_items.3x
NCMANSRCS+=	menu_mark.3x
NCMANSRCS+=	menu_new.3x
NCMANSRCS+=	menu_opts.3x
NCMANSRCS+=	menu_pattern.3x
NCMANSRCS+=	menu_post.3x
NCMANSRCS+=	menu_requestname.3x
NCMANSRCS+=	menu_spacing.3x
NCMANSRCS+=	menu_userptr.3x
NCMANSRCS+=	menu_win.3x
NCMANSRCS+=	mitem_current.3x
NCMANSRCS+=	mitem_name.3x
NCMANSRCS+=	mitem_new.3x
NCMANSRCS+=	mitem_opts.3x
NCMANSRCS+=	mitem_userptr.3x
NCMANSRCS+=	mitem_value.3x
NCMANSRCS+=	mitem_visible.3x

MLINKS+=	menu_attributes.3 menu_back.3
MLINKS+=	menu_attributes.3 menu_fore.3
MLINKS+=	menu_attributes.3 menu_grey.3
MLINKS+=	menu_attributes.3 menu_pad.3
MLINKS+=	menu_attributes.3 set_menu_back.3
MLINKS+=	menu_attributes.3 set_menu_fore.3
MLINKS+=	menu_attributes.3 set_menu_grey.3
MLINKS+=	menu_attributes.3 set_menu_pad.3
MLINKS+=	menu_cursor.3 pos_menu_cursor.3
MLINKS+=	menu_format.3 set_menu_format.3
MLINKS+=	menu_hook.3 item_init.3
MLINKS+=	menu_hook.3 item_term.3
MLINKS+=	menu_hook.3 menu_init.3
MLINKS+=	menu_hook.3 menu_term.3
MLINKS+=	menu_hook.3 set_item_init.3
MLINKS+=	menu_hook.3 set_item_term.3
MLINKS+=	menu_hook.3 set_menu_init.3
MLINKS+=	menu_hook.3 set_menu_term.3
MLINKS+=	menu_items.3 item_count.3
MLINKS+=	menu_items.3 set_menu_items.3
MLINKS+=	menu_mark.3 set_menu_mark.3
MLINKS+=	menu_new.3 free_menu.3
MLINKS+=	menu_new.3 new_menu.3
MLINKS+=	menu_opts.3 menu_opts_off.3
MLINKS+=	menu_opts.3 menu_opts_on.3
MLINKS+=	menu_opts.3 set_menu_opts.3
MLINKS+=	menu_pattern.3 set_menu_pattern.3
MLINKS+=	menu_post.3 post_menu.3
MLINKS+=	menu_post.3 unpost_menu.3
MLINKS+=	menu_requestname.3 menu_request_by_name.3
MLINKS+=	menu_requestname.3 menu_request_name.3
MLINKS+=	menu_spacing.3 set_menu_spacing.3
MLINKS+=	menu_userptr.3 set_menu_userptr.3
MLINKS+=	menu_win.3 menu_sub.3
MLINKS+=	menu_win.3 scale_menu.3
MLINKS+=	menu_win.3 set_menu_sub.3
MLINKS+=	menu_win.3 set_menu_win.3
MLINKS+=	mitem_current.3 current_item.3
MLINKS+=	mitem_current.3 item_index.3
MLINKS+=	mitem_current.3 set_current_item.3
MLINKS+=	mitem_current.3 set_top_row.3
MLINKS+=	mitem_current.3 top_row.3
MLINKS+=	mitem_name.3 item_description.3
MLINKS+=	mitem_name.3 item_name.3
MLINKS+=	mitem_new.3 free_item.3
MLINKS+=	mitem_new.3 new_item.3
MLINKS+=	mitem_opts.3 item_opts.3
MLINKS+=	mitem_opts.3 item_opts_off.3
MLINKS+=	mitem_opts.3 item_opts_on.3
MLINKS+=	mitem_opts.3 set_item_opts.3
MLINKS+=	mitem_userptr.3 item_userptr.3
MLINKS+=	mitem_userptr.3 set_item_userptr.3
MLINKS+=	mitem_value.3 item_value.3
MLINKS+=	mitem_value.3 set_item_value.3
MLINKS+=	mitem_visible.3 item_visible.3

.include <bsd.own.mk>

LIBNCDIR?=	${BSDSRCDIR}/lib/libncurses
.include "${LIBNCDIR}/Makefile.inc"

CPPFLAGS+=	-I${NCSRCDIR}/ncurses -I${NCSRCDIR}/menu

.PATH: ${NCSRCDIR}/menu

SRCS+=		m_attribs.c
SRCS+=		m_cursor.c
SRCS+=		m_driver.c
SRCS+=		m_format.c
SRCS+=		m_global.c
SRCS+=		m_hook.c
SRCS+=		m_item_cur.c
SRCS+=		m_item_nam.c
SRCS+=		m_item_new.c
SRCS+=		m_item_opt.c
SRCS+=		m_item_top.c
SRCS+=		m_item_use.c
SRCS+=		m_item_val.c
SRCS+=		m_item_vis.c
SRCS+=		m_items.c
SRCS+=		m_new.c
SRCS+=		m_opts.c
SRCS+=		m_pad.c
SRCS+=		m_pattern.c
SRCS+=		m_post.c
SRCS+=		m_req_name.c
SRCS+=		m_scale.c
SRCS+=		m_spacing.c
SRCS+=		m_sub.c
SRCS+=		m_trace.c
SRCS+=		m_userptr.c
SRCS+=		m_win.c

GENERATED=	ncurses_def.h
CLEANFILES+=	${GENERATED}

beforedepend: ${GENERATED}

ncurses_def.h: ${NCSRCDIR}/include/MKncurses_def.sh \
    ${NCSRCDIR}/include/ncurses_defs
	AWK=${AWK:Q} ${MKSH} ${NCSRCDIR}/include/MKncurses_def.sh \
	    ${NCSRCDIR}/include/ncurses_defs >$@@

HDRS=		menu/eti.h menu/menu.h
HDRSRC=		${NCSRCDIR}
HDRDST=		${DESTDIR}/usr/include/ncursesw

afterincludes:
	cd ${DESTDIR}/usr/include; for i in ${HDRS:T}; do \
		[[ $$(readlink $$i 2>&-) = ncursesw/$$i ]] && continue; \
		rm -f $$i; \
		ln -s ncursesw/$$i; \
	done

.include <bsd.lib.mk>

${OBJS}: ${GENERATED}
@


1.5
log
@more includes-target overhaul:
• document it
• do it for <bsd.prog.mk> too
• move it to <bsd.sys.mk>, handle generation by <bsd.subdir.mk>
• add /usr/include/openssl to mtree(8) base system tree file
• have all libs and flex use the generic target
• clean them up; repair a few bugs
@
text
@d1 1
a1 1
# $MirOS: src/lib/libmenu/Makefile,v 1.4 2006/10/28 19:07:46 tg Exp $
d4 2
@


1.4
log
@switch to libncurses (for now)
agreed bsiegert@@

ncurses/Makefile: also install HTML docs

switched: libform libmenu libpanel and a few progs, lynx
not switched: tset/clear (but modernised), we use obsd code here
fixed: window
@
text
@d1 1
a1 1
# $MirOS$
d134 7
a140 13
includes:
	-[[ -d ${DESTDIR}/usr/include/ncursesw ]] || \
	    rm -rf ${DESTDIR}/usr/include/ncursesw
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
	    ${DESTDIR}/usr/include/ncursesw
.for _i in ${NCSRCDIR}/menu/eti.h ${NCSRCDIR}/menu/menu.h
	cmp -s ${DESTDIR}/usr/include/ncursesw/${_i:T} ${_i} || \
	    ${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} \
	    -m ${NONBINMODE} ${_i} ${DESTDIR}/usr/include/ncursesw/
.endfor
	cd ${DESTDIR}/usr/include; \
	    for i in eti.h menu.h; do \
		[[ $$(readlink $$i) = ncursesw/$$i ]] && continue; \
@


1.3
log
@* merge bin and lib completely
* convert some ancient RCSID styles etc. to more modern stuff
* fix use of CDIAGFLAGS+=, CFLAGS+= and COPTS+= to the correct
  variant (include bsd.own.mk _then_ COPTS+=) so they're added
  after any user-specified flags
  (this is probably lurking in more places than I can imagine)
* fix some indenting, comments, etc.
* make stuff compile (fix warnings/errors)
* add script to review _all_ shlib_version after an openbsd import
* remove two more obsolete /usr/lib/debug/ references
* bin/ps: comment out some SMP code
@
text
@d1 1
a1 1
# $MirOS: src/lib/libmenu/Makefile,v 1.2 2005/03/06 20:29:10 tg Exp $
d3 130
a132 41
SHLIB_VERSION?=	5.0
LIB=	menu
SRCS=	m_adabind.c m_attribs.c m_cursor.c m_driver.c m_format.c \
	m_global.c m_hook.c m_item_cur.c m_item_nam.c m_item_new.c \
	m_item_opt.c m_item_top.c m_item_use.c m_item_val.c m_item_vis.c \
	m_items.c m_new.c m_opts.c m_pad.c m_pattern.c m_post.c \
	m_req_name.c m_scale.c m_spacing.c m_sub.c m_userptr.c m_win.c
HDRS=	menu.h eti.h
CPPFLAGS+= -I${.CURDIR}/../libcurses -DHAVE_CONFIG_H
MAN=	menu.3tbl menu_attributes.3 menu_cursor.3 menu_driver.3 menu_format.3 \
	menu_hook.3 menu_items.3 menu_mark.3 menu_new.3 menu_opts.3 \
	menu_pattern.3 menu_post.3 menu_requestname.3 menu_spacing.3 \
	menu_userptr.3 menu_win.3 mitem_current.3 mitem_name.3 mitem_new.3 \
	mitem_opts.3 mitem_userptr.3 mitem_value.3 mitem_visible.3
MLINKS=	menu_attributes.3 set_menu_fore.3 menu_attributes.3 menu_fore.3 \
        menu_attributes.3 set_menu_back.3 menu_attributes.3 menu_back.3 \
        menu_attributes.3 set_menu_grey.3 menu_attributes.3 menu_grey.3 \
        menu_attributes.3 set_menu_pad.3 menu_attributes.3 menu_pad.3 \
        menu_cursor.3 pos_menu_cursor.3 menu_format.3 set_menu_format.3 \
        menu_hook.3 set_item_init.3 menu_hook.3 item_init.3 menu_hook.3 \
        set_item_term.3 menu_hook.3 item_term.3 menu_hook.3 \
        set_menu_init.3 menu_hook.3 menu_init.3 menu_hook.3 \
        set_menu_term.3 menu_hook.3 menu_term.3 menu_items.3 \
        set_menu_items.3 menu_items.3 item_count.3 menu_mark.3 \
        set_menu_mark.3 menu_new.3 new_menu.3 menu_new.3 free_menu.3 \
        menu_opts.3 set_menu_opts.3 menu_opts.3 menu_opts_on.3 \
        menu_opts.3 menu_opts_off.3 menu_pattern.3 set_menu_pattern.3 \
        menu_post.3 post_menu.3 menu_post.3 unpost_menu.3 \
        menu_requestname.3 menu_request_name.3 menu_requestname.3 \
        menu_request_by_name.3 menu_spacing.3 set_menu_spacing.3 \
        menu_userptr.3 set_menu_userptr.3 menu_win.3 set_menu_win.3 \
        menu_win.3 set_menu_sub.3 menu_win.3 menu_sub.3 menu_win.3 \
        scale_menu.3 mitem_current.3 set_current_item.3 mitem_current.3 \
        current_item.3 mitem_current.3 set_top_row.3 mitem_current.3 \
        top_row.3 mitem_current.3 item_index.3 mitem_name.3 item_name.3 \
        mitem_name.3 item_description.3 mitem_new.3 new_item.3 \
        mitem_new.3 free_item.3 mitem_opts.3 set_item_opts.3 \
        mitem_opts.3 item_opts_on.3 mitem_opts.3 item_opts_off.3 \
        mitem_opts.3 item_opts.3 mitem_userptr.3 set_item_userptr.3 \
        mitem_userptr.3 item_userptr.3 mitem_value.3 set_item_value.3 \
        mitem_value.3 item_value.3 mitem_visible.3 item_visible.3
d135 15
a149 4
	@@cd ${.CURDIR}; for i in ${HDRS}; do \
	  cmp -s $$i ${DESTDIR}/usr/include/$$i || \
	  ${INSTALL} ${INSTALL_COPY} -m 444 -o $(BINOWN) -g $(BINGRP) $$i \
	  ${DESTDIR}/usr/include; done
d152 2
@


1.2
log
@merge src/lib
@
text
@d1 1
a1 1
# $MirOS$
d3 1
a3 1
SHLIB_VERSION?=	4.0
@


1.1
log
@Initial revision
@
text
@d1 3
d11 1
a11 1
CFLAGS+=-I${.CURDIR} -I${.CURDIR}/../libcurses -DHAVE_CONFIG_H
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
