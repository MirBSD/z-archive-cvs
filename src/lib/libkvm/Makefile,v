head	1.7;
access;
symbols
	MIRBSD_10:1.5.0.2
	MIRBSD_10_BASE:1.5
	MIRBSD_9_BASE:1.4
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2013.08.06.17.06.22;	author tg;	state Exp;
branches;
next	1.6;
commitid	10052012D144F7753C5;

1.6
date	2013.08.05.22.06.11;	author tg;	state Exp;
branches;
next	1.5;
commitid	100520021D16E80D23B;

1.5
date	2007.05.08.21.52.54;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004640F14A456E3051;

1.4
date	2006.01.24.21.04.24;	author tg;	state Exp;
branches;
next	1.3;
commitid	10043D696494DED5EF1;

1.3
date	2005.10.21.11.02.47;	author tg;	state Exp;
branches;
next	1.2;
commitid	6c0b4358cac0ef88;

1.2
date	2005.03.06.20.29.08;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.25.17;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.25.17;	author tg;	state Exp;
branches;
next	;


desc
@@


1.7
log
@get rid of the now useless ZLIB_CONST
@
text
@# $MirOS: src/lib/libkvm/Makefile,v 1.6 2013/08/05 22:06:11 tg Exp $
# $OpenBSD: Makefile,v 1.7 2004/01/08 04:59:10 millert Exp $
# $NetBSD: Makefile,v 1.11 1996/03/18 22:33:07 thorpej Exp $
# from: @@(#)Makefile	8.1 (Berkeley) 6/4/93

SHLIB_VERSION?=	10.1
LIB=		kvm
CPPFLAGS+=	-DLIBC_SCCS

# Try most specific name first.
.if	exists(kvm_${MACHINE}.c)
SRCS=	kvm_${MACHINE}.c
.else
# Less specific name (i.e. m68k)
CPPFLAGS+=-D${MACHINE}
SRCS=	kvm_${MACHINE_ARCH}.c
.endif

SRCS+=	kvm.c kvm_file.c kvm_getloadavg.c kvm_proc.c

DPADD+=	${LIBZ}
LDADD+=	-lz

MAN=	kvm.3 kvm_dump.3 kvm_geterr.3 kvm_getfiles.3 kvm_getloadavg.3 \
	kvm_getprocs.3 kvm_nlist.3 kvm_open.3 kvm_read.3

MLINKS+=kvm_getprocs.3 kvm_getargv.3 kvm_getprocs.3 kvm_getenvv.3
MLINKS+=kvm_getprocs.3 kvm_getproc2.3
MLINKS+=kvm_getprocs.3 kvm_getargv2.3 kvm_getprocs.3 kvm_getenvv2.3
MLINKS+=kvm_open.3 kvm_openfiles.3 kvm_open.3 kvm_close.3
MLINKS+=kvm_read.3 kvm_write.3
MLINKS+=kvm_dump.3 kvm_dump_mkheader.3 kvm_dump.3 kvm_dump_wrtheader.3
MLINKS+=kvm_dump.3 kvm_dump_inval.3

.include <bsd.lib.mk>
@


1.6
log
@-DZCONST=const â†’ -DZLIB_CONST

XXX sys/conf/Makefile.inc does it twice?
@
text
@d1 1
a1 1
# $MirOS: src/lib/libkvm/Makefile,v 1.5 2007/05/08 21:52:54 tg Exp $
d8 1
a8 1
CPPFLAGS+=	-DLIBC_SCCS -DZLIB_CONST
@


1.5
log
@ZCONST
@
text
@d1 1
a1 1
# $MirOS: src/lib/libkvm/Makefile,v 1.4 2006/01/24 21:04:24 tg Exp $
d8 1
a8 1
CPPFLAGS+=	-DLIBC_SCCS -DZCONST=const
@


1.4
log
@enable savecore(8) to operate on gzip'd kernels which we have now
(yes, it's slow, fpread() uses gzseek() extensively, sadly)
@
text
@d1 1
a1 1
# $MirOS: src/lib/libkvm/Makefile,v 1.3 2005/10/21 11:02:47 tg Exp $
d8 1
a8 1
CPPFLAGS+=	-DLIBC_SCCS
@


1.3
log
@* merge bin and lib completely
* convert some ancient RCSID styles etc. to more modern stuff
* fix use of CDIAGFLAGS+=, CFLAGS+= and COPTS+= to the correct
  variant (include bsd.own.mk _then_ COPTS+=) so they're added
  after any user-specified flags
  (this is probably lurking in more places than I can imagine)
* fix some indenting, comments, etc.
* make stuff compile (fix warnings/errors)
* add script to review _all_ shlib_version after an openbsd import
* remove two more obsolete /usr/lib/debug/ references
* bin/ps: comment out some SMP code
@
text
@d1 1
a1 1
# $MirOS: src/lib/libkvm/Makefile,v 1.2 2005/03/06 20:29:08 tg Exp $
d6 1
a6 1
SHLIB_VERSION?=	10.0
d21 3
@


1.2
log
@merge src/lib
@
text
@d1 1
a1 1
# $MirOS$
d6 1
a6 1
SHLIB_VERSION?=	9.0
@


1.1
log
@Initial revision
@
text
@d1 8
a8 6
#	$OpenBSD: Makefile,v 1.7 2004/01/08 04:59:10 millert Exp $
#	$NetBSD: Makefile,v 1.11 1996/03/18 22:33:07 thorpej Exp $
#	from: @@(#)Makefile	8.1 (Berkeley) 6/4/93

LIB=	kvm
CFLAGS+=-DLIBC_SCCS
d15 1
a15 1
CFLAGS+=-D${MACHINE}
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
