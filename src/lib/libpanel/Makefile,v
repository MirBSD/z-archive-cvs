head	1.6;
access;
symbols
	MIRBSD_10:1.5.0.2
	MIRBSD_10_BASE:1.5
	ncurses-5_2-devel:1.3.0.4
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2009.08.30.18.01.20;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004A9ABE8244CB065F;

1.5
date	2007.05.17.18.38.33;	author tg;	state Exp;
branches;
next	1.4;
commitid	100464CA0BC3310E768;

1.4
date	2006.10.28.19.08.01;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004543AA865C08B5DD;

1.3
date	2005.10.21.11.02.50;	author tg;	state Exp;
branches;
next	1.2;
commitid	6c0b4358cac0ef88;

1.2
date	2005.03.06.20.29.13;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.25.22;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.25.22;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@fix DPADD/LDADD
@
text
@# $MirOS: src/lib/libpanel/Makefile,v 1.5 2007/05/17 18:38:33 tg Exp $

LIB=		panel
DPADD+=		${LIBCURSES}
LDADD+=		-lcurses
LIBLINKS=	panelw
SHLIB_VERSION?=	6.0

NCMANSRCS+=	panel.3x

MLINKS+=	panel.3 bottom_panel.3
MLINKS+=	panel.3 del_panel.3
MLINKS+=	panel.3 hide_panel.3
MLINKS+=	panel.3 move_panel.3
MLINKS+=	panel.3 new_panel.3
MLINKS+=	panel.3 panel_above.3
MLINKS+=	panel.3 panel_below.3
MLINKS+=	panel.3 panel_hidden.3
MLINKS+=	panel.3 panel_userptr.3
MLINKS+=	panel.3 panel_window.3
MLINKS+=	panel.3 replace_panel.3
MLINKS+=	panel.3 set_panel_userptr.3
MLINKS+=	panel.3 show_panel.3
MLINKS+=	panel.3 top_panel.3
MLINKS+=	panel.3 update_panels.3

.include <bsd.own.mk>

LIBNCDIR?=	${BSDSRCDIR}/lib/libncurses
.include "${LIBNCDIR}/Makefile.inc"

CPPFLAGS+=	-I${NCSRCDIR}/ncurses -I${NCSRCDIR}/panel

.PATH: ${NCSRCDIR}/panel

SRCS+=		p_above.c
SRCS+=		p_below.c
SRCS+=		p_bottom.c
SRCS+=		p_delete.c
SRCS+=		p_hidden.c
SRCS+=		p_hide.c
SRCS+=		p_move.c
SRCS+=		p_new.c
SRCS+=		p_replace.c
SRCS+=		p_show.c
SRCS+=		p_top.c
SRCS+=		p_update.c
SRCS+=		p_user.c
SRCS+=		p_win.c
SRCS+=		panel.c

GENERATED=	ncurses_def.h
CLEANFILES+=	${GENERATED}

beforedepend: ${GENERATED}

ncurses_def.h: ${NCSRCDIR}/include/MKncurses_def.sh \
    ${NCSRCDIR}/include/ncurses_defs
	AWK=${AWK:Q} ${MKSH} ${NCSRCDIR}/include/MKncurses_def.sh \
	    ${NCSRCDIR}/include/ncurses_defs >$@@

HDRS=		panel/panel.h
HDRSRC=		${NCSRCDIR}
HDRDST=		${DESTDIR}/usr/include/ncursesw

afterincludes:
	cd ${DESTDIR}/usr/include; for i in ${HDRS:T}; do \
		[[ $$(readlink $$i 2>&-) = ncursesw/$$i ]] && continue; \
		rm -f $$i; \
		ln -s ncursesw/$$i; \
	done

.include <bsd.lib.mk>

${OBJS}: ${GENERATED}
@


1.5
log
@more includes-target overhaul:
• document it
• do it for <bsd.prog.mk> too
• move it to <bsd.sys.mk>, handle generation by <bsd.subdir.mk>
• add /usr/include/openssl to mtree(8) base system tree file
• have all libs and flex use the generic target
• clean them up; repair a few bugs
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpanel/Makefile,v 1.4 2006/10/28 19:08:01 tg Exp $
d4 2
@


1.4
log
@switch to libncurses (for now)
agreed bsiegert@@

ncurses/Makefile: also install HTML docs

switched: libform libmenu libpanel and a few progs, lynx
not switched: tset/clear (but modernised), we use obsd code here
fixed: window
@
text
@d1 1
a1 1
# $MirOS$
d60 7
a66 13
includes:
	-[[ -d ${DESTDIR}/usr/include/ncursesw ]] || \
	    rm -rf ${DESTDIR}/usr/include/ncursesw
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
	    ${DESTDIR}/usr/include/ncursesw
.for _i in ${NCSRCDIR}/panel/panel.h
	cmp -s ${DESTDIR}/usr/include/ncursesw/${_i:T} ${_i} || \
	    ${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} \
	    -m ${NONBINMODE} ${_i} ${DESTDIR}/usr/include/ncursesw/
.endfor
	cd ${DESTDIR}/usr/include; \
	    for i in panel.h; do \
		[[ $$(readlink $$i) = ncursesw/$$i ]] && continue; \
@


1.3
log
@* merge bin and lib completely
* convert some ancient RCSID styles etc. to more modern stuff
* fix use of CDIAGFLAGS+=, CFLAGS+= and COPTS+= to the correct
  variant (include bsd.own.mk _then_ COPTS+=) so they're added
  after any user-specified flags
  (this is probably lurking in more places than I can imagine)
* fix some indenting, comments, etc.
* make stuff compile (fix warnings/errors)
* add script to review _all_ shlib_version after an openbsd import
* remove two more obsolete /usr/lib/debug/ references
* bin/ps: comment out some SMP code
@
text
@d1 1
a1 1
# $MirOS: src/lib/libpanel/Makefile,v 1.2 2005/03/06 20:29:13 tg Exp $
d3 56
a58 13
SHLIB_VERSION?=	5.0
LIB=	panel
SRCS=	p_above.c p_below.c p_bottom.c p_delete.c p_hidden.c p_hide.c p_move.c \
	p_new.c p_replace.c p_show.c p_top.c p_update.c p_user.c p_win.c panel.c
HDRS=	panel.h
MAN=	panel.3
MLINKS=	panel.3 new_panel.3 panel.3 bottom_panel.3 panel.3 top_panel.3 \
        panel.3 show_panel.3 panel.3 update_panels.3 panel.3 \
        hide_panel.3 panel.3 panel_window.3 panel.3 replace_panel.3 \
        panel.3 move_panel.3 panel.3 panel_hidden.3 panel.3 \
        panel_above.3 panel.3 panel_below.3 panel.3 set_panel_userptr.3 \
        panel.3 panel_userptr.3 panel.3 del_panel.3
CPPFLAGS+= -DHAVE_CONFIG_H -I${.CURDIR}/../libcurses
d61 15
a75 4
	@@cd ${.CURDIR}; for i in ${HDRS}; do \
	  cmp -s $$i ${DESTDIR}/usr/include/$$i || \
	  ${INSTALL} ${INSTALL_COPY} -m 444 -o $(BINOWN) -g $(BINGRP) $$i \
	  ${DESTDIR}/usr/include; done
d78 2
@


1.2
log
@merge src/lib
@
text
@d1 1
a1 1
# $MirOS$
d3 1
a3 1
SHLIB_VERSION?=	4.0
@


1.1
log
@Initial revision
@
text
@d1 3
d15 1
a15 1
CFLAGS+= -I${.CURDIR}/../libcurses -DHAVE_CONFIG_H
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
