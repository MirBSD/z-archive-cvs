head	1.6;
access;
symbols
	MIRBSD_10:1.6.0.2
	MIRBSD_10_BASE:1.6
	MIRBSD_9_BASE:1.4
	MIRBSD_8:1.4.0.2
	MIRBSD_8_BASE:1.4
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2007.05.17.18.38.33;	author tg;	state Exp;
branches;
next	1.5;
commitid	100464CA0BC3310E768;

1.5
date	2007.05.17.00.35.56;	author tg;	state Exp;
branches;
next	1.4;
commitid	100464BA31040FEF3A8;

1.4
date	2005.12.23.09.46.36;	author tg;	state Exp;
branches;
next	1.3;
commitid	10043ABC75E10183AF9;

1.3
date	2005.06.14.13.12.57;	author tg;	state Exp;
branches;
next	1.2;
commitid	247f42aed7d7a4a7;

1.2
date	2005.03.06.20.29.12;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.25.22;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.25.22;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@more includes-target overhaul:
• document it
• do it for <bsd.prog.mk> too
• move it to <bsd.sys.mk>, handle generation by <bsd.subdir.mk>
• add /usr/include/openssl to mtree(8) base system tree file
• have all libs and flex use the generic target
• clean them up; repair a few bugs
@
text
@# $MirOS: src/lib/libossaudio/Makefile,v 1.5 2007/05/17 00:35:56 tg Exp $
# $OpenBSD: Makefile,v 1.2 1998/05/04 06:02:37 deraadt Exp $
# $NetBSD: Makefile,v 1.5 1998/04/13 14:18:45 lukem Exp $

LIB=		ossaudio
SHLIB_VERSION?=	0.0
MAN=		ossaudio.3
SRCS=		ossaudio.c
HDRS=		soundcard.h

.include <bsd.lib.mk>
@


1.5
log
@• generate a shared libossaudio

This sucks, but libtool in pkgsrc® can't build a shared libesd if it can't
link against this (static deplib, stuff like that), and if I just install
the piclib, which is supposed to work, it links against the non-pic static
archive, using -lossaudio though. Correct approach to fix this is to have
the {compiler driver,linker} look for libFOO_pic.a on -lFOO _only_ if ge-
nerating a shared library (I think). Or am I mistaken?
@
text
@d1 1
a1 1
# $MirOS: src/lib/libossaudio/Makefile,v 1.4 2005/12/23 09:46:36 tg Exp $
d9 1
a9 6

includes:
	@@cd ${.CURDIR} && cmp -s soundcard.h \
	    ${DESTDIR}/usr/include/soundcard.h || ${INSTALL} ${INSTALL_COPY} \
	    -m ${NONBINMODE} -o $(BINOWN) -g $(BINGRP) \
	    soundcard.h ${DESTDIR}/usr/include/
@


1.4
log
@I feel *much* better if libossaudio.a is a PIC library
(there's no reason for libossaudio_pic.a but in the rare
case something like libesd wants to use OSS audio since
it can't do sunaudio...)
@
text
@d1 1
a1 1
# $MirOS: src/lib/libossaudio/Makefile,v 1.3 2005/06/14 13:12:57 tg Exp $
d6 1
a8 4
NOPIC=		Yes

.include <bsd.own.mk>
COPTS+=		${PICFLAG}
@


1.3
log
@we don't need a 7 KiB shared libossaudio which only exports
one function (OSS ioctl) anyway.

why is soundcard.h not in sys/ besides?
@
text
@d1 1
a1 1
# $MirOS: src/lib/libossaudio/Makefile,v 1.2 2005/03/06 20:29:12 tg Exp $
d10 3
d14 4
a17 3
	@@cd ${.CURDIR}; cmp -s soundcard.h ${DESTDIR}/usr/include/soundcard.h || \
	  ${INSTALL} ${INSTALL_COPY} -m 444 -o $(BINOWN) -g $(BINGRP) soundcard.h \
	  ${DESTDIR}/usr/include
@


1.2
log
@merge src/lib
@
text
@d1 1
a1 1
# $MirOS$
a4 1
SHLIB_VERSION?=	4.0
d8 1
@


1.1
log
@Initial revision
@
text
@d1 8
a8 9
#	$OpenBSD: Makefile,v 1.2 1998/05/04 06:02:37 deraadt Exp $
#	$NetBSD: Makefile,v 1.5 1998/04/13 14:18:45 lukem Exp $

LIB=	ossaudio
MAN=	ossaudio.3

SRCS=	ossaudio.c

CPPFLAGS+= -I${.CURDIR}
a15 1

@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
