head	1.26;
access;
symbols
	cvs-200804031830:1.1.1.3
	MIRBSD_10:1.16.0.2
	MIRBSD_10_BASE:1.16
	cvs-200706161500:1.1.1.3
	cvs-200705171600:1.1.1.3
	OPENBSD_4_0:1.1.1.3
	MIRBSD_9_BASE:1.10
	MIRBSD_8:1.6.0.2
	MIRBSD_8_BASE:1.6
	cvs-200512060130:1.1.1.3
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2015.07.18.22.48.21;	author tg;	state Exp;
branches;
next	1.25;
commitid	10055AAD7BC6B247CCA;

1.25
date	2014.11.29.22.18.32;	author tg;	state Exp;
branches;
next	1.24;
commitid	100547A46266F534C4C;

1.24
date	2014.11.26.22.57.26;	author tg;	state Exp;
branches;
next	1.23;
commitid	10054765AE71743B8DC;

1.23
date	2014.11.26.22.53.04;	author tg;	state Exp;
branches;
next	1.22;
commitid	100547659CA53B50C9D;

1.22
date	2014.11.26.22.13.14;	author tg;	state Exp;
branches;
next	1.21;
commitid	1005476508E364BAE06;

1.21
date	2014.11.26.21.30.50;	author tg;	state Exp;
branches;
next	1.20;
commitid	1005476468C1794A72A;

1.20
date	2014.11.26.20.02.22;	author tg;	state Exp;
branches;
next	1.19;
commitid	100547631E108309049;

1.19
date	2014.11.26.19.57.41;	author tg;	state Exp;
branches;
next	1.18;
commitid	100547630C26F62A933;

1.18
date	2014.11.26.19.22.16;	author tg;	state Exp;
branches;
next	1.17;
commitid	1005476283E2526F9BB;

1.17
date	2009.02.14.15.07.16;	author tg;	state Exp;
branches;
next	1.16;
commitid	1004996DE266441BCA6;

1.16
date	2007.06.21.14.40.20;	author tg;	state Exp;
branches;
next	1.15;
commitid	100467A8D2C4D7EEFFE;

1.15
date	2007.05.17.18.38.35;	author tg;	state Exp;
branches;
next	1.14;
commitid	100464CA0BC3310E768;

1.14
date	2007.03.08.10.50.20;	author tg;	state Exp;
branches;
next	1.13;
commitid	10045EFEA64749A2C51;

1.13
date	2006.10.15.00.53.05;	author tg;	state Exp;
branches;
next	1.12;
commitid	1004531867C62C7E39E;

1.12
date	2006.09.20.23.30.24;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004511CF1405666C60;

1.11
date	2006.09.20.20.38.15;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004511A6C160F978C8;

1.10
date	2006.06.11.00.22.19;	author tg;	state Exp;
branches;
next	1.9;
commitid	100448B62461D023A55;

1.9
date	2006.05.10.17.53.12;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004462285F2018F6F8;

1.8
date	2006.03.27.19.19.14;	author tg;	state Exp;
branches;
next	1.7;
commitid	10044283AC62F600918;

1.7
date	2006.03.27.18.28.07;	author tg;	state Exp;
branches;
next	1.6;
commitid	10044282EB776579C41;

1.6
date	2005.12.06.01.46.45;	author tg;	state Exp;
branches;
next	1.5;
commitid	3ec54394ed9a4fd0;

1.5
date	2005.04.29.13.52.36;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.26.15.36.19;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.15.18.51.39;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.06.20.29.36;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.26.15;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.26.15;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.04.26.14.54.49;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2005.12.06.01.36.34;	author tg;	state Exp;
branches;
next	;
commitid	1dc34394eada9eb8;


desc
@@


1.26
log
@bump; this was enough to get SHA2 in openssltool(1) apparently
@
text
@# $MirOS: src/lib/libssl/ssl/Makefile,v 1.25 2014/11/29 22:18:32 tg Exp $
# $OpenBSD: Makefile,v 1.21 2005/11/24 20:49:23 deraadt Exp $

SHLIB_VERSION?=	14.1
LIB=		ssl
DPADD+=		${LIBCRYPTO}
LDADD+=		-lcrypto
LDFLAGS+=	-Wl,-Bsymbolic

SSLEAYDIST=	src

LSSL_SRC=	${.CURDIR}/../${SSLEAYDIST}/ssl

.include <bsd.own.mk>

CPPFLAGS+=	-I${.CURDIR}/../${SSLEAYDIST}

SRCS=	bio_ssl.c s23_pkt.c s23_srvr.c s3_both.c s3_clnt.c s3_enc.c \
	s3_lib.c s3_pkt.c s3_srvr.c ssl_algs.c ssl_asn1.c ssl_cert.c \
	ssl_ciph.c ssl_err.c ssl_err2.c ssl_lib.c ssl_rsa.c ssl_sess.c \
	ssl_stat.c ssl_txt.c t1_clnt.c t1_enc.c t1_lib.c t1_meth.c t1_srvr.c

HDRS=	ssl.h ssl2.h ssl3.h ssl23.h tls1.h
HDRSRC=	${LSSL_SRC}
HDRDST=	${DESTDIR}/usr/include/openssl

.PATH:	${LSSL_SRC}

prereq:

.include <bsd.lib.mk>
@


1.25
log
@‚Ä¢ clean up CPPFLAGS
‚Ä¢ move most of the Makefile.inc-ish stuff into the header
‚Ä¢ while here, switch from i386 to i486 for assembly CPU level
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.24 2014/11/26 22:57:26 tg Exp $
d4 1
a4 1
SHLIB_VERSION?=	14.0
@


1.24
log
@sort SRCS and remove unused files
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.23 2014/11/26 22:53:04 tg Exp $
d16 1
a16 5
.if ${MACHINE_ARCH} == "i386"
CPPFLAGS+= -DBN_ASM
.endif

CPPFLAGS+= -DNO_ERR -I${.CURDIR}/../${SSLEAYDIST}
@


1.23
log
@bring back sslv23_accept() for generic TLS_method (not TLS_server_method!)

idea here is to accept TLSv1 ClientHello in SSLv2 compat code, as sent
by MirBSD and Debian squeeze
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.22 2014/11/26 22:13:14 tg Exp $
d22 4
a25 6
SRCS=	bio_ssl.c s3_both.c s3_srvr.c ssl_err2.c ssl_txt.c	\
	t1_srvr.c s3_clnt.c ssl_algs.c ssl_lib.c	\
	s3_enc.c ssl_asn1.c ssl_rsa.c			\
	t1_clnt.c s3_lib.c ssl_cert.c ssl_sess.c	\
	t1_enc.c ssl_ciph.c ssl_stat.c	\
	t1_lib.c s3_pkt.c ssl_err.c t1_meth.c s23_srvr.c s23_pkt.c
@


1.22
log
@shrink, baby, shrink! ‚ò∫
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.21 2014/11/26 21:30:50 tg Exp $
d27 1
a27 1
	t1_lib.c s3_pkt.c ssl_err.c t1_meth.c
@


1.21
log
@wow, that worked. remove SSLv2, which also works, with the deficiency
that s_client now defaults to -ssl3
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.20 2014/11/26 20:02:22 tg Exp $
d23 5
a27 5
	t1_srvr.c s23_clnt.c s3_clnt.c ssl_algs.c ssl_lib.c	\
	s23_lib.c s3_enc.c ssl_asn1.c ssl_rsa.c			\
	t1_clnt.c s23_meth.c s3_lib.c ssl_cert.c ssl_sess.c	\
	t1_enc.c s23_pkt.c s3_meth.c ssl_ciph.c ssl_stat.c	\
	t1_lib.c s23_srvr.c s3_pkt.c ssl_err.c t1_meth.c
@


1.20
log
@make ‚Äúmake prereq‚Äù descend
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.19 2014/11/26 19:57:41 tg Exp $
d22 6
a27 7
SRCS=	bio_ssl.c s2_clnt.c s3_both.c s3_srvr.c ssl_err2.c ssl_txt.c	\
	t1_srvr.c s23_clnt.c s2_enc.c s3_clnt.c ssl_algs.c ssl_lib.c	\
	s23_lib.c s2_lib.c s3_enc.c ssl_asn1.c ssl_rsa.c	\
	t1_clnt.c s23_meth.c s2_meth.c s3_lib.c ssl_cert.c ssl_sess.c	\
	t1_enc.c s23_pkt.c s2_pkt.c s3_meth.c ssl_ciph.c ssl_stat.c	\
	t1_lib.c s23_srvr.c s2_srvr.c s3_pkt.c ssl_err.c \
	t1_meth.c
@


1.19
log
@kill Kerberos‚Ö§ more
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.18 2014/11/26 19:22:16 tg Exp $
d36 2
@


1.18
log
@bump libcrypto and libssl major in preparation of things to come
while here, remove IDEA, MDC2 and RC5 (make MKC_USAP a nop) ‚Äì as
they are ancient algorithms not really used in OpenSSL, with not
few more to come‚Ä¶
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.17 2009/02/14 15:07:16 tg Exp $
d30 1
a30 1
HDRS=	ssl.h ssl2.h ssl3.h ssl23.h tls1.h kssl.h
@


1.17
log
@by suggestion from http://marc.info/?l=netbsd-tech-userlevel&m=123359850822372
link libcrypto and libssl with -Bsymbolic
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.16 2007/06/21 14:40:20 tg Exp $
d4 1
a4 1
SHLIB_VERSION?=	12.0
@


1.16
log
@‚Ä¢ libedit, libm, libocurses, libsectok, libskey, libssl, libusbhid, libutil:
  do something I should've long done and bump their majors ‚Äì ABI changes are
  not only removals (or changes) of T/D symbols but also additions(!) of U
  symbols (i.e. imports); these changed during the <ctype.h> changes from a
  while ago and depend on newer libc; I did an nm(1) comparision against #9
  (release) to allow upgrading by source
‚Ä¢ libc, uname: since I'm bumping a lot of other shlibs, it's a good time to
  bump the libc major as well and finally get rid of that struct utsname bug
  I introduced when I had no idea what I was doing, in MirOS #1 or so‚Ä¶
‚Ä¢ libpthread: requires a major bump if libc major is bumped, or so they say
‚Ä¢ bump os patchlevel

agreed bsiegert@@
XXX any more changes to do before release?
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.15 2007/05/17 18:38:35 tg Exp $
d8 1
@


1.15
log
@more includes-target overhaul:
‚Ä¢ document it
‚Ä¢ do it for <bsd.prog.mk> too
‚Ä¢ move it to <bsd.sys.mk>, handle generation by <bsd.subdir.mk>
‚Ä¢ add /usr/include/openssl to mtree(8) base system tree file
‚Ä¢ have all libs and flex use the generic target
‚Ä¢ clean them up; repair a few bugs
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.14 2007/03/08 10:50:20 tg Exp $
d4 1
a4 1
SHLIB_VERSION?=	11.2
@


1.14
log
@upgrade to OpenSSL 0.9.7m
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.13 2006/10/15 00:53:05 tg Exp $
d30 2
a34 10
includes:
	@@test -d ${DESTDIR}/usr/include/openssl || \
	    mkdir ${DESTDIR}/usr/include/openssl
	@@cd ${LSSL_SRC}; for i in $(HDRS); do \
		j="cmp -s $$i ${DESTDIR}/usr/include/openssl/$$(basename $$i) \
		    || cp -p $$i ${DESTDIR}/usr/include/openssl/"; \
		echo $$j; \
		eval "$$j"; \
	done

@


1.13
log
@make it harder to not sync these
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.12 2006/09/20 23:30:24 tg Exp $
d4 1
a4 1
SHLIB_VERSION?=	11.1
@


1.12
log
@* fix missing include
* default to NOT using IDEA at run-time, apps must explicitly
  request it for SSL
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.11 2006/09/20 20:38:15 tg Exp $
d19 1
a19 5
CPPFLAGS+= -DTERMIOS -DANSI_SOURCE -DNO_ERR -DARC4PUSH
CPPFLAGS+= -DOPENSSL_NO_KRB5 -DHAVE_DLFCN_H -I${.CURDIR}/../${SSLEAYDIST}
.if ${MKC_USAP:L} == "yes"
CPPFLAGS+= -DOPENSSL_NO_RC5 -DOPENSSL_NO_MDC2 -DOPENSSL_NO_IDEA
.endif
@


1.11
log
@try to clean up the openssl mess
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.10 2006/06/11 00:22:19 tg Exp $
d13 2
@


1.10
log
@no need to chown/chmod the includes, src/include/Makefile does that for us
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.9 2006/05/10 17:53:12 tg Exp $
d4 1
a4 1
SHLIB_VERSION?=	11.0
d17 1
a17 1
CPPFLAGS+= -DOPENSSL_NO_IDEA -DTERMIOS -DANSI_SOURCE -DNO_ERR -DARC4PUSH
d19 3
@


1.9
log
@* fix dependencies of libssl.so
  bug report From: CÈdric Berger <cedric@@berger.to>
  Message-ID: <E40D00E6-AD49-487C-8B9E-7C2F16BC74CD@@berger.to>
  -- candidate for MFC along with all the other
     rpath additions
* fix whitespace while here
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.8 2006/03/27 19:19:14 tg Exp $
a40 2
	chown -R ${BINOWN}:${BINGRP} ${DESTDIR}/usr/include/openssl
	chmod -R a=rX ${DESTDIR}/usr/include/openssl
@


1.8
log
@sync includes target
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.7 2006/03/27 18:28:07 tg Exp $
d6 2
d9 1
a9 1
SSLEAYDIST= src
d11 1
a11 1
LSSL_SRC= ${.CURDIR}/../${SSLEAYDIST}/ssl
@


1.7
log
@for TLSv1: add randomness gained from kex (including rekeying) to kernel,
like with openssh and openvpn
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.6 2005/12/06 01:46:45 tg Exp $
d34 7
a40 6
	    j="cmp -s $$i ${DESTDIR}/usr/include/openssl/`basename $$i` || \
	    ${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i\
		${DESTDIR}/usr/include/openssl"; \
	    echo $$j; \
	    eval "$$j"; \
	done;
@


1.6
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.5 2005/04/29 13:52:36 tg Exp $
d15 1
a15 1
CPPFLAGS+= -DOPENSSL_NO_IDEA -DTERMIOS -DANSI_SOURCE -DNO_ERR
@


1.5
log
@merge
@
text
@d1 2
a2 2
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.4 2005/04/26 15:36:19 tg Exp $
# $OpenBSD: Makefile,v 1.20 2005/03/30 13:08:02 markus Exp $
@


1.4
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.3 2005/03/15 18:51:39 tg Exp $
d4 1
a4 1
SHLIB_VERSION?=	10.0
@


1.3
log
@better, unified, endianness detection
@
text
@d1 2
a2 2
# $MirOS: src/lib/libssl/ssl/Makefile,v 1.2 2005/03/06 20:29:36 tg Exp $
# $OpenBSD: Makefile,v 1.19 2004/08/06 22:41:41 pefo Exp $
d16 1
a16 2
CPPFLAGS+= -DOPENSSL_NO_KRB5 -DSO_DLFCN -DHAVE_DLFCN_H
CPPFLAGS+= -I${.CURDIR}/../${SSLEAYDIST}
@


1.2
log
@merge src/lib
@
text
@d1 1
a1 1
# $MirOS$
d12 1
a12 1
CPPFLAGS+= -DL_ENDIAN -DBN_ASM
@


1.1
log
@Initial revision
@
text
@d1 1
d4 2
a5 1
LIB=	ssl
d12 1
a12 11
CFLAGS+= -DL_ENDIAN -DBN_ASM
.else
.if ${MACHINE_ARCH} == "vax"
CFLAGS+= -DL_ENDIAN
.else
.if ${MACHINE_ARCH} == "alpha"
# no ENDIAN stuff defined for alpha
.else
CFLAGS+= -DB_ENDIAN
.endif
.endif 
d15 3
a17 4
CFLAGS+= -DOPENSSL_NO_IDEA -DTERMIOS -DANSI_SOURCE -DNO_ERR 
CFLAGS+= -DOPENSSL_NO_MDC2
CFLAGS+= -DOPENSSL_NO_RC5 -DOPENSSL_NO_KRB5 -DSO_DLFCN -DHAVE_DLFCN_H 
CFLAGS+= -I${.CURDIR}/../${SSLEAYDIST}
d25 1
a25 1
	t1_meth.c 
d27 1
a27 1
HDRS=	ssl.h ssl2.h ssl3.h ssl23.h tls1.h kssl.h 
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@latest fixes from OpenBSD, last update for #8 if nothing weird happens
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/03/30 13:08:02 markus Exp $
d25 1
a25 1
CFLAGS+= -DOPENSSL_NO_RC5 -DOPENSSL_NO_KRB5 -DHAVE_DLFCN_H 
@


1.1.1.3
log
@OpenSSL is always worth another import, isn't it?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/11/24 20:49:23 deraadt Exp $
a3 1
WANTLINT=
@


