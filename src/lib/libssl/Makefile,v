head	1.8;
access;
symbols
	cvs-200804031830:1.1.1.2
	MIRBSD_10:1.6.0.2
	MIRBSD_10_BASE:1.6
	cvs-200706161500:1.1.1.2
	cvs-200705171600:1.1.1.2
	OPENBSD_4_0:1.1.1.2
	MIRBSD_9_BASE:1.2
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	cvs-200512060130:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2015.05.25.18.23.25;	author tg;	state Exp;
branches;
next	1.7;
commitid	100556368AA0D0B54C0;

1.7
date	2014.11.26.20.02.20;	author tg;	state Exp;
branches;
next	1.6;
commitid	100547631E108309049;

1.6
date	2007.07.05.22.18.13;	author tg;	state Exp;
branches;
next	1.5;
commitid	100468D6E281DB5974F;

1.5
date	2007.05.08.22.38.58;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004640FBBB11A9CFA0;

1.4
date	2007.05.08.21.54.24;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004640F1A70531C0F2;

1.3
date	2006.10.28.19.58.55;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004543B6953C09C38F;

1.2
date	2005.04.26.15.36.17;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.25.33;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.25.33;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.04.26.14.53.19;	author tg;	state Exp;
branches;
next	;


desc
@@


1.8
log
@ship pregenerated dhparams; add code to update it
@
text
@# $MirOS: src/lib/libssl/Makefile,v 1.7 2014/11/26 20:02:20 tg Exp $
# $OpenBSD: Makefile,v 1.13 2002/09/03 18:59:55 markus Exp $

SUBDIR=	crypto ssl man

afterinstall:
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${NONBINMODE} \
	    ${.CURDIR}/openssl.pc ${DESTDIR}/usr/libdata/pkgconfig/

distribution:
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${CONFGRP} -m ${NONBINMODE} \
	    ${.CURDIR}/dhparams.pem ${DESTDIR}/etc/ssl/dhparams.pem
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${CONFGRP} -m ${NONBINMODE} \
	    ${.CURDIR}/openssl.cnf ${DESTDIR}/etc/ssl/openssl.cnf
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${CONFGRP} -m ${NONBINMODE} \
	    ${.CURDIR}/x509v3.cnf ${DESTDIR}/etc/ssl/x509v3.cnf

DHSIZE=	2048
update-dhparams:
	time openssl dhparam -out ${.CURDIR}/dhparams.pem ${DHSIZE}

prereq: _SUBDIRUSE

.PHONY: distribution update-dhparams

.include <bsd.subdir.mk>
@


1.7
log
@make “make prereq” descend
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/Makefile,v 1.6 2007/07/05 22:18:13 tg Exp $
d12 1
a12 1
	   ${.CURDIR}/openssl.cnf ${DESTDIR}/etc/ssl/openssl.cnf
d14 7
a20 1
	   ${.CURDIR}/x509v3.cnf ${DESTDIR}/etc/ssl/x509v3.cnf
d24 2
@


1.6
log
@move /usr/share/pkgconfig/ -> /usr/libdata/pkgconfig/
by suggestion of bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/Makefile,v 1.5 2007/05/08 22:38:58 tg Exp $
d16 2
@


1.5
log
@• add new directory to base: /usr/share/pkgconfig
• ports/devel/pkgconfig module: use it
• src/lib/libssl: add a pregenerated "openssl.pc" file; install it
• while here, enable the zlib compression in openssl, link against libz,
  bump minor (not needed for libz link due to DT_RPATH, but because c_zlib.c
  exports some new functions)
• sync lists
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/Makefile,v 1.4 2007/05/08 21:54:24 tg Exp $
d8 1
a8 1
	    ${.CURDIR}/openssl.pc ${DESTDIR}/usr/share/pkgconfig/
@


1.4
log
@why?
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/Makefile,v 1.3 2006/10/28 19:58:55 tg Exp $
d6 4
@


1.3
log
@CONFGRP
@
text
@d1 1
a1 1
# $MirOS: src/lib/libssl/Makefile,v 1.2 2005/04/26 15:36:17 tg Exp $
d8 1
a8 1
	   ${.CURDIR}/openssl.cnf ${DESTDIR}/etc/ssl/openssl.cnf && \
@


1.2
log
@merge
@
text
@d1 1
a1 1
# $MirOS$
d7 1
a7 1
	${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d9 1
a9 1
	${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
@


1.1
log
@Initial revision
@
text
@d1 1
d4 1
a4 1
SUBDIR=crypto ssl man
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@latest fixes from OpenBSD, last update for #8 if nothing weird happens
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/04/01 05:31:40 beck Exp $
a8 2
	   ${.CURDIR}/cert.pem ${DESTDIR}/etc/ssl/cert.pem && \
	${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
@

