head	1.4;
access;
symbols
	mksh-R27e:1.3
	MIRBSD_9_BASE:1.3
	mksh-R27d:1.3
	mksh-R27:1.2
	mksh-R26c:1.2
	mksh-R26b:1.2
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	mksh-R26:1.2
	mksh-R25:1.2
	mksh-R24c:1.2
	mksh-R24b:1.2
	mksh-R24:1.2
	mksh-R23:1.2
	mksh-R22:1.2
	mksh-R21:1.2;
locks; strict;
comment	@# @;


1.4
date	2006.08.12.18.43.55;	author tg;	state dead;
branches;
next	1.3;
commitid	10044DE21485A4E7741;

1.3
date	2006.06.23.15.05.39;	author tg;	state Exp;
branches;
next	1.2;
commitid	100449C035551CF7D76;

1.2
date	2005.05.23.12.06.39;	author tg;	state Exp;
branches;
next	1.1;
commitid	771b4291c7583f41;

1.1
date	2005.05.23.12.01.09;	author tg;	state Exp;
branches;
next	;
commitid	14d64291c5d9a061;


desc
@@


1.4
log
@gensigs.sh was called with $SHELL (or /bin/sh if $SHELL was a csh),
which failed for Han Boetes using zsh as user shell (to test). Now,
the code is integrated into Build.sh as-is, and Test.sh uses $SHELL
no longer either but the mksh just built, in the shebang line.
@
text
@#!/bin/sh
# $MirOS: src/bin/mksh/gensigs.sh,v 1.3 2006/06/23 15:05:39 tg Exp $

echo '#include <signal.h>' | $CC $CPPFLAGS -E -dD -D_ANSI_SOURCE - \
    | grep '[	 ]SIG[A-Z0-9]*[	 ]' \
    | sed 's/^\(.*[	 ]SIG\)\([A-Z0-9]*\)\([	 ].*\)$/\2/' \
    | while read name; do
	( echo '#include <signal.h>'; echo "__mksh_test: SIG$name" ) \
	    | $CC $CPPFLAGS -E - | fgrep __mksh_test: | sed \
	    's/^__mksh_test: \([0-9]*\).*$/		{ \1, "'$name'" },/'
done | fgrep -v '{ ,' >signames.inc
@


1.3
log
@add a little portability
@
text
@d2 1
a2 1
# $MirOS: src/bin/mksh/gensigs.sh,v 1.2 2005/05/23 12:06:39 tg Exp $
@


1.2
log
@some spacing; move array into function
@
text
@d2 1
a2 1
# $MirOS: src/bin/mksh/gensigs.sh,v 1.1 2005/05/23 12:01:09 tg Exp $
d4 1
a4 1
echo '#include <signal.h>' | $CC -E -dD -D_ANSI_SOURCE - \
d9 1
a9 1
	    | $CC -E - | fgrep __mksh_test: | sed \
@


1.1
log
@support getting sys_siglist[], sys_signame[] and NSIG retrieval
for portable mksh on various operating systems
@
text
@d2 1
a2 1
# $MirOS$
d9 2
a10 2
	    | $CC -E - | fgrep __mksh_test: \
	    | sed 's/^__mksh_test: \([0-9]*\).*$/    { \1, "'$name'" },/'
@

