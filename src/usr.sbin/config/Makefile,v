head	1.8;
access;
symbols
	MIRBSD_10:1.7.0.2
	MIRBSD_10_BASE:1.7
	MIRBSD_9_BASE:1.4
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2008.06.13.15.12.32;	author tg;	state Exp;
branches;
next	1.7;
commitid	10048528E7265FA5FDF;

1.7
date	2007.04.28.00.12.51;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004632918E6CE6474D;

1.6
date	2007.02.19.03.24.54;	author tg;	state Exp;
branches;
next	1.5;
commitid	10045D918935A99757A;

1.5
date	2007.02.19.03.03.29;	author tg;	state Exp;
branches;
next	1.4;
commitid	10045D913776373EBF0;

1.4
date	2006.06.16.20.39.50;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004493170854E14E55;

1.3
date	2005.03.15.19.28.30;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.13.19.16.18;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.30.24;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.30.24;	author tg;	state Exp;
branches;
next	;


desc
@@


1.8
log
@warning cleanup
@
text
@# $MirOS: src/usr.sbin/config/Makefile,v 1.7 2007/04/28 00:12:51 tg Exp $
# $OpenBSD: Makefile,v 1.13 2003/07/22 17:15:13 brad Exp $

.include <bsd.own.mk>

PROG=		config
MAN=		config.8
SRCS=		files.c gram.y hash.c main.c mkheaders.c mkioconf.c \
		mkmakefile.c mkswap.c pack.c scan.l sem.c util.c \
		ukc.c ukcmain.c misc.c ukcutil.c cmd.c exec.c
.if ${OBJECT_FMT:U} == "ELF"
CPPFLAGS+=	-DELF_SUPPORT
SRCS+=		exec_elf.c
.else
CPPFLAGS+=	-DAOUT_SUPPORT
SRCS+=		exec_aout.c
.endif

.ifdef __CRAZY
CFLAGS_main.o=		-Wno-error	#XXX ht_insert "data" arg const
CFLAGS_sem.o=		-Wno-error	#XXX ht_insert "data" arg const
CFLAGS_ukcmain.o=	-Wno-error	#XXX struct nlist initialisation
.endif

CPPFLAGS+=	-I.

LDADD=		-lkvm -lz
DPADD=		${LIBKVM} ${LIBZ}

.include <bsd.prog.mk>
@


1.7
log
@more lex/yacc overhaul, tentatively
@
text
@d1 1
a1 1
# $MirOS: src/usr.sbin/config/Makefile,v 1.6 2007/02/19 03:24:54 tg Exp $
d10 1
a10 1
		ukc.c misc.c ukcutil.c cmd.c exec.c
d20 3
a22 1
EXPERIMENTAL=	Yes
@


1.6
log
@improve this warnings horror a little more
XXX nlist API sucks
@
text
@d1 1
a1 1
# $MirOS: src/usr.sbin/config/Makefile,v 1.5 2007/02/19 03:03:29 tg Exp $
d7 1
a27 5
CLEANFILES+=	gram.c scan.c y.tab.h
MAN=		config.8

beforedepend: gram.c scan.c

@


1.5
log
@* begin __CRAZY cleanup of config(8), not yet completed
  due to time constraints
* store the kernel config as section .config.gz, gzip'd
@
text
@d1 1
a1 1
# $MirOS: src/usr.sbin/config/Makefile,v 1.4 2006/06/16 20:39:50 tg Exp $
a9 1
CDIAGFLAGS+=	-Wno-cast-qual
d19 1
a19 2
CFLAGS_scan.o+=	-Wno-error
CFLAGS_ukc.o+=	-Wno-error
@


1.4
log
@explicit dependency libkvm <- libz
sparc is, when cross-compiled, a static arch, so...
@
text
@d1 1
a1 1
# $MirOS: src/usr.sbin/config/Makefile,v 1.3 2005/03/15 19:28:30 tg Exp $
d10 1
d19 5
@


1.3
log
@unabuse
@
text
@d1 1
a1 1
# $MirOS: src/usr.sbin/config/Makefile,v 1.2 2005/03/13 19:16:18 tg Exp $
d20 2
a21 2
LDADD=		-lkvm
DPADD=		${LIBKVM}
@


1.2
log
@fast merge src/usr.sbin
@
text
@d1 1
a1 1
# $MirOS$
d14 1
a14 1
CFLAGS+=	-DAOUT_SUPPORT
d26 2
a28 2

.depend: gram.c scan.c
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.13 2003/07/22 17:15:13 brad Exp $
d6 7
a12 7
PROG=	config
SRCS=	files.c gram.y hash.c main.c mkheaders.c mkioconf.c mkmakefile.c \
	mkswap.c pack.c scan.l sem.c util.c \
	ukc.c misc.c ukcutil.c cmd.c exec.c
.if (${ELF_TOOLCHAIN:L} == "yes")
CFLAGS+=-DELF_SUPPORT
SRCS+=  exec_elf.c
d14 2
a15 2
CFLAGS+=-DAOUT_SUPPORT
SRCS+=  exec_aout.c
d18 1
a18 1
CFLAGS+=-I${.CURDIR} -I.
d20 2
a21 2
LDADD=	-lkvm
DPADD=	${LIBKVM}
d23 2
a24 2
CLEANFILES=gram.c scan.c y.tab.h
MAN=	config.8
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@
