head	1.36;
access;
symbols
	MIRBSD_10:1.3.0.2
	MIRBSD_10_BASE:1.3;
locks; strict;
comment	@# @;


1.36
date	2018.05.02.12.28.12;	author tg;	state Exp;
branches;
next	1.35;
commitid	1005AE9AEF617E7B8AD;

1.35
date	2017.04.03.12.42.24;	author tg;	state Exp;
branches;
next	1.34;
commitid	10058E243491AD6E19F;

1.34
date	2015.10.25.00.44.49;	author tg;	state Exp;
branches;
next	1.33;
commitid	100562C261611D37847;

1.33
date	2014.02.20.01.01.01;	author tg;	state Exp;
branches;
next	1.32;
commitid	100530553E421091CD1;

1.32
date	2013.09.11.18.38.31;	author tg;	state Exp;
branches;
next	1.31;
commitid	1005230B8BA2ABFC694;

1.31
date	2012.09.02.17.06.15;	author tg;	state Exp;
branches;
next	1.30;
commitid	1005043921E7051A956;

1.30
date	2012.01.15.03.00.51;	author tg;	state Exp;
branches;
next	1.29;
commitid	1004F12417B30302B2A;

1.29
date	2011.08.18.22.06.56;	author tg;	state Exp;
branches;
next	1.28;
commitid	1004E4D8D165ABAA5EB;

1.28
date	2011.01.23.01.31.51;	author tg;	state Exp;
branches;
next	1.27;
commitid	1004D3B851D06DE037C;

1.27
date	2010.11.12.22.09.08;	author tg;	state Exp;
branches;
next	1.26;
commitid	1004CDDBB132EE0B9EA;

1.26
date	2010.09.24.19.12.52;	author tg;	state Exp;
branches;
next	1.25;
commitid	1004C9CF84C2BC0E9CA;

1.25
date	2009.12.13.00.32.17;	author tg;	state Exp;
branches;
next	1.24;
commitid	1004B2436206D706B48;

1.24
date	2009.08.10.16.35.06;	author tg;	state Exp;
branches;
next	1.23;
commitid	1004A804C4A084DE7C6;

1.23
date	2009.07.24.16.29.48;	author tg;	state Exp;
branches;
next	1.22;
commitid	1004A69E1947AD4DE0D;

1.22
date	2009.06.29.20.51.44;	author tg;	state Exp;
branches;
next	1.21;
commitid	1004A492973269144EE;

1.21
date	2009.06.29.20.29.21;	author tg;	state Exp;
branches;
next	1.20;
commitid	1004A492435738F2983;

1.20
date	2009.06.29.16.42.01;	author tg;	state Exp;
branches;
next	1.19;
commitid	1004A48EEEE03F26496;

1.19
date	2009.06.07.18.01.23;	author tg;	state Exp;
branches;
next	1.18;
commitid	1004A2C008B03C4FD6F;

1.18
date	2009.06.07.17.54.11;	author tg;	state Exp;
branches;
next	1.17;
commitid	1004A2BFEDB79B9E8BE;

1.17
date	2009.06.07.13.21.00;	author tg;	state Exp;
branches;
next	1.16;
commitid	1004A2BBECE4101D014;

1.16
date	2009.06.07.13.10.19;	author tg;	state Exp;
branches;
next	1.15;
commitid	1004A2BBC46262348EA;

1.15
date	2009.04.13.14.45.32;	author tg;	state Exp;
branches;
next	1.14;
commitid	10049E35011116FCCE7;

1.14
date	2009.02.08.21.23.44;	author tg;	state Exp;
branches;
next	1.13;
commitid	100498F4D756C5CEBA0;

1.13
date	2009.02.03.00.09.59;	author tg;	state Exp;
branches;
next	1.12;
commitid	10049878B6F3E5880D5;

1.12
date	2009.02.01.15.52.18;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004985C54A5EB1F4E6;

1.11
date	2009.01.31.19.04.21;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004984A0CC7602B252;

1.10
date	2009.01.10.23.53.49;	author tg;	state Exp;
branches;
next	1.9;
commitid	100496935254BAD5F4E;

1.9
date	2009.01.10.19.09.35;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004968F28732AA650D;

1.8
date	2009.01.02.05.16.31;	author tg;	state Exp;
branches;
next	1.7;
commitid	100495DA33F62ABDC14;

1.7
date	2008.10.21.01.20.58;	author tg;	state Exp;
branches;
next	1.6;
commitid	10048FD2E8D7AE5FF49;

1.6
date	2008.10.20.23.27.32;	author tg;	state Exp;
branches;
next	1.5;
commitid	10048FD13FB6D2E7CF1;

1.5
date	2008.08.05.19.19.58;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004898A7E37E7F803E;

1.4
date	2008.03.21.20.55.51;	author tg;	state Exp;
branches;
next	1.3;
commitid	10047E420D8027C8058;

1.3
date	2007.10.20.23.30.40;	author tg;	state Exp;
branches
	1.3.2.1;
next	1.2;
commitid	100471A8F9932BF985D;

1.2
date	2007.10.20.22.41.34;	author tg;	state Exp;
branches;
next	1.1;
commitid	100471A8433584636D1;

1.1
date	2007.10.20.21.59.48;	author tg;	state Exp;
branches;
next	;
commitid	100471A7A5A6F57E677;

1.3.2.1
date	2008.03.21.20.55.55;	author tg;	state Exp;
branches;
next	;
commitid	10047E420D8027C8058;


desc
@@


1.36
log
@regenerate
@
text
@#!/usr/bin/env mksh
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.28 2010/11/12 21:20:35 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.28 2010/11/12 21:20:35 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/bootxx.S,v 1.26 2010/12/01 19:56:58 tg Exp $ +t:MBSD +s:MBR
#-
# Copyright (c) 2007, 2008, 2009, 2010
#	Thorsten Glaser <tg@@mirbsd.org>
#
# Provided that these terms and disclaimer and all copyright notices
# are retained or reproduced in an accompanying document, permission
# is granted to deal in this work without restriction, including un‐
# limited rights to use, publicly perform, distribute, sell, modify,
# merge, give away, or sublicence.
#
# This work is provided “AS IS” and WITHOUT WARRANTY of any kind, to
# the utmost extent permitted by applicable law, neither express nor
# implied; without malicious intent or gross negligence. In no event
# may a licensor, author or contributor be held liable for indirect,
# direct, other damage, loss, or other issues arising in any way out
# of dealing in the work, even if advised of the possibility of such
# damage or existence of a defect, except proven that it results out
# of said person’s immediate fault when using the work as intended.
#-
# Self-installing 32-bit x86 boot blocks for MirOS BSD/i386
# Reads a list of extents (firstblock lastblock) from standard input
# and writes bootxx to standard output, which can subsequentially be
# stored as partition boot record (or floppy boot sector) on disc.

set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x42 0x39 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
typeset -i ofs_bkcnt=76
typeset -i ofs_geomh=77
typeset -i ofs_geoms=79
typeset -i ofs_partp=81
typeset -i ofs_secsz=249
typeset -i begptr=388
typeset -Uui8 thecode

typeset -Uui16 curptr=begptr
typeset -i wnum=0 wofs=0 wrec=0 bkend=0x1FE

function do_record {
	typeset -Ui blk=$1 cnt=$2 n
	typeset -Uui16 x=blk y

	(( blk && cnt )) || return

	print -u2 "$wrec @@0x${curptr#16#}: $cnt @@$blk (0x${x#16#})"

	while (( cnt )); do
		let wrec++
		(( n = blk < 0x00000100 ? 0 :
		    blk < 0x00010000 ? 1 :
		    blk < 0x01000000 ? 2 : 3 ))
		(( x = cnt < 33 ? cnt : 32 ))
		(( y = blk ))
		print -u2 " - 0x${curptr#16#}: $((x)) (0x${x#16#}) @@ $blk" \
		    "(0x${y#16#})"
		(( thecode[curptr++] = (n++ << 5) | (x - 1) ))
		(( blk += x ))
		(( cnt -= x ))
		while (( n-- )); do
			(( thecode[curptr++] = y & 0xFF ))
			(( y >>= 8 ))
		done
	done
}

function record_block {
	typeset -Ui blk=$1

	if (( !blk || (wofs && blk != (wofs + wnum)) )); then
		# flush the blocks from the cache
		(( wnum )) && do_record $wofs $wnum
		wofs=0
		wnum=0
	fi
	if (( blk )); then
		# record some new block into the cache
		(( wofs )) || let wofs=blk
		(( wnum += 1 << sscale ))
	fi
}

typeset -i partp=0 numheads=0 numsecs=0 sscale=0 bsh=9 mbrpno=0 mbrptp=0 pofs=0
set -A g_code 0 0 0

while getopts ":0:1AB:g:h:M:O:p:S:s:" ch; do
	case $ch {
	(0)	;;
	(1)	;;
	(A)	numheads=0
		numsecs=99
		;;
	(B)	if (( (bsh = OPTARG) < 9 || OPTARG > 15 )); then
			print -u2 Error: invalid block size "2^'$OPTARG'"
			exit 1
		fi
		;;
	(g)	if [[ $OPTARG != +([0-9]):+([0-9]):+([0-9]) ]]; then
			print -u2 Error: invalid geometry code "'$OPTARG'"
			exit 1
		fi
		saveIFS=$IFS
		IFS=:
		set -A g_code -- $OPTARG
		IFS=$saveIFS ;;
	(h)	if (( (numheads = OPTARG) < 1 || OPTARG > 256 )); then
			print -u2 Warning: invalid head count "'$OPTARG'"
			numheads=0
		fi ;;
	(M)	if [[ $OPTARG != +([0-9])?(:?(0[Xx])+([0-9])) ]]; then
			print -u2 Warning: invalid partition info "'$OPTARG'"
			mbrpno=0
			mbrptp=0
		else
			saveIFS=$IFS
			IFS=:
			set -A mbr_code -- $OPTARG
			IFS=$saveIFS
			(( mbrpno = mbr_code[0] ))
			(( mbrptp = mbr_code[1] ))
			if (( mbrpno < 1 || mbrpno > 4 )); then
				print -u2 Warning: invalid partition \
				    number "'$OPTARG'"
				mbrpno=0
			fi
			if (( mbrptp < 1 || mbrptp > 255 )); then
				print -u2 Warning: invalid partition \
				    type "'$OPTARG'"
				mbrptp=0
			fi
		fi ;;
	(O)	if [[ $OPTARG != +([0-9]) ]]; then
			print -u2 Warning: invalid partition offset "'$OPTARG'"
		else
			pofs=$OPTARG
		fi ;;
	(p)	if (( (partp = OPTARG) < 1 || OPTARG > 255 )); then
			print -u2 Warning: invalid partition type "'$OPTARG'"
			partp=0
		fi ;;
	(S)	if (( (sscale = OPTARG) < 0 || OPTARG > 24 )); then
			print -u2 Error: invalid input scale "'$OPTARG'"
			exit 1
		fi ;;
	(s)	if (( (numsecs = OPTARG) < 1 || OPTARG > 63 )); then
			print -u2 Warning: invalid sector count "'$OPTARG'"
			numsecs=0
		fi ;;
	(*)	print -u2 'Syntax:
	bxinst [-1A] [-B blocksize] [-g C:H:S] [-h heads] [-M pno(1..4)[:typ]]
	    [-O partitionofs] [-p type] [-S scale] [-s secs] <sectorlist | \\
	    dd of=image conv=notrunc
Default values: blocksize=9 heads=16 sectors=63 part.ofs=0 type=0x27 scale=0
    partno=4 if -g (create MBR partition) is given; -A = auto boot geometry'
		exit 1 ;;
	}
done
shift $((OPTIND - 1))

typeset -Ui psz=0	# must be unsigned
if (( g_code[0] )); then
	# bounds check partition table values, calculate total sectors
	if (( g_code[0] < 1 || g_code[1] < 1 || g_code[1] > 256 ||
	    g_code[2] < 1 || g_code[2] > 63 )); then
		print -u2 Invalid geometry, values out of bounds.
	elif [[ $(print "(${g_code[0]} * ${g_code[1]} * ${g_code[2]})" \
	    "> 4294967295" | bc) = 1 ]]; then
		print -u2 Invalid geometry, more than 2 TiB of data.
	else
		# we know it's <= 2^32-1
		(( psz = g_code[0] * g_code[1] * g_code[2] ))
	fi
fi
if (( psz )); then
	print -u2 geometry is $psz sectors \($(print \
	    "$psz * $((1 << bsh))" | bc) bytes\) in ${g_code[0]} cylinders, \
	    ${g_code[1]} heads, ${g_code[2]} sectors per track
	if (( numsecs == 0 || (numsecs != 99 && numheads == 0) )); then
		print -u2 Warning: using these values for C/H/S boot
		numheads=${g_code[1]}
		numsecs=${g_code[2]}
	fi
	(( mbrpno )) || mbrpno=4	# default partition number
fi
if (( mbrpno )); then
	bkend=0x1BE
	(( psz )) || print -u2 Warning: no geometry given, will not \
	    create an MBR partition table entry
fi

if (( numsecs == 99 )); then
	numheads=0
	numsecs=0
else
	if (( !numheads )); then
		print -u2 Warning: using default value of 16 heads
		numheads=16
	fi

	if (( !numsecs )); then
		print -u2 Warning: using default value of 63 sectors
		numsecs=63
	fi
fi

# read in the extents
while read firstblock lastblock junk; do
	while (( firstblock <= lastblock )); do
		record_block $((firstblock++ << sscale))
	done
done
record_block 0	# just flush
print -u2 "using $wrec blocks, $((curptr-begptr)) bytes ($((bkend-curptr)) free)"

# fill the block table
if (( curptr-- > bkend )); then
	print -u2 Error: too many blocks
	exit 1
fi
while (( ++curptr < bkend )); do
	(( thecode[curptr] = (curptr & 0xFCF) == 0x1C2 ? 0 : RANDOM & 0xFF ))
	# ensure the “active” flag is never set to 0x00 or 0x80
	if (( ((curptr + 2) & 0xFCF) == 0x01C0 )); then
		(( thecode[curptr] & 0x7F )) || let --curptr
	fi
done
thecode[510]=0x55
thecode[511]=0xAA

# fill in other data
(( thecode[ofs_bkcnt] = wrec ))
(( thecode[ofs_geomh] = numheads & 0xFF ))
(( thecode[ofs_geomh + 1] = numheads >> 8 ))
(( thecode[ofs_geoms] = numsecs ))
(( thecode[ofs_partp] = partp ))
print -u2 "using sectors of 2^$bsh = $((1 << bsh)) bytes"
(( thecode[ofs_secsz] = (1 << (bsh - 8)) ))

# create an MBR partition if desired
if (( psz )); then
	(( mbrpno = 0x1BE + ((mbrpno - 1) * 16) ))
	set -A o_code	# g_code equivalent for partition offset
	(( o_code[2] = pofs % g_code[2] + 1 ))
	(( o_code[1] = pofs / g_code[2] ))
	(( o_code[0] = o_code[1] / g_code[1] + 1 ))
	(( o_code[1] = o_code[1] % g_code[1] + 1 ))
	# boot flag; C/H/S offset
	thecode[mbrpno++]=0x80
	(( thecode[mbrpno++] = o_code[1] - 1 ))
	(( cylno = o_code[0] > 1024 ? 1023 : o_code[0] - 1 ))
	(( thecode[mbrpno++] = o_code[2] | ((cylno & 0x0300) >> 2) ))
	(( thecode[mbrpno++] = cylno & 0x00FF ))
	# partition type; C/H/S end
	(( thecode[mbrpno++] = (mbrptp ? mbrptp : partp ? partp : 0x27) ))
	(( thecode[mbrpno++] = g_code[1] - 1 ))
	(( cylno = g_code[0] > 1024 ? 1023 : g_code[0] - 1 ))
	(( thecode[mbrpno++] = g_code[2] | ((cylno & 0x0300) >> 2) ))
	(( thecode[mbrpno++] = cylno & 0x00FF ))
	# partition offset, size (LBA)
	(( thecode[mbrpno++] = pofs & 0xFF ))
	(( thecode[mbrpno++] = (pofs >> 8) & 0xFF ))
	(( thecode[mbrpno++] = (pofs >> 16) & 0xFF ))
	(( thecode[mbrpno++] = (pofs >> 24) & 0xFF ))
	(( pssz = psz - pofs ))
	(( thecode[mbrpno++] = pssz & 0xFF ))
	(( thecode[mbrpno++] = (pssz >> 8) & 0xFF ))
	(( thecode[mbrpno++] = (pssz >> 16) & 0xFF ))
	(( thecode[mbrpno++] = (pssz >> 24) & 0xFF ))
fi

# create the output string
ostr=
curptr=0
while (( curptr < 512 )); do
	ostr=$ostr\\0${thecode[curptr++]#8#}
done

# over and out
print -n "$ostr"
exit 0
@


1.35
log
@regen
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x42 0x38 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.34
log
@regen
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x42 0x37 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.33
log
@bump
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x42 0x35 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.32
log
@refresh (i386)
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x42 0x34 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.31
log
@regen
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x42 0x31 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.30
log
@regen
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x42 0x30 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.29
log
@sync
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x46 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.28
log
@regen
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x45 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.27
log
@sync: support for partition offsets; bug fixes
@
text
@d4 1
a4 1
# $miros: src/sys/arch/i386/stand/bootxx/bootxx.S,v 1.25 2009/06/29 20:50:59 tg Exp $ +t:MBSD +s:MBR
d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x44 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.26
log
@regen
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.25 2009/07/24 16:27:56 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.25 2009/07/24 16:27:56 tg Exp $
d6 1
a6 1
# Copyright (c) 2007, 2008, 2009
d84 1
a84 1
typeset -i partp=0 numheads=0 numsecs=0 sscale=0 bsh=9 mbrpno=0 mbrptp=0
d87 1
a87 1
while getopts ":0:1AB:g:h:M:p:S:s:" ch; do
d95 1
a95 1
			print -u2 error: invalid block size "2^'$OPTARG'"
d108 1
a108 1
			print -u2 warning: invalid head count "'$OPTARG'"
d112 1
a112 1
			print -u2 warning: invalid partition info "'$OPTARG'"
d115 22
a136 14
		fi
		saveIFS=$IFS
		IFS=:
		set -A mbr_code -- $OPTARG
		IFS=$saveIFS
		(( mbrpno = mbr_code[0] ))
		(( mbrptp = mbr_code[1] ))
		if (( mbrpno < 1 || mbrpno > 4 )); then
			print -u2 warning: invalid partition number "'$OPTARG'"
			mbrpno=0
		fi
		if (( mbrptp < 1 || mbrptp > 255 )); then
			print -u2 warning: invalid partition type "'$OPTARG'"
			mbrptp=0
d139 1
a139 1
			print -u2 warning: invalid partition type "'$OPTARG'"
d143 1
a143 1
			print -u2 error: invalid input scale "'$OPTARG'"
d147 1
a147 1
			print -u2 warning: invalid sector count "'$OPTARG'"
d152 1
a152 1
	    [-p partitiontype] [-S scale] [-s sectors] <sectorlist | \\
d154 1
a154 1
Default values: blocksize=9 heads=16 sectors=63 partitiontype=0x27 scale=0
d180 1
a180 1
		print -u2 warning: using these values for C/H/S boot
d188 1
a188 1
	(( psz )) || print -u2 warning: no geometry given, will not \
d197 1
a197 1
		print -u2 warning: using default value of 16 heads
d202 1
a202 1
		print -u2 warning: using default value of 63 sectors
d218 1
a218 1
	print -u2 error: too many blocks
d243 6
d250 5
a254 3
	thecode[mbrpno++]=0
	thecode[mbrpno++]=1
	thecode[mbrpno++]=0
d260 10
a269 8
	thecode[mbrpno++]=0
	thecode[mbrpno++]=0
	thecode[mbrpno++]=0
	thecode[mbrpno++]=0
	(( thecode[mbrpno++] = psz & 0xFF ))
	(( thecode[mbrpno++] = (psz >> 8) & 0xFF ))
	(( thecode[mbrpno++] = (psz >> 16) & 0xFF ))
	(( thecode[mbrpno++] = (psz >> 24) & 0xFF ))
@


1.25
log
@i386 sync
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x42 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.24
log
@I managed to regenerate these two, phew@@sparc
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x41 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.23
log
@regen
@
text
@d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0x7B 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x39 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.22
log
@sync, no functional change
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.24 2009/06/29 20:51:00 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.24 2009/06/29 20:51:00 tg Exp $
d143 1
a143 1
	bxinst [-1A] [-B blocksize] [-g C:H:S] [-h heads] [-M partno(1..4)]
@


1.21
log
@sync
@
text
@d2 3
a4 3
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.23 2009/06/29 20:10:26 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.23 2009/06/29 20:10:26 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/bootxx.S,v 1.24 2009/06/29 20:26:10 tg Exp $ MBSD MBR
@


1.20
log
@sync
@
text
@d2 3
a4 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.21 2009/06/29 16:41:13 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.21 2009/06/29 16:41:13 tg Exp $
d29 1
a29 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0xFF 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x38 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
d42 1
a42 1
	typeset -i blk=$1 cnt=$2 n
d69 1
a69 1
	typeset -i sv blk=$1
@


1.19
log
@sync
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.20 2009/06/07 18:00:43 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.20 2009/06/07 18:00:43 tg Exp $
d83 1
a83 1
typeset -i partp=0 numheads=0 numsecs=0 sscale=0 bsh=9 mbrpno=0
d110 12
a121 1
	(M)	if (( (mbrpno = OPTARG) < 1 || OPTARG > 4 )); then
d124 4
d238 1
a238 1
	(( thecode[mbrpno++] = (partp ? partp : 0x27) ))
@


1.18
log
@regen
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.19 2009/06/07 17:53:29 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.19 2009/06/07 17:53:29 tg Exp $
d225 1
a225 1
	(( cylno = g_code[0] > 1023 ? 1023 : g_code[0] ))
@


1.17
log
@0AA8 to signify these changes
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.18 2009/06/07 13:07:46 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.18 2009/06/07 13:07:46 tg Exp $
d143 1
a143 1
	elif [[ $(print "(${g_code[0]} * ${g_code[1]} * {g_code[2]})" \
@


1.16
log
@regenerate (diff shows we sacrifice 39 bytes for the auto-geometry)
@
text
@d28 1
a28 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0xFF 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x37 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0x7A 0x02 0x00 0x12 0x00 0x00 0x80 0x81 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x5D 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x5D 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x84 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x60 0x06 0xB4 0x08 0x8A 0x16 0x52 0xFE 0xF9 0xCD 0x13 0xFB 0x07 0xBE 0x43 0xFE 0x0F 0x82 0x14 0xFF 0x80 0xE1 0x3F 0x88 0x0E 0x4F 0xFE 0x0F 0xB6 0xC6 0x40 0xA3 0x4D 0xFE 0x61 0x8B 0x0E 0x4F 0xFE 0xE3 0xD7 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0xF1 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.15
log
@sync with compilates (mostly for version numbers, because people
will know that 0AA7 fixes all known bootlooter bugs)
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.15 2009/02/08 20:47:48 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.15 2009/02/08 20:47:48 tg Exp $
d28 1
a28 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0xFF 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x37 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0xA1 0x02 0x00 0x12 0x00 0x00 0x80 0x5A 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x3A 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x3A 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x5D 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0x36 0x4F 0xFE 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
d34 1
a34 1
typeset -i begptr=349
d38 1
a38 1
typeset -i wnum=0 wofs=0 wrec=0
d83 2
a84 1
typeset -i partp=0 numheads=0 numsecs=0 sscale=0 bsh=9
d86 1
a86 1
while getopts ":0:1B:h:p:S:s:" ch; do
d90 3
d98 8
d110 4
d127 5
a131 3
	bxinst [-1] [-B blocksize] [-h heads] [-p partitiontype] [-S scale]
	    [-s sectors] <sectorlist | dd of=image conv=notrunc
Default values: blocksize=9 heads=16 sectors=63 partitiontype=0x27 scale=0'
d137 24
a160 3
if (( !numheads )); then
	print -u2 warning: using default value of 16 heads
	numheads=16
d162 14
d177 4
a180 3
if (( !numsecs )); then
	print -u2 warning: using default value of 63 sectors
	numsecs=63
d190 1
a190 1
print -u2 "using $wrec blocks, $((curptr-begptr)) bytes ($((510-curptr)) free)"
d193 1
a193 1
if (( curptr-- > 510 )); then
d197 1
a197 1
while (( ++curptr < 510 )); do
d216 22
@


1.14
log
@regenerate
@
text
@d28 1
a28 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0xFF 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x36 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0xA1 0x02 0x00 0x12 0x00 0x00 0x80 0x5A 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x3A 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x3A 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x5D 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0xB4 0x02 0x00 0xE7 0x89 0x5C 0x04 0x00 0xFC 0x72 0x14 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xAC 0x5E 0x5D 0x4D 0x0F 0x85 0x7D 0xFF 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x32 0xFF 0xBE 0x49 0xFE 0xE8 0x26 0xFF 0xBE 0x00 0xFE 0xC3 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0x36 0x4F 0xFE 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
@


1.13
log
@regenerate/recompile
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.14 2009/02/02 22:50:28 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.14 2009/02/02 22:50:28 tg Exp $
d28 1
a28 1
set -A thecode 0x66 0x31 0xC9 0x8E 0xD1 0xBC 0xFC 0xFF 0x66 0x51 0x66 0x9D 0x8E 0xC1 0xBF 0x00 0x7C 0x57 0xB1 0x10 0xF3 0xA4 0x5E 0x8E 0xD9 0xBB 0x00 0x40 0x53 0x53 0x8E 0xC3 0xBF 0x00 0xFE 0xB5 0x02 0xF3 0xA4 0x1F 0x68 0x7A 0xFE 0xCB 0x30 0x41 0x41 0x36 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x65 0x72 0x72 0x6F 0x72 0x0D 0x0A 0x00 0xA8 0x02 0x00 0x12 0x00 0x00 0x80 0x53 0xFF 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x33 0xFF 0x87 0x06 0x53 0xFE 0x3D 0x33 0xFF 0x75 0x19 0x31 0xC0 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0xFB 0x88 0x16 0x52 0xFE 0xBE 0x2C 0xFE 0x80 0xFA 0x80 0x72 0xDB 0xE8 0xD2 0xFF 0x31 0xDB 0xBE 0x56 0xFF 0x0F 0xB6 0x2E 0x4C 0xFE 0xAC 0x0F 0xB6 0xC8 0xC0 0xE9 0x05 0x83 0xE0 0x1F 0x40 0x41 0x50 0xBF 0x10 0xFE 0xB8 0x10 0x00 0xAB 0xB0 0x01 0xAB 0x89 0xD8 0xAB 0x8C 0xC8 0xAB 0xF3 0xA4 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x5F 0x55 0x56 0xBE 0x10 0xFE 0xFF 0x16 0x53 0xFE 0xBD 0x04 0x00 0x8A 0x16 0x52 0xFE 0x60 0xF9 0xCD 0x13 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0xFB 0x61 0x73 0x1C 0x4D 0x60 0x9C 0x31 0xC0 0xCD 0x13 0x9D 0xBE 0x43 0xFE 0x0F 0x84 0x77 0xFF 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x61 0xEB 0xD2 0x80 0xC7 0x02 0x89 0x5C 0x04 0x66 0x83 0x44 0x08 0x01 0x66 0x83 0x54 0x0C 0x00 0x4F 0x75 0xB1 0x5E 0x5D 0x4D 0x75 0x84 0x66 0x31 0xC0 0x50 0xA1 0x51 0xFE 0x66 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x69 0xBE 0x3A 0xFE 0x0F 0x85 0x39 0xFF 0xBE 0x49 0xFE 0xE8 0x2D 0xFF 0xBE 0x00 0xFE 0xC3 0x8B 0x44 0x08 0x8B 0x54 0x0A 0xF7 0x36 0x4F 0xFE 0x42 0x31 0xC9 0x87 0xD1 0xF7 0x36 0x4D 0xFE 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0xB8 0x01 0x02 0xC3 0xB4 0x42 0xC3
d33 2
a34 2
typeset -i ofs_secsz=250
typeset -i begptr=342
d89 1
a89 1
	(B)	if (( (bsh = OPTARG) < 8 || OPTARG > 15 )); then
@


1.12
log
@regenerate
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.12 2009/02/01 15:50:09 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.12 2009/02/01 15:50:09 tg Exp $
d41 1
a41 2
	typeset -i blk=$1 cnt=$2
	typeset -i n=cnt+100
d46 1
a46 1
	print -u2 "$wrec @@0x${curptr#16#}: ${n#1} @@$blk (0x${x#16#})"
d160 1
a160 1
(( bsh == 9 )) || (( thecode[ofs_secsz] = (1 << (bsh - 8)) ))
@


1.11
log
@sync
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.11 2009/01/31 18:59:18 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.11 2009/01/31 18:59:18 tg Exp $
d23 1
a23 1
# Self-installing i386 boot blocks for MirOS BSD
@


1.10
log
@regen
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.9 2009/01/02 05:01:46 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.9 2009/01/02 05:01:46 tg Exp $
d28 7
a34 7
set -A thecode 0x31 0xC0 0x50 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0x1E 0x56 0x50 0x68 0x63 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x41 0x35 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x71 0x0D 0x01 0x00 0x80 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x17 0x01 0x87 0x06 0x36 0x00 0x3D 0x17 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x39 0x00 0xBE 0x17 0x00 0xE8 0xD8 0xFF 0xB8 0x17 0x01 0x86 0x3E 0x3B 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x32 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x36 0x00 0x31 0xFF 0x57 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x00 0x40 0x8E 0xE0 0x50 0xBE 0x8D 0x01 0x8A 0x0E 0x35 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x39 0x00 0xFF 0x16 0x36 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x66 0x31 0xC0 0xA1 0x38 0x00 0x66 0x64 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x6A 0xBE 0x25 0x00 0x0F 0x85 0x4D 0xFF 0xBE 0x32 0x00 0xE8 0x41 0xFF 0x5E 0x5E 0x59 0x5E 0x1F 0x0F 0xA0 0x51 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3A 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3C 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x2E 0x00 0x0F 0x84 0xCF 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
typeset -i ofs_blkcnt=53
typeset -i ofs_numheads=60
typeset -i ofs_numsecs=58
typeset -i ofs_partp=56
typeset -i begptr=397
typeset -i ofs_secsiz=200
d55 3
a58 1
		(( y = blk ))
d73 1
a73 15
		if (( wnum )); then
			if (( (sv = wofs % numsecs) < (numsecs - 1) )); then
				(( sv = numsecs - sv ))
				(( sv = sv > wnum ? wnum : sv ))
				do_record $wofs $sv
				let wofs+=sv wnum-=sv
			fi

			while (( wnum > numsecs )); do
				do_record $wofs $numsecs
				let wofs+=numsecs wnum-=numsecs
			done

			(( wnum )) && do_record $wofs $wnum
		fi
d84 1
a84 1
typeset -i flag_one=0 partp=0 numheads=0 numsecs=0 sscale=0 bsz=5
d89 2
a90 2
	(1)	flag_one=1 ;;
	(B)	if (( (bsz = OPTARG) < 4 || OPTARG > 15 )); then
a93 5
		if (( (bsz != 9) && (bsz != 11) )); then
			print -u2 error: cannot handle blocks !512 !2048 yet
			exit 1	# for now
		fi
		(( bsz -= 4 ))
d112 1
a112 1
	bxinst [-1] [-h heads] [-p partitiontype] [-S scale]
d114 1
a114 1
Default values: heads=16 sectors=63 partitiontype=0x27 scale=0'
d146 4
d155 4
a158 5
(( thecode[ofs_blkcnt] = wrec ))
(( thecode[ofs_numheads] = numheads & 0xFF ))
(( thecode[ofs_numheads + 1] = numheads >> 8 ))
(( thecode[ofs_numsecs] = numsecs ))
(( flag_one )) && thecode[ofs_numsecs + 1]=0x80
d160 2
a161 4
if (( bsz != 5 )); then
	print -u2 "using sectors of 2^$((bsz + 4)) bytes"
	(( thecode[ofs_secsiz] = bsz ))
fi
@


1.9
log
@sync
@
text
@d28 7
a34 7
set -A thecode 0x31 0xC0 0x50 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0xFB 0x1E 0x56 0x50 0x68 0x64 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x41 0x35 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x70 0x0E 0x01 0x00 0x80 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x18 0x01 0x87 0x06 0x37 0x00 0x3D 0x18 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x3A 0x00 0xBE 0x18 0x00 0xE8 0xD8 0xFF 0xB8 0x18 0x01 0x86 0x3E 0x3C 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x33 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x37 0x00 0x31 0xFF 0x57 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x00 0x40 0x8E 0xE0 0x50 0xBE 0x8E 0x01 0x8A 0x0E 0x36 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x3A 0x00 0xFF 0x16 0x37 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x66 0x31 0xC0 0xA1 0x39 0x00 0x66 0x64 0x87 0x06 0x04 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x6A 0xBE 0x26 0x00 0x0F 0x85 0x4D 0xFF 0xBE 0x33 0x00 0xE8 0x41 0xFF 0x5E 0x5E 0x59 0x5E 0x1F 0x0F 0xA0 0x51 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3B 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3D 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x2F 0x00 0x0F 0x84 0xCF 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
typeset -i ofs_blkcnt=54
typeset -i ofs_numheads=61
typeset -i ofs_numsecs=59
typeset -i ofs_partp=57
typeset -i begptr=398
typeset -i ofs_secsiz=201
@


1.8
log
@bump, regenerate, etc.
@
text
@d28 6
a33 6
set -A thecode 0x66 0x31 0xC0 0x66 0x50 0x66 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0xFB 0x50 0x68 0x65 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x41 0x35 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x74 0x0A 0x01 0x80 0x00 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x14 0x01 0x87 0x06 0x38 0x00 0x3D 0x14 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x3A 0x00 0xBE 0x19 0x00 0xE8 0xD8 0xFF 0xB8 0x14 0x01 0x86 0x3E 0x3D 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x2F 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x38 0x00 0x31 0xFF 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x12 0x40 0x8E 0xE0 0x50 0xBE 0x8A 0x01 0x8A 0x0E 0x37 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x3A 0x00 0xFF 0x16 0x38 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x0F 0xA0 0x51 0x66 0x64 0x81 0x3E 0x50 0x00 0x00 0x4F 0x6D 0x6A 0xBE 0x27 0x00 0x0F 0x85 0x53 0xFF 0xBE 0x34 0x00 0xE8 0x47 0xFF 0x8B 0x16 0x3A 0x00 0x64 0x88 0x36 0x50 0x00 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3C 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3E 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x30 0x00 0x0F 0x84 0xD4 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
typeset -i ofs_blkcnt=55
typeset -i ofs_numheads=62
typeset -i ofs_numsecs=60
typeset -i ofs_partp=59
typeset -i begptr=394
@


1.7
log
@regenerate, I told ya
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.8 2008/10/21 01:20:30 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.8 2008/10/21 01:20:30 tg Exp $
d5 2
a6 2
# Copyright (c) 2007, 2008
#	Thorsten Glaser <tg@@mirbsd.de>
d28 1
a28 1
set -A thecode 0x66 0x31 0xC0 0x66 0x50 0x66 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0xFB 0x50 0x68 0x65 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x41 0x32 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x6C 0x12 0x01 0x80 0x00 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x1C 0x01 0x87 0x06 0x38 0x00 0x3D 0x1C 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x3A 0x00 0xBE 0x19 0x00 0xE8 0xD8 0xFF 0xB8 0x1C 0x01 0x86 0x3E 0x3D 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x37 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x38 0x00 0x31 0xFF 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x12 0x40 0x8E 0xE0 0x50 0xBE 0x92 0x01 0x8A 0x0E 0x37 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x3A 0x00 0xFF 0x16 0x38 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x0F 0xA0 0x51 0x66 0xB8 0x00 0x4F 0x6D 0x6A 0x66 0x64 0x87 0x06 0x50 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x6A 0xBE 0x27 0x00 0x0F 0x85 0x4B 0xFF 0xBE 0x34 0x00 0xE8 0x3F 0xFF 0x8B 0x16 0x3A 0x00 0x64 0x88 0x36 0x50 0x00 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3C 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3E 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x30 0x00 0x0F 0x84 0xCC 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
d33 1
a33 2
typeset -i begptr=402
typeset -i ofs_magic=236
a176 1
	(( thecode[ofs_magic]++ ))
@


1.6
log
@regenerate
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.7 2008/10/20 23:15:38 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.7 2008/10/20 23:15:38 tg Exp $
d36 1
a183 1
typeset -Uui8 thecode
@


1.5
log
@switch away from using mkisofs’ boot info table, for now and forever, or so…
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.6 2008/08/05 17:57:08 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.6 2008/08/05 17:57:08 tg Exp $
d10 1
a10 1
# is granted to deal in this work without restriction, including un-
d14 1
a14 1
# This work is provided "AS IS" and WITHOUT WARRANTY of any kind, to
d21 1
a21 1
# of said person's immediate fault when using the work as intended.
d28 1
a28 1
set -A thecode 0x66 0x31 0xC0 0x66 0x50 0x66 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0xFB 0x50 0x68 0x65 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x41 0x31 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x6C 0x12 0x01 0x80 0x00 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x1C 0x01 0x87 0x06 0x38 0x00 0x3D 0x1C 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x3A 0x00 0xBE 0x19 0x00 0xE8 0xD8 0xFF 0xB8 0x1C 0x01 0x86 0x3E 0x3D 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x37 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x38 0x00 0x31 0xFF 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x12 0x40 0x8E 0xE0 0x50 0xBE 0x92 0x01 0x8A 0x0E 0x37 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x3A 0x00 0xFF 0x16 0x38 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x0F 0xA0 0x51 0x66 0xB8 0x00 0x4F 0x6D 0x6A 0x66 0x64 0x87 0x06 0x50 0x00 0x66 0x3D 0x00 0x4F 0x6D 0x6A 0xBE 0x27 0x00 0x0F 0x85 0x4B 0xFF 0xBE 0x34 0x00 0xE8 0x3F 0xFF 0x8B 0x16 0x3A 0x00 0x64 0x88 0x36 0x50 0x00 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3C 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3E 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x30 0x00 0x0F 0x84 0xCC 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
d55 1
a55 1
		(( thecode[curptr++] = (n << 5) | (x - 1) ))
a58 1
		(( n++ ))
d86 2
a87 1
		let wofs=0 wnum=0
d128 1
a128 2
	(*)	cat >&2 <<'EOD'
Syntax:
d131 1
a131 2
Default values: heads=16 sectors=63 partitiontype=0x27 scale=0
EOD
d157 1
a157 1
if (( curptr > 510 )); then
d161 2
a162 6
while (( curptr < 510 )); do
	if (( (curptr & 0xFCF) == 0x1C2 )); then
		(( thecode[curptr++] = 0 ))
	else
		(( thecode[curptr++] = RANDOM & 0xFF ))
	fi
d164 2
a165 2
(( thecode[curptr++] = 0x55 ))
(( thecode[curptr++] = 0xAA ))
d172 1
a172 1
(( flag_one )) && (( thecode[ofs_numsecs + 1] = 0x80 ))
d183 1
a183 1
typeset -Uui8 vo
d185 1
a185 2
	(( vo = thecode[curptr++] ))
	ostr="$ostr\\0${vo#8#}"
@


1.4
log
@at least bring this up to date: PBR says hello as #10-RELEASE now
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.5 2008/03/03 13:56:41 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.5 2008/03/03 13:56:41 tg Exp $
d5 1
a5 1
# Copyright (c) 2007
d28 1
a28 1
set -A thecode 0x66 0x31 0xC0 0x66 0x50 0x66 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0xFB 0x50 0x68 0x65 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x38 0x30 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x74 0x0A 0x01 0x80 0x00 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x14 0x01 0x87 0x06 0x38 0x00 0x3D 0x14 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x3A 0x00 0xBE 0x19 0x00 0xE8 0xD8 0xFF 0xB8 0x14 0x01 0x86 0x3E 0x3D 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x2F 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x38 0x00 0x31 0xFF 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x12 0x40 0x8E 0xE0 0x50 0xBE 0x8A 0x01 0x8A 0x0E 0x37 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x3A 0x00 0xFF 0x16 0x38 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x0F 0xA0 0x51 0x66 0x64 0x81 0x3E 0x50 0x00 0x00 0x4F 0x6D 0x6A 0xBE 0x27 0x00 0x0F 0x85 0x53 0xFF 0xBE 0x34 0x00 0xE8 0x47 0xFF 0x8B 0x16 0x3A 0x00 0x64 0x88 0x36 0x50 0x00 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3C 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3E 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x30 0x00 0x0F 0x84 0xD4 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
d33 3
a35 1
typeset -i begptr=394
d96 1
a96 1
typeset -i flag_one=0 partp=0 numheads=0 numsecs=0 sscale=0
d98 1
a98 1
while getopts ":0:1h:p:S:s:" ch; do
d102 10
d180 5
@


1.3
log
@use the new -0 option, remove need for pregenerated prepend_chain.sh to
exist in the repo, and dual_chain.bin hasn’t been used for a while either
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.4 2007/10/20 23:28:11 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.4 2007/10/20 23:28:11 tg Exp $
d28 1
a28 1
set -A thecode 0x66 0x31 0xC0 0x66 0x50 0x66 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0xFB 0x50 0x68 0x65 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x31 0x38 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x74 0x0A 0x01 0x80 0x00 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x14 0x01 0x87 0x06 0x38 0x00 0x3D 0x14 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x3A 0x00 0xBE 0x19 0x00 0xE8 0xD8 0xFF 0xB8 0x14 0x01 0x86 0x3E 0x3D 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x2F 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x38 0x00 0x31 0xFF 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x12 0x40 0x8E 0xE0 0x50 0xBE 0x8A 0x01 0x8A 0x0E 0x37 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x3A 0x00 0xFF 0x16 0x38 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x0F 0xA0 0x51 0x66 0x64 0x81 0x3E 0x50 0x00 0x00 0x4F 0x6D 0x6A 0xBE 0x27 0x00 0x0F 0x85 0x53 0xFF 0xBE 0x34 0x00 0xE8 0x47 0xFF 0x8B 0x16 0x3A 0x00 0x64 0x88 0x36 0x50 0x00 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3C 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3E 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x30 0x00 0x0F 0x84 0xD4 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
@


1.3.2.1
log
@MFC: at least bring this up to date: PBR says hello as #10-RELEASE now
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.5 2008/03/03 13:56:41 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.5 2008/03/03 13:56:41 tg Exp $
d28 1
a28 1
set -A thecode 0x66 0x31 0xC0 0x66 0x50 0x66 0x9D 0x05 0xC0 0x07 0x8E 0xD0 0xBC 0xFC 0xFF 0xFB 0x50 0x68 0x65 0x00 0x8E 0xD8 0x8E 0xC0 0xCB 0x30 0x41 0x38 0x30 0x20 0x4C 0x6F 0x61 0x64 0x69 0x6E 0x67 0x20 0x00 0x62 0x61 0x64 0x20 0x6D 0x61 0x67 0x69 0x63 0x20 0x45 0x52 0x52 0x0D 0x0A 0x00 0x74 0x0A 0x01 0x80 0x00 0x12 0x00 0x02 0x00 0xB4 0x0E 0xBB 0x07 0x00 0xCD 0x10 0xAC 0x08 0xC0 0x75 0xF4 0xC3 0xE8 0xF7 0xFF 0xB8 0x14 0x01 0x87 0x06 0x38 0x00 0x3D 0x14 0x01 0x75 0x43 0x30 0xE4 0xCD 0x16 0xEA 0xF0 0xFF 0x00 0xF0 0x88 0x16 0x3A 0x00 0xBE 0x19 0x00 0xE8 0xD8 0xFF 0xB8 0x14 0x01 0x86 0x3E 0x3D 0x00 0x80 0xE7 0x80 0x75 0x21 0x50 0xB4 0x02 0xCD 0x16 0x24 0x03 0x58 0x75 0x17 0xB4 0x41 0xBB 0xAA 0x55 0xCD 0x13 0xB8 0x2F 0x01 0x72 0x0B 0x81 0xFB 0x55 0xAA 0x75 0x05 0x80 0xE1 0x01 0x75 0x03 0xA3 0x38 0x00 0x31 0xFF 0xB8 0x10 0x00 0xAB 0x57 0xB8 0x12 0x40 0x8E 0xE0 0x50 0xBE 0x8A 0x01 0x8A 0x0E 0x37 0x00 0x66 0x31 0xC0 0xAC 0x5B 0x5F 0x57 0x88 0xC2 0xC0 0xEA 0x05 0x24 0x1F 0x40 0x42 0x66 0xAB 0x93 0xAB 0xC1 0xE3 0x05 0x01 0xC3 0x53 0x51 0xA4 0xFE 0xCA 0x75 0xFB 0x31 0xC0 0xAB 0xAB 0xAB 0xAB 0x8A 0x16 0x3A 0x00 0xFF 0x16 0x38 0x00 0x59 0xFE 0xC9 0x75 0xCD 0x0F 0xA0 0x51 0x66 0x64 0x81 0x3E 0x50 0x00 0x00 0x4F 0x6D 0x6A 0xBE 0x27 0x00 0x0F 0x85 0x53 0xFF 0xBE 0x34 0x00 0xE8 0x47 0xFF 0x8B 0x16 0x3A 0x00 0x64 0x88 0x36 0x50 0x00 0xCB 0x56 0xB4 0x42 0x31 0xF6 0xE8 0x45 0x00 0x5E 0xC3 0xB6 0x01 0x86 0x36 0x02 0x00 0x52 0xE8 0x11 0x00 0x5A 0xFE 0xCE 0x74 0xF0 0x83 0x06 0x06 0x00 0x20 0x66 0xFF 0x06 0x08 0x00 0xEB 0xEB 0x52 0xA1 0x08 0x00 0x8B 0x16 0x0A 0x00 0xF7 0x36 0x3C 0x00 0x42 0x52 0x31 0xD2 0xF7 0x36 0x3E 0x00 0x59 0xC0 0xE4 0x06 0x86 0xC4 0x09 0xC1 0x88 0xD6 0x58 0x88 0xC2 0xB4 0x02 0xA0 0x02 0x00 0x31 0xDB 0xBD 0x04 0x00 0x60 0x8E 0x06 0x06 0x00 0xCD 0x13 0x1E 0x07 0x9C 0xB8 0x2E 0x0E 0xBB 0x07 0x00 0xCD 0x10 0x9D 0x61 0x73 0xA3 0x4D 0x60 0xBE 0x30 0x00 0x0F 0x84 0xD4 0xFE 0xB8 0x30 0x0E 0x01 0xE8 0xBB 0x07 0x00 0xCD 0x10 0x31 0xC0 0xCD 0x13 0x61 0xEB 0xD0
@


1.2
log
@sync
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.3 2007/10/20 22:40:18 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.3 2007/10/20 22:40:18 tg Exp $
d96 1
a96 1
while getopts ":01h:p:S:s:" ch; do
@


1.1
log
@• enable the i386 self-installing bootblocks
• enable to install these
@
text
@d2 2
a3 2
# $MirOS: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.2 2007/10/20 21:59:02 tg Exp $
# $miros: src/sys/arch/i386/stand/bootxx/mkbxinst.sh,v 1.2 2007/10/20 21:59:02 tg Exp $
d96 1
a96 1
while getopts ":1h:p:S:s:" ch; do
d98 1
@

