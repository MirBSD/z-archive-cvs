head	1.18;
access;
symbols
	cvs-201003062040:1.1.3.3
	cvs-200810311900:1.1.3.2
	MIRBSD_10:1.2.0.2
	MIRBSD_10_BASE:1.2
	cvs-200607051500:1.1.3.1
	netbsd:1.1.3;
locks; strict;
comment	@.\" @;


1.18
date	2018.12.25.19.38.31;	author tg;	state Exp;
branches;
next	1.17;
commitid	1005C22871909EC7FE2;

1.17
date	2017.08.07.20.19.10;	author tg;	state Exp;
branches;
next	1.16;
commitid	1005988C69344442E37;

1.16
date	2016.06.11.14.52.48;	author tg;	state Exp;
branches;
next	1.15;
commitid	100575C25C924DD2901;

1.15
date	2016.02.11.20.12.26;	author tg;	state Exp;
branches;
next	1.14;
commitid	10056BCEAFF41919B5B;

1.14
date	2010.03.07.00.46.22;	author tg;	state Exp;
branches;
next	1.13;
commitid	1004B92F7740AC4D520;

1.13
date	2010.03.07.00.22.27;	author tg;	state Exp;
branches;
next	1.12;
commitid	1004B92F1D972E33C94;

1.12
date	2010.03.06.23.32.16;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004B92E60E6A52A557;

1.11
date	2010.03.06.22.38.47;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004B92D96675BE887A;

1.10
date	2010.03.06.22.27.50;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004B92D6F827DAEC99;

1.9
date	2010.03.06.21.29.03;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004B92C8D37339B566;

1.8
date	2009.11.22.18.23.52;	author tg;	state Exp;
branches;
next	1.7;
commitid	1004B0981B210A68B89;

1.7
date	2009.06.29.18.58.54;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004A490EE45B107F59;

1.6
date	2009.06.29.18.49.27;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004A490CCB4CB41093;

1.5
date	2008.11.04.00.19.00;	author tg;	state Exp;
branches;
next	1.4;
commitid	100490F9505561D3157;

1.4
date	2008.10.31.21.46.00;	author tg;	state Exp;
branches;
next	1.3;
commitid	100490B7CAC6C698DA4;

1.3
date	2008.10.31.19.11.32;	author tg;	state Exp;
branches;
next	1.2;
commitid	100490B58676FCB2D2F;

1.2
date	2006.07.05.15.10.43;	author tg;	state Exp;
branches;
next	1.1;
commitid	10044ABD6881F588372;

1.1
date	2006.07.05.15.08.37;	author tg;	state Exp;
branches
	1.1.3.1;
next	;
commitid	10044ABD6033365D559;

1.1.3.1
date	2006.07.05.15.08.37;	author tg;	state Exp;
branches;
next	1.1.3.2;
commitid	10044ABD6033365D559;

1.1.3.2
date	2008.10.31.19.06.04;	author tg;	state Exp;
branches;
next	1.1.3.3;
commitid	100490B57202F143953;

1.1.3.3
date	2010.03.06.20.44.40;	author tg;	state Exp;
branches;
next	;
commitid	1004B92BEC54F4CD073;


desc
@@


1.18
log
@update from contrib/samples/portmdoc,v 1.11
@
text
@.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.17 2017/08/07 20:19:10 tg Exp $
.\"	$NetBSD: makefs.8,v 1.32 2009/01/20 20:47:25 bjh21 Exp $
.\"
.\" Copyright (c) 2001-2003 Wasabi Systems, Inc.
.\" All rights reserved.
.\"
.\" Written by Luke Mewburn for Wasabi Systems, Inc.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed for the NetBSD Project by
.\"      Wasabi Systems, Inc.
.\" 4. The name of Wasabi Systems, Inc. may not be used to endorse
.\"    or promote products derived from this software without specific prior
.\"    written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY WASABI SYSTEMS, INC. ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL WASABI SYSTEMS, INC
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"-
.\" Copyright (c) 2008, 2009, 2010, 2016, 2018
.\"	mirabilos <m@@mirbsd.org>
.\"-
.\" Try to make GNU groff and AT&T nroff more compatible
.\" * ` generates ‘ in gnroff, so use \`
.\" * ' generates ’ in gnroff, \' generates ´, so use \*(aq
.\" * - generates ‐ in gnroff, \- generates −, so .tr it to -
.\"   thus use - for hyphens and \- for minus signs and option dashes
.\" * ~ is size-reduced and placed atop in groff, so use \*(TI
.\" * ^ is size-reduced and placed atop in groff, so use \*(ha
.\" * \(en does not work in nroff, so use \*(en
.\" * <>| are problematic, so redefine and use \*(Lt\*(Gt\*(Ba
.\" Also make sure to use \& *before* a punctuation char that is to not
.\" be interpreted as punctuation, and especially with two-letter words
.\" but also (after) a period that does not end a sentence (“e.g.\&”).
.\" The section after the "doc" macropackage has been loaded contains
.\" additional code to convene between the UCB mdoc macropackage (and
.\" its variant as BSD mdoc in groff) and the GNU mdoc macropackage.
.\"
.ie \n(.g \{\
.	if \*[.T]ascii .tr \-\N'45'
.	if \*[.T]latin1 .tr \-\N'45'
.	if \*[.T]utf8 .tr \-\N'45'
.	ds <= \[<=]
.	ds >= \[>=]
.	ds Rq \[rq]
.	ds Lq \[lq]
.	ds sL \(aq
.	ds sR \(aq
.	if \*[.T]utf8 .ds sL `
.	if \*[.T]ps .ds sL `
.	if \*[.T]utf8 .ds sR '
.	if \*[.T]ps .ds sR '
.	ds aq \(aq
.	ds TI \(ti
.	ds ha \(ha
.	ds en \(en
.\}
.el \{\
.	ds aq '
.	ds TI ~
.	ds ha ^
.	ds en \(em
.\}
.\"
.\" Implement .Dd with the Mdocdate RCS keyword
.\"
.rn Dd xD
.de Dd
.ie \\$1$Mdocdate: \{\
.	xD \\$2 \\$3, \\$4
.\}
.el .xD \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8
..
.\"
.\" .Dd must come before definition of .Mx, because when called
.\" with -mandoc, it might implement .Mx itself, but we want to
.\" use our own definition. And .Dd must come *first*, always.
.\"
.Dd $Mdocdate: December 25 2018 $
.\"
.\" Check which macro package we use, and do other -mdoc setup.
.\"
.ie \n(.g \{\
.	if \*[.T]utf8 .tr \[la]\*(Lt
.	if \*[.T]utf8 .tr \[ra]\*(Gt
.	ie d volume-ds-1 .ds tT gnu
.	el .ie d doc-volume-ds-1 .ds tT gnp
.	el .ds tT bsd
.\}
.el .ds tT ucb
.\"
.\" Implement .Mx (MirBSD)
.\"
.ie "\*(tT"gnu" \{\
.	eo
.	de Mx
.	nr curr-font \n[.f]
.	nr curr-size \n[.ps]
.	ds str-Mx \f[\n[curr-font]]\s[\n[curr-size]u]
.	ds str-Mx1 \*[Tn-font-size]\%MirBSD\*[str-Mx]
.	if !\n[arg-limit] \
.	if \n[.$] \{\
.	ds macro-name Mx
.	parse-args \$@@
.	\}
.	if (\n[arg-limit] > \n[arg-ptr]) \{\
.	nr arg-ptr +1
.	ie (\n[type\n[arg-ptr]] == 2) \
.	as str-Mx1 \~\*[arg\n[arg-ptr]]
.	el \
.	nr arg-ptr -1
.	\}
.	ds arg\n[arg-ptr] "\*[str-Mx1]
.	nr type\n[arg-ptr] 2
.	ds space\n[arg-ptr] "\*[space]
.	nr num-args (\n[arg-limit] - \n[arg-ptr])
.	nr arg-limit \n[arg-ptr]
.	if \n[num-args] \
.	parse-space-vector
.	print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[Tn-font-size]
.\}
.el .ie "\*(tT"gnp" \{\
.	eo
.	de Mx
.	nr doc-curr-font \n[.f]
.	nr doc-curr-size \n[.ps]
.	ds doc-str-Mx \f[\n[doc-curr-font]]\s[\n[doc-curr-size]u]
.	ds doc-str-Mx1 \*[doc-Tn-font-size]\%MirBSD\*[doc-str-Mx]
.	if !\n[doc-arg-limit] \
.	if \n[.$] \{\
.	ds doc-macro-name Mx
.	doc-parse-args \$@@
.	\}
.	if (\n[doc-arg-limit] > \n[doc-arg-ptr]) \{\
.	nr doc-arg-ptr +1
.	ie (\n[doc-type\n[doc-arg-ptr]] == 2) \
.	as doc-str-Mx1 \~\*[doc-arg\n[doc-arg-ptr]]
.	el \
.	nr doc-arg-ptr -1
.	\}
.	ds doc-arg\n[doc-arg-ptr] "\*[doc-str-Mx1]
.	nr doc-type\n[doc-arg-ptr] 2
.	ds doc-space\n[doc-arg-ptr] "\*[doc-space]
.	nr doc-num-args (\n[doc-arg-limit] - \n[doc-arg-ptr])
.	nr doc-arg-limit \n[doc-arg-ptr]
.	if \n[doc-num-args] \
.	doc-parse-space-vector
.	doc-print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[doc-Tn-font-size]
.\}
.el \{\
.	de Mx
.	nr cF \\n(.f
.	nr cZ \\n(.s
.	ds aa \&\f\\n(cF\s\\n(cZ
.	if \\n(aC==0 \{\
.		ie \\n(.$==0 \&MirBSD\\*(aa
.		el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.	\}
.	if \\n(aC>\\n(aP \{\
.		nr aP \\n(aP+1
.		ie \\n(C\\n(aP==2 \{\
.			as b1 \&MirBSD\ #\&\\*(A\\n(aP\\*(aa
.			ie \\n(aC>\\n(aP \{\
.				nr aP \\n(aP+1
.				nR
.			\}
.			el .aZ
.		\}
.		el \{\
.			as b1 \&MirBSD\\*(aa
.			nR
.		\}
.	\}
..
.\}
.\"-
.Dt MAKEFS 8
.Os
.Sh NAME
.Nm makefs
.Nd create a filesystem image from a directory tree
.Sh SYNOPSIS
.Nm
.Op Fl x
.Op Fl B Ar byte-order
.Op Fl b Ar free-blocks
.Op Fl d Ar debug-mask
.Op Fl F Ar specfile
.Op Fl f Ar free-files
.Op Fl M Ar minimum-size
.Op Fl m Ar maximum-size
.Op Fl N Ar userdb-dir
.Op Fl o Ar fs-options
.Op Fl S Ar sector-size
.Op Fl s Ar image-size
.Op Fl t Ar fs-type
.Op Fl T Ar maximum-time
.Ar image-file
.Ar directory
.Sh DESCRIPTION
The utility
.Nm
creates a filesystem image into
.Ar image-file
from the directory tree
.Ar directory .
No special devices or privileges are required to perform this task.
.Pp
The options are as follows:
.Bl -tag -width flag
.It Fl B Ar byte-order
Set the byte order of the image to
.Ar byte-order .
Valid byte orders are
.Ql 4321 ,
.Ql big ,
or
.Ql be
for big endian, and
.Ql 1234 ,
.Ql little ,
or
.Ql le
for little endian.
Some filesystems may have a fixed byte order; in those cases this
argument will be ignored.
.It Fl b Ar free-blocks
Ensure that a minimum of
.Ar free-blocks
free blocks exist in the image.
An optional
.Ql %
suffix may be provided to indicate that
.Ar free-blocks
indicates a percentage of the calculated image size.
.It Fl d Ar debug-mask
Enable various levels of debugging, depending upon which bits are
set in
.Ar debug-mask .
XXX: document these
.It Fl F Ar specfile
Use
.Ar specfile
as an
.Xr mtree 8
.Sq specfile
specification.
.Pp
If a specfile entry exists in the underlying filesystem, its
permissions and modification time will be used unless specifically
overridden by the specfile.
An error will be raised if the type of entry in the specfile
conflicts with that of an existing entry.
.Pp
In the opposite case (where a specfile entry does not have an entry
in the underlying filesystem) the following occurs:
If the specfile entry is marked
.Sy optional ,
the specfile entry is ignored.
Otherwise, the entry will be created in the image, and it is
necessary to specify at least the following parameters in the
specfile:
.Sy type ,
.Sy mode ,
.Sy gname ,
or
.Sy gid ,
and
.Sy uname
or
.Sy uid ,
.Sy device
(in the case of block or character devices), and
.Sy link
(in the case of symbolic links).
If
.Sy time
isn't provided, the current time will be used.
If
.Sy flags
isn't provided, the current file flags will be used.
Missing regular file entries will be created as zero-length files.
.It Fl f Ar free-files
Ensure that a minimum of
.Ar free-files
free files (inodes) exist in the image.
An optional
.Ql %
suffix may be provided to indicate that
.Ar free-files
indicates a percentage of the calculated image size.
.It Fl M Ar minimum-size
Set the minimum size of the filesystem image to
.Ar minimum-size .
.It Fl m Ar maximum-size
Set the maximum size of the filesystem image to
.Ar maximum-size .
An error will be raised if the target filesystem needs to be larger
than this to accommodate the provided directory tree.
.It Fl N Ar dbdir
Use the user database text file
.Pa master.passwd
and group database text file
.Pa group
from
.Ar dbdir ,
rather than using the results from the system's
.Xr getpwnam 3
and
.Xr getgrnam 3
(and related) library calls.
.It Fl o Ar fs-options
Set filesystem specific options.
.Ar fs-options
is a comma separated list of options.
Valid filesystem specific options are detailed below.
.It Fl S Ar sector-size
Set the filesystem sector size to
.Ar sector-size .
.\" XXX: next line also true for cd9660?
Defaults to 512.
.It Fl s Ar image-size
Set the size of the filesystem image to
.Ar image-size .
.It Fl t Ar fs-type
Create an
.Ar fs-type
filesystem image.
The following filesystem types are supported:
.Bl -tag -width cd9660 -offset indent
.It Sy ffs
BSD fast filesystem (default).
.It Sy cd9660
ISO 9660 filesystem.
.El
.It Fl T Ar maximum-time
Clamp superblock and file timestamps to
.Ar maximum-time
seconds since the Epoch.
.It Fl x
Exclude filesystem nodes not explicitly listed in the specfile.
.El
.Pp
Where sizes are specified, a decimal number of bytes is expected.
Two or more numbers may be separated by an
.Dq x
to indicate a product.
Each number may have one of the following optional suffixes:
.Bl -tag -width 3n -offset indent -compact
.It b
Block; multiply by 512
.It k
Kibi; multiply by 1024 (1 KiB)
.It m
Mebi; multiply by 1048576 (1 MiB)
.It g
Gibi; multiply by 1073741824 (1 GiB)
.It t
Tebi; multiply by 1099511627776 (1 TiB)
.It w
Word; multiply by the number of bytes in an integer
.El
.\"
.\"
.Ss FFS-specific options
.Sy ffs
images have ffs-specific optional parameters that may be provided.
Each of the options consists of a keyword, an equal sign
.Pq Ql = ,
and a value.
The following keywords are supported:
.Pp
.Bl -tag -width optimization -offset indent -compact
.It Sy avgfilesize
Expected average file size.
.It Sy avgfpdir
Expected number of files per directory.
.It Sy bsize
Block size.
.It Sy density
Bytes per inode.
.It Sy fsize
Fragment size.
.It Sy maxbpg
Maximum blocks per file in a cylinder group.
.It Sy minfree
Minimum % free.
.It Sy optimization
Optimization preference; one of
.Ql space
or
.Ql time .
.It Sy extent
Maximum extent size.
.It Sy maxbpcg
Maximum total number of blocks in a cylinder group.
.It Sy version
UFS version.
1 for FFS (default), 2 for UFS2.
.El
.Ss CD9660-specific options
.Sy cd9660
images have ISO9660-specific optional parameters that may be
provided.
The arguments consist of a keyword and, optionally, an equal sign
.Pq Ql = ,
and a value.
The following keywords are supported:
.Pp
.Bl -tag -width omit-trailing-period -offset indent -compact
.It Sy allow\-deep\-trees
Allow the directory structure to exceed the maximum specified in
the spec.
.\" .It Sy allow\-illegal\-chars
.\" Unknown
.\" .It Sy allow\-lowercase
.\" Unknown
.It Sy allow\-max\-name
Allow 37 instead of 33 characters for filenames by omitting the
version id.
.It Sy allow\-multidot
Allow multiple dots in a filename.
.It Sy applicationid
Application ID of the image.
.It Sy archimedes
Use the
.Ql ARCHIMEDES
extension to encode
.Tn RISC OS
metadata.
.It Sy boot\-info\-table
Write a legacy 56-byte table at offset 8 into the boot image
.Pq see below .
.It Sy boot\-load\-segment
Set load segment for the boot image.
.It Sy bootimage
Filename of a boot image in the format
.Dq sysid;filename ,
where
.Dq sysid
is one of
.Ql i386 ,
.Ql mac68k ,
.Ql macppc ,
or
.Ql powerpc .
.It Sy creation\-date
Override PVD creation date.
.It Sy effective\-date
Override PVD effective date.
.It Sy expiration\-date
Override PVD expiration date.
.It Sy generic\-bootimage
Load a generic boot image into the first 32K of the cd9660 image.
.It Sy hard\-disk\-boot
Boot image is a hard disk image.
.It Sy hide\-rr\-moved
Assign the
.Pa RR_MOVED
directory a rock ridge name of the empty string instead of the default
.Pa .rr_moved .
.It Sy keep\-bad\-images
Don't throw away images whose write was aborted due to an error.
For debugging purposes.
.It Sy label
Label name of the image.
.It Sy modification\-date
Override PVD modification date.
.It Sy no\-boot
Boot image is not bootable.
.It Sy no\-emul\-boot
Boot image is a
.Dq no emulation
ElTorito image.
.It Sy no\-trailing\-padding
Do not pad the image (apparently Linux needs the padding).
.It Sy omit\-trailing\-period
Violate the standard, do not append a trailing period to
filenames without an extension.
.It Sy preparer
Preparer ID of the image.
.It Sy publisher
Publisher ID of the image.
.It Sy rockridge
Use RockRidge extensions (for longer filenames, etc.).
.It Sy rr\-squash
Force uid 0, gid 0, and rationalised permission bits for RockRidge entries.
.It Sy volumeid
Volume set identifier of the image.
.El
.Pp
The
.Sy boot\-info\-table
currently consists of the following fields (all 7.3.1 numbers),
offsets relative to the boot image:
.Bl -tag -width XXX -offset indent -compact
.It Sy 0
8 bytes: kept as is, not part of checksum
.It Sy 8
LBA of PVD
.It Sy 12
LBA of boot image
.It Sy 16
Size in bytes of boot image
.It Sy 20
32-bit additive sum of all 32-bit words of boot image
.It Sy 24
40 reserved bytes (MBZ)
.It Sy 64
Begin of checksummed data, kept as is
.El
.Pp
Dates (to override) are in 8.4.26.1 format
.Pq Ar YYYYmmddHHMMSS00
and Universal Time, i.e. with zero offset from Greenwich Mean Time.
.Sh SEE ALSO
.Xr strsuftoll 3 ,
.Xr installboot 8 ,
.Xr mtree 8 ,
.Xr newfs 8
.Sh HISTORY
The
.Nm
utility appeared in
.Nx 1.6 .
.Pp
Support for overriding PVD dates and the boot info table was added in
.Mx 11 .
.Sh AUTHORS
.An Luke Mewburn
.Aq lukem@@NetBSD.org
(original program)
.An Daniel Watt ,
.An Walter Deignan ,
.An Ryan Gabrys ,
.An Alan Perez-Rathke ,
.An Ram Vedam
(cd9660 support)
.An Thorsten Glaser Aq tg@@mirbsd.org
.Sh CAVEATS
.Nm
may be limited to images less than 2 GiB in size
due to internal use of the long type.
@


1.17
log
@filesystem
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.16 2016/06/11 14:52:48 tg Exp $
d37 1
a37 1
.\" Copyright (c) 2008, 2009, 2010, 2016
d96 1
a96 1
.Dd $Mdocdate: June 11 2016 $
d104 1
d117 1
a117 1
.	ds str-Mx1 \*[Tn-font-size]\%MirOS\*[str-Mx]
d143 32
d181 1
a181 1
.		ie \\n(.$==0 \&MirOS\\*(aa
d187 1
a187 1
.			as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
d195 1
a195 1
.			as b1 \&MirOS\\*(aa
@


1.16
log
@apply “Implement -T maximum-time argument” patch
From: Steven Chamberlain <steven@@pyro.eu.org>
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.15 2016/02/11 20:12:26 tg Exp $
d96 1
a96 1
.Dd $Mdocdate: February 11 2016 $
d173 1
a173 1
.Nd create a file system image from a directory tree
d195 1
a195 1
creates a file system image into
d217 1
a217 1
Some file systems may have a fixed byte order; in those cases this
d241 1
a241 1
If a specfile entry exists in the underlying file system, its
d248 1
a248 1
in the underlying file system) the following occurs:
d285 1
a285 1
Set the minimum size of the file system image to
d288 1
a288 1
Set the maximum size of the file system image to
d290 1
a290 1
An error will be raised if the target file system needs to be larger
d305 1
a305 1
Set file system specific options.
d308 1
a308 1
Valid file system specific options are detailed below.
d310 1
a310 1
Set the file system sector size to
d315 1
a315 1
Set the size of the file system image to
d320 2
a321 2
file system image.
The following file system types are supported:
d324 1
a324 1
BSD fast file system (default).
d326 1
a326 1
ISO 9660 file system.
d333 1
a333 1
Exclude file system nodes not explicitly listed in the specfile.
@


1.15
log
@merge most recent portmdoc into a̲l̲l̲ of its users; fixup .\& into \&. like
in mksh(1), for Schillix ditroff
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.13 2010/03/07 00:22:27 tg Exp $
d96 1
a96 1
.Dd $Mdocdate: March 7 2010 $
d189 1
d328 4
@


1.14
log
@need portmdoc
@
text
@d37 2
a38 2
.\" Copyright (c) 2008, 2009
.\"	Thorsten “mirabilos” Glaser <tg@@mirbsd.org>
d48 4
d96 1
a96 1
.Dd $Mdocdate: November 17 2009 $
d98 1
a98 1
.\" Check which macro package we use
d101 2
@


1.13
log
@document limitations
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.12 2010/03/06 23:32:16 tg Exp $
d36 15
d52 111
a162 1
.Dd $Mdocdate: March 6 2010 $
@


1.12
log
@Add support for a boot info table, compatible to J�rg’s
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.11 2010/03/06 22:38:47 tg Exp $
d396 4
@


1.11
log
@The ability to set the {creation,modification,effective,expiry} date of
the created ECMA 119 image to any valid UTC value manually.

This is used by GNU GRUB 2 which takes the mtime as “UUID” of sorts.
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.10 2010/03/06 22:27:50 tg Exp $
d287 3
d348 21
d382 3
@


1.10
log
@sync with reality
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.9 2010/03/06 21:29:03 tg Exp $
d300 6
d320 2
d344 4
@


1.9
log
@merge and attempt to fix
• cd9660/iso9660_rrip.c:cd9660_susp_handle_continuation_common() has
  some different code for keeping track of working and placement of
  the CE on the disc now but it looks as if it’s correct
• I am fairly positive this doesn’t regress… but, alas, no guarantee
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.8 2009/11/22 18:23:52 tg Exp $
d37 1
a37 1
.Dd $Mdocdate: November 22 2009 $
d322 3
a324 2
.\" .It Sy omit\-trailing\-period
.\" Unknown
d356 1
a356 1
.An Thorsten Glaser Aq tg@@mirbsd.de
@


1.8
log
@fix more manpages
@
text
@d1 2
a2 2
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.7 2009/06/29 18:58:54 tg Exp $
.\"	$NetBSD: makefs.8,v 1.30 2008/05/10 19:00:07 skrll Exp $
d37 1
a37 1
.Dd $Mdocdate: June 29 2009 $
d281 6
@


1.7
log
@now, finally. (I still have headaches, and it's too warm.) the squash thing
does approximately the same as the mkisofs -r option; without it's -R tho
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.6 2009/06/29 18:49:27 tg Exp $
d267 1
a267 1
.It Sy allow-deep-trees
d270 1
a270 1
.\" .It Sy allow-illegal-chars
d272 1
a272 1
.\" .It Sy allow-lowercase
d274 1
a274 1
.It Sy allow-max-name
d277 1
a277 1
.It Sy allow-multidot
d281 1
a281 1
.It Sy boot-load-segment
d294 1
a294 1
.It Sy generic-bootimage
d296 1
a296 1
.It Sy hard-disk-boot
d298 1
a298 1
.It Sy hide-rr-moved
d303 1
a303 1
.It Sy keep-bad-images
d308 1
a308 1
.It Sy no-boot
d310 1
a310 1
.It Sy no-emul-boot
d314 1
a314 1
.It Sy no-trailing-padding
d316 1
a316 1
.\" .It Sy omit-trailing-period
d324 1
a324 1
.It Sy rr-squash
@


1.6
log
@fix miscommit, oops
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.5 2008/11/04 00:19:00 tg Exp $
d37 1
a37 1
.Dd $Mdocdate: November 4 2008 $
d324 2
a325 2
.It Sy rr-squash-ugid
Force uid 0, gid 0 for RockRidge entries.
@


1.5
log
@code to hide RR_MOVED
@
text
@d1 1
a1 1
.\"	$MirOS: src/usr.sbin/makefs/makefs.8,v 1.4 2008/10/31 21:46:00 tg Exp $
d37 1
a37 1
.Dd $Mdocdate: October 31 2008 $
d324 2
@


1.4
log
@mention myself
@
text
@d1 1
a1 1
.\"	$MirOS$
d37 1
a37 1
.Dd $Mdocdate$
d298 5
@


1.3
log
@bring MAIN branch into the pristine TNF state for reverse-merging
@
text
@d1 1
d37 1
a37 1
.Dd May 10, 2008
d342 1
@


1.2
log
@use SI units
@
text
@d1 1
a1 2
.\"	$MirOS$
.\"	$NetBSD: makefs.8,v 1.25 2006/03/12 11:18:31 rpaulo Exp $
d36 1
a36 1
.Dd July 5, 2006
d230 1
a230 1
Expected average file size
d232 1
a232 1
Expected number of files per directory
d234 1
a234 1
Block size
d236 1
a236 1
Bytes per inode
d238 1
a238 1
Fragment size
d240 1
a240 1
Maximum blocks per file in a cylinder group
d242 1
a242 1
Minimum % free
d249 1
a249 1
Maximum extent size
d251 1
a251 1
Maximum total number of blocks in a cylinder group
d253 2
a254 1
UFS version. 1 for FFS (default), 2 for UFS2
d293 2
d322 1
@


1.1
log
@Initial revision
@
text
@d1 1
d37 1
a37 1
.Dd March 11, 2006
d209 1
a209 1
Kilo; multiply by 1024 (1 KB)
d211 1
a211 1
Mega; multiply by 1048576 (1 MB)
d213 1
a213 1
Giga; multiply by 1073741824 (1 GB)
d215 1
a215 1
Tera; multiply by 1099511627776 (1 TB)
@


1.1.3.1
log
@Time to hack on makefs, from TNF
@
text
@@


1.1.3.2
log
@Import NetBSD®-current (just after or at the 5.0 branch) makefs(8)
and subtree required to build it in MirBSD
@
text
@d1 1
a1 1
.\"	$NetBSD: makefs.8,v 1.30 2008/05/10 19:00:07 skrll Exp $
d36 1
a36 1
.Dd May 10, 2008
d208 1
a208 1
Kibi; multiply by 1024 (1 KiB)
d210 1
a210 1
Mebi; multiply by 1048576 (1 MiB)
d212 1
a212 1
Gibi; multiply by 1073741824 (1 GiB)
d214 1
a214 1
Tebi; multiply by 1099511627776 (1 TiB)
d230 1
a230 1
Expected average file size.
d232 1
a232 1
Expected number of files per directory.
d234 1
a234 1
Block size.
d236 1
a236 1
Bytes per inode.
d238 1
a238 1
Fragment size.
d240 1
a240 1
Maximum blocks per file in a cylinder group.
d242 1
a242 1
Minimum % free.
d249 1
a249 1
Maximum extent size.
d251 1
a251 1
Maximum total number of blocks in a cylinder group.
d253 1
a253 2
UFS version.
1 for FFS (default), 2 for UFS2.
a291 2
.It Sy generic-bootimage
Load a generic boot image into the first 32K of the cd9660 image.
a318 1
.Xr strsuftoll 3 ,
@


1.1.3.3
log
@import newer makefs from TNF (with Acorn Archimedes support)
@
text
@d1 1
a1 1
.\"	$NetBSD: makefs.8,v 1.32 2009/01/20 20:47:25 bjh21 Exp $
d36 1
a36 1
.Dd January 10, 2009
a279 6
.It Sy archimedes
Use the
.Ql ARCHIMEDES
extension to encode
.Tn RISC OS
metadata.
@


