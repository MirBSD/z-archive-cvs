head	1.5;
access;
symbols
	MIRBSD_10:1.5.0.2
	MIRBSD_10_BASE:1.5
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	TNF:1.1.3;
locks; strict;
comment	@# @;


1.5
date	2007.04.28.00.12.52;	author tg;	state Exp;
branches;
next	1.4;
commitid	1004632918E6CE6474D;

1.4
date	2007.03.10.19.38.26;	author tg;	state Exp;
branches;
next	1.3;
commitid	10045F3082360E3237C;

1.3
date	2005.03.15.22.13.31;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.13.19.17.03;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.01.21.44;	author tg;	state Exp;
branches
	1.1.3.1;
next	;

1.1.3.1
date	2005.02.05.01.21.44;	author tg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@more lex/yacc overhaul, tentatively
@
text
@# $MirOS: src/usr.sbin/isdn/isdnd/Makefile,v 1.4 2007/03/10 19:38:26 tg Exp $
# $NetBSD: Makefile,v 1.5 2001/12/31 19:41:37 thorpej Exp $

PROG=		isdnd
SRCS=		rc_parse.y rc_scan.l main.c rc_config.c log.c curses.c	\
		process.c rates.c msghdl.c fsm.c support.c timer.c	\
		exec.c dial.c monitor.c pcause.c controller.c alias.c	\
		holiday.c
MAN=		isdnd.8 isdnd.rc.5 isdnd.rates.5 isdnd.acct.5
SRC_PATH?=	${.CURDIR}

CPPFLAGS+=	-I${SRC_PATH}/../isdnmonitor -I${SRC_PATH}/../isdntel -I.

LDADD+=		-ly -ll
DPADD+=		${LIBY} ${LIBL}

.include <bsd.prog.mk>

.if defined(_SMALL) && ${_SMALL:L} == "yes"
I4B_WITHOUT_CURSES=1
.  undef I4B_EXTERNAL_MONITOR
.else
# compile debug support
CPPFLAGS+=	-DDEBUG
.endif

.if !defined(I4B_WITHOUT_CURSES)
CPPFLAGS+=	-DUSE_CURSES
LDADD+=		-lcurses
LDADD+=		-ltermlib
DPADD+=		${LIBCURSES} ${LIBTERMLIB}
.endif

.if defined(I4B_EXTERNAL_MONITOR)
CPPFLAGS+=	-DI4B_EXTERNAL_MONITOR
.  if defined(I4B_NOTCPIP_MONITOR)
CPPFLAGS+=	-DI4B_NOTCPIP_MONITOR
.  endif
.endif
@


1.4
log
@• listbeg.i386-big, distrib/special*, isdnd: fallout from recent
  CPPFLAGS fix in <bsd.sys.mk>
• distrib/lists: sync
@
text
@d1 1
a1 1
# $MirOS: src/usr.sbin/isdn/isdnd/Makefile,v 1.3 2005/03/15 22:13:31 tg Exp $
a9 1
CLEANFILES+=	rc_parse.c rc_parse.h
a16 7
beforedepend: rc_parse.h

rc_parse.c rc_parse.h: rc_parse.y
	${YACC} -d ${.ALLSRC}
	mv y.tab.c rc_parse.c
	mv y.tab.h rc_parse.h

@


1.3
log
@* fix make b-r except
  - missing code (lynx, gcc, X11) - you already know that
  - automatic kernel builds - I've tested with REL_NO_KERNEL=yes
  - automatic manpage build - build_htman.sh still needs to be written
* fix make cleandir
* fix sed(1) docs [XXX kludge, revisit RSN]
* sync lists (don't remove lynx)

so far, no regressions from the merger
@
text
@d1 1
a1 1
# $MirOS: src/usr.sbin/isdn/isdnd/Makefile,v 1.2 2005/03/13 19:17:03 tg Exp $
d11 1
d13 1
a13 1
CPPFLAGS+=	-I${.CURDIR}/../isdnmonitor -I${.CURDIR}/../isdntel -I.
@


1.2
log
@fast merge src/usr.sbin
@
text
@d1 1
a1 1
# $MirOS$
d4 2
a5 2
PROG	=	isdnd
SRCS	=	rc_parse.y rc_scan.l main.c rc_config.c log.c curses.c	\
d9 2
d14 2
a15 4
MAN      =	isdnd.8 isdnd.rc.5 isdnd.rates.5 isdnd.acct.5

LDADD	+=	-ly -ll
DPADD	+=	${LIBY} ${LIBL}
d19 1
a19 1
rc_parse.h rc_parse.c: rc_parse.y
d36 3
a38 3
LDADD   +=      -lcurses
LDADD   += 	-ltermlib
DPADD	+=	${LIBCURSES} ${LIBTERMLIB}
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$NetBSD: Makefile,v 1.5 2001/12/31 19:41:37 thorpej Exp $
d10 1
a10 2
CPPFLAGS+=	-I${.CURDIR}/../isdnmonitor -I${.CURDIR}/../isdntel
CPPFLAGS+=	-I${.CURDIR} -I${.OBJDIR}
d12 4
a15 2
# compile debug support
CPPFLAGS+=	-DDEBUG
d17 1
a17 1
MAN      =	isdnd.8 isdnd.rc.5 isdnd.rates.5 isdnd.acct.5
d19 4
a22 2
LDADD+=-ly -ll
YHEADER=1
d26 8
d38 1
d43 1
a43 1
.if defined(I4B_NOTCPIP_MONITOR)
d45 1
a45 1
.endif
@


1.1.3.1
log
@The whole bunch of code we took from NetBSD(tm)
@
text
@@
