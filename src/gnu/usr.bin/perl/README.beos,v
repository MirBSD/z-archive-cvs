head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_4_4:1.1.1.2
	MIRBSD_10:1.1.1.2.0.2
	MIRBSD_10_BASE:1.1.1.2
	cvs-200704292000:1.1.1.2
	cvs-200606302200:1.1.1.2
	MIRBSD_9_BASE:1.1.1.1
	cvs-200601311430:1.1.1.1
	MIRBSD_8:1.1.1.1.0.2
	MIRBSD_8_BASE:1.1.1.1
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2005.02.05.17.22.24;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.22.24;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2006.06.30.22.35.30;	author tg;	state Exp;
branches;
next	;
commitid	10044A5A6F7276AA324;


desc
@@


1.1
log
@Initial revision
@
text
@If you read this file _as_is_, just ignore the funny characters you see.
It is written in the POD format (see pod/perlpod.pod) which is specially
designed to be readable as is.

=head1 NAME

README.beos - Perl version 5 on BeOS

=head1 DESCRIPTION

Notes for building Perl under BeOS.

=head2 General Issues with Perl on BeOS

To compile perl under BeOS R4 x86:

	./Configure -d

and hit ^C when it asks you if you want to make changes to config.sh;
edit config.sh and do the following:
change d_socket='define' to ='undef';
remove SDBM, Errno, and Socket from dynamic_ext= and nonxs_ext=;
add '#define bool short' to x2p/a2p.h;

	../Configure -S; make; make install

	cd ~/config/lib; ln -s 5.00502/BeOS-BePC/CORE/libperl.so .

(substitute 5.00502 with the appropriate filename)

=head2 BeOS Release-specific Notes

=over 4

=item R4 x86

Dynamic loading finally works! Yay! This means you can compile your
own modules into perl. However, Sockets and Errno still don't work.
(Hopefully, sockets will at least work by R5, if not sooner.)

=item R4 PPC

I have not tested this. I rather severely doubt that dynamic loading
will work. (My BeBox is in pieces right now, following a nasty disk
crash.) You may have to disable dynamic loading to get the thing to
compile at all. (use `./Configure` without -d, and say 'no' to 'Build
a shared libperl.so'.)

=back

=head2 Contact Information

If you have comments, problem reports, or even patches or bugfixes (gasp!)
please email me.

28 Jan 1999
Tom Spindler
dogcow@@isi.net

=head2 Update 2002-05-30

The following tests fail on 5.8.0 Perl in BeOS Personal 5.03:

 t/op/lfs............................FAILED at test 17
 t/op/magic..........................FAILED at test 24
 ext/Fcntl/t/syslfs..................FAILED at test 17
 ext/File/Glob/t/basic...............FAILED at test 3
 ext/POSIX/t/sigaction...............FAILED at test 13
 ext/POSIX/t/waitpid.................FAILED at test 1

The reasons for the failures are as follows: 

=over 4

=item *

The t/op/lfs and ext/Fcntl/t/syslfs failures indicate that the
LFS (large file support, files larger than 2 gigabytes) doesn't
work from Perl (BeFS itself is well capable of supporting large
files).  What fails is that trying to position the file pointer
past 2 gigabytes doesn't work right, the position gets truncated
to its lower 32 bits.

=item *

The op/magic failures look like something funny going on with $0 and
$^X that I can't now figure out: none of the generated pathnames are
wrong as such, they just seem to accumulate "./" prefixes and infixes
in ways that define logic.

=item *

The Glob/t/basic indicates a bug in the getpw*() functions:
they do not always return the correct user db entries.

=item *

The sigaction #13 means that signal mask doesn't get properly restored
if sigaction returns early.

=item *

The waitpid failure means that after there are no more child
processes, waitpid is supposed to start returning -1 (and set
errno to ECHILD).  In BeOS, it doesn't seem to.

=back

Disclaimer: I just installed BeOS Personal Edition 5.0 and the
Developer Tools, that is the whole extent of my BeOS expertise,
so please don't ask me for further help in BeOS Perl problems.

jhi@@iki.fi
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import Perl 5.8.8 from OpenLSD
@
text
@d7 1
a7 1
README.beos - Perl version 5.8+ on BeOS
d11 1
a11 2
This file contains instructions how to build Perl under BeOS and lists
known problems.
d13 1
a13 1
=head1 BUILD AND INSTALL
d15 1
a15 1
=head2 Requirements
d17 1
a17 7
I have built and tested Perl 5.8.6 and 5.9.1 under BeOS R5 x86 net server.
I can't say anything with regard to PPC. Since Perl 5.8.0 had been released
for BeOS BONE, I suspect, there is a good chance, that it still compiles on
a BONE system. The only change I've made, that affects BONE systems is the
recognition of whether it is a BONE system or not in C<hints/beos.sh>. Now
network socket support should remain enabled on BONE systems. This might
as well break the build, though.
d19 5
a23 2
As more recent versions of autoconf require flock() support, I wrote a flock()
emulation (flock_server) and released it on BeBits:
d25 1
a25 1
	http://www.bebits.com/app/4030
d27 1
a27 2
If you want to build a Perl with flock() support, you have to install this
package first.
d29 1
a29 1
=head2 Configure
d31 1
a31 1
With flock() support:
d33 1
a33 2
	CFLAGS=-I/path/to/flock/server/headers ./configure.gnu \
		--prefix=/boot/home/config
d35 1
a35 2
Replace C</path/to/flock/server/headers> with the path to the directory
containing the C<flock.h> header.
d37 11
a47 1
Without flock() support:
d49 1
a49 1
	./configure.gnu --prefix=/boot/home/config
d51 1
a51 1
=head2 Build
d53 2
a54 1
With flock() support:
d56 3
a58 1
	make LDLOADLIBS="-lnet -lflock"
d60 1
a60 1
Without flock() support:
d62 1
a62 1
	make LDLOADLIBS="-lnet"
d64 6
a69 2
C<-lnet> is needed on net server systems only and if the compiler doesn't
add it automatically (Be's R5 gcc does, Oliver Tappe's gcc 2.95.3 does not).
d71 1
a71 1
=head2 Install
d73 1
a73 1
Install all perl files:
d75 1
a75 3
	make install

Create a symlink for libperl:
d77 6
a82 7
	cd ~/config/lib; ln -s perl5/5.8.6/BePC-beos/CORE/libperl.so .

Replace C<5.8.6> with your respective version of Perl.

=head1 KNOWN PROBLEMS

=over 4
d86 4
a89 2
Network socket support is disabled for BeOS R5 net server. I didn't dare yet
to try enabling it and see what problems occur.
d93 2
a94 4
The LFS (large file support) tests (C<t/op/lfs> and C<xt/Fcntl/t/syslfs>) are
disabled as seeking beyond 2 GB is broken according to jhi@@iki.fi who was the
last one checking the BeOS port and updating this file before me. Haven't
checked this myself.
d98 2
a99 4
The C<t/io/fflush> test fails at #6. As far as I can tell, this is caused by
a bug in the BeOS pipes implementation that occurs when starting other child
processes. In the particular test case a C<system("perl -e 0")> flushes the
stdout pipe of another child process.
d103 3
a105 3
The C<ext/POSIX/t/waitpid> test fails at #1. After all child processes are
gone BeOS' waitpid(-1,...) returns 0 instead of -1 (as it should). No idea
how to fix this.
d109 3
a111 4
=head1 CONTACT

For BeOS specifics problems feel free to mail to:
Ingo Weinhold <bonefish@@cs.tu-berlin.de>
d113 1
a113 1
Last update: 2004-12-16
@

