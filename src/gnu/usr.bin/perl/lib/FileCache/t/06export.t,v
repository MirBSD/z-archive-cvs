head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_4_4:1.1.1.1
	MIRBSD_10:1.1.1.1.0.2
	MIRBSD_10_BASE:1.1.1.1
	cvs-200704292000:1.1.1.1
	cvs-200606302200:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2006.06.30.22.42.07;	author tg;	state Exp;
branches
	1.1.1.1;
next	;
commitid	10044A5A6F7276AA324;

1.1.1.1
date	2006.06.30.22.42.07;	author tg;	state Exp;
branches;
next	;
commitid	10044A5A6F7276AA324;


desc
@@


1.1
log
@Initial revision
@
text
@#!./perl
BEGIN {
    chdir 't' if -d 't';

    #For tests within the perl distribution
    @@INC = '../lib' if -d '../lib';
    END;

    # Functions exported by FileCache;
    @@funcs  = qw[cacheout cacheout_close];
    $i      = 0;
    
    # number of tests
    print "1..8\n";
}

# Test 6: Test that exporting both works to package main and
# other packages. Now using Exporter.

# First, we shouldn't be able to have these in our namespace
# Add them to BEGIN so the later 'use' doesn't influence this
# test
BEGIN {   
    for my $f (@@funcs) {
        ++$i;
        print 'not ' if __PACKAGE__->can($f);
        print "ok $i\n"; 
    }
}

# With an empty import list, we also shouldn't have them in
# our namespace.
# Add them to BEGIN so the later 'use' doesn't influence this
# test
BEGIN {   
    use FileCache ();
    for my $f (@@funcs) {
        ++$i;
        print 'not ' if __PACKAGE__->can($f);
        print "ok $i\n"; 
    }
}


# Now, we use FileCache in 'main'
{   use FileCache;
    for my $f (@@funcs) {
        ++$i;
        print 'not ' if !__PACKAGE__->can($f);
        print "ok $i\n"; 
    }
}

# Now we use them in another package
{   package X;
    use FileCache;
    for my $f (@@main::funcs) {
        ++$main::i;
        print 'not ' if !__PACKAGE__->can($f);
        print "ok $main::i\n"; 
    }
}
@


1.1.1.1
log
@Import Perl 5.8.8 from OpenLSD
@
text
@@
