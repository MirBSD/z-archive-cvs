head	1.37;
access;
symbols
	OPENBSD_4_4:1.1.1.4
	MIRBSD_10:1.23.0.2
	MIRBSD_10_BASE:1.23
	cvs-200704292000:1.1.1.3
	cvs-200606302200:1.1.1.2
	MIRBSD_9_BASE:1.11
	cvs-200601311430:1.1.1.1
	MIRBSD_8:1.9.0.2
	MIRBSD_8_BASE:1.9
	cvs-200507211800:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.37
date	2016.01.05.19.36.31;	author tg;	state Exp;
branches;
next	1.36;
commitid	100568C1B486A69D09B;

1.36
date	2016.01.05.19.25.44;	author tg;	state Exp;
branches;
next	1.35;
commitid	100568C18AF1011A61D;

1.35
date	2014.03.13.03.03.18;	author tg;	state Exp;
branches;
next	1.34;
commitid	1005321200E099EF4FD;

1.34
date	2013.08.06.17.06.20;	author tg;	state Exp;
branches;
next	1.33;
commitid	10052012D144F7753C5;

1.33
date	2013.08.05.22.06.11;	author tg;	state Exp;
branches;
next	1.32;
commitid	100520021D16E80D23B;

1.32
date	2009.03.29.13.04.19;	author tg;	state Exp;
branches;
next	1.31;
commitid	10049CF71B654F9EF54;

1.31
date	2008.12.30.04.05.10;	author tg;	state Exp;
branches;
next	1.30;
commitid	10049599DFF437ABF20;

1.30
date	2008.12.29.23.53.45;	author tg;	state Exp;
branches;
next	1.29;
commitid	1004959631C20C99E89;

1.29
date	2008.12.13.23.30.51;	author tg;	state Exp;
branches;
next	1.28;
commitid	100494445BC5785F925;

1.28
date	2008.12.13.23.25.22;	author tg;	state Exp;
branches;
next	1.27;
commitid	100494444754A3E9F32;

1.27
date	2008.12.13.23.24.52;	author tg;	state Exp;
branches;
next	1.26;
commitid	10049444444389FBCA8;

1.26
date	2008.12.13.22.54.39;	author tg;	state Exp;
branches;
next	1.25;
commitid	10049443D455D1F1AC5;

1.25
date	2008.08.02.14.17.47;	author tg;	state Exp;
branches;
next	1.24;
commitid	10048946C916345DE46;

1.24
date	2008.08.02.13.47.05;	author tg;	state Exp;
branches;
next	1.23;
commitid	1004894654160AFE275;

1.23
date	2007.06.09.18.31.31;	author tg;	state Exp;
branches;
next	1.22;
commitid	100466AF20922FA429A;

1.22
date	2007.06.07.16.51.53;	author tg;	state Exp;
branches;
next	1.21;
commitid	100466837B93112F49B;

1.21
date	2007.05.09.07.00.53;	author tg;	state Exp;
branches;
next	1.20;
commitid	1004641719E6387EAB1;

1.20
date	2007.05.08.21.52.54;	author tg;	state Exp;
branches;
next	1.19;
commitid	1004640F14A456E3051;

1.19
date	2007.04.29.20.50.49;	author tg;	state Exp;
branches;
next	1.18;
commitid	1004635053F7FDE6C21;

1.18
date	2006.09.22.12.56.39;	author tg;	state Exp;
branches;
next	1.17;
commitid	1004513DD93681AFCC1;

1.17
date	2006.09.22.05.34.08;	author tg;	state Exp;
branches;
next	1.16;
commitid	100451375DD354F06BC;

1.16
date	2006.09.22.05.00.03;	author tg;	state Exp;
branches;
next	1.15;
commitid	10045136DCD55BF676A;

1.15
date	2006.09.21.23.22.40;	author tg;	state Exp;
branches;
next	1.14;
commitid	10045131ED574DBED69;

1.14
date	2006.09.21.21.40.04;	author tg;	state Exp;
branches;
next	1.13;
commitid	100451306941CDDAD03;

1.13
date	2006.06.30.23.15.04;	author tg;	state Exp;
branches;
next	1.12;
commitid	10044A5B054180A4506;

1.12
date	2006.06.27.16.57.02;	author tg;	state Exp;
branches;
next	1.11;
commitid	10044A1634335BF57D8;

1.11
date	2006.06.15.18.25.15;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004491A61A59C31B19;

1.10
date	2006.01.31.13.58.25;	author tg;	state Exp;
branches;
next	1.9;
commitid	10043DF6CF916F28F5C;

1.9
date	2005.12.18.16.36.52;	author tg;	state Exp;
branches;
next	1.8;
commitid	10043A58BE830AFB807;

1.8
date	2005.12.18.04.52.25;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043A4EB102A8B153F;

1.7
date	2005.12.18.04.05.57;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043A4E0364A1BE6CD;

1.6
date	2005.10.21.10.46.27;	author tg;	state Exp;
branches;
next	1.5;
commitid	18994358c6e48907;

1.5
date	2005.07.09.17.43.44;	author tg;	state Exp;
branches;
next	1.4;
commitid	130e42d00cdd4562;

1.4
date	2005.07.09.17.34.39;	author tg;	state Exp;
branches;
next	1.3;
commitid	4caa42d00abc3465;

1.3
date	2005.03.15.17.21.45;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.13.15.01.15;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.22.23;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.22.23;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2006.06.30.22.35.29;	author tg;	state Exp;
branches;
next	1.1.1.3;
commitid	10044A5A6F7276AA324;

1.1.1.3
date	2007.04.29.20.07.31;	author tg;	state Exp;
branches;
next	1.1.1.4;
commitid	1004634FAED5BC54DF0;

1.1.1.4
date	2008.12.13.22.18.23;	author tg;	state Exp;
branches;
next	;
commitid	100494434BF191CECA0;


desc
@@


1.37
log
@revert commitid 100568BF70414C190EB and 100568C18AF1011A61D for now
@
text
@# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.36 2016/01/05 19:25:44 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.75 2007/11/26 11:12:29 espie Exp $
#
# Build wrapper for Perl 5.8.8
#

.include <bsd.own.mk>

TARGET_MACHINE_ARCH?=	$(MACHINE_ARCH)

# To build a threaded perl, uncomment this.  Not stable on all platforms...
#THREADED_PERL=	Yes
THREADED_PERL?=	No

# Perl builds with -fno-strict-aliasing, we want libperl to do the same
COPTS+=		-fno-strict-aliasing
COPTS+=		-fno-delete-null-pointer-checks

# Arguments passed to Configure...
.if ${THREADED_PERL:L} == "yes"
CONFIGURE_ARGS+=-Dusethreads
CFLAGS+=	-pthread
.endif

XFLAGS=		${CFLAGS} -Werror-maybe-reset
CONFIGURE_ARGS+=-dsE -D${OSname}_distribution=defined \
		-Doptimize=${XFLAGS:N-g*:M*:Q}

.if ${NOPIC:L} != "no"
FLAGS_TO_PASS=	USEDL=n
.else
FLAGS_TO_PASS=	USEDL=y
.endif
FLAGS_TO_PASS+=	CC=${CC:Q} CPP=${CPP:Q} CFLAGS=${XFLAGS:M*:Q} SHELL=${SHELL:Q}
FLAGS_TO_PASS+=	PATH=/bin:/usr/bin:/sbin:/usr/sbin

# Our lndir is hacked; specify a full path to avoid potential conflicts
# with the one installed with X11.
LNDIR=		/usr/bin/lndir

H2PH=		/usr/bin/h2ph

LIB=		perl
DPADD+=		${LIBM} ${LIBUTIL}
LDADD+=		-lm -lutil

SRCS=	perl.c gv.c toke.c perly.c op.c pad.c regcomp.c dump.c util.c mg.c \
	reentr.c hv.c av.c run.c pp_hot.c sv.c pp.c scope.c pp_ctl.c pp_sys.c \
	doop.c doio.c regexec.c utf8.c taint.c deb.c universal.c xsutils.c \
	globals.c perlio.c perlapi.c numeric.c locale.c pp_pack.c pp_sort.c

CPPFLAGS+=	-DPERL_CORE -DPERL_RANDOM_DEVICE=\"/dev/arandom\" -I.

# MirPorts Framework support
CPPFLAGS+=	-DAPPLLIB_EXP=\"/usr/mpkg/libdata/perl5:/usr/mpkg/libdata/perl5/site_perl\"

.if defined(INSTALL_STRIP) && ${INSTALL_STRIP} == "-s"
STRIPFLAGS=	-s
.endif

GEN_AFTER= 	config.h cflags makeaperl makedepend makedir \
		myconfig writemain Makefile Policy.sh pod/Makefile \
		x2p/Makefile x2p/cflags

GENERATED=	config.sh ${GEN_AFTER}

${GEN_AFTER}: config.sh

CLEANFILES=	config.sh Policy.sh ${MANALL} ${PSALL} ${MANSRCALL} stamp-mansrc.build

.if !exists(${.OBJDIR}/config.over)
${.OBJDIR}/config.over: ${.CURDIR}/config.over
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper -e Makefile.bsd-wrapper1 ${.CURDIR}
.endif

all:	perl.build man.build


man.build: perl.build
	cd ${.CURDIR} && exec ${MAKE} -f Makefile.bsd-wrapper1 $@@

beforedepend:	config.sh config.h Makefile makedepend x2p/Makefile writemain
	cd ${.OBJDIR} && exec ${MAKE} depend

perl.build:	perl.lib
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${MAKE}

config.sh:	${.OBJDIR}/config.over
	cd ${.OBJDIR} && GCC_NO_WERROR=1 ${FLAGS_TO_PASS} \
	    exec ${SHELL} Configure ${CONFIGURE_ARGS}

Makefile cflags makeaperl makedepend makedir myconfig writemain:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} $@@.SH

Policy.sh:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} Policy_sh.SH

config.h:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} config_h.SH

pod/Makefile:
	cd ${.OBJDIR}/pod && ${FLAGS_TO_PASS} exec ${SHELL} Makefile.SH

x2p/Makefile:
	cd ${.OBJDIR}/x2p && ${FLAGS_TO_PASS} exec ${SHELL} Makefile.SH

x2p/cflags:
	cd ${.OBJDIR}/x2p && ${FLAGS_TO_PASS} exec ${SHELL} cflags.SH

# Never try to regenerate perly.c or perly.h
perly.c perly.h: perly.y
	-@@true

install: install.lib install.perl maninstall
	-chmod -R a+rX ${DESTDIR}/usr/libdata/perl5

install.perl:
	cd ${.OBJDIR}; INSTALL=${INSTALL} INSTALL_COPY=${INSTALL_COPY} \
	    STRIPFLAGS=${STRIPFLAGS} INSTALLFLAGS=-o NOLIBINSTALL=1 \
	    LD_LIBRARY_PATH=${.OBJDIR} exec ./perl installperl \
	    --destdir=${DESTDIR} -o STRIPFLAGS=${STRIPFLAGS}
	printf '%s\n%s\n%s\nwq\n' '/^optimize=/g/-Werror-maybe-reset/s///' \
	    '/^optimize=/g/-Werror/s///' "/^optimize=/g/  *'/s//'/" | \
	    ed -s ${DESTDIR}$$(perl -e 'use Config; print \
	    $$Config{installarchlib};')/Config_heavy.pl

.if exists(/usr/lib/libposixtz.so)
TEST_ENV+=		LD_PRELOAD=/usr/lib/libposixtz.so
.endif

test:
	-@@cd "$$(realpath .)"; \
	    if [ -e Makefile ]; then ${TEST_ENV} ${MAKE} test; fi

clean:
	-@@if [ -e Makefile ]; then ${MAKE} realclean; fi

cleandir:
	-@@if [ ${.CURDIR} != ${.OBJDIR} ]; then \
	    rm -rf *; \
	else \
	    test -e Makefile && ${MAKE} distclean; \
	    rm -f ${CLEANFILES}; \
	fi
	@@cd ${.CURDIR} && ${MAKE} -f Makefile.bsd-wrapper1 cleandir

maninstall:
.if defined(NOMAN) && ${NOMAN:L} != "no"
	@@echo NOMAN is set
.else
	@@cd ${.CURDIR} && exec ${MAKE} -f Makefile.bsd-wrapper1 maninstall
.endif

.include <bsd.lib.mk>

# These have to come after the inclusion of <bsd.lib.mk>

# Need -fPIC, not -fpic on sparc
.if ($(TARGET_MACHINE_ARCH) == sparc)
PICFLAG=	-fPIC
.endif

perl.lib:	${GENERATED} .WAIT ${_LIBS}

install.lib:
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    lib${LIB}.a ${DESTDIR}${LIBDIR}/
.if ${NOPIC:L} == "no"
.  ifdef SHLIB_SONAME
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m 600 \
	    ${SHLIB_SONAME} ${DESTDIR}${LIBDIR}/${SHLIB_SONAME}~
.    if !defined(MKC_DEBG) || ${MKC_DEBG:L} == "no"
	${STRIP} ${_SODISCARD} ${DESTDIR}${LIBDIR}/${SHLIB_SONAME}~
.    endif
	cd ${DESTDIR}${LIBDIR} && \
	    chmod ${LIBMODE} ${SHLIB_SONAME}~ && \
	    mv -f ${SHLIB_SONAME}~ ${SHLIB_SONAME}
.  endif
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    lib${LIB}_pic.a ${DESTDIR}${LIBDIR}/
.endif

.PHONY: perl.lib install.lib perl.build install.perl man.build mansrc.build
@


1.36
log
@make Perl always use putenv(3) despite ours leaking

XXX this is *wrong* and *fails*
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.35 2014/03/13 03:03:18 tg Exp $
a18 3
# Definitione to use for libperl and miniperl/perl
XDEFS+=		-DPERL_USE_SAFE_PUTENV

d25 1
a25 1
XFLAGS=		${CFLAGS} ${XDEFS} -Werror-maybe-reset
a52 1
CPPFLAGS+=	${XDEFS}
@


1.35
log
@make all tests succeed more easily
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.34 2013/08/06 17:06:20 tg Exp $
d19 3
d28 1
a28 1
XFLAGS=		${CFLAGS} -Werror-maybe-reset
d56 1
@


1.34
log
@get rid of the now useless ZLIB_CONST
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.33 2013/08/05 22:06:11 tg Exp $
d127 4
d132 2
a133 1
	-@@if [ -e Makefile ]; then ${MAKE} test; fi
@


1.33
log
@-DZCONST=const â†’ -DZLIB_CONST

XXX sys/conf/Makefile.inc does it twice?
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.32 2009/03/29 13:04:19 tg Exp $
a52 1
CPPFLAGS+=	-DZLIB_CONST
@


1.32
log
@â€¢ take care of dbins
â€¢ #!/bin/mksh shebang, in most places
â€¢ rcsid while here
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.31 2008/12/30 04:05:10 tg Exp $
d53 1
a53 1
CPPFLAGS+=	-DZCONST=const
@


1.31
log
@looking at the generated Makefile, perl also needs libutil not just libm
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.30 2008/12/29 23:53:45 tg Exp $
d35 1
a35 1
FLAGS_TO_PASS+=	PATH="/usr/dbin:/bin:/usr/bin:/usr/dsbin:/sbin:/usr/sbin"
@


1.30
log
@libperl needs libm
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.29 2008/12/13 23:30:51 tg Exp $
d44 2
a45 2
DPADD+=		${LIBM}
LDADD+=		-lm
@


1.29
log
@no /bin/sh for you, use ${SHELL}
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.28 2008/12/13 23:25:22 tg Exp $
d43 3
a45 1
LIB=	perl
@


1.28
log
@we always use gcc3
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.27 2008/12/13 23:24:52 tg Exp $
d92 1
a92 1
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec /bin/sh $@@.SH
d98 1
a98 1
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec /bin/sh config_h.SH
@


1.27
log
@* bring back shared libperl, agreed bsiegert@@
* reduce diff against OpenBSD
* rcsid
* do some more sensible things
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.26 2008/12/13 22:54:39 tg Exp $
a16 1
.if ${USE_GCC3:L} == "yes"
a17 1
.endif
@


1.26
log
@fastmerge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.25 2008/08/02 14:17:47 tg Exp $
d9 3
a11 1
# To build a threaded perl.  Not stable on all platforms...
d15 5
a19 1
TARGET_MACHINE_ARCH?=	${MACHINE_ARCH}
d21 1
a26 1
# Arguments passed to Configure...
d37 1
d46 1
a85 2
perl.lib:	${GENERATED} .WAIT lib${LIB}.a

d90 2
a91 2
	cd ${.OBJDIR} && PATH="/bin:/usr/bin:/sbin:/usr/sbin" GCC_NO_WERROR=1 \
	    ${FLAGS_TO_PASS} exec ${SHELL} Configure ${CONFIGURE_ARGS}
d93 1
a93 1
Makefile cflags makeaperl makedepend makedir myconfig writemain:	
d99 1
a99 1
config.h: 
d103 1
a103 1
	cd ${.OBJDIR}/pod && exec ${SHELL} Makefile.SH
d116 1
a116 4

install.lib:
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    lib${LIB}.a ${DESTDIR}${LIBDIR}/
d150 1
a150 1
# Must be last
d152 26
a177 2
NOPIC:=yes
.include <bsd.lib.mk>
@


1.25
log
@remove the -std=gnu89, it is one of the many libc changes and NOT maskable
by using LD_PRELOAD (wtf?)
@
text
@d1 2
a2 2
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.24 2008/08/02 13:47:05 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.71 2006/11/09 21:31:12 millert Exp $
d13 2
d36 1
a36 520
# If we are cross-compiling, we use the native pod2man.
# Otherwise, we use the pod2man (and libperl) we just
# built since we don't know what's in the tree.
HOST_MACHARCH?=	/usr/bin/make -f /dev/null ___DISPLAY_MAKEVARS=MACHINE_ARCH
.if ${MACHINE_ARCH} != ${HOST_MACHARCH}
POD2MAN=	/usr/bin/pod2man
.else
POD2MAN=	LD_LIBRARY_PATH=${.OBJDIR} ${.OBJDIR}/perl -I ${.OBJDIR}/lib \
		${.OBJDIR}/pod/pod2man
.endif

MANLOCALBUILD=	yes

MANALL=
_quick1=
_quick3p=
MANSRCALL=

.for page sect file in \
    a2p 1 			x2p/a2p.pod \
    c2ph 1			utils/c2ph \
    cpan 1			lib/CPAN/bin/cpan \
    dprofpp 1 			utils/dprofpp \
    enc2xs 1			ext/Encode/bin/enc2xs \
    find2perl 1			x2p/find2perl \
    h2ph 1			utils/h2ph \
    h2xs 1			utils/h2xs \
    libnetcfg 1			utils/libnetcfg.PL \
    perl 1			pod/perl.pod \
    perl5004delta 1		pod/perl5004delta.pod \
    perl5005delta 1		pod/perl5005delta.pod \
    perl561delta 1		pod/perl561delta.pod \
    perl56delta 1		pod/perl56delta.pod \
    perl570delta 1		pod/perl570delta.pod \
    perl571delta 1		pod/perl571delta.pod \
    perl572delta 1		pod/perl572delta.pod \
    perl573delta 1		pod/perl573delta.pod \
    perl58delta 1		pod/perl58delta.pod \
    perl581delta 1		pod/perl581delta.pod \
    perl582delta 1		pod/perl582delta.pod \
    perl583delta 1		pod/perl583delta.pod \
    perl584delta 1		pod/perl584delta.pod \
    perl585delta 1		pod/perl585delta.pod \
    perl586delta 1		pod/perl586delta.pod \
    perl587delta 1		pod/perl587delta.pod \
    perl588delta 1		pod/perl588delta.pod \
    perlapi 1			pod/perlapi.pod \
    perlapio 1			pod/perlapio.pod \
    perlartistic 1		pod/perlartistic.pod \
    perlbook 1			pod/perlbook.pod \
    perlboot 1			pod/perlboot.pod \
    perlbot 1			pod/perlbot.pod \
    perlbug 1			utils/perlbug \
    perlcall 1			pod/perlcall.pod \
    perlcc 1			utils/perlcc \
    perlcheat 1			pod/perlcheat.pod \
    perlclib 1			pod/perlclib.pod \
    perlcn 1			README.cn \
    perlcompile 1		pod/perlcompile.pod \
    perldata 1			pod/perldata.pod \
    perldbmfilter 1		pod/perldbmfilter.pod \
    perldebguts 1		pod/perldebguts.pod \
    perldebtut 1		pod/perldebtut.pod \
    perldebug 1			pod/perldebug.pod \
    perldiag 1			pod/perldiag.pod \
    perldoc 1			pod/perldoc.pod \
    perldsc 1			pod/perldsc.pod \
    perlembed 1			pod/perlembed.pod \
    perlfaq 1			pod/perlfaq.pod \
    perlfaq1 1			pod/perlfaq1.pod \
    perlfaq2 1			pod/perlfaq2.pod \
    perlfaq3 1			pod/perlfaq3.pod \
    perlfaq4 1			pod/perlfaq4.pod \
    perlfaq5 1			pod/perlfaq5.pod \
    perlfaq6 1			pod/perlfaq6.pod \
    perlfaq7 1			pod/perlfaq7.pod \
    perlfaq8 1			pod/perlfaq8.pod \
    perlfaq9 1			pod/perlfaq9.pod \
    perlfilter 1		pod/perlfilter.pod \
    perlfork 1			pod/perlfork.pod \
    perlform 1			pod/perlform.pod \
    perlfunc 1			pod/perlfunc.pod \
    perlglossary 1		pod/perlglossary.pod \
    perlgpl 1			pod/perlgpl.pod \
    perlguts 1			pod/perlguts.pod \
    perlhack 1			pod/perlhack.pod \
    perlhist 1			pod/perlhist.pod \
    perlintern 1		pod/perlintern.pod \
    perlintro 1			pod/perlintro.pod \
    perliol 1			pod/perliol.pod \
    perlipc 1			pod/perlipc.pod \
    perlivp 1			utils/perlivp.PL \
    perljp 1			README.jp \
    perlko 1			README.ko \
    perllexwarn 1		pod/perllexwarn.pod \
    perllocale 1		pod/perllocale.pod \
    perllol 1			pod/perllol.pod \
    perlmod 1			pod/perlmod.pod \
    perlmodinstall 1		pod/perlmodinstall.pod \
    perlmodlib 1		pod/perlmodlib.pod \
    perlmodstyle 1		pod/perlmodstyle.pod \
    perlnewmod 1		pod/perlnewmod.pod \
    perlnumber 1		pod/perlnumber.pod \
    perlobj 1			pod/perlobj.pod \
    perlop 1			pod/perlop.pod \
    perlopentut 1		pod/perlopentut.pod \
    perlothrtut 1		pod/perlothrtut.pod \
    perlpacktut 1		pod/perlpacktut.pod \
    perlpod 1			pod/perlpod.pod \
    perlpodspec 1		pod/perlpodspec.pod \
    perlport 1			pod/perlport.pod \
    perlre 1			pod/perlre.pod \
    perlref 1			pod/perlref.pod \
    perlreftut 1		pod/perlreftut.pod \
    perlrequick	1		pod/perlrequick.pod \
    perlreref 1			pod/perlreref.pod \
    perlretut 1			pod/perlretut.pod \
    perlrun 1			pod/perlrun.pod \
    perlsec 1			pod/perlsec.pod \
    perlstyle 1			pod/perlstyle.pod \
    perlsub 1			pod/perlsub.pod \
    perlsyn 1			pod/perlsyn.pod \
    perlthrtut 1		pod/perlthrtut.pod \
    perltie 1			pod/perltie.pod \
    perltoc 1			pod/perltoc.pod \
    perltodo 1			pod/perltodo.pod \
    perltooc 1			pod/perltooc.pod \
    perltoot 1			pod/perltoot.pod \
    perltrap 1			pod/perltrap.pod \
    perltw 1			README.tw \
    perlunicode 1		pod/perlunicode.pod \
    perluniintro 1		pod/perluniintro.pod \
    perlutil 1			pod/perlutil.pod \
    perlvar 1			pod/perlvar.pod \
    perlxs 1			pod/perlxs.pod \
    perlxstut 1			pod/perlxstut.pod \
    piconv 1			ext/Encode/bin/piconv \
    pl2pm 1			utils/pl2pm \
    pod2html 1			pod/pod2html \
    pod2latex 1			pod/pod2latex.PL \
    pod2man 1			pod/pod2man \
    pod2text 1			pod/pod2text \
    pod2usage 1			pod/pod2usage \
    podchecker 1		pod/podchecker \
    podselect 1			pod/podselect \
    prove 1			lib/Test/Harness/bin/prove \
    s2p	1			x2p/s2p \
    splain 1			utils/splain \
    xsubpp 1			lib/ExtUtils/xsubpp \
    AnyDBM_File	3p		lib/AnyDBM_File.pm \
    Attribute::Handlers 3p	lib/Attribute/Handlers.pm \
    AutoLoader 3p		lib/AutoLoader.pm \
    AutoSplit 3p		lib/AutoSplit.pm \
    B 3p			ext/B/B.pm \
    B::Asmdata 3p		ext/B/B/Asmdata.pm \
    B::Assembler 3p		ext/B/B/Assembler.pm \
    B::Bblock 3p		ext/B/B/Bblock.pm \
    B::Bytecode 3p		ext/B/B/Bytecode.pm \
    B::C 3p			ext/B/B/C.pm \
    B::CC 3p			ext/B/B/CC.pm \
    B::Concise 3p		ext/B/B/Concise.pm \
    B::Debug 3p			ext/B/B/Debug.pm \
    B::Deparse 3p		ext/B/B/Deparse.pm \
    B::Disassembler 3p		ext/B/B/Disassembler.pm \
    B::Lint 3p			ext/B/B/Lint.pm \
    B::Showlex 3p		ext/B/B/Showlex.pm \
    B::Stackobj 3p		ext/B/B/Stackobj.pm \
    B::Stash 3p			ext/B/B/Stash.pm \
    B::Terse 3p			ext/B/B/Terse.pm \
    B::Xref 3p			ext/B/B/Xref.pm \
    Benchmark 3p		lib/Benchmark.pm \
    ByteLoader 3p		ext/ByteLoader/ByteLoader.pm \
    CGI 3p			lib/CGI.pm \
    CGI::Apache 3p		lib/CGI/Apache.pm \
    CGI::Carp 3p		lib/CGI/Carp.pm \
    CGI::Cookie 3p		lib/CGI/Cookie.pm \
    CGI::Fast 3p		lib/CGI/Fast.pm \
    CGI::Pretty 3p		lib/CGI/Pretty.pm \
    CGI::Push 3p		lib/CGI/Push.pm \
    CGI::Switch 3p		lib/CGI/Switch.pm \
    CGI::Util 3p		lib/CGI/Util.pm \
    CPAN 3p			lib/CPAN.pm \
    CPAN::FirstTime 3p		lib/CPAN/FirstTime.pm \
    CPAN::Nox 3p		lib/CPAN/Nox.pm \
    Carp 3p			lib/Carp.pm \
    Carp::Heavy 3p		lib/Carp/Heavy.pm \
    Class::ISA 3p		lib/Class/ISA.pm \
    Class::Struct 3p		lib/Class/Struct.pm \
    Config 3p			lib/Config.pod \
    Cwd 3p			lib/Cwd.pm \
    DB 3p			lib/DB.pm \
    DB_File 3p			ext/DB_File/DB_File.pm \
    DBM_Filter 3p		lib/DBM_Filter.pm \
    DBM_Filter::compress 3p	lib/DBM_Filter/compress.pm \
    DBM_Filter::encode 3p	lib/DBM_Filter/encode.pm \
    DBM_Filter::int32 3p	lib/DBM_Filter/int32.pm \
    DBM_Filter::null 3p		lib/DBM_Filter/null.pm \
    DBM_Filter::utf8 3p		lib/DBM_Filter/utf8.pm \
    Data::Dumper 3p		ext/Data/Dumper/Dumper.pm \
    Devel::DProf 3p		ext/Devel/DProf/DProf.pm \
    Devel::PPPort 3p		ext/Devel/PPPort/PPPort.pm \
    Devel::Peek 3p		ext/Devel/Peek/Peek.pm \
    Devel::SelfStubber 3p	lib/Devel/SelfStubber.pm \
    Digest 3p			lib/Digest.pm \
    Digest::base 3p		lib/Digest/base.pm \
    Digest::file 3p		lib/Digest/file.pm \
    Digest::MD5 3p		ext/Digest/MD5/MD5.pm \
    DirHandle 3p		lib/DirHandle.pm \
    Dumpvalue 3p		lib/Dumpvalue.pm \
    DynaLoader 3p		ext/DynaLoader/XSLoader_pm.PL \
    Encode 3p			ext/Encode/Encode.pm \
    Encode::Alias 3p		ext/Encode/lib/Encode/Alias.pm \
    Encode::Byte 3p		ext/Encode/Byte/Byte.pm \
    Encode::CJKConstants 3p	ext/Encode/lib/Encode/CJKConstants.pm \
    Encode::CN 3p		ext/Encode/CN/CN.pm \
    Encode::CN::HZ 3p		ext/Encode/lib/Encode/CN/HZ.pm \
    Encode::Config 3p		ext/Encode/lib/Encode/Config.pm \
    Encode::EBCDIC 3p		ext/Encode/EBCDIC/EBCDIC.pm \
    Encode::Encoder 3p		ext/Encode/lib/Encode/Encoder.pm \
    Encode::Encoding 3p		ext/Encode/lib/Encode/Encoding.pm \
    Encode::Guess 3p		ext/Encode/lib/Encode/Guess.pm \
    Encode::JP 3p		ext/Encode/JP/JP.pm \
    Encode::JP::H2Z 3p		ext/Encode/lib/Encode/JP/H2Z.pm \
    Encode::JP::JIS7 3p		ext/Encode/lib/Encode/JP/JIS7.pm \
    Encode::KR 3p		ext/Encode/KR/KR.pm \
    Encode::KR::2022_KR 3p	ext/Encode/lib/Encode/KR/2022_KR.pm \
    Encode::MIME::Header 3p	ext/Encode/lib/Encode/MIME/Header.pm \
    Encode::PerlIO 3p		ext/Encode/lib/Encode/PerlIO.pod \
    Encode::Supported 3p	ext/Encode/lib/Encode/Supported.pod \
    Encode::Symbol 3p		ext/Encode/Symbol/Symbol.pm \
    Encode::TW 3p		ext/Encode/TW/TW.pm \
    Encode::Unicode 3p		ext/Encode/Unicode/Unicode.pm \
    Encode::Unicode::UTF7 3p	ext/Encode/lib/Encode/Unicode/UTF7.pm \
    English 3p			lib/English.pm \
    Env 3p			lib/Env.pm \
    Errno 3p			ext/Errno/Errno_pm.PL \
    Exporter 3p			lib/Exporter.pm \
    Exporter::Heavy 3p		lib/Exporter/Heavy.pm \
    ExtUtils::Command 3p	lib/ExtUtils/Command.pm \
    ExtUtils::Command::MM 3p	lib/ExtUtils/Command/MM.pm \
    ExtUtils::Constant 3p	lib/ExtUtils/Constant.pm \
    ExtUtils::Constant::Base 3p	lib/ExtUtils/Constant/Base.pm \
    ExtUtils::Constant::Utils 3p	lib/ExtUtils/Constant/Utils.pm \
    ExtUtils::Constant::XS 3p	lib/ExtUtils/Constant/XS.pm \
    ExtUtils::Embed 3p		lib/ExtUtils/Embed.pm \
    ExtUtils::Install 3p	lib/ExtUtils/Install.pm \
    ExtUtils::Installed 3p	lib/ExtUtils/Installed.pm \
    ExtUtils::Liblist 3p	lib/ExtUtils/Liblist.pm \
    ExtUtils::MM 3p		lib/ExtUtils/MM.pm \
    ExtUtils::MM_AIX 3p		lib/ExtUtils/MM_AIX.pm \
    ExtUtils::MM_Any 3p		lib/ExtUtils/MM_Any.pm \
    ExtUtils::MM_BeOS 3p	lib/ExtUtils/MM_BeOS.pm \
    ExtUtils::MM_Cygwin 3p	lib/ExtUtils/MM_Cygwin.pm \
    ExtUtils::MM_DOS 3p		lib/ExtUtils/MM_DOS.pm \
    ExtUtils::MM_MacOS 3p	lib/ExtUtils/MM_MacOS.pm \
    ExtUtils::MM_NW5 3p		lib/ExtUtils/MM_NW5.pm \
    ExtUtils::MM_OS2 3p		lib/ExtUtils/MM_OS2.pm \
    ExtUtils::MM_QNX 3p		lib/ExtUtils/MM_QNX.pm \
    ExtUtils::MM_UWIN 3p	lib/ExtUtils/MM_UWIN.pm \
    ExtUtils::MM_Unix 3p	lib/ExtUtils/MM_Unix.pm \
    ExtUtils::MM_VMS 3p		lib/ExtUtils/MM_VMS.pm \
    ExtUtils::MM_VOS 3p		lib/ExtUtils/MM_VOS.pm \
    ExtUtils::MM_Win32 3p	lib/ExtUtils/MM_Win32.pm \
    ExtUtils::MM_Win95 3p	lib/ExtUtils/MM_Win95.pm \
    ExtUtils::MY 3p		lib/ExtUtils/MY.pm \
    ExtUtils::MakeMaker 3p	lib/ExtUtils/MakeMaker.pm \
    ExtUtils::MakeMaker::Config 3p	lib/ExtUtils/MakeMaker/Config.pm \
    ExtUtils::MakeMaker::FAQ 3p	lib/ExtUtils/MakeMaker/FAQ.pod \
    ExtUtils::MakeMaker::Tutorial 3p	lib/ExtUtils/MakeMaker/Tutorial.pod \
    ExtUtils::MakeMaker::bytes 3p	lib/ExtUtils/MakeMaker/bytes.pm \
    ExtUtils::MakeMaker::vmsish 3p	lib/ExtUtils/MakeMaker/vmsish.pm \
    ExtUtils::Manifest 3p	lib/ExtUtils/Manifest.pm \
    ExtUtils::Miniperl 3p	lib/ExtUtils/Miniperl.pm \
    ExtUtils::Mkbootstrap 3p	lib/ExtUtils/Mkbootstrap.pm \
    ExtUtils::Mksymlists 3p	lib/ExtUtils/Mksymlists.pm \
    ExtUtils::Packlist 3p	lib/ExtUtils/Packlist.pm \
    ExtUtils::testlib 3p	lib/ExtUtils/testlib.pm \
    Fatal 3p			lib/Fatal.pm \
    Fcntl 3p			lib/Fcntl.pm \
    File::Basename 3p		lib/File/Basename.pm \
    File::CheckTree 3p		lib/File/CheckTree.pm \
    File::Compare 3p		lib/File/Compare.pm \
    File::Copy 3p		lib/File/Copy.pm \
    File::DosGlob 3p		lib/File/DosGlob.pm \
    File::Find 3p		lib/File/Find.pm \
    File::Glob 3p		lib/File/Glob.pm \
    File::Path 3p		lib/File/Path.pm \
    File::Spec 3p		lib/File/Spec.pm \
    File::Spec::Cygwin 3p	lib/File/Spec/Cygwin.pm \
    File::Spec::Epoc 3p		lib/File/Spec/Epoc.pm \
    File::Spec::Functions 3p	lib/File/Spec/Functions.pm \
    File::Spec::Mac 3p		lib/File/Spec/Mac.pm \
    File::Spec::OS2 3p		lib/File/Spec/OS2.pm \
    File::Spec::Unix 3p		lib/File/Spec/Unix.pm \
    File::Spec::VMS 3p		lib/File/Spec/VMS.pm \
    File::Spec::Win32 3p	lib/File/Spec/Win32.pm \
    File::Temp 3p		lib/File/Temp.pm \
    File::stat 3p		lib/File/stat.pm \
    FileCache 3p		lib/FileCache.pm \
    FileHandle 3p		lib/FileHandle.pm \
    Filter::Simple 3p		lib/Filter/Simple.pm \
    Filter::Util::Call 3p	ext/Filter/Util/Call/Call.pm \
    FindBin 3p			lib/FindBin.pm \
    Getopt::Long 3p		lib/Getopt/Long.pm \
    Getopt::Std 3p		lib/Getopt/Std.pm \
    Hash::Util 3p		lib/Hash/Util.pm \
    I18N::Collate 3p		lib/I18N/Collate.pm \
    I18N::LangTags 3p		lib/I18N/LangTags.pm \
    I18N::LangTags::Detect 3p	lib/I18N/LangTags/Detect.pm \
    I18N::LangTags::List 3p	lib/I18N/LangTags/List.pm \
    I18N::Langinfo 3p		ext/I18N/Langinfo/Langinfo.pm \
    IO 3p			lib/IO.pm \
    IO::Dir 3p			lib/IO/Dir.pm \
    IO::File 3p			lib/IO/File.pm \
    IO::Handle 3p		lib/IO/Handle.pm \
    IO::Pipe 3p			lib/IO/Pipe.pm \
    IO::Poll 3p			lib/IO/Poll.pm \
    IO::Seekable 3p		lib/IO/Seekable.pm \
    IO::Select 3p		lib/IO/Select.pm \
    IO::Socket 3p		lib/IO/Socket.pm \
    IO::Socket::INET 3p		lib/IO/Socket/INET.pm \
    IO::Socket::UNIX 3p		lib/IO/Socket/UNIX.pm \
    IPC::Msg 3p			lib/IPC/Msg.pm \
    IPC::Open2 3p		lib/IPC/Open2.pm \
    IPC::Open3 3p		lib/IPC/Open3.pm \
    IPC::Semaphore 3p		lib/IPC/Semaphore.pm \
    IPC::SysV 3p		lib/IPC/SysV.pm \
    List::Util 3p		ext/List/Util/lib/List/Util.pm \
    Locale::Constants 3p	lib/Locale/Constants.pod \
    Locale::Country 3p		lib/Locale/Country.pod \
    Locale::Currency 3p		lib/Locale/Currency.pod \
    Locale::Language 3p		lib/Locale/Language.pod \
    Locale::Maketext 3p		lib/Locale/Maketext.pod \
    Locale::Maketext::TPJ13 3p	lib/Locale/Maketext/TPJ13.pod \
    Locale::Script 3p		lib/Locale/Script.pod \
    MIME::Base64 3p		ext/MIME/Base64/Base64.pm \
    MIME::QuotedPrint 3p	ext/MIME/Base64/QuotedPrint.pm \
    Math::BigFloat 3p		lib/Math/BigFloat.pm \
    Math::BigInt 3p		lib/Math/BigInt.pm \
    Math::BigInt::Calc 3p	lib/Math/BigInt/Calc.pm \
    Math::BigInt::CalcEmu 3p	lib/Math/BigInt/CalcEmu.pm \
    Math::BigRat 3p		lib/Math/BigRat.pm \
    Math::Complex 3p		lib/Math/Complex.pm \
    Math::Trig 3p		lib/Math/Trig.pm \
    Memoize 3p			lib/Memoize.pm \
    Memoize::AnyDBM_File 3p	lib/Memoize/AnyDBM_File.pm \
    Memoize::Expire 3p		lib/Memoize/Expire.pm \
    Memoize::ExpireFile 3p	lib/Memoize/ExpireFile.pm \
    Memoize::ExpireTest 3p	lib/Memoize/ExpireTest.pm \
    Memoize::NDBM_File 3p	lib/Memoize/NDBM_File.pm \
    Memoize::SDBM_File 3p	lib/Memoize/SDBM_File.pm \
    Memoize::Storable 3p	lib/Memoize/Storable.pm \
    NDBM_File 3p		lib/NDBM_File.pm \
    NEXT 3p			lib/NEXT.pm \
    Net::Cmd 3p			lib/Net/Cmd.pm \
    Net::Config 3p		lib/Net/Config.pm \
    Net::Domain 3p		lib/Net/Domain.pm \
    Net::FTP 3p			lib/Net/FTP.pm \
    Net::NNTP 3p		lib/Net/NNTP.pm \
    Net::Netrc 3p		lib/Net/Netrc.pm \
    Net::POP3 3p		lib/Net/POP3.pm \
    Net::Ping 3p		lib/Net/Ping.pm \
    Net::SMTP 3p		lib/Net/SMTP.pm \
    Net::Time 3p		lib/Net/Time.pm \
    Net::hostent 3p		lib/Net/hostent.pm \
    Net::libnetFAQ 3p		lib/Net/libnetFAQ.pod \
    Net::netent 3p		lib/Net/netent.pm \
    Net::protoent 3p		lib/Net/protoent.pm \
    Net::servent 3p		lib/Net/servent.pm \
    O 3p			lib/O.pm \
    ODBM_File 3p		lib/ODBM_File.pm \
    Opcode 3p			lib/Opcode.pm \
    POSIX 3p			lib/POSIX.pod \
    PerlIO 3p			lib/PerlIO.pm \
    PerlIO::encoding 3p		ext/PerlIO/encoding/encoding.pm \
    PerlIO::scalar 3p		ext/PerlIO/scalar/scalar.pm \
    PerlIO::via 3p		ext/PerlIO/via/via.pm \
    PerlIO::via::QuotedPrint 3p	lib/PerlIO/via/QuotedPrint.pm \
    Pod::Checker 3p		lib/Pod/Checker.pm \
    Pod::Find 3p		lib/Pod/Find.pm \
    Pod::Html 3p		lib/Pod/Html.pm \
    Pod::InputObjects 3p	lib/Pod/InputObjects.pm \
    Pod::LaTeX 3p		lib/Pod/LaTeX.pm \
    Pod::Man 3p			lib/Pod/Man.pm \
    Pod::ParseLink 3p		lib/Pod/ParseLink.pm \
    Pod::ParseUtils 3p		lib/Pod/ParseUtils.pm \
    Pod::Parser 3p		lib/Pod/Parser.pm \
    Pod::Perldoc::ToChecker 3p	lib/Pod/Perldoc/ToChecker.pm \
    Pod::Perldoc::ToMan 3p	lib/Pod/Perldoc/ToMan.pm \
    Pod::Perldoc::ToNroff 3p	lib/Pod/Perldoc/ToNroff.pm \
    Pod::Perldoc::ToPod 3p	lib/Pod/Perldoc/ToPod.pm \
    Pod::Perldoc::ToRtf 3p	lib/Pod/Perldoc/ToRtf.pm \
    Pod::Perldoc::ToText 3p	lib/Pod/Perldoc/ToText.pm \
    Pod::Perldoc::ToTk 3p	lib/Pod/Perldoc/ToTk.pm \
    Pod::Perldoc::ToXml 3p	lib/Pod/Perldoc/ToXml.pm \
    Pod::PlainText 3p		lib/Pod/PlainText.pm \
    Pod::Plainer 3p		lib/Pod/Plainer.pm \
    Pod::Select 3p		lib/Pod/Select.pm \
    Pod::Text 3p		lib/Pod/Text.pm \
    Pod::Text::Color 3p		lib/Pod/Text/Color.pm \
    Pod::Text::Overstrike 3p	lib/Pod/Text/Overstrike.pm \
    Pod::Text::Termcap 3p	lib/Pod/Text/Termcap.pm \
    Pod::Usage 3p		lib/Pod/Usage.pm \
    SDBM_File 3p		lib/SDBM_File.pm \
    Safe 3p			lib/Safe.pm \
    Scalar::Util 3p		ext/List/Util/lib/Scalar/Util.pm \
    Search::Dict 3p		lib/Search/Dict.pm \
    SelectSaver 3p		lib/SelectSaver.pm \
    SelfLoader 3p		lib/SelfLoader.pm \
    Shell 3p			lib/Shell.pm \
    Socket 3p			lib/Socket.pm \
    Storable 3p			ext/Storable/Storable.pm \
    Switch 3p			lib/Switch.pm \
    Symbol 3p			lib/Symbol.pm \
    Sys::Hostname 3p		lib/Sys/Hostname.pm \
    Sys::Syslog 3p		lib/Sys/Syslog.pm \
    Term::ANSIColor 3p		lib/Term/ANSIColor.pm \
    Term::Cap 3p		lib/Term/Cap.pm \
    Term::Complete 3p		lib/Term/Complete.pm \
    Term::ReadLine 3p		lib/Term/ReadLine.pm \
    Test 3p			lib/Test.pm \
    Test::Builder 3p		lib/Test/Builder.pm \
    Test::Builder::Module 3p	lib/Test/Builder/Module.pm \
    Test::Builder::Tester 3p	lib/Test/Builder/Tester.pm \
    Test::Builder::Tester::Color 3p	lib/Test/Builder/Tester/Color.pm \
    Test::Harness 3p		lib/Test/Harness.pm \
    Test::Harness::Assert 3p	lib/Test/Harness/Assert.pm \
    Test::Harness::Iterator 3p	lib/Test/Harness/Iterator.pm \
    Test::Harness::Point 3p	lib/Test/Harness/Point.pm \
    Test::Harness::Straps 3p	lib/Test/Harness/Straps.pm \
    Test::Harness::TAP 3p	lib/Test/Harness/TAP.pod \
    Test::More 3p		lib/Test/More.pm \
    Test::Simple 3p		lib/Test/Simple.pm \
    Test::Tutorial 3p		lib/Test/Tutorial.pod \
    Text::Abbrev 3p		lib/Text/Abbrev.pm \
    Text::Balanced 3p		lib/Text/Balanced.pm \
    Text::ParseWords 3p		lib/Text/ParseWords.pm \
    Text::Soundex 3p		lib/Text/Soundex.pm \
    Text::Tabs 3p		lib/Text/Tabs.pm \
    Text::Wrap 3p		lib/Text/Wrap.pm \
    Thread 3p			lib/Thread.pm \
    Thread::Queue 3p		lib/Thread/Queue.pm \
    Thread::Semaphore 3p	lib/Thread/Semaphore.pm \
    Tie::Array 3p		lib/Tie/Array.pm \
    Tie::File 3p		lib/Tie/File.pm \
    Tie::Handle 3p		lib/Tie/Handle.pm \
    Tie::Hash 3p		lib/Tie/Hash.pm \
    Tie::Memoize 3p		lib/Tie/Memoize.pm \
    Tie::RefHash 3p		lib/Tie/RefHash.pm \
    Tie::Scalar 3p		lib/Tie/Scalar.pm \
    Tie::SubstrHash 3p		lib/Tie/SubstrHash.pm \
    Time::HiRes 3p		ext/Time/HiRes/HiRes.pm \
    Time::Local 3p		lib/Time/Local.pm \
    Time::gmtime 3p		lib/Time/gmtime.pm \
    Time::localtime 3p		lib/Time/localtime.pm \
    Time::tm 3p			lib/Time/tm.pm \
    UNIVERSAL 3p		lib/UNIVERSAL.pm \
    Unicode::Collate 3p		lib/Unicode/Collate.pm \
    Unicode::Normalize 3p	ext/Unicode/Normalize/Normalize.pm \
    Unicode::UCD 3p		lib/Unicode/UCD.pm \
    User::grent 3p		lib/User/grent.pm \
    User::pwent 3p		lib/User/pwent.pm \
    XS::APItest 3p		ext/XS/APItest/APItest.pm \
    XS::Typemap 3p		ext/XS/Typemap/Typemap.pm \
    XSLoader 3p			lib/XSLoader.pm \
    attributes 3p		lib/attributes.pm \
    attrs 3p			lib/attrs.pm \
    autouse 3p			lib/autouse.pm \
    base 3p			lib/base.pm \
    bigint 3p			lib/bigint.pm \
    bignum 3p			lib/bignum.pm \
    bigrat 3p			lib/bigrat.pm \
    blib 3p			lib/blib.pm \
    bytes 3p			lib/bytes.pm \
    charnames 3p		lib/charnames.pm \
    constant 3p			lib/constant.pm \
    diagnostics 3p		lib/diagnostics.pm \
    encoding 3p			ext/Encode/encoding.pm \
    fields 3p			lib/fields.pm \
    filetest 3p			lib/filetest.pm \
    if 3p			lib/if.pm \
    integer 3p			lib/integer.pm \
    less 3p			lib/less.pm \
    lib 3p			lib/lib.pm \
    locale 3p			lib/locale.pm \
    open 3p			lib/open.pm \
    ops 3p			lib/ops.pm \
    overload 3p			lib/overload.pm \
    re 3p			lib/re.pm \
    sigtrap 3p			lib/sigtrap.pm \
    sort 3p			lib/sort.pm \
    strict 3p			lib/strict.pm \
    subs 3p			lib/subs.pm \
    threads 3p			ext/threads/threads.pm \
    threads::shared 3p		ext/threads/shared/shared.pm \
    utf8 3p			lib/utf8.pm \
    vars 3p			lib/vars.pm \
    vmsish 3p			lib/vmsish.pm \
    warnings 3p			lib/warnings.pm \
    warnings::register 3p	lib/warnings/register.pm
.  if !defined(NOMAN) || ${NOMAN:L} == "no"
MANALL+=	${page}.cat${sect}
MANSRCALL+=	${page}.${sect}
MANSRC_COOKIE=	stamp-mansrc.build
_quick${sect}+=	${file} ${page}.${sect}
.  else
MANSRC_COOKIE=
.  endif


${page}.${sect}: ${file}
	${POD2MAN} --section=${sect} --official ${.ALLSRC} $@@
.endfor

mansrc.build:
.for sect in 1 3p
.  if !empty(_quick${sect})
	cd ${.OBJDIR} && ${POD2MAN} --section=${sect} --official ${_quick${sect}}
.  endif
.endfor
d54 1
a54 7
MLINKS=		c2ph.1 pstruct.1 s2p.1 psed.1 \
		Getopt::Std.3p getopt.3p Getopt::Std.3p getopts.3p \
		File::Basename.3p dirname.3p File::Basename.3p basename.3p \
		File::Basename.3p fileparse.3p

# NOTE: config.sh *must* be first
GENERATED=	config.sh config.h cflags makeaperl makedepend makedir \
d58 4
d66 1
a66 1
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper ${.CURDIR}
d69 1
a69 3
stamp-mansrc.build:
	@@cd ${.CURDIR} && exec ${MAKE} -f Makefile.bsd-wrapper mansrc.build
	@@touch $@@
a70 1
all:	perl.build ${MANSRC_COOKIE} man.build
d72 2
a73 1
man.build: ${MANALL} ${PSALL}
d75 2
a76 1
beforedepend:	config.sh config.h
d87 3
d93 2
a94 23
Makefile:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} Makefile.SH

cflags:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} cflags.SH

config.h:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} config_h.SH

makeaperl:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} makeaperl.SH

makedepend:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} makedepend.SH

makedir:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} makedir.SH

myconfig:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} myconfig.SH

writemain:
	cd ${.OBJDIR} && ${FLAGS_TO_PASS} exec ${SHELL} writemain.SH
a108 5
.if defined(NOMAN) && ${NOMAN:L} != "no"
maninstall:
	@@echo NOMAN is set
.endif

d138 8
@


1.24
log
@resort and add commented-out
#CFLAGS+=       -std=gnu89
as this doesnâ€™t help in solving the problem EITHER

[â€¦]
        Making DynaLoader (static)
Processing hints file hints/mirbsd.pl
Writing Makefile for DynaLoader
../../miniperl "-I../../lib" "-I../../lib" DynaLoader_pm.PL DynaLoader.pm
../../miniperl "-I../../lib" "-I../../lib" XSLoader_pm.PL XSLoader.pm
cp XSLoader.pm ../../lib/XSLoader.pm
cp DynaLoader.pm ../../lib/DynaLoader.pm
AutoSplitting ../../lib/DynaLoader.pm (../../lib/auto/DynaLoader)
make: don't know how to make .o. Stop in /usr/src/gnu/usr.bin/perl/obj/ext/DynaLoader.
*** Error code 2

WTF!
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.23 2007/06/09 18:31:31 tg Exp $
a17 2
#CFLAGS+=	-std=gnu89

@


1.23
log
@use my ever-improving gcc mad h4x0r skillz and make perl build warning-free
again
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.22 2007/06/07 16:51:53 tg Exp $
a12 4
# Arguments passed to Configure...
XFLAGS=		${CFLAGS} -Werror-maybe-reset
CONFIGURE_ARGS=	-dsE -D${OSname}_distribution=defined \
		-Doptimize=${XFLAGS:N-g*:M*:Q}
d18 7
@


1.22
log
@I appear to have broken Perl in -r1.21
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.20 2007/05/08 21:52:54 tg Exp $
a14 1
EXPERIMENTAL=	Yes	# for now (the malloc wrap produces ugly warnings)
@


1.21
log
@enabling the malloc wrap checks produces some warnings
which I might get rid off later but not tonight (hrhr)
@
text
@d14 1
a15 1
#XFLAGS=	${CFLAGS} -Werror-maybe-reset
@


1.20
log
@ZCONST
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.19 2007/04/29 20:50:49 tg Exp $
d14 2
a15 1
XFLAGS=		${CFLAGS} -Werror-maybe-reset
@


1.19
log
@fastmerge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.18 2006/09/22 12:56:39 tg Exp $
d561 1
@


1.18
log
@fixup -Werror leaking into Config_heavy.pl
@
text
@d1 2
a2 2
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.17 2006/09/22 05:34:08 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.70 2006/03/28 19:22:56 millert Exp $
@


1.17
log
@really don't build the pic lib
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.16 2006/09/22 05:00:03 tg Exp $
d658 7
a664 2
	 STRIPFLAGS=${STRIPFLAGS} INSTALLFLAGS=-o NOLIBINSTALL=1 \
	 LD_LIBRARY_PATH=${.OBJDIR} exec ./perl installperl --destdir=${DESTDIR} -o STRIPFLAGS=${STRIPFLAGS}
@


1.16
log
@I was going to bump the shlib version, but...
libperl.so wasn't even used... 'long as we have DynaLoader...
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.15 2006/09/21 23:22:40 tg Exp $
d596 2
d652 4
d675 3
a679 8
# These have to come after the inclusion of <bsd.lib.mk>

perl.lib:	${GENERATED} ${_LIBS}

install.lib:
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    lib${LIB}.a ${DESTDIR}${LIBDIR}/

@


1.15
log
@now we can build without EXPERIMENTAL=yes too
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.14 2006/09/21 21:40:04 tg Exp $
a553 4
.if exists(${.CURDIR}/shlib_version)
.  include "${.CURDIR}/shlib_version"
SHLIB_VERSION?=	${major}.${minor}
.endif
a554 1

a677 7
.  ifdef SHLIB_SONAME
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    ${SHLIB_SONAME} ${DESTDIR}${LIBDIR}/
.  elif ${NOPIC:L} == "no"
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    lib${LIB}_pic.a ${DESTDIR}${LIBDIR}/
.  endif
@


1.14
log
@* stabilise by not building a threaded perl
  (I hope this gets rid of my segfaults on herc)
* -fno-strict-aliasing -fno-delete-null-pointer-checks
  are already standard CFLAGS, respecively, fixed in gcc
* -Wall -Wextra doesn't make sense...
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.13 2006/06/30 23:15:04 tg Exp $
a12 3
# Perl produces more warnings than shitty GNU code
EXPERIMENTAL=	yes

d14 1
d16 1
a16 1
		-Doptimize=${CFLAGS:N-g*:Q}
d22 2
a23 2
.if defined(NOPIC) && ${NOPIC:L} != "no"
USE_DL?=	n
d25 1
a25 1
USE_DL?=	y
d27 1
d36 2
a37 2
TARGET_MACHINE_ARCH?=	$(MACHINE_ARCH)
.if ($(TARGET_MACHINE_ARCH) != $(MACHINE_ARCH))
d602 1
a602 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${MAKE}
d605 2
a606 4
	cd ${.OBJDIR} && PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
	 USEDL=${USE_DL} SHELL="${SHELL}" \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Configure ${CONFIGURE_ARGS}
d609 1
a609 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Policy_sh.SH
d612 1
a612 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Makefile.SH
d615 1
a615 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} cflags.SH
d618 1
a618 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} config_h.SH
d621 1
a621 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} makeaperl.SH
d624 1
a624 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} makedepend.SH
d627 1
a627 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} makedir.SH
d630 1
a630 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} myconfig.SH
d633 1
a633 3
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} writemain.SH
d639 1
a639 3
	cd ${.OBJDIR}/x2p && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Makefile.SH
d642 1
a642 3
	cd ${.OBJDIR}/x2p && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} cflags.SH
@


1.13
log
@automerge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.12 2006/06/27 16:57:02 tg Exp $
a6 1
# For "NOMAN" and "NOPIC"
a7 2
# Doesn't work too well anyway
DEBUGLIBS=	No
d10 1
a10 3
.if ${MACHINE_ARCH} == "i386"
THREADED_PERL?=	Yes
.else
a11 5
.endif

# Perl builds with -fno-strict-aliasing, we want libperl to do the same
CFLAGS+=	-fno-strict-aliasing -fno-delete-null-pointer-checks \
		-Wall -Wextra
@


1.12
log
@prevent sparc miniperl from segfaulting by removing threads (yeah, I know)
and while here make it honour CFLAGS better
@
text
@d1 2
a2 2
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.11 2006/06/15 18:25:15 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.69 2005/01/15 21:30:17 millert Exp $
d4 1
a4 1
# Build wrapper for Perl 5.8.6
d88 2
d126 1
d249 1
d285 3
d293 1
d301 1
d305 1
d310 1
d466 3
d472 1
d474 1
d541 1
@


1.11
log
@remove DEBUGPROGS remnants, that flag is long dead
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.10 2006/01/31 13:58:25 tg Exp $
d13 1
d15 3
d27 2
a28 1
CONFIGURE_ARGS=	-dsE -D${OSname}_distribution=defined
@


1.10
log
@we don't do h2ph(1) any more - I haven't seen precompiled header
files on any GNU/Linux or Solaris I've come across... let's look
whether something actually breaks.
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.9 2005/12/18 16:36:52 tg Exp $
a10 1
DEBUGPROGS=	No
@


1.9
log
@Part 2 of the big commit:
* www/vbegin.php: don't output the UTF-8 BOM for now
* ports/Setup.sh: change order in which path is divined [1]
* ports/books/mirex: convert to CVS_DISTF
* ports/comms/ssfe: increase line length limit and history buffer size
* ports/infrastructure/install/setup.sh: sync path order with Setup.sh [1]
* ports/infrastructure/mk/bsd.port.mk: (_PORTPATH) sync default PATH [1]
* ports/infrastructure/mk/bsd.port.mk: (_UPGRADE_FLAGS) new, default to -a
* ports/infrastructure/mk/bsd.port.mk: (_upgrade) use it
* ports/infrastructure/mk/bsd.port.mk: (reupgrade) new target, set to -a -f
* ports/infrastructure/scripts/mkmcz: don't use $LOCALBASE, trust in PATH
* ports/infrastructure/mk/bsd.port.mk: (_CVS_FETCH) use _PORTPATH
* ports/infrastructure/pkgtools/create: treat /usr/info same as /usr/man
* ports/infrastructure/pkgtools/upgrade: fix path to temp +REQUIRED_BY
* ports/www/firesomething: break, suggest Opera-Linux/K-Meleon/Safari
* src/Makefile, src/gcc/Makefile.lang: if build GCJ, check if X11 installed
* src/Makefile, src/gnu/usr.bin/perl/Makefile.bsd-wrapper: defer h2ph
  execution to end of build
* src/distrib/lists: sync with pre-h2ph change
* src/etc/services: add openvpn, from IANA
* src/gcc/Makefile.inc, Makefile.lang: fragment out NO_*= stuff
* src/gcc/libjava/Makefile.bsd-wrapper: DEBUGPROGS is gone
* src/gnu/usr.bin/perl/Makefile.bsd-wrapper: flesh out h2ph, fix perms
* src/lib/libc/time/localtime.c: fix undefined extern
* ports/net/sirc/Makefile: automatically insert version into CTCP VERSION
* ports/net/sirc/dist/PROGRAMMING: document capab hooks
* ports/net/sirc/dist/dsircp: several hours of perl hacking with Club-Mate
  - publish $msgchannel, $talkserver [2]
  - support for CAPAB: publish $has_capab, $capab_cmd, $capab_response;
    add "capab" hook in reply
  - support for CAPAB IDENTIFY-MSG: publish $has_identifymsg; new
    $unverified, $unverified_m; enable automatically if present;
    change <...> [...] -...- to «...» [[...]] ¬...¬
  - /describe nick now looks [*] (or [[*]]) instead of *, /me now looks
    # instead of * if identified, to facilitate this conversion
  - fix abuse of U+0060
  - sort /names [2]
  - fix ^B ^_ ^V [2]
  - remove trailing whitespace on outgoing msgs [2]
  - remove trailing whitespace on incoming msgs
  - fix indentation
  - auto-split overlong lines (partially [2])
  - in NOTICE make nick bold too [2]
  - disable DCC since it crashes
  - beautify CTCP TIME replies
  - add ACCEPT command (for ratbox-ircd, e.g. Freeforge)
* ports/net/sirc/pkg/DESCR: summarise new features

[1] all for the sake of bsiegert@@ wanting to not have to souce a
    SetEnv.sh or SetEnv.csh before building in "default MirPorts"
    (i.e. LOCALBASE=/usr/mpkg SYSCONFDIR=/etc BINOWN=root SUDO=sudo)
[2] adapted from http://co.ordinate.org/sirc/
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.8 2005/12/18 04:52:25 tg Exp $
a49 1
H2PH=		/usr/bin/h2ph
a670 11
do-h2ph:
	-mkdir -p ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${OSname}
	(cd ${DESTDIR}/usr/include; ${H2PH} \
		-d ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${OSname} \
		$$(find . -name '*.h'); \
		pax -rw $$(find . -type l \! -name '*.h' | sed 's/^..//') \
		${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${OSname})
	-chown -R ${BINOWN}:${BINGRP} ${DESTDIR}/usr/libdata/perl5
	-find ${DESTDIR}/usr/libdata/perl5 -type f | xargs chmod a=r
	-find ${DESTDIR}/usr/libdata/perl5 -type d | xargs chmod u=rwx,go=rx

@


1.8
log
@support MirPorts in /usr/mpkg by default (yeah, crude hack, but WFM)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.6 2005/10/21 10:46:27 tg Exp $
d671 2
d679 3
a681 1
	-chmod -R a+rX ${DESTDIR}/usr/libdata/perl5
@


1.7
log
@modernise, indent
@
text
@d558 3
@


1.6
log
@* perl, sendmail: merge OpenBSD import
* perl: fix DEBUG{LIBS,PROGS} by disabling
* all: fix use of CDIAGFLAGS+=, CFLAGS+= and COPTS+= [...]
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.5 2005/07/09 17:43:44 tg Exp $
d31 1
a31 1
USE_DL?=n
d33 1
a33 1
USE_DL?=y
d525 4
a528 7
MANALL+= ${page}.cat${sect}
MANSRCALL+= ${page}.${sect}
MANSRC_COOKIE=stamp-mansrc.build
_quick${sect}+=${file} ${page}.${sect}
.    ifdef MANPS
PSALL+= ${page}.ps${sect}
.    endif
d558 2
a559 2
.if defined (INSTALL_STRIP) && ${INSTALL_STRIP} == "-s"
STRIPFLAGS='-s'
a698 5
# Need -fPIC, not -fpic on sparc
.if ($(TARGET_MACHINE_ARCH) == sparc)
PICFLAG=-fPIC
.endif

@


1.5
log
@revert

go via .CURDIR in mk.conf instead
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.4 2005/07/09 17:34:39 tg Exp $
d9 3
d710 8
a717 11
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m 600 lib${LIB}.a \
	    ${DESTDIR}${LIBDIR}
.if ${INSTALL_COPY} != "-p"
	${RANLIB} -t ${DESTDIR}${LIBDIR}/lib${LIB}.a
.endif
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/lib${LIB}.a
.if ${DEBUGLIBS:L} == "yes"
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m 600 \
	    lib${LIB}_g.a ${DESTDIR}${LIBDIR}/debug/lib${LIB}.a
.  if ${INSTALL_COPY} != "-p"
	${RANLIB} -t ${DESTDIR}${LIBDIR}/debug/lib${LIB}.a
a718 15
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/debug/lib${LIB}.a
.endif
.if !defined(NOPIC) || ${NOPIC:L} == "no"
.  if !defined(SHLIB_VERSION)
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m 600 \
	    lib${LIB}_pic.a ${DESTDIR}${LIBDIR}
.    if ${INSTALL_COPY} != "-p"
	${RANLIB} -t ${DESTDIR}${LIBDIR}/lib${LIB}_pic.a
.    endif
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/lib${LIB}_pic.a
.  else   # ! ndef SHLIB_VERSION
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    lib${LIB}.so.${SHLIB_VERSION} ${DESTDIR}${LIBDIR}
.  endif  # ! ndef SHLIB_VERSION
.endif  # ndef NOPIC
@


1.4
log
@../Makefile.inc before <bsd.own.mk>
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.3 2005/03/15 17:21:45 tg Exp $
a6 3
.if exists(../Makefile.inc)
.  include "../Makefile.inc"
.endif
@


1.3
log
@don't -Werror
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.2 2005/03/13 15:01:15 tg Exp $
d7 3
@


1.2
log
@surprisingly few diff against OpenBSD's port of perl
@
text
@d1 1
a1 1
# $MirOS$
d14 5
a18 2
CFLAGS+=	-fno-strict-aliasing -fno-delete-null-pointer-checks
COPTS+=		-Wall -W -Wno-error
@


1.1
log
@Initial revision
@
text
@d1 1
d7 1
a7 1
# For ``NOMAN'' and ``USE_GCC3''
d10 2
a11 2
# To build a threaded perl, uncomment this.  Not stable on all platforms...
#THREADED_PERL=true
d14 8
a21 3
CFLAGS+= -fno-strict-aliasing
.if ${USE_GCC3:L} == "yes"
CFLAGS+= -fno-delete-null-pointer-checks
d24 4
a27 5
# Arguments passed to Configure...
CONFIGURE_ARGS= -dsE -Dopenbsd_distribution=defined
.if defined(THREADED_PERL) && ($(THREADED_PERL) == true)
CONFIGURE_ARGS+= -Dusethreads
CFLAGS+= -pthread
d518 1
a518 1
.  ifndef NOMAN
d542 4
d551 1
a551 1
	globals.c perlio.c perlapi.c numeric.c locale.c pp_pack.c pp_sort.c    
d553 1
a553 1
CPPFLAGS+= -DPERL_CORE -DPERL_RANDOM_DEVICE=\"/dev/arandom\" -I.
d587 3
a589 1
	cd ${.OBJDIR} && exec ${MAKE}
d593 3
a595 1
	    exec /bin/sh Configure ${CONFIGURE_ARGS}
d598 3
a600 1
	cd ${.OBJDIR} && exec /bin/sh Policy_sh.SH
d603 3
a605 1
	cd ${.OBJDIR} && exec /bin/sh Makefile.SH
d608 3
a610 1
	cd ${.OBJDIR} && exec /bin/sh cflags.SH
d613 3
a615 1
	cd ${.OBJDIR} && exec /bin/sh config_h.SH
d618 3
a620 1
	cd ${.OBJDIR} && exec /bin/sh makeaperl.SH
d623 3
a625 1
	cd ${.OBJDIR} && exec /bin/sh makedepend.SH
d628 3
a630 1
	cd ${.OBJDIR} && exec /bin/sh makedir.SH
d633 3
a635 1
	cd ${.OBJDIR} && exec /bin/sh myconfig.SH
d638 3
a640 1
	cd ${.OBJDIR} && exec /bin/sh writemain.SH
d643 1
a643 1
	cd ${.OBJDIR}/pod && exec /bin/sh Makefile.SH
d646 3
a648 1
	cd ${.OBJDIR}/x2p && exec /bin/sh Makefile.SH
d651 3
a653 1
	cd ${.OBJDIR}/x2p && exec /bin/sh cflags.SH
d659 1
a659 1
.ifdef NOMAN
d665 1
a665 1
	-mkdir -p ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd
d667 4
a670 4
		-d ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd \
		`find . -name '*.h'`; \
		pax -rw `find . -type l \! -name '*.h' | sed 's/^..//'` \
		${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd)
d706 1
a706 1
.if (${INSTALL_COPY} != "-p")
d710 1
a710 1
.if !defined(NOPROFILE)
d712 5
a716 3
	    lib${LIB}_p.a ${DESTDIR}${LIBDIR}
.if (${INSTALL_COPY} != "-p")
	${RANLIB} -t ${DESTDIR}${LIBDIR}/lib${LIB}_p.a
d718 2
a719 3
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/lib${LIB}_p.a
.endif
.if !defined(NOPIC) && (${MACHINE_ARCH} != "mips64") 
d722 1
a722 1
.if (${INSTALL_COPY} != "-p")
d724 1
a724 1
.endif
d726 1
a726 2
.endif
.if !defined(NOPIC) && defined(major) && defined(minor)
d728 4
a731 2
	    lib${LIB}.so.${major}.${minor} ${DESTDIR}${LIBDIR}
.endif
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import Perl 5.8.8 from OpenLSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.70 2006/03/28 19:22:56 millert Exp $
a73 2
    perl587delta 1		pod/perl587delta.pod \
    perl588delta 1		pod/perl588delta.pod \
a109 1
    perlglossary 1		pod/perlglossary.pod \
a231 1
    Digest::file 3p		lib/Digest/file.pm \
a266 3
    ExtUtils::Constant::Base 3p	lib/ExtUtils/Constant/Base.pm \
    ExtUtils::Constant::Utils 3p	lib/ExtUtils/Constant/Utils.pm \
    ExtUtils::Constant::XS 3p	lib/ExtUtils/Constant/XS.pm \
a271 1
    ExtUtils::MM_AIX 3p		lib/ExtUtils/MM_AIX.pm \
a278 1
    ExtUtils::MM_QNX 3p		lib/ExtUtils/MM_QNX.pm \
a281 1
    ExtUtils::MM_VOS 3p		lib/ExtUtils/MM_VOS.pm \
a285 1
    ExtUtils::MakeMaker::Config 3p	lib/ExtUtils/MakeMaker/Config.pm \
a440 3
    Test::Builder::Module 3p	lib/Test/Builder/Module.pm \
    Test::Builder::Tester 3p	lib/Test/Builder/Tester.pm \
    Test::Builder::Tester::Color 3p	lib/Test/Builder/Tester/Color.pm \
a443 1
    Test::Harness::Point 3p	lib/Test/Harness/Point.pm \
a444 1
    Test::Harness::TAP 3p	lib/Test/Harness/TAP.pod \
a510 1
    vmsish 3p			lib/vmsish.pm \
@


1.1.1.3
log
@import openbsd compress, ssh, perl, sendmail for minor bugfixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.71 2006/11/09 21:31:12 millert Exp $
a8 3
# There is no point in building a profiled libperl that is never used.
NOPROFILE=

@


1.1.1.4
log
@import up-to-date in-base Perl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.75 2007/11/26 11:12:29 espie Exp $
a11 1
TARGET_MACHINE_ARCH?=	$(MACHINE_ARCH)
d32 10
d44 513
d570 7
a576 1
GEN_AFTER= 	config.h cflags makeaperl makedepend makedir \
a579 4
GENERATED=	config.sh ${GEN_AFTER}

${GEN_AFTER}: config.sh

d584 1
a584 1
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper -e Makefile.bsd-wrapper1 ${.CURDIR}
d587 3
a589 1
all:	perl.build man.build
d591 1
d593 1
a593 2
man.build: perl.build
	cd ${.CURDIR} && exec ${MAKE} -f Makefile.bsd-wrapper1 $@@
d595 1
a595 2
beforedepend:	config.sh config.h Makefile makedepend x2p/Makefile writemain
	cd ${.OBJDIR} && exec ${MAKE} depend
a603 3
Makefile cflags makeaperl makedepend makedir myconfig writemain:	
	cd ${.OBJDIR} && exec /bin/sh $@@.SH

d607 7
a613 1
config.h: 
d616 15
d644 5
a675 8
	@@cd ${.CURDIR} && ${MAKE} -f Makefile.bsd-wrapper1 cleandir

maninstall:
.ifdef NOMAN
	@@echo NOMAN is set
.else
	@@cd ${.CURDIR} && exec ${MAKE} -f Makefile.bsd-wrapper1 maninstall
.endif
@


