head	1.10;
access;
symbols
	MIRBSD_10:1.6.0.2
	MIRBSD_10_BASE:1.6
	MIRBSD_9_BASE:1.5
	MIRBSD_8:1.5.0.2
	MIRBSD_8_BASE:1.5
	mirbsd:1.1.7;
locks; strict;
comment	@# @;


1.10
date	2009.02.24.20.00.58;	author tg;	state Exp;
branches;
next	1.9;
commitid	10049A452070D530FC6;

1.9
date	2008.12.27.21.44.22;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004956A1CA260423D8;

1.8
date	2008.12.26.17.36.26;	author tg;	state Exp;
branches;
next	1.7;
commitid	1004955161849A551C6;

1.7
date	2008.12.26.16.38.28;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004955088529ADC5EC;

1.6
date	2006.10.17.22.17.05;	author tg;	state Exp;
branches;
next	1.5;
commitid	100453554CF31EEEA43;

1.5
date	2005.07.07.20.17.33;	author tg;	state Exp;
branches;
next	1.4;
commitid	624d42cd8dc8c499;

1.4
date	2005.06.05.21.36.39;	author tg;	state Exp;
branches;
next	1.3;
commitid	532b42a37074d618;

1.3
date	2005.06.05.17.38.22;	author tg;	state Exp;
branches;
next	1.2;
commitid	7d7c42a338916650;

1.2
date	2005.03.28.21.25.11;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.06.16.58.49;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.06.16.58.49;	author tg;	state Exp;
branches;
next	;


desc
@@


1.10
log
@remove gcc 2.95 support code left over from ocvs
@
text
@# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.9 2008/12/27 21:44:22 tg Exp $

.include "../Makefile.inc"

LIB=		iberty
LIBDIR=		${BSD_PREFIX}/lib/gcc/${OStriplet}/3.4.6
NOPIC=		Yes
SRCS=		argv.c concat.c cp-demangle.c \
		cp-demint.c cplus-dem.c dyn-string.c fdmatch.c fibheap.c \
		floatformat.c fopen_unlocked.c getpwd.c getruntime.c \
		hashtab.c hex.c lbasename.c lrealpath.c \
		make-relative-prefix.c make-temp-file.c objalloc.c \
		obstack.c partition.c pex-common.c pex-one.c pex-unix.c \
		pexecute.c physmem.c safe-ctype.c sort.c spaces.c \
		splay-tree.c strerror.c \
		strsignal.c strverscmp.c ternary.c unlink-if-ordinary.c \
		xatexit.c xexit.c xmalloc.c xmemdup.c xstrdup.c xstrerror.c \
		xstrndup.c

CPPFLAGS+=	-DHAVE_CONFIG_H -I${GNU_LIBIBERTY_SRC} -I${GNU_LIBIBERTY_INC}

.PATH: ${GNU_LIBIBERTY_SRC}
.PATH: ${GNU_LIBIBERTY_SRC}/testsuite
.PATH: ${GNUSYSTEM_AUX_DIR}

CLEANFILES+=	test-demangle test-demangle.o test-pexecute test-pexecute.o

beforeinstall:
	mkdir -p ${DESTDIR}${LIBDIR}

check: test-demangle demangle-expected test-pexecute
	./test-demangle <${GNU_LIBIBERTY_SRC}/testsuite/demangle-expected
	./test-pexecute

test-demangle: test-demangle.o ${_LIBS}
	${CC} -L. -o $@@ test-demangle.o -liberty

test-demangle.o: test-demangle.c

test-pexecute: test-pexecute.o ${_LIBS}
	${CC} -L. -o $@@ test-pexecute.o -liberty

test-pexecute.o: test-pexecute.c

.depend: test-demangle.c test-pexecute.c

.include <bsd.lib.mk>
@


1.9
log
@these are now in libc
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.8 2008/12/26 17:36:26 tg Exp $
d11 1
a11 1
		hashtab.c hex.c htab_old.c lbasename.c lrealpath.c \
@


1.8
log
@copysign(3) is in libm, strndup(3) in libc
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.7 2008/12/26 16:38:28 tg Exp $
d12 1
a12 1
		make-relative-prefix.c make-temp-file.c mempcpy.c objalloc.c \
d15 1
a15 1
		splay-tree.c stpcpy.c stpncpy.c strerror.c \
@


1.7
log
@move to version specific dir â˜º and remove gplwarn stuff (long dead) while here
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.6 2006/10/17 22:17:05 tg Exp $
d8 1
a8 1
SRCS=		argv.c concat.c copysign.c cp-demangle.c \
d15 1
a15 1
		splay-tree.c stpcpy.c stpncpy.c strerror.c strndup.c \
@


1.6
log
@remove that (silly?) GPL infection warning
cf. http://groups.google.com/group/comp.lang.python/msg/29c7588fbecd8289
cf. http://www.rosenlaw.com/html/GPL.PDF
cf. http://www.rosenlaw.com/html/GL18.pdf
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.5 2005/07/07 20:17:33 tg Exp $
d6 1
d26 1
a26 1
CFLAGS__gplwarn.o= -DMYNAME=\"libiberty\" -DGPLVER=\"2+\"
d28 2
a29 1
CLEANFILES+=	test-demangle test-demangle.o test-pexecute test-pexecute.o
@


1.5
log
@regen
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.4 2005/06/05 21:36:39 tg Exp $
d7 1
a7 1
SRCS=		_gplwarn.c argv.c concat.c copysign.c cp-demangle.c \
@


1.4
log
@make libiberty build again and pass the testsuite
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.3 2005/06/05 17:38:22 tg Exp $
d15 3
a17 2
		strsignal.c ternary.c unlink-if-ordinary.c xatexit.c xexit.c \
		xmalloc.c xmemdup.c xstrdup.c xstrerror.c xstrndup.c
@


1.3
log
@* don't install libiberty as shared library (same as bfd/opcodes)
* build test-pexecute too (untested)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.2 2005/03/28 21:25:11 tg Exp $
d9 5
a13 4
		floatformat.c getpwd.c getruntime.c hashtab.c hex.c \
		htab_old.c lbasename.c lrealpath.c make-relative-prefix.c \
		make-temp-file.c mempcpy.c objalloc.c obstack.c partition.c \
		pex-unix.c physmem.c safe-ctype.c sort.c spaces.c \
d15 3
a17 3
		strsignal.c ternary.c unlink-if-ordinary.c xatexit.c \
		xexit.c xmalloc.c xmemdup.c xstrdup.c xstrndup.c \
		xstrerror.c
@


1.2
log
@merge include and libiberty
new minor; 0 tests failed
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/binutils/libiberty/Makefile,v 1.1.7.1 2005/03/06 16:58:49 tg Exp $
a4 1
SHLIB_VERSION?=	9.1
d6 1
d25 1
a25 1
CLEANFILES+=	test-demangle test-demangle.o
d27 3
a29 3
check: test-demangle demangle-expected
	LD_LIBRARY_PATH=. ./test-demangle \
	    <${GNU_LIBIBERTY_SRC}/testsuite/demangle-expected
d36 6
a41 1
.depend: test-demangle.c
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $MirOS$
d5 1
a5 1
SHLIB_VERSION?=	9.0
d13 3
a15 2
		splay-tree.c stpcpy.c stpncpy.c strerror.c strsignal.c \
		ternary.c xatexit.c xexit.c xmalloc.c xmemdup.c xstrdup.c \
@


1.1.7.1
log
@standard MirOS build infrastructure for certain GNU tools
@
text
@@
