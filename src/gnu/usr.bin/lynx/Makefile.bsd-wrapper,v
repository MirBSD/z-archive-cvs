head	1.51;
access;
symbols
	MIRBSD_10:1.19.0.2
	MIRBSD_10_BASE:1.19
	ncurses-5_2-devel:1.10.0.2
	MIRBSD_9_BASE:1.7
	MIRBSD_8:1.5.0.2
	MIRBSD_8_BASE:1.5;
locks; strict;
comment	@# @;


1.51
date	2017.04.25.18.28.25;	author tg;	state Exp;
branches;
next	1.50;
commitid	10058FF956306BF7125;

1.50
date	2015.08.13.23.05.56;	author tg;	state Exp;
branches;
next	1.49;
commitid	10055CD22D63A91C136;

1.49
date	2015.07.19.12.25.44;	author tg;	state Exp;
branches;
next	1.48;
commitid	10055AB97502B6E820F;

1.48
date	2015.07.19.10.54.00;	author tg;	state Exp;
branches;
next	1.47;
commitid	10055AB81D831133FCE;

1.47
date	2014.03.07.20.27.00;	author tg;	state Exp;
branches;
next	1.46;
commitid	100531A2BAC1C33877F;

1.46
date	2013.08.06.20.44.25;	author tg;	state Exp;
branches;
next	1.45;
commitid	10052016042025FADDE;

1.45
date	2013.08.06.17.06.19;	author tg;	state Exp;
branches;
next	1.44;
commitid	10052012D144F7753C5;

1.44
date	2013.08.05.22.06.10;	author tg;	state Exp;
branches;
next	1.43;
commitid	100520021D16E80D23B;

1.43
date	2013.05.18.15.04.55;	author tg;	state Exp;
branches;
next	1.42;
commitid	100519798AE2CBD0E5B;

1.42
date	2013.05.17.23.07.07;	author tg;	state Exp;
branches;
next	1.41;
commitid	1005196B82406092278;

1.41
date	2012.12.31.21.19.38;	author tg;	state Exp;
branches;
next	1.40;
commitid	10050E2017B122CED3C;

1.40
date	2012.09.02.16.31.09;	author tg;	state Exp;
branches;
next	1.39;
commitid	100504389E66DF49CEB;

1.39
date	2012.08.23.19.20.17;	author tg;	state Exp;
branches;
next	1.38;
commitid	100503682875883380B;

1.38
date	2012.03.03.18.41.28;	author tg;	state Exp;
branches;
next	1.37;
commitid	1004F5265E717A6953D;

1.37
date	2012.02.20.02.57.35;	author tg;	state Exp;
branches;
next	1.36;
commitid	1004F41B6B2077AF71D;

1.36
date	2012.02.19.19.37.48;	author tg;	state Exp;
branches;
next	1.35;
commitid	1004F414F917991F461;

1.35
date	2011.12.18.04.53.17;	author tg;	state Exp;
branches;
next	1.34;
commitid	1004EED71D23F6FA4F2;

1.34
date	2011.10.14.17.52.54;	author tg;	state Exp;
branches;
next	1.33;
commitid	1004E9876F125171335;

1.33
date	2011.06.21.17.35.53;	author tg;	state Exp;
branches;
next	1.32;
commitid	1004E00D68F5B570B6C;

1.32
date	2011.02.22.20.43.14;	author tg;	state Exp;
branches;
next	1.31;
commitid	1004D641FCA44185310;

1.31
date	2010.12.23.20.03.27;	author tg;	state Exp;
branches;
next	1.30;
commitid	1004D13AB131BE88D09;

1.30
date	2010.12.19.19.22.19;	author tg;	state Exp;
branches;
next	1.29;
commitid	1004D0E5B7B7150A62A;

1.29
date	2009.12.26.15.18.41;	author tg;	state Exp;
branches;
next	1.28;
commitid	1004B362968009AFB8B;

1.28
date	2009.11.08.19.28.54;	author tg;	state Exp;
branches;
next	1.27;
commitid	1004AF71BC14017A067;

1.27
date	2009.09.27.12.14.18;	author tg;	state Exp;
branches;
next	1.26;
commitid	1004ABF571524E4207F;

1.26
date	2009.09.06.14.17.01;	author tg;	state Exp;
branches;
next	1.25;
commitid	1004AA3C42B64C5CF4B;

1.25
date	2009.08.09.15.09.51;	author tg;	state Exp;
branches;
next	1.24;
commitid	1004A7EE6D4601C9EC9;

1.24
date	2009.04.17.16.30.12;	author tg;	state Exp;
branches;
next	1.23;
commitid	10049E8AE7E236917EA;

1.23
date	2009.01.18.20.21.52;	author tg;	state Exp;
branches;
next	1.22;
commitid	10049738F6B6E540B8F;

1.22
date	2009.01.18.19.40.48;	author tg;	state Exp;
branches;
next	1.21;
commitid	100497385D57954483F;

1.21
date	2008.12.17.17.01.58;	author tg;	state Exp;
branches;
next	1.20;
commitid	1004949309261B5255A;

1.20
date	2008.12.17.00.24.43;	author tg;	state Exp;
branches;
next	1.19;
commitid	100494846DC07F81A77;

1.19
date	2008.03.09.18.19.37;	author tg;	state Exp;
branches;
next	1.18;
commitid	10047D42A4E0C2308F6;

1.18
date	2007.08.03.15.54.59;	author tg;	state Exp;
branches;
next	1.17;
commitid	10046B34FD1734942EC;

1.17
date	2007.06.12.21.37.02;	author tg;	state Exp;
branches;
next	1.16;
commitid	100466F11D15AB74760;

1.16
date	2007.06.09.17.29.31;	author tg;	state Exp;
branches;
next	1.15;
commitid	100466AE371230359D1;

1.15
date	2007.05.20.11.10.27;	author tg;	state Exp;
branches;
next	1.14;
commitid	10046502C7E7F8B3225;

1.14
date	2007.05.20.09.43.20;	author tg;	state Exp;
branches;
next	1.13;
commitid	1004650182E2FFFB588;

1.13
date	2007.05.08.21.52.54;	author tg;	state Exp;
branches;
next	1.12;
commitid	1004640F14A456E3051;

1.12
date	2006.10.28.19.56.45;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004543B6147B710051;

1.11
date	2006.10.28.19.07.32;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004543AA865C08B5DD;

1.10
date	2006.09.20.22.25.25;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004511BFD72AEAB8C8;

1.9
date	2006.09.13.19.31.47;	author tg;	state Exp;
branches;
next	1.8;
commitid	10045085CB86D20235A;

1.8
date	2006.06.30.20.57.21;	author tg;	state Exp;
branches;
next	1.7;
commitid	10044A59040040DE96A;

1.7
date	2006.06.15.19.38.06;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004491B7324E19711A;

1.6
date	2006.01.31.19.29.29;	author tg;	state Exp;
branches;
next	1.5;
commitid	10043DFBA9A48279C62;

1.5
date	2005.12.21.14.55.52;	author tg;	state Exp;
branches;
next	1.4;
commitid	10043A96CA743A384D9;

1.4
date	2005.12.19.23.56.59;	author tg;	state Exp;
branches;
next	1.3;
commitid	10043A748DE6DD64E1F;

1.3
date	2005.10.21.22.06.55;	author tg;	state Exp;
branches;
next	1.2;
commitid	2cf64359666348e8;

1.2
date	2005.06.22.11.15.43;	author tg;	state Exp;
branches;
next	1.1;
commitid	a6342b948710d62;

1.1
date	2005.03.27.22.42.31;	author tg;	state Exp;
branches;
next	;


desc
@@


1.51
log
@bup
@
text
@# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.49 2015/07/19 12:25:44 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.12 2003/05/01 18:59:36 avsm Exp $

MAN=		lynx.1
CLEANFILES=	lynx.1
FSFMAKEFILE=	makefile
FSFISLIB=	No

.include <bsd.own.mk>

# MirOS patchlevel
CPPFLAGS+=	-DLYNX_VERSION=\"2.8.8dev.16-MirOS-0AB8.1\"

CFARGS+=	--prefix=/usr \
		--sysconfdir=/etc \
		--enable-echo \
		--enable-vertrace \
		--enable-warnings \
		--disable-nls \
		--disable-full-paths \
		--with-ssl \
		--without-gnutls \
		--without-socks \
		--without-socks5 \
		--without-pkg-config \
		--enable-ipv6 \
		--with-screen=ncursesw \
		--enable-widec \
		--enable-color-style \
		--disable-htmlized-cfg \
		--enable-locale-charset \
		--disable-sessions \
		--disable-session-cache \
		--enable-addrlist-page \
		--enable-cjk \
		--enable-japanese-utf8 \
		--enable-default-colors \
		--enable-kbd-layout \
		--enable-nested-tables \
		--enable-ascii-ctypes \
		--disable-idna \
		--enable-justify-elts \
		--enable-progressbar \
		--disable-scrollbar \
		--enable-charset-choice \
		--enable-externs \
		--enable-internal-links \
		--enable-nsl-fork \
		--enable-underlines \
		--without-bzlib \
		--with-zlib \
		--without-x \
		--disable-rpath-hack

.if ${CROSS_MODE:L} == "yes"
CFARGS+=	--with-build-cc=${HOSTCC:Q} \
		--with-build-cflags=${HOSTCFLAGS:Q}
.endif

CPPFLAGS+=	-DLYNX_DONT_CATCH_SIGBUS
CPPFLAGS+=	-DLYNX_DONT_CATCH_SIGSEGV
CPPFLAGS+=	-DLYNX_DONT_CATCH_SIGILL

# do not hardcode paths; do not scan for ports stuff
# bzip2 is special and must always be disabled, otherwise
# it tries to handle it internally as if linking with the
# bzlib even if bzip2 isn’t there; setting the bzip2 path
# in lynx.cfg doesn’t have this issue
CFVARS+=	ac_cv_path_TELNET=telnet \
		ac_cv_path_TN3270=tn3270 \
		ac_cv_path_RLOGIN=rlogin \
		ac_cv_path_MV=mv \
		ac_cv_path_GZIP=gzip \
		ac_cv_path_UNCOMPRESS=gunzip \
		ac_cv_path_UNZIP=unzip \
		ac_cv_path_BZIP2= \
		ac_cv_path_TAR=tar \
		ac_cv_path_COMPRESS=compress \
		ac_cv_path_RM=rm \
		ac_cv_path_UUDECODE=uudecode \
		ac_cv_path_ZCAT=zcat \
		ac_cv_path_ZIP=zip \
		ac_cv_path_PKG_CONFIG=none
CFVARS+=	YACC=yacc

HTMLDIR=	/usr/share/doc/html
HTMLFILES=	Lynx_users_guide.html about_lynx.html help_files.txt \
		lynx-dev.html lynx_help_main.html lynx_url_support.html \
		keystrokes/alt_edit_help.html \
		keystrokes/bashlike_edit_help.html \
		keystrokes/bookmark_help.html keystrokes/cookie_help.html \
		keystrokes/dired_help.html keystrokes/edit_help.html \
		keystrokes/environments.html keystrokes/follow_help.html \
		keystrokes/gopher_types_help.html \
		keystrokes/history_help.html keystrokes/keystroke_help.html \
		keystrokes/movement_help.html keystrokes/option_help.html \
		keystrokes/other_help.html keystrokes/print_help.html \
		keystrokes/scrolling_help.html keystrokes/test_display.html \
		keystrokes/visited_help.html keystrokes/xterm_help.html
HTMLSAMPLES=	blue-background.lss bright-blue.lss cernrules.txt home.htm \
		installdirs.html jumps.htm jumpsUnix.html keepviewer \
		lynx-keymaps lynx_bookmarks.htm lynxdump mailcap mime.types \
		mailto-form.pl midnight.lss mild-colors.lss opaque.lss
HTMLTESTS=	ALT88592.html ISO_LATIN1_test.html README.txt \
		TestComment.html bad-html.html c1.html cp-1252.html \
		cp-1252a.html iso-8859-1.html iso-8859-1a.html \
		iso-8859-2.html iso-8859-2a.html koi8-r.html quickbrown.html \
		raw8bit.html sgml.html spaces.html special_urls.html \
		tabtest.html tags.html test-styles.html unicode.html \
		utf-8-demo.html

lynx.1:	${.CURDIR}/lynx.man
	-cp ${.ALLSRC} $@@

do-install:
	${INSTALL_PROGRAM} lynx ${DESTDIR}/usr/bin/lynx
	${INSTALL_SCRIPT} ${.CURDIR}/samples/oldlynx ${DESTDIR}/usr/bin/
	cd ${.CURDIR} && ${INSTALL_DOC} AUTHORS CHANGES README \
	    ${DESTDIR}${HTMLDIR}/lynx_help/
.for _i in ${HTMLFILES}
	${INSTALL_DOC} ${.CURDIR}/lynx_help/${_i} \
	    ${DESTDIR}${HTMLDIR}/lynx_help/${_i}
.endfor
.for _i in ${HTMLSAMPLES}
	${INSTALL_DOC} ${.CURDIR}/samples/${_i} \
	    ${DESTDIR}${HTMLDIR}/lynx_help/samples/${_i}
.endfor
.for _i in ${HTMLTESTS}
	${INSTALL_DOC} ${.CURDIR}/test/${_i} \
	    ${DESTDIR}${HTMLDIR}/lynx_help/test/${_i}
.endfor

distribution:
	cd ${.CURDIR} && ${INSTALL_DATA} -g ${CONFGRP} \
	    lynx.cfg samples/lynx.lss ${DESTDIR}/etc/

.include <bsd.cfwrap.mk>
@


1.50
log
@fix a crashing bug; disable lynx’ own crash handler preventing tracing
them always (ipv just when DEBUGging); bump
@
text
@d12 1
a12 1
CPPFLAGS+=	-DLYNX_VERSION=\"2.8.8dev.16-MirOS-0AB6.2\"
@


1.49
log
@revert the now no longer needed patches from yesternight, MirSSL copes now
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.48 2015/07/19 10:54:00 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DLYNX_VERSION=\"2.8.8dev.16-MirOS-0AB5.1\"
a59 1
.ifdef DEBUG
a62 1
.endif
@


1.48
log
@bump patchlevel after the patch
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.47 2014/03/07 20:27:00 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DLYNX_VERSION=\"2.8.8dev.16-MirOS-0AB6.1\"
@


1.47
log
@fix foreground colour
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.46 2013/08/06 20:44:25 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DLYNX_VERSION=\"2.8.8dev.16-MirOS-0AB5.1\"
@


1.46
log
@regen
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.45 2013/08/06 17:06:19 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DLYNX_VERSION=\"2.8.8dev.16-MirOS-0AB4.1\"
d37 1
a37 1
		--disable-default-colors \
@


1.45
log
@get rid of the now useless ZLIB_CONST
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.44 2013/08/05 22:06:10 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DLYNX_VERSION=\"2.8.8dev.15e-MirOS-0AB2.1\"
@


1.44
log
@-DZCONST=const → -DZLIB_CONST

XXX sys/conf/Makefile.inc does it twice?
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.43 2013/05/18 15:04:55 tg Exp $
a13 2
CPPFLAGS+=	-DZLIB_CONST

@


1.43
log
@regenerate; enable USE_EXTERNALS
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.42 2013/05/17 23:07:07 tg Exp $
d12 3
a14 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.15e-MirOS-0AB2.1\"
@


1.42
log
@make catching fatal signals configurable; skip when debugging lynx
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.41 2012/12/31 21:19:38 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.15-MirOS-0AB2.1\"
d46 1
@


1.41
log
@fastmerge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.40 2012/09/02 16:31:09 tg Exp $
d59 6
@


1.40
log
@bump the patchlevel accordingly after cid 100503FC63B6F3E2138
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.39 2012/08/23 19:20:17 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.14-MirOS-0AB1.1\"
@


1.39
log
@regen
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.38 2012/03/03 18:41:28 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.14-MirOS-0AB0.1\"
@


1.38
log
@update port and base to Lynx 2.8.8dev.12
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.37 2012/02/20 02:57:35 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.12-MirOS-0AB0.1\"
@


1.37
log
@refresh
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.36 2012/02/19 19:37:48 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.11-MirOS-0AB0.1\"
@


1.36
log
@merge lynx2.8.8dev.10a and fix some spelling
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.35 2011/12/18 04:53:17 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.10a-MirOS-0AB0.1\"
@


1.35
log
@emergency merge of lynx 2.8.8dev.8
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.34 2011/10/14 17:52:54 tg Exp $
d11 2
a12 2
# MirOS patchlevel – 0AAE.1 in sync with MirPorts-2 rev.
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.8-MirOS-0AAF.2\"
@


1.34
log
@unset CAN_CUT_AND_PASTE to maybe work around the red-arrow-overwrites-first-line problem
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.33 2011/06/21 17:35:53 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.7a-MirOS-0AAF.1\"
@


1.33
log
@add ddg to search engines
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.32 2011/02/22 20:43:14 tg Exp $
d11 2
a12 2
# MirOS patchlevel – in sync with MirPorts-2 rev.
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.7a-MirOS-0AAE.1\"
@


1.32
log
@disabled form fields are not read-only (which implies removed from
form submission, for some reason I don’t know)
From: David Paschal <paschal@@surewest.net>
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.31 2010/12/23 20:03:27 tg Exp $
d11 2
a12 2
# MirOS patchlevel – in sync with MirPorts-0 rev.
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.7a-MirOS-0AAE\"
@


1.31
log
@sync
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.30 2010/12/19 19:22:19 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.7a-MirOS-0AAD\"
@


1.30
log
@fastmerge; break since I can’t get autoconf-2.13 to work and it’s late
@
text
@d1 1
a1 2
.error broken
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.29 2009/12/26 15:18:41 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.8dev.7-MirOS-0AAD\"
d16 1
d29 1
d32 2
a34 2
		--enable-ascii-ctypes \
		--enable-charset-choice \
a36 1
		--enable-color-style \
d40 3
d45 1
a45 3
		--disable-sessions \
		--disable-session-cache \
		--enable-justify-elts \
d51 2
a52 1
		--without-x
@


1.29
log
@adjust MirOS patchlevel
@
text
@d1 2
a2 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.28 2009/11/08 19:28:54 tg Exp $
d12 2
a13 2
# MirOS patchlevel – in sync with MirPorts-3 rev.
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7rel.1-MirOS-0AAB\"
d111 2
@


1.28
log
@some rather grave bugfix: after "use locale-dependent charset" was
switched back to disabled, because it disables setting a different
charset without saving the config first (bug?), the default charset
was not properly adjusted to UTF-8 (which would've been the locale
defined one)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.27 2009/09/27 12:14:18 tg Exp $
d12 1
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7rel.1-MirOS-0AAA\"
@


1.27
log
@disable the bzip2 external binary, because otherwise lynx tries to
offer bzip2 as accepted content encoding, despite not having been
linked with bzlib, and fails badly
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.26 2009/09/06 14:17:01 tg Exp $
d11 1
a11 1
# MirOS patchlevel – in sync with MirPorts-2 rev.
@


1.26
log
@• apply a hack (needing ncurses support – cid 1004AA3BCA2415FF513 – is a
  nop unless that patch is available) allowing lynx to tell ncurses that
  the user set a non-UTF-8 display character set, and to assume legacy
  charset handling (for non-UTF-8 wscons(4), luit or script -uns)
• same versioning (base/port) as with devel/cvs
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.25 2009/08/09 15:09:51 tg Exp $
d11 1
a11 1
# MirOS patchlevel – in sync with MirPorts-1 rev.
d57 4
d68 1
a68 1
		ac_cv_path_BZIP2=bzip2 \
@


1.25
log
@automerge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.24 2009/04/17 16:30:12 tg Exp $
d11 2
a12 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7rel.1-MirOS\"
@


1.24
log
@introduce new FSFISLIB (default yes) and set it to no to prevent things
like cvs, lynx, etc. to be built with -O1 -fno-omit-frame-pointer -g1
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.23 2009/01/18 20:21:52 tg Exp $
d11 1
a11 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7dev.12-MirOS\"
d30 1
a30 1
		--disable-ascii-ctypes \
d92 6
a97 4
		TestComment.html c1.html iso-8859-1.html iso-8859-2.html \
		koi8-r.html quickbrown.html raw8bit.html sgml.html \
		spaces.html special_urls.html tabtest.html tags.html \
		test-styles.html unicode.html utf-8-demo.html
@


1.23
log
@update Lynx to 2.8.6dev.12 - UCdomap.c + local diffs
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.22 2009/01/18 19:40:48 tg Exp $
d7 1
@


1.22
log
@fastmerge
@
text
@d1 1
a1 4
+[  --enable-ascii-ctypes   use experimental ascii case-conversion],
-[  --enable-justify-elts   use element-justification logic],
+[  --disable-justify-elts  use element-justification logic],
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.21 2008/12/17 17:01:58 tg Exp $
d10 1
a10 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7dev.11a-MirOS\"
d22 1
d29 1
d70 1
@


1.21
log
@unbreak, cf. Message-ID: <Pine.BSM.4.64L.0812171658310.4380@@herc.mirbsd.org>
@
text
@d1 4
a4 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.20 2008/12/17 00:24:43 tg Exp $
@


1.20
log
@final update to Lynx 2.8.7dev.11a-Mir*
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.19 2008/03/09 18:19:37 tg Exp $
d18 1
a18 1
		--with-ssl=/usr \
d66 2
a67 1
		ac_cv_path_ZIP=zip
@


1.19
log
@upgrade lynx to 2.8.7dev.8 – much better multibyte editing support
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.18 2007/08/03 15:54:59 tg Exp $
d10 1
a10 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7dev.8-MirOS\"
d22 1
d25 2
a32 2
		--disable-htmlized-cfg \
		--enable-ipv6 \
a33 1
		--enable-locale-charset \
d35 1
d37 2
@


1.18
log
@finish upgrade
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.17 2007/06/12 21:37:02 tg Exp $
d10 1
a10 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7dev.7-MirOS\"
@


1.17
log
@lynx isn't really cross-compilable, it adds -I/usr/include to cflags,
which produces stuff like this:

/usr/cross/sparc-ecce-mirbsd10/host-tools/bin/sparc-ecce-mirbsd10-gcc -isystem /usr/cross/sparc-ecce-mirbsd10/usr/include -DHAVE_CONFIG_H  -I/usr/include -DZCONST=const -DLYNX_VERSION=\"2.8.7dev.5-MirOS\" -idirafter /usr/src/gnu/usr.bin/lynx -nostdinc -isystem /usr/cross/sparc-ecce-mirbsd10/usr/include -DXTSTRINGDEFINES   -I../../..  -I../../../src  -I/usr/src/gnu/usr.bin/lynx  -I/usr/src/gnu/usr.bin/lynx/src   -I/usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation -Os -fweb -frename-registers -Wformat -Wstrict-aliasing -Wbounded -fwrapv -fno-align-functions -fno-align-labels -falign-loops=4 -falign-jumps=4 -mcpu=v8 -mtune=supersparc -fhonour-copts -W -Wall -Wbad-function-cast -Wcast-align -Wcast-qual -Winline -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wpointer-arith -Wshadow -Wstrict-prototypes -Wundef -Wno-cast-qual -Wno-cast-align   -I/usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation/ -DACCESS_AUTH -c /usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation/HTParse.c
In file included from /usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation/HTUtils.h:257,
                 from /usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation/HTParse.c:5:
/usr/include/stdlib.h:163:25: warning: "__builtin_alloca" is not defined
/usr/include/stdlib.h:163:35: warning: "__builtin_alloca" is not defined
In file included from /usr/include/openssl/ssl.h:171,
                 from /usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation/HTUtils.h:597,
                 from /usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation/HTParse.c:5:
/usr/include/openssl/comp.h:15: warning: function declaration isn't a prototype
[…]
In file included from /usr/src/gnu/usr.bin/lynx/src/LYCurses.h:167,
                 from /usr/src/gnu/usr.bin/lynx/src/LYKeymap.h:6,
                 from /usr/src/gnu/usr.bin/lynx/src/LYUtils.h:5,
                 from /usr/src/gnu/usr.bin/lynx/WWW/Library/Implementation/HTParse.c:8:
/usr/include/signal.h: In function `sigaddset':
/usr/include/signal.h:66: warning: function declaration isn't a prototype
/usr/include/signal.h:66: warning: nested extern declaration of `__errno'
/usr/include/signal.h: In function `sigdelset':
/usr/include/signal.h:77: warning: function declaration isn't a prototype
/usr/include/signal.h:77: warning: nested extern declaration of `__errno'
[…]
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.16 2007/06/09 17:29:31 tg Exp $
d10 1
a10 1
CPPFLAGS+=	-DZCONST=const -DLYNX_VERSION=\"2.8.7dev.5-MirOS\"
d79 4
a82 3
HTMLSAMPLES=	blue-background.lss bright-blue.lss cernrules.txt \
		installdirs.html jumpsUnix.html keepviewer lynx-keymaps \
		lynxdump mailcap mailto-form.pl mild-colors.lss mime.types
@


1.16
log
@only NOPIC=no platforms are allowed to get gdb and lynx now (as they pull
in libiconv, and it's easier this way, and all our platforms do PIC anyway)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.15 2007/05/20 11:10:27 tg Exp $
d44 5
@


1.15
log
@• bring in patches from the MirPort
• oldlynx script: use #!/usr/bin/env mksh
• fix file://localhost/~/ not found bug
• regenerate configure script
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.14 2007/05/20 09:43:20 tg Exp $
a43 6
.if ${NOPIC:L} != "no"
# japanese-utf8 logic needs some sort of iconv
# citrus iconv does not work on static arches :(
CFARGS+=	--disable-japanese-utf8
.endif

@


1.14
log
@• merge (except configure)
• reduce diff against upstream

untested
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.13 2007/05/08 21:52:54 tg Exp $
d10 2
d50 15
a64 1
CPPFLAGS+=	-DZCONST=const
@


1.13
log
@ZCONST
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.12 2006/10/28 19:56:45 tg Exp $
d10 33
a42 8
CFARGS=		--sysconfdir=/etc --prefix=/usr --with-ssl=/usr --with-zlib \
		--enable-addrlist-page --enable-charset-choice --enable-widec \
		--enable-color-style --disable-full-paths --enable-warnings \
		--enable-internal-links --enable-kbd-layout --enable-ipv6 \
		--enable-nested-tables --disable-nls --enable-nsl-fork \
		--with-screen=ncursesw --disable-scrollbar --enable-cjk \
		--enable-underlines --enable-vertrace --without-bzlib
.if ${NOPIC:L} == "no"
a43 2
CFARGS+=	--enable-japanese-utf8
.else
d74 1
a74 1
	-cp -p ${.ALLSRC} $@@
d76 3
a78 1
post-install:
a91 4
do-install:
	${INSTALL_PROGRAM} lynx ${DESTDIR}/usr/bin/lynx
	${INSTALL_SCRIPT} ${.CURDIR}/samples/oldlynx ${DESTDIR}/usr/bin/

d93 2
a94 3
	${INSTALL_DATA} ${.CURDIR}/lynx.cfg ${DESTDIR}/etc/lynx.cfg
	${INSTALL_DATA} ${.CURDIR}/samples/lynx.lss ${DESTDIR}/etc/lynx.lss
	chgrp ${CONFGRP} ${DESTDIR}/etc/lynx.cfg ${DESTDIR}/etc/lynx.lss
@


1.12
log
@CONFGRP
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.11 2006/10/28 19:07:32 tg Exp $
d25 2
@


1.11
log
@switch to libncurses (for now)
agreed bsiegert@@

ncurses/Makefile: also install HTML docs

switched: libform libmenu libpanel and a few progs, lynx
not switched: tset/clear (but modernised), we use obsd code here
fixed: window
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.10 2006/09/20 22:25:25 tg Exp $
d72 1
@


1.10
log
@install the new 'oldlynx' script, for these who want
the cruel look'n'feel from openbsd 2.9's lynx 2.8.2-SSL
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.9 2006/09/13 19:31:47 tg Exp $
d11 1
a11 1
		--enable-addrlist-page --enable-charset-choice \
d15 1
a15 1
		--with-screen=ncurses --disable-scrollbar --enable-cjk \
d18 1
a18 1
# japanese-utf8 logic needs some sort of iconv :(
@


1.9
log
@update to mirlynx-2.8.6pre.3
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.8 2006/06/30 20:57:21 tg Exp $
d67 1
@


1.8
log
@iconv doesn't exist on static arches
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.7 2006/06/15 19:38:06 tg Exp $
d10 1
a10 1
CFARGS=		--libdir=/etc --prefix=/usr --with-ssl=/usr --with-zlib \
@


1.7
log
@sync
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.6 2006/01/31 19:29:29 tg Exp $
d7 3
a9 1
# japanese-utf8 logic needs some sort of iconv :(
d12 1
a12 2
		--enable-color-style --enable-japanese-utf8 \
		--disable-full-paths --enable-warnings \
d17 7
@


1.6
log
@Lynx now converts happily Shift-JIS and EUC-JP into UTF-8, wow

(that was the reason for all the trouble)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.5 2005/12/21 14:55:52 tg Exp $
d38 1
a38 1
		unicode.html utf-8-demo.html
@


1.5
log
@* sync after small build
* well... I've come to a difficult decision. Don't complain if your
  cpio(1) installed via ports is older than the one in base and set
  creation fails - even on default MirOS, a MirPorts installation
  overrides the installed executables (PATH, LD_LIBRARY_PATH, MANPATH,
  INFOPATH, PERL5LIB, etc.), thus...
  but for building snapshots, we use a very stringent environment now
  (yet untested), so that set creation does _not_ fail (I hope)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.4 2005/12/19 23:56:59 tg Exp $
d10 1
a10 1
		--enable-color-style --disable-japanese-utf8 \
@


1.4
log
@fastmerge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.3 2005/10/21 22:06:55 tg Exp $
d33 1
a33 1
		lynx.lss mailcap mailto-form.pl mild-colors.lss mime.types
@


1.3
log
@add comment explaining why japanese-utf8-logic doesn't work yet :(
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.2 2005/06/22 11:15:43 tg Exp $
d11 1
a11 1
		--disable-full-paths --enable-warnings --enable-justify-elts \
d33 1
a33 1
		lynxdump mailcap mailto-form.pl mild-colors.lss mime.types
d35 1
a35 1
		TestComment.html c1.html iso8859-1.html iso88592.html \
@


1.2
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.bin/lynx/Makefile.bsd-wrapper,v 1.1 2005/03/27 22:42:31 tg Exp $
d7 1
d10 1
a10 1
		--enable-color-style --enable-default-colors \
@


1.1
log
@initial port of MirBSD Lynx
@
text
@d1 1
a1 1
# $MirOS$
d36 2
a37 2
		spaces.html special_urls.html tabtest.html unicode.html \
		utf-8-demo.html
@

