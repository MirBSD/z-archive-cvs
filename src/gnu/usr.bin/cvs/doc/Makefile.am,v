head	1.5;
access;
symbols
	MIRBSD_10:1.3.0.4
	MIRBSD_10_BASE:1.3
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-1_12_13:1.1.101.3
	cvs-1_12_12:1.1.101.2
	FSF:1.1.101;
locks; strict;
comment	@# @;


1.5
date	2017.01.09.22.54.22;	author tg;	state Exp;
branches;
next	1.4;
commitid	100587414A71F0EED1C;

1.4
date	2011.12.04.18.53.01;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004EDBC1997825129F;

1.3
date	2005.04.19.20.58.13;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.13.15.50.32;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.06.15.17.48;	author tg;	state Exp;
branches
	1.1.101.1;
next	;

1.1.101.1
date	2005.03.06.15.17.48;	author tg;	state Exp;
branches;
next	1.1.101.2;

1.1.101.2
date	2005.04.19.20.33.14;	author tg;	state Exp;
branches;
next	1.1.101.3;

1.1.101.3
date	2005.12.05.21.43.42;	author tg;	state Exp;
branches;
next	;
commitid	2cec4394b499b817;


desc
@@


1.5
log
@use PA4 papersize for all PDFs; make implicit PDF/1.4 for cvs-paper explicit
@
text
@## Process this file with automake to produce Makefile.in
# $MirOS: src/gnu/usr.bin/cvs/doc/Makefile.am,v 1.4 2011/12/04 18:53:01 tg Exp $
# Makefile for GNU CVS documentation (excluding man pages - see ../man).
#
# Copyright (C) 1986-2005 The Free Software Foundation, Inc.
#
# Portions Copyright (C) 1998-2005 Derek Price, Ximbiot <http://ximbiot.com>,
#                                  and others.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

AM_MAKEINFOFLAGS = --no-split

info_TEXINFOS = cvs.texinfo cvsclient.texi
man_MANS = cvs.1

PSS = \
	cvs.ps \
	cvs-paper.ps \
	cvsclient.ps

PDFS = \
	cvs.pdf \
	cvs-paper.pdf \
	cvsclient.pdf

TXTS = \
	cvs.txt \
	cvsclient.txt

EXTRA_DIST = \
	$(PSS) \
	HACKING.DOCS \
	RCSFILES \
	cvs.1 \
	cvs-paper.ms \
	cvs.man.header \
	cvs.man.footer \
	getdate.texi \
	mdate-sh \
	writeproxy.rtf

MOSTLYCLEANFILES = \
	$(TXTS)

DISTCLEANFILES = *.info* texinfo-* cvs.1

# These Automake generates MOSTLYCLEAN targets for PostScripts genersted from
# TEXINFOS, but it shouldn't when those files are in EXTRA_DIST
MAINTAINERCLEANFILES = \
	$(PSS)

doc: info ps
.PHONY: doc

txt: $(TXTS)
.PHONY: txt

dvi: cvs.dvi cvsclient.dvi
.PHONY: dvi

# FIXME-AUTOMAKE:
# For some reason if I remove version.texi, it doesn't get built automatically.
# This needs to be fixed in automake.
cvs.txt: cvs.texinfo $(srcdir)/version.texi
cvsclient.txt: cvsclient.texi $(srcdir)/version-client.texi

# These targets need to be very specific so that the other PDFs get generated
# correctly.  If they are more generic and cvs.ps is made before cvs.pdf, then
# cvs.pdf will be generated from the generic target and the PS source, which
# contains less information (hyperlinks and such) than the usual texinfo source.
cvs-paper.ps: cvs-paper.ms
	$(ROFF) -t -p -ms -Tps -P-p28c,21c $< > $@@-t
	mv $@@-t $@@

cvs-paper.pdf: cvs-paper.ps
	ps2pdf14 -sPAPERSIZE=pa4 $< $@@

# Targets to build a man page from cvs.texinfo.
cvs.1: @@MAINTAINER_MODE_TRUE@@ mkman cvs.man.header cvs.texinfo cvs.man.footer
	$(PERL) ./mkman $(srcdir)/cvs.man.header $(srcdir)/cvs.texinfo \
	        $(srcdir)/cvs.man.footer >$@@
MAINTAINERCLEANFILES += cvs.1

cvs.dvi cvs.html cvs.info cvs.pdf cvs.ps cvs.txt: getdate-cvs.texi
getdate-cvs.texi: stamp-gdt
stamp-gdt: $(srcdir)/getdate.texi $(top_srcdir)/configure
	@@echo "@@c This file is generated via a rule in Makefile.am from the" \
	  >getdate-cvs.tmp
	@@echo "@@c getdate.texi file." >>getdate-cvs.tmp
	@@echo "@@c" >>getdate-cvs.tmp
	@@echo "@@c *** DO NOT EDIT THIS FILE DIRECTLY ***" >>getdate-cvs.tmp
	@@echo "@@c" >>getdate-cvs.tmp
	@@echo "@@c Edit getdate.texi instead." >>getdate-cvs.tmp
	@@echo >>getdate-cvs.tmp
	sed -e "s/^@@chapter /@@appendixsec /" \
	    -e "s/^@@section /@@appendixsubsec /" \
	  <$(srcdir)/getdate.texi >>getdate-cvs.tmp
	@@cmp -s getdate-cvs.tmp getdate-cvs.texi \
	  || (echo "Updating getdate-cvs.texi"; \
	      cp getdate-cvs.tmp getdate-cvs.texi)
	-@@rm -f getdate-cvs.tmp
	@@echo -n >$@@
DISTCLEANFILES += getdate-cvs.texi stamp-gdt getdate-cvs.tmp

# texinfo based targets automake neglects to include
SUFFIXES = .txt
.texinfo.txt:
	$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) \
	 --no-headers -o $@@ `test -f '$<' || echo '$(srcdir)/'`$<
.txi.txt:
	$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) \
	 --no-headers -o $@@ `test -f '$<' || echo '$(srcdir)/'`$<
.texi.txt:
	$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) \
	 --no-headers -o $@@ `test -f '$<' || echo '$(srcdir)/'`$<

INSTALL_MAN=install-man
install-data-am: install-info-am $(INSTALL_MAN)

##
## MAINTAINER Targets
##

# for backwards compatibility with the old makefiles
realclean: maintainer-clean
.PHONY: realclean
@


1.4
log
@fix getdate.text processing (merge accident?)
@
text
@d2 1
a2 1
# $MirOS: src/gnu/usr.bin/cvs/doc/Makefile.am,v 1.3 2005/04/19 20:58:13 tg Exp $
d81 1
a81 1
	$(ROFF) -t -p -ms -Tps $< > $@@-t
d85 1
a85 1
	ps2pdf $< $@@
@


1.3
log
@initial fubar'ing of the CVS port
this won't even build right now...
@
text
@d2 1
a2 1
# $MirOS: src/gnu/usr.bin/cvs/doc/Makefile.am,v 1.2 2005/03/13 15:50:32 tg Exp $
d98 6
a103 6
	@@echo " * getdate.texi file." >>getdate-cvs.tmp
	@@echo " *" >>getdate-cvs.tmp
	@@echo " * *** DO NOT EDIT THIS FILE DIRECTLY ***" >>getdate-cvs.tmp
	@@echo " *" >>getdate-cvs.tmp
	@@echo " * Edit getdate.texi instead." >>getdate-cvs.tmp
	@@echo " */" >>getdate-cvs.tmp
@


1.2
log
@merge src/gnu except binutils, lynx and generated files
@
text
@d2 1
a2 1
# $MirOS$
d4 5
a8 3
# Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
#               1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003
#               Free Software Foundation, Inc.
d41 1
d48 2
a49 1
	mdate-sh
@


1.1
log
@Initial revision
@
text
@d2 1
d18 2
a38 2
	.cvsignore \
	ChangeLog.fsf \
d50 1
a50 1
DISTCLEANFILES =
d86 2
a87 2
	        $(srcdir)/cvs.man.footer >$(srcdir)/$@@
MAINTAINERCLEANFILES += $(srcdir)/cvs.1
d91 1
a91 1
stamp-gdt: getdate.texi $(top_srcdir)/configure
d107 1
a107 1
	@@cp getdate-cvs.texi $@@
d122 3
@


1.1.101.1
log
@GNU CVS 1.12.11 with the following directories removed:
- contrib/pam
- emx
- os2
- tools
- vms
- windows-NT
- zlib
@
text
@@


1.1.101.2
log
@GNU CVS 1.12.12 "should" fix security issues
@
text
@d3 3
a5 5
#
# Copyright (C) 1986-2005 The Free Software Foundation, Inc.
#
# Portions Copyright (C) 1998-2005 Derek Price, Ximbiot <http://ximbiot.com>,
#                                  and others.
a16 2
SUBDIRS = i18n

a37 1
	HACKING.DOCS \
d44 1
a44 2
	mdate-sh \
	writeproxy.rtf
d85 1
a85 3
		$(srcdir)/cvs.man.footer >cvs.tmp
	cp cvs.tmp $(srcdir)/$@@
	-@@rm -f cvs.tmp
d88 3
a90 3
cvs.dvi cvs.html $(srcdir)/cvs.info cvs.pdf cvs.ps cvs.txt: $(srcdir)/getdate-cvs.texi
$(srcdir)/getdate-cvs.texi: stamp-gdt
stamp-gdt: getdate.texi
d102 1
a102 1
	@@cmp -s getdate-cvs.tmp $(srcdir)/getdate-cvs.texi \
d104 1
a104 1
	      cp getdate-cvs.tmp $(srcdir)/getdate-cvs.texi)
d106 2
a107 7
	@@cp $(srcdir)/getdate-cvs.texi $@@

## If getdate-cvs.texi is not distributed, infos get rebuilt at every install.
## This is a pretty big no-no.
EXTRA_DIST += getdate-cvs.texi
MOSTLYCLEANFILES += getdate-cvs.tmp
DISTCLEANFILES += stamp-gdt
@


1.1.101.3
log
@Import current version of GNU CVS, in the hope to actually fix bugs...
@
text
@d22 1
a22 1
man_MANS = $(srcdir)/cvs.1
d31 1
a31 1
	$(srcdir)/cvs-paper.pdf \
d39 1
d44 1
a44 1
	$(srcdir)/cvs.1 \
d50 1
a50 4
	writeproxy.rtf \
	$(PDFS)

MOSTLYCLEANFILES =
d52 1
a52 2
CLEANFILES = \
	$(PSS) \
d57 2
d60 1
a60 1
	$(PDFS)
d62 1
a62 1
doc: info pdf
d77 4
a80 8
# The cvs-paper.pdf target needs to be very specific so that the other PDFs get
# generated correctly.  If a more generic .ps.pdf implicit target is defined,
# and cvs.ps is made before cvs.pdf, then cvs.pdf can be generated from the
# .ps.pdf target and the PS source, which contains less information (hyperlinks
# and such) than the usual texinfo source.
#
# It is possible that an implicit .ms.ps target could be safely defined.  I
# don't recall looking into it.
d82 2
a83 12
	$(ROFF) -t -p -ms -Tps $(srcdir)/cvs-paper.ms >cvs-paper.ps-t
	cp cvs-paper.ps-t $@@
	-@@rm -f cvs-paper.ps-t

# This rule introduces some redundancy, but `make distcheck' requires that
# Nothing in $(srcdir) be rebuilt, and this will always be rebuilt when it
# is dependant on cvs-paper.ps and cvs-paper.ps isn't distributed.
$(srcdir)/cvs-paper.pdf: cvs-paper.ms
	$(ROFF) -t -p -ms -Tps $(srcdir)/cvs-paper.ms >cvs-paper.ps-t
	ps2pdf cvs-paper.ps-t cvs-paper.pdf-t
	cp cvs-paper.pdf-t $@@
	-@@rm -f cvs-paper.pdf-t cvs-paper.ps-t
d85 2
a86 1
MOSTLYCLEANFILES += cvs-paper.pdf-t cvs-paper.ps-t
d89 1
a89 1
$(srcdir)/cvs.1: @@MAINTAINER_MODE_TRUE@@ mkman cvs.man.header cvs.texinfo cvs.man.footer
d92 1
a92 1
	cp cvs.tmp $(srcdir)/cvs.1
d101 6
a106 6
	@@echo "@@c getdate.texi file." >>getdate-cvs.tmp
	@@echo "@@c" >>getdate-cvs.tmp
	@@echo "@@c *** DO NOT EDIT THIS FILE DIRECTLY ***" >>getdate-cvs.tmp
	@@echo "@@c" >>getdate-cvs.tmp
	@@echo "@@c Edit getdate.texi instead." >>getdate-cvs.tmp
	@@echo >>getdate-cvs.tmp
@


