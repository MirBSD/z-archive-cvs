head	1.3;
access;
symbols
	MIRBSD_10:1.2.0.2
	MIRBSD_10_BASE:1.2
	MIRBSD_9_BASE:1.1.7.1
	MIRBSD_8:1.1.7.1.0.2
	MIRBSD_8_BASE:1.1.7.1
	mirbsd:1.1.7;
locks; strict;
comment	@ * @;


1.3
date	2008.08.07.19.43.08;	author tg;	state dead;
branches;
next	1.2;
commitid	100489B50512C3BDDCB;

1.2
date	2007.08.09.10.39.30;	author tg;	state Exp;
branches;
next	1.1;
commitid	10046BAEEE6513FF26F;

1.1
date	2005.03.06.16.46.49;	author tg;	state Exp;
branches
	1.1.7.1;
next	;

1.1.7.1
date	2005.03.06.16.46.49;	author tg;	state Exp;
branches;
next	;


desc
@@


1.3
log
@die schily die
@
text
@/* @@(#)exclude.c	1.8 00/12/05 joerg */
#include <sys/cdefs.h>
__SCCSID("@@(#)exclude.c	1.8 00/12/05 joerg");
__RCSID("$MirOS: src/gnu/usr.bin/mkisofs/exclude.c,v 1.2 2007/08/09 10:39:30 tg Exp $");
/*
 * 9-Dec-93 R.-D. Marzusch, marzusch@@odiehh.hanse.de:
 * added 'exclude' option (-x) to specify pathnames NOT to be included in
 * CD image.
 */

#include <mconfig.h>
#include <stdio.h>
#include <stdxlib.h>
#include <strdefs.h>
#include <standard.h>
#include <schily.h>


/* this allows for 1000 entries to be excluded ... */
#define MAXEXCL		1000

static char		*excl[MAXEXCL];

void	exclude		__PR((char *fn));
int	is_excluded	__PR((char *fn));


void
exclude(fn)
	char		*fn;
{
	register int	i;

	for (i = 0; excl[i] && i < MAXEXCL; i++)
		;

	if (i == MAXEXCL) {
		fprintf(stderr,
			"Can't exclude '%s' - too many entries in table\n",
								fn);
		return;
	}
	excl[i] = (char *) malloc(strlen(fn) + 1);
	if (excl[i] == NULL) {
#ifdef	USE_LIBSCHILY
		errmsg("Can't allocate memory for excluded filename\n");
#else
		fprintf(stderr,
			"Can't allocate memory for excluded filename\n");
#endif
		return;
	}
	strcpy(excl[i], fn);
}

int
is_excluded(fn)
	char		*fn;
{
	register int	i;

	/*
	 * very dumb search method ...
	 */
	for (i = 0; excl[i] && i < MAXEXCL; i++) {
		if (strcmp(excl[i], fn) == 0) {
			return 1;	/* found -> excluded filenmae */
		}
	}
	return 0;	/* not found -> not excluded */
}
@


1.2
log
@cleanup for SCCS IDs, add MirOS RCS ID to every file, handle $Id$, UTF-8,
extermination missing to Schily still valid, want makefs, nuke unused etc.
@
text
@d4 1
a4 1
__RCSID("$MirOS$");
@


1.1
log
@Initial revision
@
text
@d2 3
a4 4
#ifndef lint
static	char sccsid[] =
	"@@(#)exclude.c	1.8 00/12/05 joerg";
#endif
@


1.1.7.1
log
@Add another couple of software they didn't have
@
text
@@
