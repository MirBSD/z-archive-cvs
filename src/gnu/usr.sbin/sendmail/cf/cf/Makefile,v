head	1.13;
access;
symbols
	sendmail-8_14_9:1.1.127.2
	sendmail-8_14_7:1.1.127.1
	sendmail-8_14_6:1.1.127.1
	sendmail-8_14_5-ERRATA-1:1.1.127.1
	mbsd-20101220_mergebase:1.9.2.1
	sendmail-8_14_5:1.1.127.1
	cvs-201107021500:1.1.1.4
	cvs-20101220:1.1.1.4
	mbsd-20101220:1.9.0.2
	cvs-201012191730:1.1.1.3
	sendmail-8_14_5_Beta0:1.1.127.1
	sendmail-8_14_3:1.1.127.1
	sendmail:1.1.127
	cvs-200812170000:1.1.1.3
	cvs-200805071200:1.1.1.2
	MIRBSD_10:1.7.0.2
	MIRBSD_10_BASE:1.7
	cvs-200803022030:1.1.1.2
	cvs-200707152000:1.1.1.2
	cvs-200704292000:1.1.1.2
	cvs-200702051700:1.1.1.2
	cvs-200609121900:1.1.1.2
	MIRBSD_9_BASE:1.4
	cvs-200606151800:1.1.1.2
	cvs-200603231300:1.1.1.2
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.1
	cvs-200504262050:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2014.06.09.15.16.34;	author tg;	state Exp;
branches;
next	1.12;
commitid	1005395CFC65E5646F1;

1.12
date	2011.07.02.18.53.06;	author tg;	state Exp;
branches;
next	1.11;
commitid	1004E0F691F4FCE39B3;

1.11
date	2011.07.02.15.36.21;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004E0F3B0D346F8501;

1.10
date	2011.07.02.15.03.05;	author tg;	state Exp;
branches;
next	1.9;
commitid	1004E0F31C5496AB95F;

1.9
date	2010.12.19.17.17.55;	author tg;	state Exp;
branches
	1.9.2.1;
next	1.8;
commitid	1004D0E3E2D1286B3DF;

1.8
date	2008.12.17.00.42.55;	author tg;	state Exp;
branches;
next	1.7;
commitid	10049484B253D8462E0;

1.7
date	2006.10.28.21.22.27;	author tg;	state Exp;
branches;
next	1.6;
commitid	1004543C9F756CB60CD;

1.6
date	2006.10.28.20.07.01;	author tg;	state Exp;
branches;
next	1.5;
commitid	1004543B87877130AFB;

1.5
date	2006.08.09.21.36.08;	author tg;	state Exp;
branches;
next	1.4;
commitid	10044DA55545B7B05CB;

1.4
date	2006.03.23.13.20.21;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004422A0AB5336630E;

1.3
date	2005.05.05.00.41.03;	author tg;	state Exp;
branches;
next	1.2;
commitid	293f42796b7ecc91;

1.2
date	2005.03.13.15.11.42;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.24.18;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.127.1;
next	;

1.9.2.1
date	2011.07.02.15.01.19;	author tg;	state Exp;
branches;
next	;
commitid	1004E0F31C5496AB95F;

1.1.1.1
date	2005.02.05.17.24.18;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2006.03.23.13.08.48;	author tg;	state Exp;
branches;
next	1.1.1.3;
commitid	10044229DEA33D36552;

1.1.1.3
date	2008.12.17.00.31.12;	author tg;	state Exp;
branches;
next	1.1.1.4;
commitid	1004948485811951994;

1.1.1.4
date	2011.07.02.14.58.41;	author tg;	state Exp;
branches;
next	;
commitid	1004E0F31C5496AB95F;

1.1.127.1
date	2010.12.19.14.45.50;	author tg;	state Exp;
branches;
next	1.1.127.2;
commitid	1004D0E1A94384778FD;

1.1.127.2
date	2014.06.09.14.29.22;	author tg;	state Exp;
branches;
next	;
commitid	1005395C4CC1A6DB9EE;


desc
@@


1.13
log
@merge
@
text
@# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.12 2011/07/02 18:53:06 tg Exp $
# $OpenBSD: Makefile,v 1.24 2008/10/03 16:29:05 millert Exp $
#
#  Makefile for configuration files.
#
#	$Id: Makefile,v 8.60 2005-06-14 02:16:34 gshapiro Exp $
#

#
#  Create configuration files using "m4 ../m4/cf.m4 file.mc > file.cf";
#  this may be easier than tweaking the Makefile.  You do need to
#  have a fairly modern M4 available (GNU m4 works).  On SunOS, use
#  /usr/5bin/m4.
#
# Create configuration files using "m4 ../m4/cf.m4 file.mc >file.cf";
# this may be easier than tweaking the Makefile.

M4=	/usr/bin/m4
CFDIR=	${.CURDIR}/..
SED=	sed
ECHO=	echo
CHMOD=	chmod
ROMODE=	444
RM=	rm -f

.SUFFIXES:  .mc .cf

.mc.cf:
	$(RM) $@@
	( cd ${.CURDIR} && $(M4) ${CFDIR}/m4/cf.m4 ${@@:R}.mc > ${.OBJDIR}/$@@ )
	$(ECHO) "### $*.mc ###" >>$@@
	$(SED) -e 's/^/# /' ${.CURDIR}/$*.mc >>$@@
	$(CHMOD) $(ROMODE) $@@

ALL=	openbsd-localhost.cf openbsd-proto.cf openbsd-submit.cf

FILES=	access aliases genericstable local-host-names mailertable \
	relay-domains service.switch trusted-users virtusertable

all: $(ALL)

cleandir: clean

clean:
	$(RM) $(ALL) *.core

depend:

install:
	@@if test -e ${DESTDIR}/etc/mail/sendmail.cf; then \
		if test ! -e ${DESTDIR}/etc/mail/submit.cf; then \
			echo "WARNING: installed missing ${DESTDIR}/etc/mail/submit.cf"; \
			echo "You should probably rebuild ${DESTDIR}/etc/mail/sendmail.cf"; \
			${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
			    openbsd-submit.cf ${DESTDIR}/etc/mail/submit.cf; \
		fi; \
		if test ! -e ${DESTDIR}/etc/mail/localhost.cf; then \
			echo "WARNING: installed missing ${DESTDIR}/etc/mail/localhost.cf"; \
			${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
			    openbsd-localhost.cf ${DESTDIR}/etc/mail/localhost.cf; \
		fi; \
	fi

distribution: openbsd-proto.cf openbsd-localhost.cf openbsd-submit.cf \
    dist-install regen-databases

dist-install:
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
	    openbsd-proto.cf ${DESTDIR}/etc/mail/sendmail.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
	    openbsd-localhost.cf ${DESTDIR}/etc/mail/localhost.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
	    openbsd-submit.cf ${DESTDIR}/etc/mail/submit.cf
	cd ${.CURDIR} && ${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 640 \
	    ${FILES} ${DESTDIR}/etc/mail/

regen-databases:
	@@for dbsource in access aliases genericstable mailertable \
	    virtusertable userdb; do \
		db="${DESTDIR}/etc/mail/$$dbsource"; \
		case $$dbsource in \
		aliases) \
			cmd="sendmail -C${DESTDIR}/etc/mail/sendmail.cf \
			    -bi -O AliasFile=$$db \
			    -O DontBlameSendmail=mapinunsafedirpath" ;; \
		userdb) \
			cmd="makemap btree $${db}.db <$$db" ;; \
		*) \
			cmd="makemap hash $${db}.db <$$db" ;; \
		esac; \
		if test -e $$db; then \
			chown ${BINOWN}:${CONFGRP} $$db; \
			chmod 640 $$db; \
			rm -f $${db}.db; \
			echo $$cmd; \
			eval $$cmd; \
			chown ${BINOWN}:${CONFGRP} $${db}.db; \
			chmod 640 $${db}.db; \
		else \
			true; \
		fi; \
	done

# this is overkill, but....
M4FILES=\
	${CFDIR}/domain/Berkeley.EDU.m4 \
	${CFDIR}/domain/CS.Berkeley.EDU.m4 \
	${CFDIR}/domain/EECS.Berkeley.EDU.m4 \
	${CFDIR}/domain/S2K.Berkeley.EDU.m4 \
	${CFDIR}/domain/berkeley-only.m4 \
	${CFDIR}/domain/generic.m4 \
	${CFDIR}/feature/accept_unqualified_senders.m4 \
	${CFDIR}/feature/accept_unresolvable_domains.m4 \
	${CFDIR}/feature/access_db.m4 \
	${CFDIR}/feature/allmasquerade.m4 \
	${CFDIR}/feature/always_add_domain.m4 \
	${CFDIR}/feature/authinfo.m4 \
	${CFDIR}/feature/badmx.m4 \
	${CFDIR}/feature/bestmx_is_local.m4 \
	${CFDIR}/feature/bitdomain.m4 \
	${CFDIR}/feature/blacklist_recipients.m4 \
	${CFDIR}/feature/block_bad_helo.m4 \
	${CFDIR}/feature/compat_check.m4 \
	${CFDIR}/feature/conncontrol.m4 \
	${CFDIR}/feature/delay_checks.m4 \
	${CFDIR}/feature/dnsbl.m4 \
	${CFDIR}/feature/domaintable.m4 \
	${CFDIR}/feature/enhdnsbl.m4 \
	${CFDIR}/feature/generics_entire_domain.m4 \
	${CFDIR}/feature/genericstable.m4 \
	${CFDIR}/feature/greet_pause.m4 \
	${CFDIR}/feature/ldap_routing.m4 \
	${CFDIR}/feature/limited_masquerade.m4 \
	${CFDIR}/feature/local_lmtp.m4 \
	${CFDIR}/feature/local_no_masquerade.m4 \
	${CFDIR}/feature/local_procmail.m4 \
	${CFDIR}/feature/lookupdotdomain.m4 \
	${CFDIR}/feature/loose_relay_check.m4 \
	${CFDIR}/feature/mailertable.m4 \
	${CFDIR}/feature/masquerade_entire_domain.m4 \
	${CFDIR}/feature/masquerade_envelope.m4 \
	${CFDIR}/feature/msp.m4 \
	${CFDIR}/feature/mtamark.m4 \
	${CFDIR}/feature/no_default_msa.m4 \
	${CFDIR}/feature/nocanonify.m4 \
	${CFDIR}/feature/notsticky.m4 \
	${CFDIR}/feature/nouucp.m4 \
	${CFDIR}/feature/nullclient.m4 \
	${CFDIR}/feature/preserve_local_plus_detail.m4 \
	${CFDIR}/feature/preserve_luser_host.m4 \
	${CFDIR}/feature/promiscuous_relay.m4 \
	${CFDIR}/feature/queuegroup.m4 \
	${CFDIR}/feature/ratecontrol.m4 \
	${CFDIR}/feature/redirect.m4 \
	${CFDIR}/feature/relay_based_on_MX.m4 \
	${CFDIR}/feature/relay_entire_domain.m4 \
	${CFDIR}/feature/relay_hosts_only.m4 \
	${CFDIR}/feature/relay_local_from.m4 \
	${CFDIR}/feature/relay_mail_from.m4 \
	${CFDIR}/feature/require_rdns.m4 \
	${CFDIR}/feature/smrsh.m4 \
	${CFDIR}/feature/stickyhost.m4 \
	${CFDIR}/feature/use_client_ptr.m4 \
	${CFDIR}/feature/use_ct_file.m4 \
	${CFDIR}/feature/use_cw_file.m4 \
	${CFDIR}/feature/uucpdomain.m4 \
	${CFDIR}/feature/virtuser_entire_domain.m4 \
	${CFDIR}/feature/virtusertable.m4 \
	${CFDIR}/hack/cssubdomain.m4 \
	${CFDIR}/m4/cf.m4 \
	${CFDIR}/m4/cfhead.m4 \
	${CFDIR}/m4/proto.m4 \
	${CFDIR}/m4/version.m4 \
	${CFDIR}/mailer/cyrus.m4 \
	${CFDIR}/mailer/cyrusv2.m4 \
	${CFDIR}/mailer/fax.m4 \
	${CFDIR}/mailer/local.m4 \
	${CFDIR}/mailer/mail11.m4 \
	${CFDIR}/mailer/phquery.m4 \
	${CFDIR}/mailer/pop.m4 \
	${CFDIR}/mailer/procmail.m4 \
	${CFDIR}/mailer/qpage.m4 \
	${CFDIR}/mailer/smtp.m4 \
	${CFDIR}/mailer/usenet.m4 \
	${CFDIR}/mailer/uucp.m4 \
	${CFDIR}/ostype/a-ux.m4 \
	${CFDIR}/ostype/aix3.m4 \
	${CFDIR}/ostype/aix4.m4 \
	${CFDIR}/ostype/aix5.m4 \
	${CFDIR}/ostype/altos.m4 \
	${CFDIR}/ostype/amdahl-uts.m4 \
	${CFDIR}/ostype/bsd4.3.m4 \
	${CFDIR}/ostype/bsd4.4.m4 \
	${CFDIR}/ostype/bsdi.m4 \
	${CFDIR}/ostype/bsdi1.0.m4 \
	${CFDIR}/ostype/bsdi2.0.m4 \
	${CFDIR}/ostype/darwin.m4 \
	${CFDIR}/ostype/dgux.m4 \
	${CFDIR}/ostype/domainos.m4 \
	${CFDIR}/ostype/dragonfly.m4 \
	${CFDIR}/ostype/dynix3.2.m4 \
	${CFDIR}/ostype/freebsd4.m4 \
	${CFDIR}/ostype/freebsd5.m4 \
	${CFDIR}/ostype/freebsd6.m4 \
	${CFDIR}/ostype/gnu.m4 \
	${CFDIR}/ostype/hpux10.m4 \
	${CFDIR}/ostype/hpux11.m4 \
	${CFDIR}/ostype/hpux9.m4 \
	${CFDIR}/ostype/irix4.m4 \
	${CFDIR}/ostype/irix5.m4 \
	${CFDIR}/ostype/irix6.m4 \
	${CFDIR}/ostype/isc4.1.m4 \
	${CFDIR}/ostype/linux.m4 \
	${CFDIR}/ostype/maxion.m4 \
	${CFDIR}/ostype/mklinux.m4 \
	${CFDIR}/ostype/mpeix.m4 \
	${CFDIR}/ostype/nextstep.m4 \
	${CFDIR}/ostype/openbsd.m4 \
	${CFDIR}/ostype/osf1.m4 \
	${CFDIR}/ostype/powerux.m4 \
	${CFDIR}/ostype/ptx2.m4 \
	${CFDIR}/ostype/qnx.m4 \
	${CFDIR}/ostype/riscos4.5.m4 \
	${CFDIR}/ostype/sco-uw-2.1.m4 \
	${CFDIR}/ostype/sco3.2.m4 \
	${CFDIR}/ostype/sinix.m4 \
	${CFDIR}/ostype/solaris11.m4 \
	${CFDIR}/ostype/solaris2.m4 \
	${CFDIR}/ostype/solaris2.ml.m4 \
	${CFDIR}/ostype/solaris2.pre5.m4 \
	${CFDIR}/ostype/solaris8.m4 \
	${CFDIR}/ostype/sunos3.5.m4 \
	${CFDIR}/ostype/sunos4.1.m4 \
	${CFDIR}/ostype/svr4.m4 \
	${CFDIR}/ostype/ultrix4.m4 \
	${CFDIR}/ostype/unicos.m4 \
	${CFDIR}/ostype/unicosmk.m4 \
	${CFDIR}/ostype/unicosmp.m4 \
	${CFDIR}/ostype/unixware7.m4 \
	${CFDIR}/ostype/unknown.m4 \
	${CFDIR}/ostype/uxpds.m4 \

$(ALL): $(M4FILES)

openbsd-localhost.cf: openbsd-localhost.mc openbsd-proto.mc
openbsd-proto.cf: openbsd-proto.mc
openbsd-submit.cf: openbsd-submit.mc

.PHONY: regen-databases

.include <bsd.prog.mk>
@


1.12
log
@take care of merging cf-related changes and work on them a bit more
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.11 2011/07/02 15:36:21 tg Exp $
d6 1
a6 1
#	$Id: Makefile,v 8.60 2005/06/14 02:16:34 gshapiro Exp $
@


1.11
log
@regen M4FILES
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.10 2011/07/02 15:03:05 tg Exp $
d245 4
@


1.10
log
@Replace “$Sendmail: ” with “$Id: ” (the latter is used by upstream)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.9 2010/12/19 17:17:55 tg Exp $
d118 1
d122 2
a124 1
	${CFDIR}/feature/compat_check.m4 \
d131 1
a132 1
	${CFDIR}/feature/msp.m4 \
d142 2
d160 1
d163 1
d175 1
d186 1
a191 1
	${CFDIR}/ostype/a-ux.m4 \
d227 1
d236 3
d241 1
a241 1
	${CFDIR}/ostype/uxpds.m4
@


1.9
log
@merge newer sendmail; fix and correct; reduce upstream diffs; prep for deb
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.8 2008/12/17 00:42:55 tg Exp $
d6 1
a6 1
#	$Sendmail: Makefile,v 8.60 2005/06/14 02:16:34 gshapiro Exp $
@


1.9.2.1
log
@Replace “$Sendmail: ” with “$Id: ” (the latter is used by upstream)
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.9 2010/12/19 17:17:55 tg Exp $
d6 1
a6 1
#	$Id: Makefile,v 8.60 2005/06/14 02:16:34 gshapiro Exp $
@


1.8
log
@merge
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.7 2006/10/28 21:22:27 tg Exp $
d35 1
a35 2
ALL=	openbsd-submit.cf clientproto.cf tcpproto.cf openbsd-localhost.cf \
	openbsd-proto.cf
@


1.7
log
@according to
.Pa src/gnu/usr.sbin/sendmail/README
.Sx FILE AND MAP PERMISSIONS ,
the files and especially databases in /etc/mail/ ought to be
chmod 0640 chown root:trusted-users (i.e. wheel)
@
text
@d1 2
a2 2
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.6 2006/10/28 20:07:01 tg Exp $
# $OpenBSD: Makefile,v 1.22 2006/03/22 18:43:53 millert Exp $
d35 2
a36 3
ALL=	submit.cf clientproto.cf tcpproto.cf openbsd-localhost.cf \
	openbsd-proto.cf courtesan.cf courtesan-nonet.cf openbsd-lists.cf \
	openbsd-bulk.cf knecht.cf
d43 3
a45 1
clean cleandir:
d56 1
a56 1
			    submit.cf ${DESTDIR}/etc/mail/submit.cf; \
d65 1
a65 1
distribution: openbsd-proto.cf openbsd-localhost.cf submit.cf \
d74 1
a74 1
	    submit.cf ${DESTDIR}/etc/mail/submit.cf
@


1.6
log
@permissions
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.5 2006/08/09 21:36:08 tg Exp $
d74 1
a74 1
	cd ${.CURDIR} && ${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
d93 1
a93 1
			chmod 644 $$db; \
d98 1
a98 1
			chmod 644 $${db}.db; \
@


1.5
log
@make regen-databases phony
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.4 2006/03/23 13:20:21 tg Exp $
d92 3
d97 2
@


1.4
log
@fastmerge Sendmail 8.13.6
@
text
@d1 1
a1 1
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.3 2005/05/05 00:41:03 tg Exp $
d229 2
@


1.3
log
@some victims (advertising clauses) bite the dust
@
text
@d1 2
a2 2
# $MirOS: src/gnu/usr.sbin/sendmail/cf/cf/Makefile,v 1.2 2005/03/13 15:11:42 tg Exp $
# $OpenBSD: Makefile,v 1.21 2004/12/16 00:21:29 millert Exp $
d6 1
a6 1
#	$Sendmail: Makefile,v 8.59 2004/08/06 03:54:05 gshapiro Exp $
d192 1
@


1.2
log
@merge sendmail diff against OpenBSD's idea of sendmail port
@
text
@d1 1
a1 1
# $MirOS$
d37 1
a37 1
	openbsd-bulk.cf lucifier.cf corpse.cf knecht.cf
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.21 2004/12/16 00:21:29 millert Exp $
d15 2
d39 3
d64 34
a97 7
distribution: openbsd-proto.cf openbsd-localhost.cf submit.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 openbsd-proto.cf \
	    ${DESTDIR}/etc/mail/sendmail.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 openbsd-localhost.cf \
	    ${DESTDIR}/etc/mail/localhost.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 submit.cf \
	    ${DESTDIR}/etc/mail/submit.cf
@


1.1.127.1
log
@Import Sendmail 8.14.3, suitably stripped down by the not yet committed
contrib/samples/import-3rdpty,v 1.35; we have some new and renamed files
@
text
@d1 1
d5 1
a5 1
#	$Id: Makefile,v 8.60 2005/06/14 02:16:34 gshapiro Exp $
d15 4
a18 10
# name of source for sendmail.cf (without extension)
CF=	sendmail
# name of source for submit.cf (without extension)
SUBMIT=	submit
# directory for .cf files
MAILDIR=/etc/mail
M4=	m4
CFDIR=	..
SED=  sed
ECHO= echo
a21 7
# use our own install program; should be really confINSTALL
INSTALL=../../devtools/bin/install.sh
# CF file ownership/permissions
CFOWN=root
CFGRP=bin
CFMODE=0444

d27 1
a27 1
	$(M4) ${CFDIR}/m4/cf.m4 $*.mc > $@@ || ( $(RM) $@@ && exit 1 )
d29 1
a29 1
	$(SED) -e 's/^/# /' $*.mc >>$@@
d32 3
a34 11
GENERIC=generic-bsd4.4.cf generic-hpux9.cf generic-hpux10.cf \
		generic-linux.cf generic-mpeix.cf generic-nextstep3.3.cf \
		generic-osf1.cf generic-solaris.cf \
		generic-sunos4.1.cf generic-ultrix4.cf
BERKELEY=cs-hpux9.cf cs-hpux10.cf cs-osf1.cf cs-solaris.cf \
	cs-sunos4.1.cf cs-ultrix4.cf \
	s2k-osf1.cf s2k-ultrix4.cf \
	chez.cs.cf huginn.cs.cf mail.cs.cf mail.eecs.cf mailspool.cs.cf \
	python.cs.cf ucbarpa.cf ucbvax.cf vangogh.cs.cf
OTHER=	knecht.cf
ALL=	submit.cf $(GENERIC) $(OTHER)
d38 2
a39 3
berkeley: $(BERKELEY)
generic: $(GENERIC)
other: $(OTHER)
d41 1
a41 2
clean cleandir:
	$(RM) $(ALL) core
d44 21
a64 23
	@@echo "Before installing the .cf files please make sure you have read the"
	@@echo "instructions in the file ../../INSTALL.  You should have prepared the"
	@@echo "files \"submit.mc\" (supplied) and \"sendmail.mc\". Then you can use"
	@@echo ""
	@@echo "	make install-cf"
	@@echo ""
	@@echo "If you use a different name than \"sendmail\" for your main .mc file"

	@@echo "then you should use"
	@@echo ""
	@@echo "	make install-cf CF=config"
	@@echo ""
	@@echo "where \"config\" is the name of your main .mc file."

install-cf:  install-sendmail-cf install-submit-cf

install-sendmail-cf: $(CF).cf
	$(INSTALL) -c -o $(CFOWN) -g $(CFGRP) -m $(CFMODE) $(CF).cf ${DESTDIR}$(MAILDIR)/sendmail.cf

install-submit-cf: $(SUBMIT).cf
	$(INSTALL) -c -o $(CFOWN) -g $(CFGRP) -m $(CFMODE) $(SUBMIT).cf ${DESTDIR}$(MAILDIR)/submit.cf

depend:
d79 1
d84 2
d88 1
d92 1
d95 1
d97 1
d107 2
d110 2
a112 1
	${CFDIR}/feature/ratecontrol.m4 \
d143 1
d152 1
a158 1
	${CFDIR}/ostype/freebsd6.m4 \
d194 2
a195 3
$(BERKELEY): $(M4FILES)
$(GENERIC): $(M4FILES)
$(OTHER): $(M4FILES)
@


1.1.127.2
log
@Import sendmail 8.14.9
@
text
@d4 1
a4 1
#	$Id: Makefile,v 8.60 2005-06-14 02:16:34 gshapiro Exp $
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Update to Sendmail 8.13.6
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2006/03/22 18:43:53 millert Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.60 2005/06/14 02:16:34 gshapiro Exp $
a158 1
	${CFDIR}/ostype/freebsd6.m4 \
@


1.1.1.3
log
@OpenBSD-current sendmail (while it lasts)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 2008/10/03 16:29:05 millert Exp $
d32 1
a32 1
ALL=	openbsd-submit.cf clientproto.cf tcpproto.cf openbsd-localhost.cf \
d38 1
a38 3
cleandir: clean

clean:
d58 1
a58 1
distribution: openbsd-proto.cf openbsd-localhost.cf openbsd-submit.cf
d63 1
a63 1
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 openbsd-submit.cf \
@


1.1.1.4
log
@Replace “$Sendmail: ” with “$Id: ” (the latter is used by upstream)
@
text
@d5 1
a5 1
#	$Id: Makefile,v 8.60 2005/06/14 02:16:34 gshapiro Exp $
@


