head	1.4;
access;
symbols
	sendmail-8_14_9:1.1.127.2
	sendmail-8_14_7:1.1.127.1
	sendmail-8_14_6:1.1.127.1
	sendmail-8_14_5-ERRATA-1:1.1.127.1
	mbsd-20101220_mergebase:1.2.2.1
	sendmail-8_14_5:1.1.127.1
	cvs-201107021500:1.1.1.2
	cvs-20101220:1.1.1.2
	mbsd-20101220:1.2.0.2
	cvs-201012191730:1.1.1.1
	sendmail-8_14_5_Beta0:1.1.127.1
	sendmail-8_14_3:1.1.127.1
	sendmail:1.1.127
	cvs-200812170000:1.1.1.1
	cvs-200805071200:1.1.1.1
	MIRBSD_10:1.1.1.1.0.4
	MIRBSD_10_BASE:1.1.1.1
	cvs-200803022030:1.1.1.1
	cvs-200707152000:1.1.1.1
	cvs-200704292000:1.1.1.1
	cvs-200702051700:1.1.1.1
	cvs-200609121900:1.1.1.1
	MIRBSD_9_BASE:1.1.1.1
	cvs-200606151800:1.1.1.1
	cvs-200603231300:1.1.1.1
	MIRBSD_8:1.1.1.1.0.2
	MIRBSD_8_BASE:1.1.1.1
	cvs-200507211800:1.1.1.1
	cvs-200504262050:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@ * @;


1.4
date	2014.06.09.15.17.09;	author tg;	state Exp;
branches;
next	1.3;
commitid	1005395CFC65E5646F1;

1.3
date	2011.07.02.15.03.37;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004E0F31C5496AB95F;

1.2
date	2009.11.18.08.44.25;	author tg;	state Exp;
branches
	1.2.2.1;
next	1.1;
commitid	1004B03B3F30D4FD371;

1.1
date	2005.02.05.17.24.22;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.127.1;
next	;

1.2.2.1
date	2011.07.02.15.02.03;	author tg;	state Exp;
branches;
next	;
commitid	1004E0F31C5496AB95F;

1.1.1.1
date	2005.02.05.17.24.22;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2011.07.02.14.59.39;	author tg;	state Exp;
branches;
next	;
commitid	1004E0F31C5496AB95F;

1.1.127.1
date	2010.12.19.14.45.48;	author tg;	state Exp;
branches;
next	1.1.127.2;
commitid	1004D0E1A94384778FD;

1.1.127.2
date	2014.06.09.14.29.20;	author tg;	state Exp;
branches;
next	;
commitid	1005395C4CC1A6DB9EE;


desc
@@


1.4
log
@merge
@
text
@/* $MirOS: src/gnu/usr.sbin/sendmail/include/sm/string.h,v 1.3 2011/07/02 15:03:37 tg Exp $ */
/*
 * Copyright (c) 2000-2001, 2003 Proofpoint, Inc. and its suppliers.
 *	All rights reserved.
 *
 * By using this file, you agree to the terms and conditions set
 * forth in the LICENSE file which can be found at the top level of
 * the sendmail distribution.
 *
 *	$Id: string.h,v 1.39 2013-11-22 20:51:31 ca Exp $
 */

/*
**  libsm string manipulation
*/

#ifndef SM_STRING_H
# define SM_STRING_H

# include <sm/gen.h>
# include <sm/varargs.h>
# include <string.h> /* strlc{py,at}, strerror */

/* return number of bytes left in a buffer */
#define SPACELEFT(buf, ptr)	(sizeof buf - ((ptr) - buf))

extern int PRINTFLIKE(3, 4) BOUNDED(string, 1, 2) NONNULL(3)
sm_snprintf __P((char *, size_t, const char *, ...));

extern bool NONNULL(1, 2)
sm_match __P((const char *_str, const char *_pattern));

extern char *
sm_strdup __P((char *));

extern char *
sm_strndup_x __P((const char *_str, size_t _len));

#if DO_NOT_USE_STRCPY
/* for "normal" data (free'd before end of process) */
extern char *
sm_strdup_x __P((const char *_str));

/* for data that is supposed to be persistent. */
extern char *
sm_pstrdup_x __P((const char *_str));

extern char *
sm_strdup_tagged_x __P((const char *str, char *file, int line, int group));

#else /* DO_NOT_USE_STRCPY */

/* for "normal" data (free'd before end of process) */
# define sm_strdup_x(str) strcpy(sm_malloc_x(strlen(str) + 1), str)

/* for data that is supposed to be persistent. */
# define sm_pstrdup_x(str) strcpy(sm_pmalloc_x(strlen(str) + 1), str)

# define sm_strdup_tagged_x(str, file, line, group) \
	strcpy(sm_malloc_tagged_x(strlen(str) + 1, file, line, group), str)
#endif /* DO_NOT_USE_STRCPY */

extern char * PRINTFLIKE(1, 2)
sm_stringf_x __P((const char *_fmt, ...));

extern char * PRINTFLIKE(1, 0)
sm_vstringf_x __P((const char *_fmt, va_list _ap));

extern size_t BOUNDED(string, 1, 3)
sm_strlcpy __P((char *_dst, const char *_src, ssize_t _len));

extern size_t BOUNDED(string, 1, 3)
sm_strlcat __P((char *_dst, const char *_src, ssize_t _len));

extern size_t BOUNDED(string, 1, 4)
sm_strlcat2 __P((char *, const char *, const char *, ssize_t));

extern size_t
#ifdef __STDC__
BOUNDED(string, 1, 2)
sm_strlcpyn(char *dst, ssize_t len, int n, ...);
#else /* __STDC__ */
sm_strlcpyn __P((char *,
	ssize_t,
	int,
	va_dcl));
#endif /* __STDC__ */

# if !HASSTRERROR
extern char *
strerror __P((int _errno));
# endif /* !HASSTRERROR */

extern int
sm_strrevcmp __P((const char *, const char *));

extern int
sm_strrevcasecmp __P((const char *, const char *));

extern int
sm_strcasecmp __P((const char *, const char *));

extern int
sm_strncasecmp __P((const char *, const char *, size_t));

extern LONGLONG_T
sm_strtoll __P((const char *, char**, int));

extern ULONGLONG_T
sm_strtoull __P((const char *, char**, int));

extern void
stripquotes __P((char *));

#endif /* SM_STRING_H */
@


1.3
log
@Replace “$Sendmail: ” with “$Id: ” (the latter is used by upstream)
@
text
@d1 1
a1 1
/* $MirOS: src/gnu/usr.sbin/sendmail/include/sm/string.h,v 1.2 2009/11/18 08:44:25 tg Exp $ */
d3 1
a3 1
 * Copyright (c) 2000-2001, 2003 Sendmail, Inc. and its suppliers.
d10 1
a10 1
 *	$Id: string.h,v 1.38 2003/10/10 17:56:57 ca Exp $
@


1.2
log
@enable format string checking (d’oh!)
and make more of them
@
text
@d1 1
a1 1
/* $MirOS$ */
d10 1
a10 1
 *	$Sendmail: string.h,v 1.38 2003/10/10 17:56:57 ca Exp $
@


1.2.2.1
log
@Replace “$Sendmail: ” with “$Id: ” (the latter is used by upstream)
@
text
@d1 1
a1 1
/* $MirOS: src/gnu/usr.sbin/sendmail/include/sm/string.h,v 1.2 2009/11/18 08:44:25 tg Exp $ */
d10 1
a10 1
 *	$Id: string.h,v 1.38 2003/10/10 17:56:57 ca Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
d27 1
a27 1
extern int PRINTFLIKE(3, 4)
d30 1
a30 1
extern bool
d63 1
a63 1
extern char *
d66 1
a66 1
extern char *
d69 1
a69 1
extern size_t
d72 1
a72 1
extern size_t
d75 1
a75 1
extern size_t
d80 1
@


1.1.127.1
log
@Import Sendmail 8.14.3, suitably stripped down by the not yet committed
contrib/samples/import-3rdpty,v 1.35; we have some new and renamed files
@
text
@d9 1
a9 1
 *	$Id: string.h,v 1.38 2003/10/10 17:56:57 ca Exp $
@


1.1.127.2
log
@Import sendmail 8.14.9
@
text
@d2 1
a2 1
 * Copyright (c) 2000-2001, 2003 Proofpoint, Inc. and its suppliers.
d9 1
a9 1
 *	$Id: string.h,v 1.39 2013-11-22 20:51:31 ca Exp $
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Replace “$Sendmail: ” with “$Id: ” (the latter is used by upstream)
@
text
@d9 1
a9 1
 *	$Id: string.h,v 1.38 2003/10/10 17:56:57 ca Exp $
@

