head	1.23;
access;
symbols
	MIRBSD_10:1.16.0.2
	MIRBSD_10_BASE:1.16
	MIRBSD_9_BASE:1.10
	MIRBSD_8:1.8.0.2
	MIRBSD_8_BASE:1.8
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2014.05.13.22.31.54;	author tg;	state Exp;
branches;
next	1.22;
commitid	10053729D627DE0328E;

1.22
date	2013.09.28.19.55.18;	author tg;	state Exp;
branches;
next	1.21;
commitid	100524733DE1CEE6C8A;

1.21
date	2009.08.13.17.47.57;	author tg;	state Exp;
branches;
next	1.20;
commitid	1004A8451CD3192079E;

1.20
date	2009.07.18.14.09.06;	author tg;	state Exp;
branches;
next	1.19;
commitid	1004A61D73A7953CBB8;

1.19
date	2009.02.22.19.13.24;	author tg;	state Exp;
branches;
next	1.18;
commitid	10049A1A3D96F798FC8;

1.18
date	2008.12.10.18.06.06;	author tg;	state Exp;
branches;
next	1.17;
commitid	100494005235071EEB4;

1.17
date	2008.07.09.23.32.03;	author tg;	state Exp;
branches;
next	1.16;
commitid	10048754A823D6E24B9;

1.16
date	2007.07.31.21.33.20;	author tg;	state Exp;
branches
	1.16.2.1;
next	1.15;
commitid	10046AFAA9F5F92A286;

1.15
date	2007.07.18.23.12.33;	author tg;	state Exp;
branches;
next	1.14;
commitid	100469E9E4C47F1993A;

1.14
date	2007.07.07.20.32.06;	author tg;	state Exp;
branches;
next	1.13;
commitid	100468FF6665289063C;

1.13
date	2007.03.09.13.05.11;	author tg;	state Exp;
branches;
next	1.12;
commitid	10045F15B4849447B32;

1.12
date	2006.10.13.19.28.16;	author tg;	state Exp;
branches;
next	1.11;
commitid	100452FE8DD53FC061D;

1.11
date	2006.10.07.22.20.48;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004528255103CE70A8;

1.10
date	2006.06.17.22.11.18;	author tg;	state Exp;
branches;
next	1.9;
commitid	10044947A600871A477;

1.9
date	2006.06.15.19.56.43;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004491BB666BF1F1EC;

1.8
date	2005.12.18.01.05.56;	author tg;	state Exp;
branches;
next	1.7;
commitid	10043A4B600437C3AF5;

1.7
date	2005.12.15.00.44.16;	author tg;	state Exp;
branches;
next	1.6;
commitid	10043A0BC4658CB1627;

1.6
date	2005.12.04.14.40.45;	author tg;	state Exp;
branches;
next	1.5;
commitid	6ed8439300009e8c;

1.5
date	2005.07.24.16.34.33;	author tg;	state Exp;
branches;
next	1.4;
commitid	738042e3c32f68ae;

1.4
date	2005.07.23.13.55.04;	author tg;	state Exp;
branches;
next	1.3;
commitid	4f3e42e24ab9c87a;

1.3
date	2005.07.07.13.39.22;	author tg;	state Exp;
branches;
next	1.2;
commitid	331742cd306446f9;

1.2
date	2005.03.06.19.05.54;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.22.11;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.16.2.1
date	2008.07.14.12.43.22;	author tg;	state Exp;
branches;
next	;
commitid	100487B49F66A33F1A5;

1.1.1.1
date	2005.02.05.17.22.11;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.21.20.45.37;	author tg;	state Exp;
branches;
next	;
commitid	560042e0092f571e;


desc
@@


1.23
log
@point to /etc/newsyslog.conf in comment of httpd_flags
so that non-chroot users re-enable log rotation
@
text
@# $MirSecuCron$
# $MirOS: src/etc/rc.conf,v 1.22 2013/09/28 19:55:18 tg Exp $
# $OpenBSD: rc.conf,v 1.109 2005/11/16 09:19:36 camield Exp $

# set these to "NO" to turn them off.  otherwise, they're used as flags
routed_flags=NO		# for normal use: "-q"
mrouted_flags=NO	# for normal use: "", if activated
			# be sure to enable multicast_router below.
ospfd_flags=NO		# for normal use: ""
bgpd_flags=NO		# for normal use: ""
rarpd_flags=NO		# for normal use: "-a"
bootparamd_flags=NO	# for normal use: ""
rbootd_flags=NO		# for normal use: ""
sshd_flags=""		# for normal use: ""
rdate_flags=NO		# for normal use: [RFC868-host] or [-n RFC2030-host]
timed_flags=NO		# for normal use: ""
ntpd_flags=NO		# for normal use: "" or -[s][t[t]]
isakmpd_flags=NO	# for normal use: ""
apmd_flags=NO		# for normal use: ""
acpid_flags=NO		# for normal use: ""
tpmrng_flags=""		# set to "NO" if you have no TPM or want to use libtpm
dhcpd_flags=NO		# for normal use: ""
rtadvd_flags=NO		# for normal use: list of interfaces
			# be sure to set net.inet6.ip6.forwarding=1
route6d_flags=NO	# for normal use: ""
			# be sure to set net.inet6.ip6.forwarding=1
rtsold_flags=NO		# for normal use: interface
			# be sure to set net.inet6.ip6.forwarding=0
			# be sure to set net.inet6.ip6.accept_rtadv=1
lpd_flags=NO		# for normal use: "" (or "-l" for debugging)
isdnd_flags=NO		# for normal use: ""
sensorsd_flags=NO	# for normal use: ""
hotplugd_flags=NO	# for normal use: ""
watchdogd_flags=NO	# for normal use: ""
ftpproxy_flags=NO	# for normal use: ""

# use -u to disable chroot, see httpd(8) and check /etc/newsyslog.conf
httpd_flags=NO		# for normal use: "-DSSL"

# For normal use: "-L sm-mta -bd -q30m", note the cron job and access_db!
sendmail_flags="-L sm-mta -C/etc/mail/localhost.cf -bd -q30m"
spamd_flags=NO		# for normal use: "" and see spamd-setup(8)
spamd_black=NO		# set to YES to run spamd without greylisting
spamlogd_flags=""	# use eg. "-i interface" and see spamlogd(8)

# Set to NO if ftpd is running out of inetd
ftpd_flags=NO		# for non-inetd use: "-D"

# Set to NO if identd is running out of inetd
identd_flags=NO		# for non-inetd use: "-b -elo"

# On some architectures, you must also disable console getty in /etc/ttys
xdm_flags=NO		# for normal use: ""

# For enabling console mouse support (i386)
wsmoused_flags=NO	# for ps/2 or usb mice: "", serial: "-p /dev/cua00"

# set the following to "YES" to turn them on
rwhod=NO
nfs_server=NO		# see sysctl.conf for nfs client configuration
lockd=NO
pf=NO			# packet filter / NAT
portmap=NO		# note: inetd(8) rpc services need portmap as well
inetd=YES		# almost always needed
check_quotas=YES	# NO may be desirable in some YP environments
arptables=NO		# read ARP tables into memory at startup

# Multicast routing configuration
# Please look at netstart(8) for a detailed description if you change these
multicast_host=NO	# route all multicast packets to a single interface
multicast_router=NO	# a multicast routing daemon will be run, e.g. mrouted

# Automatically start ssh-agent for the following UIDs
sshagent_autostart=NO		# example: "3000 3005"

# Disable HDD hardware write cache for the following IDE devices:
softdrives_ide=NO		# autodetected from entries in /etc/fstab

# miscellaneous other flags
# only used if the appropriate server is marked YES above
kvm_mkdb=YES			# use NO if manual /var/db/kvm_kernelname.db
savecore_flags=			# "-z" to compress
mountd_flags=			# "-p 635" to bind to a specific port (TCP/UDP)
nfsd_flags="-tun 4"		# crank the 4 for a busy NFS fileserver
syslogd_flags=			# add more flags, ie. "-u -a /chroot/dev/log"
pf_rules=/etc/pf.conf		# packet filter rules file
pflogd_flags=			# add more flags, ie. "-s 256"
shlib_dirs=			# extra directories for ldconfig, separated by space

# Do not change this file, rc.conf - do change the following file instead!
local_rcconf="/etc/rc.conf.local"

[[ -f $local_rcconf ]] && . $local_rcconf	# Do not edit this line
@


1.22
log
@ITIMER_PROF is driven from hardintr, not rtcintr, what a shame!
with this cprng(8) brings virtually no entropy but at pretty high
CPU cost nevertheless (I never liked it much, anyway…) so rid it
(think about adding jytter later)

basically we’ll need something that signals us at stathz intervals
(or profhz), for this to work
@
text
@d2 1
a2 1
# $MirOS: src/etc/rc.conf,v 1.21 2009/08/13 17:47:57 tg Exp $
d37 1
a37 1
# use -u to disable chroot, see httpd(8)
@


1.21
log
@• rc, rc.conf: new mountd_flags with usage example
• rc.conf: unify capitalisation of comments
@
text
@d2 1
a2 1
# $MirOS: src/etc/rc.conf,v 1.20 2009/07/18 14:09:06 tg Exp $
a20 1
cprng_flags=-p		# set to "NO" if you have enough other entropy sources
@


1.20
log
@prevent data corruption from /etc/security’s automated backup cronjob
by using “MirSecuCron” as RCS ID for these and preventing it from ex-
panding any of the default keywords

also, add RCS IDs to almost all configuration files and enhance the
default changelist file
@
text
@d2 1
a2 1
# $MirOS: src/etc/rc.conf,v 1.19 2009/02/22 19:13:24 tg Exp $
d63 2
a64 2
pf=NO			# Packet filter / NAT
portmap=NO		# Note: inetd(8) rpc services need portmap too
d71 2
a72 2
multicast_host=NO	# Route all multicast packets to a single interface
multicast_router=NO	# A multicast routing daemon will be run, e.g. mrouted
d78 1
a78 1
softdrives_ide=NO		# Autodetected from entries in /etc/fstab
d84 2
a85 1
nfsd_flags="-tun 4"		# Crank the 4 for a busy NFS fileserver
d87 1
a87 1
pf_rules=/etc/pf.conf		# Packet filter rules file
@


1.19
log
@hook tpmrng(8), to be written, into the system and installer
(you can never have enough entropy)
@
text
@d1 2
a2 2
# $Id$
# $MirOS: src/etc/rc.conf,v 1.18 2008/12/10 18:06:06 tg Exp $
@


1.18
log
@use relative paths to mksh
@
text
@d2 1
a2 1
# $MirOS: src/etc/rc.conf,v 1.17 2008/07/09 23:32:03 tg Exp $
d22 1
@


1.17
log
@nuke bsdstats and explain why
@
text
@d1 3
a3 3
#!/bin/mksh
#	$MirOS: src/etc/rc.conf,v 1.16 2007/07/31 21:33:20 tg Exp $
#	$OpenBSD: rc.conf,v 1.109 2005/11/16 09:19:36 camield Exp $
@


1.16
log
@mention ntpd flags
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.15 2007/07/18 23:12:33 tg Exp $
a78 3
# send hardware information and operating system version to bsdstats.org
bsdstats_flags=YES		# YES=hw+OS NO=none other=OS version only

@


1.16.2.1
log
@MFC: bsdstats removal
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.16 2007/07/31 21:33:20 tg Exp $
d79 3
@


1.15
log
@meh, just use daemon(3) [inlined, for portability and return codes/msgs]
and default to the profile clock instead of the system clock
(implications not scientifically proven yet)
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.14 2007/07/07 20:32:06 tg Exp $
d17 1
a17 1
ntpd_flags=NO		# for normal use: ""
@


1.14
log
@add cprng, a RNG feeding entropy generated from the oscillation differences
between the CPU clock and the mainboard/bus clock into /dev/urandom (by de-
fault and if run by root), or writing them to stdout (under quite high load
for the CPU), after whitening. The entropy is quite good (if you get enough
to feed ports/math/ent), only the χ² lets me worry.

Tested on my systems:
• nwt (80486DX-33): 7.3 bit per byte, but as bad as rand()
• demo (SPARCstaion 20): 7.4 bit per byte, not much better
• herc (Pentium 233 MMX): 7.6 bit per byte, quality sort of okay
• odem (Athlon XP 500): 7.8 bit per byte, quality very good
• odem (Athlon XP 1200): 7.8 bit per byte, no difference to clocked-down

Instead of adding more post-processing or other functions to improve output
especially on the slower systems (I know I could manage quite something) it
is just fed to the kernel random(9) subsystem; users shall get /dev/arandom
if they require entropy of good quality or /dev/urandom if a high entrophic
values (actual randomness per bit) is desired (almost only for generating a
key for asymmetric cryptography, and even then you want to mix in a few bit
from arcfour).

This dæmon runs by default on our installer, installed system and the base-
live CD; users should disable it on their system after installation if they
have enough entropy sources (for example, interactive input). Users of slow
non-interactively-used servers should combine cprng with hotbits or similar
(see the commented out entries in the default crontab) for quality.
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.13 2007/03/09 13:05:11 tg Exp $
d21 1
a58 1
cprng=YES		# set to "NO" if you have enough other entropy sources
@


1.13
log
@sync spamd upgrades and libpcap, and some /etc stuff; read
• http://undeadly.org/cgi?action=article&sid=20070304035922&mode=expanded
• http://www.openbsd.org/faq/current.html#20070226
for details. In short:
• change rc.conf[.local]
• spamd.conf now lies in /etc/mail/
• greylisting is on by default
• the database has a new format
• there's some database sync stuff
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.12 2006/10/13 19:28:16 tg Exp $
d58 1
@


1.12
log
@https should be the default suggested case ;-)
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.11 2006/10/07 22:20:48 tg Exp $
d42 1
a42 1
spamd_grey=NO		# use spamd greylisting if YES
@


1.11
log
@Requested by bsiegert@@ via eMail and <homsn> via IRC:
During installation, ask the user whether he wants to send information
about the hardware used to bsdstats.org and can disable that, in which
case rc.conf.local will be amended with bsdstats_flags="" (empty), the
default value is "YES". To entirely disable sending ANY information to
bsdstats.org, the admin has to set it to "NO" in /etc/rc.conf.local. A
deletion of /usr/share/misc/bsdstats has already resulted in disabling
the code, and continues to do so.

bsiegert@@ disagrees with this practice and wants the installation-time
question to be able to deactivate sending any information. I heard and
noticed the complaint and hereby acknowledge it, but decided to never-
theless go by with this method. I have discussed it through with Desk-
topBSD's Daniel Seuffert in Essen (on a conference), and Marc G. Four-
nier (the bsdstats.org man) has agreed to our proposal.

Please note that the information sent is *only*:
* one of your public IPv4 (or IPv6) addresses
* during the first run, 32 bytes of data from /dev/arandom used to ob-
  tain a "token"
* during all runs, the "key" from above and the "token" returned (this
  is a measure to estimate the number of MirOS installations)
* during all runs, the version of the operating system, i.e.
  - MirOS #9{semel,bis,ter,quater,...}
  - MirOS #9-stable
  - MirOS #9-current
  - MirOS #9-livecd
* unless deactivated, the output of "sysctl hw.model"
* unless deactivated, in the future (not yet specified) PCI device in-
  formation (most likely: PCIID (8 hexadecimal digits that are the sa-
  me for all exemplars/specimen of a type of hardware device), name of
  the device driver (e.g. vga for any vga(4) device), nothing else).
  This is, however, not yet implemented.

The MirOS Project does not have access to the raw data. We do not have
access to data the general public has access to. Only output of stati-
stics is ever published, no keys, tokens or IP addresses. See the web-
site of BSDstats for details. We try hard to not invade privacy.
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.10 2006/06/17 22:11:18 tg Exp $
d37 1
a37 1
httpd_flags=NO		# for normal use: "" (or "-DSSL" after reading ssl(8))
@


1.10
log
@remove more of these AMD64 remains
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.9 2006/06/15 19:56:43 tg Exp $
d78 3
d94 1
a94 1
[ -f ${local_rcconf} ] && . ${local_rcconf} # Do not edit this line
@


1.9
log
@pregenerate a kvm_bsd.db on kernel build;
allow the user to not run kvm_mkdb(8) on boot

this is for people (mostly) building (custom) kernels,
wanting to not load debugging symbols into (precious) RAM
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.8 2005/12/18 01:05:56 tg Exp $
d54 1
a54 1
# For enabling console mouse support (i386 alpha amd64)
@


1.8
log
@revert -r1.7 because the ntpd bug got fixed in
Message-ID: <200500121801.jBI14X1d016256@@herc.66h.42h.de>
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.6 2005/12/04 14:40:45 tg Exp $
d80 1
@


1.7
log
@using ntpd without -s so early in the boot process can lead to the
leap second table initialisation failing; thus, warn the user if he
edits the file himself (if started with -S or without -s later, it's fine)
@
text
@d17 1
a17 1
ntpd_flags=NO		# for normal use: "-s" DO NOT FORGET THE '-s'!
@


1.6
log
@ftp-proxy
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.5 2005/07/24 16:34:33 tg Exp $
d17 1
a17 1
ntpd_flags=NO		# for normal use: ""
@


1.5
log
@merge
@
text
@d2 2
a3 2
#	$MirOS: src/etc/rc.conf,v 1.4 2005/07/23 13:55:04 tg Exp $
#	$OpenBSD: rc.conf,v 1.106 2005/06/02 20:09:38 tholo Exp $
d33 2
d54 1
a54 1
# For enabling console mouse support (i386 and alpha only)
@


1.4
log
@* removal of a lot of MirCustomisations ;-) in /etc/profile,
  while keeping the SuSE-like approach of having it feature-rich by default
* speed up /etc/profile a lot
* be more compatible to ash and similar

User-visible changes:
* "print" is now automatically aliased for all non-ksh shells
* the ansi-nt terminal is black/white
* setting COLORTERM to NO in ~/.profile.preinit actually works
* root's path does not include /usr/games any more
* EDITOR is now always ed(1) unless defined otherwise in ~/.profile;
  jstar/jupp is no longer probed
* for ksh(1), set -o emacs +o emacs-usemeta is no longer performed,
  because mksh(1) defaults to these and ksh(1) is being phased out
* for bash(1), set -o emacs and shopt -s extglob are now default
* ash(1) and similar now can be recognised by the prompt
* a lot less variables cluttering the environmental space
* loadimage() is gone, please add it to your ~/.profile if desired
* sshagent_autostart now *must* use numerical UIDs, update your
  /etc/rc.conf.local accordingly
* /etc/profile.local and ~/.profile.local are no longer sourced
@
text
@d2 2
a3 2
#	$MirOS: src/etc/rc.conf,v 1.3 2005/07/07 13:39:22 tg Exp $
#	$OpenBSD: rc.conf,v 1.95 2004/03/05 23:54:47 henning Exp $
d9 1
d15 1
a15 1
rdate_flags=NO		# for normal use: [-c RFC868-host] or [-nc RFC1361-host]
d20 1
d32 1
d41 1
@


1.3
log
@/bin/sh and /bin/ksh -> /bin/mksh

This should cover most uses.
@
text
@d2 1
a2 1
#	$MirOS: src/etc/rc.conf,v 1.2 2005/03/06 19:05:54 tg Exp $
d66 2
a67 2
# Automatically start ssh-agent for the following users
sshagent_autostart=NO		# example: "tg bsiegert"
@


1.2
log
@merge src/etc minus generated files
@
text
@d1 2
a2 2
#!/bin/ksh
#	$MirOS$
@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
#!/bin/sh -
#
d14 1
a14 2
named_flags=NO		# for normal use: ""
rdate_flags=NO		# for normal use: [RFC868-host] or [-n RFC1361-host]
d16 1
a16 1
ntpdate_flags=NO	# for normal use: NTP server; run before ntpd starts
a17 1
mopd_flags=NO		# for normal use: "-a"
d19 1
a19 1
dhcpd_flags=NO		# for normal use: "-q"
d28 1
d34 1
a34 1
# For normal use: "-L sm-mta -bd -q30m", and note there is a cron job
a54 1
amd=NO
d59 1
a59 5
ntpd=YES		# run ntpd if it exists

krb5_master_kdc=NO	# KerberosV master KDC. Run 'info heimdal' for help.
krb5_slave_kdc=NO	# KerberosV slave KDC.
afs=NO			# mount and run afs
d66 6
a74 2
ypserv_flags=			# E.g. -1 for YP v1, -d for DNS etc
yppasswdd_flags=NO		# "-d /etc/yp" if passwd files are in /etc/yp
a75 2
amd_dir=/tmp_mnt		# AMD's mount directory
amd_master=/etc/amd/master	# AMD 'master' map
d79 1
a79 3
afsd_flags=			# Flags passed to afsd
shlib_dirs=			# extra directories for ldconfig, separated
				# by space
d81 1
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import almost everything (no ancontrol, ifconfig, pfctl, wicontrol)
of (the undeleted parts of) OpenBSD-current's userland of about 3 hours ago.
Warning: this introduces major breakage!
@
text
@d3 1
a3 1
#	$OpenBSD: rc.conf,v 1.106 2005/06/02 20:09:38 tholo Exp $
a8 1
ospfd_flags=NO		# for normal use: ""
d15 1
a15 1
rdate_flags=NO		# for normal use: [RFC868-host] or [-n RFC2030-host]
d17 1
a17 1
ntpd_flags=NO		# for normal use: ""
d21 1
a21 2
acpid_flags=NO		# for normal use: ""
dhcpd_flags=NO		# for normal use: ""
a30 1
hotplugd_flags=NO	# for normal use: ""
a38 1
spamlogd_flags=""	# use eg. "-i interface" and see spamlogd(8)
d61 1
@

