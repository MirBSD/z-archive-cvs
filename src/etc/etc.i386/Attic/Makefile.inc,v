head	1.6;
access;
symbols
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.2.0.2
	MIRBSD_8_BASE:1.2
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2007.10.02.18.26.28;	author tg;	state dead;
branches;
next	1.5;
commitid	10047028D624B67594F;

1.5
date	2007.10.01.21.34.34;	author tg;	state Exp;
branches;
next	1.4;
commitid	100470167FB0376153C;

1.4
date	2007.10.01.21.27.18;	author tg;	state Exp;
branches;
next	1.3;
commitid	100470166417C361B87;

1.3
date	2006.02.14.20.47.53;	author tg;	state Exp;
branches;
next	1.2;
commitid	10043F2407C51151E2F;

1.2
date	2005.03.06.19.05.55;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.22.11;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.22.11;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.21.20.45.40;	author tg;	state Exp;
branches;
next	;
commitid	560042e0092f571e;


desc
@@


1.6
log
@get rid of snap_md
@
text
@# $MirOS: src/etc/etc.i386/Makefile.inc,v 1.5 2007/10/01 21:34:34 tg Exp $

.if defined(DESTDIR)

snap_md:
	${SUDO} cp ${DESTDIR}/usr/mdec/{{,pxe}boot,mbr*} ${DESTDIR}/snapshot/

.endif
@


1.5
log
@also copy the MBR, for fun
@
text
@d1 1
a1 1
# $MirOS: src/etc/etc.i386/Makefile.inc,v 1.4 2007/10/01 21:27:18 tg Exp $
@


1.4
log
@install /usr/mdec/boot into releng/rel/ too, like sparc
@
text
@d1 1
a1 1
# $MirOS: src/etc/etc.i386/Makefile.inc,v 1.3 2006/02/14 20:47:53 tg Exp $
d6 1
a6 1
	${SUDO} cp ${DESTDIR}/usr/mdec/{,pxe}boot ${DESTDIR}/snapshot/
@


1.3
log
@restructure build system for better restartability,
move things to proper places, ensure root-only-access
to .buildnotice hack file, fix a few problems (using
${BSDMAKE} in gcc/Makefile, including wrong files),
use ${SUDO} on different places, ensure DESTDIR is
always correct on make build, move most of the former
'release' targets from src/etc/Makefile to src/Makefile
and remove associated targets in src/etc/Makefile; sync
list of phony targets in both; copy out common code in
distrib/i386/generic/Makefile, distrib/i386/common/Makefile.inc
into new distrib/i386/generic/Makefile.kernel, remove
unused target 'includes' in src/Makefile, rewrite the
distrib-dirs target, shuffle the creation and removal
of the systrace files around, build HTML manual pages
under systrace(1) control, auto-remove tmp buildhome,
check HOME makeenv/environment sync and being tmp, fix
index/checksum file generation, maybe more (read the diff)

untested
@
text
@d1 1
a1 1
# $MirOS: src/etc/etc.i386/Makefile.inc,v 1.2 2005/03/06 19:05:55 tg Exp $
d6 1
a6 1
	${SUDO} cp ${DESTDIR}/usr/mdec/pxeboot ${DESTDIR}/snapshot/
@


1.2
log
@merge src/etc minus generated files
@
text
@d1 1
a1 1
# $MirOS$
d5 1
a5 3
snap_md: snap_md1 distrib

snap_md1:
@


1.1
log
@Initial revision
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile.inc,v 1.12 2004/03/19 18:12:02 deraadt Exp $
#	etc.i386/Makefile.inc -- i386-specific etc Makefile targets
d3 1
a3 4
.ifdef DESTDIR
snap_md: bsd notes bootblocks distrib
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERIC/bsd \
	    ${DESTDIR}/snapshot/bsd
d5 1
a5 4
bsd:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERIC && \
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
d7 2
a8 2
notes:
	cp ${.CURDIR}/etc.i386/INSTALL.* ${DESTDIR}/snapshot
d10 1
a10 6
bootblocks:
	cp ${DESTDIR}/usr/mdec/pxeboot ${DESTDIR}/snapshot

.PHONY: bsd notes bootblocks

.endif	# DESTDIR check
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import almost everything (no ancontrol, ifconfig, pfctl, wicontrol)
of (the undeleted parts of) OpenBSD-current's userland of about 3 hours ago.
Warning: this introduces major breakage!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.15 2005/02/07 06:08:10 david Exp $
d5 1
a5 1
snap_md: bsd bsd.mp notes bootblocks distrib
a7 2
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERIC.MP/bsd \
	    ${DESTDIR}/snapshot/bsd.mp
a13 5
bsd.mp:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERIC.MP
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERIC.MP && \
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}

a18 2
	cp ${DESTDIR}/usr/mdec/cdboot ${DESTDIR}/snapshot
	cp ${DESTDIR}/usr/mdec/cdbr ${DESTDIR}/snapshot
@

