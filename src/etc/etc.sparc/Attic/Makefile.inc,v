head	1.8;
access;
symbols
	MIRBSD_9_BASE:1.5
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3
	cvs-200507211800:1.1.1.2
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2007.10.02.18.26.28;	author tg;	state dead;
branches;
next	1.7;
commitid	10047028D624B67594F;

1.7
date	2006.07.06.01.37.02;	author tg;	state Exp;
branches;
next	1.6;
commitid	10044AC694D2D2A954A;

1.6
date	2006.07.05.23.29.08;	author tg;	state Exp;
branches;
next	1.5;
commitid	10044AC4B543D747AD4;

1.5
date	2006.06.11.01.22.49;	author tg;	state Exp;
branches;
next	1.4;
commitid	100448B70560836C1A2;

1.4
date	2006.06.10.23.11.30;	author tg;	state Exp;
branches;
next	1.3;
commitid	100448B51B752165797;

1.3
date	2005.07.23.15.00.33;	author tg;	state Exp;
branches;
next	1.2;
commitid	428642e25b9873d0;

1.2
date	2005.03.06.19.05.57;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.17.22.11;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.22.11;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.07.21.20.45.40;	author tg;	state Exp;
branches;
next	;
commitid	560042e0092f571e;


desc
@@


1.8
log
@get rid of snap_md
@
text
@# $MirOS: src/etc/etc.sparc/Makefile.inc,v 1.7 2006/07/06 01:37:02 tg Exp $

.if defined(DESTDIR)

snap_md:
	${SUDO} cp ${DESTDIR}/usr/mdec/boot{,xx} ${DESTDIR}/snapshot/

.endif
@


1.7
log
@boot.net is a joke, /usr/mdec/boot is netbootable
@
text
@d1 1
a1 1
# $MirOS: src/etc/etc.i386/Makefile.inc,v 1.3 2006/02/14 20:47:53 tg Exp $
@


1.6
log
@binstall? joke. that thing is so broken...
@
text
@d1 1
a1 3
# $MirOS: src/etc/etc.sparc/Makefile.inc,v 1.5 2006/06/11 01:22:49 tg Exp $
# $OpenBSD: Makefile.inc,v 1.13 2005/04/28 22:28:14 deraadt Exp $
# etc.sparc/Makefile.inc -- sparc-specific etc Makefile targets
d3 1
a3 3
.include <bsd.own.mk>

.ifdef DESTDIR
d6 1
a6 5
	cp ${DESTDIR}/usr/mdec/*boot* ${DESTDIR}/snapshot
	printf '\01\03\01\07\060\200\0\07' | \
	    dd of=${DESTDIR}/snapshot/boot.net obs=32 conv=osync && \
	    dd if=${DESTDIR}/usr/mdec/boot of=${DESTDIR}/snapshot/boot.net \
	    bs=32 seek=1 skip=2
d8 1
a8 1
.endif	# DESTDIR check
@


1.5
log
@move some functionality, like with i386
@
text
@d1 1
a1 1
# $MirOS: src/etc/etc.sparc/Makefile.inc,v 1.4 2006/06/10 23:11:30 tg Exp $
d11 4
a14 2
	${DESTDIR}/usr/mdec/binstall net /tmp && \
	    mv /tmp/boot.sparc.openbsd ${DESTDIR}/snapshot/boot.net
@


1.4
log
@don't do stuff that can't happen
@
text
@d1 1
a1 1
# $MirOS: src/etc/etc.sparc/Makefile.inc,v 1.3 2005/07/23 15:00:33 tg Exp $
a7 3
.if !defined(REL_NO_KERNEL) || ${REL_NO_KERNEL:L} != "yes"
snap_md: bsd distrib bsd.install
.endif
d9 1
a9 17
snap_md: bootblocks

bsd.install: bsd
	touch ${.CURDIR}/../sys/arch/sparc/compile/GENERIC/bsd
	cp ${.CURDIR}/../sys/arch/sparc/compile/GENERIC/bsd \
	    ${DESTDIR}/snapshot/bsd
	s=$$(printf "find sd\nexit" | config -e ${DESTDIR}/snapshot/bsd | \
	    grep scsibus | awk '{print $$1}'); \
	    printf "add sd0\n%s\n%s\nchange %s\ny\n3\n\n\nquit\n" $$s $$s $$s | \
	    config -e -o ${DESTDIR}/snapshot/bsd.scsi3 ${DESTDIR}/snapshot/bsd

bsd:
	cd ${.CURDIR}/../sys/arch/sparc/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/sparc/compile/GENERIC && \
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}

bootblocks:
d12 1
a12 3
	  mv /tmp/boot.sparc.openbsd ${DESTDIR}/snapshot/boot.net

.PHONY: bsd bsd.install bootblocks
@


1.3
log
@manually merge the etc/*/ subdirectory entries from OpenBSD
@
text
@d1 1
a1 1
# $MirOS: src/etc/etc.sparc/Makefile.inc,v 1.2 2005/03/06 19:05:57 tg Exp $
d9 1
a9 1
snap_md: bsd distrib
d13 2
d33 1
a33 1
.PHONY: bsd bootblocks
@


1.2
log
@merge src/etc minus generated files
@
text
@d1 3
a3 3
#	$MirOS$
#	$OpenBSD: Makefile.inc,v 1.11 2002/05/13 07:22:43 espie Exp $
#	etc.sparc/Makefile.inc -- sparc-specific etc Makefile targets
d17 1
a17 1
	    grep "ukc>  " | awk '{print $$2}'); \
@


1.1
log
@Initial revision
@
text
@d1 1
d5 2
d8 6
a13 1
snap_md: bsd bootblocks distrib
d16 2
a17 2
	s=`printf "find sd\nexit" | config -e ${DESTDIR}/snapshot/bsd | \
	    grep "ukc>  " | awk '{print $$2}'`; \
@


1.1.1.1
log
@Import the OpenBSD foundation of MirOS BSD
@
text
@@


1.1.1.2
log
@Import almost everything (no ancontrol, ifconfig, pfctl, wicontrol)
of (the undeleted parts of) OpenBSD-current's userland of about 3 hours ago.
Warning: this introduces major breakage!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.13 2005/04/28 22:28:14 deraadt Exp $
d9 1
a9 1
	    grep scsibus | awk '{print $$1}'`; \
@

