head	1.4;
access;
symbols
	MIRBSD_10_BASE:1.3
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.3.0.2
	MIRBSD_8_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2008.10.05.16.26.17;	author tg;	state Exp;
branches;
next	1.3;
commitid	10048E8EA7D6EAD401E;

1.3
date	2005.11.22.18.17.18;	author tg;	state Exp;
branches;
next	1.2;
commitid	2a1c438360a0196c;

1.2
date	2005.05.23.13.02.41;	author tg;	state Exp;
branches;
next	1.1;
commitid	3e644291d485c348;

1.1
date	2005.05.14.17.43.46;	author tg;	state Exp;
branches;
next	;
commitid	36d2428638ba72ae;


desc
@@


1.4
log
@use mksh realpath builtin instead of readlink -f for canonicalisation

note: there’s still a readlink(1) call left in, for instance, mirmake;
this does not hurt because we initially assumed that readlink(1) does
exist anyway and bundled ours just because some do not have the ‘-f’
option for realpath(2)isation
@
text
@# $MirOS: gcc/boehm-gc/tests/Makefile,v 1.3 2005/11/22 18:17:18 tg Exp $

.ifdef TEST

.  if ${TEST} == "1"
PROG=		gctest
.  else
PROG=		threads
.  endif
NOMAN=		yes
REALOBJDIR!=	realpath ${.OBJDIR}
LDADD=		${REALOBJDIR}/../.libs/libgcjgc.a
DPADD=		${REALOBJDIR}/../.libs/libgcjgc.la
CPPFLAGS+=	-I${.CURDIR}/../include

CPPFLAGS+=	-lpthread
LDFLAGS+=	-lpthread

.  include <bsd.prog.mk>

.else

.  for _i in all clean cleandir depend obj
${_i}:
	cd ${.CURDIR} && make ${_i} TEST=1
	cd ${.CURDIR} && make ${_i} TEST=2
.  endfor

.endif
@


1.3
log
@boehm-gc won't work on non-native (too many files nuked and stuff hardcoded)
so build ObjC without GC in the portable case
@
text
@d1 1
a1 1
# $MirOS: gcc/boehm-gc/tests/Makefile,v 1.2 2005/05/23 13:02:41 tg Exp $
d11 1
a11 1
REALOBJDIR!=	readlink -f ${.OBJDIR}
@


1.2
log
@DPADD
@
text
@d1 1
a1 1
# $MirOS: gcc/boehm-gc/tests/Makefile,v 1.1 2005/05/14 17:43:46 tg Exp $
d16 2
a17 2
CPPFLAGS+=	-pthread
LDFLAGS+=	-pthread
@


1.1
log
@make it work

just that now:
 Program received signal SIGSEGV, Segmentation fault.
 0x051b7fd0 in pthread_stackseg_np () from /usr/lib/libpthread.so.8.0
the problem is just at a different place...
@
text
@d1 1
a1 1
# $MirOS$
d13 1
@

