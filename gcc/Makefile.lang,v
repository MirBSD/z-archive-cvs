head	1.18;
access;
symbols
	MIRBSD_10_BASE:1.14
	MIRBSD_9_BASE:1.3
	MIRBSD_8:1.1.0.2
	MIRBSD_8_BASE:1.1;
locks; strict;
comment	@# @;


1.18
date	2014.02.09.16.48.52;	author tg;	state Exp;
branches;
next	1.17;
commitid	10052F7B18B4C4978BF;

1.17
date	2014.01.22.19.55.56;	author tg;	state Exp;
branches;
next	1.16;
commitid	10052E0225B276FB23C;

1.16
date	2013.12.02.19.45.43;	author tg;	state Exp;
branches;
next	1.15;
commitid	100529CE375194403C9;

1.15
date	2010.12.23.21.07.39;	author tg;	state Exp;
branches;
next	1.14;
commitid	1004D13B9DE3BEE119E;

1.14
date	2007.08.18.22.41.49;	author tg;	state Exp;
branches;
next	1.13;
commitid	10046C77579035A0D92;

1.13
date	2007.08.13.19.22.36;	author tg;	state Exp;
branches;
next	1.12;
commitid	10046C0AF813606B8FD;

1.12
date	2007.08.08.22.32.40;	author tg;	state Exp;
branches;
next	1.11;
commitid	10046BA449F51C1F09C;

1.11
date	2007.06.15.16.11.07;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004672BA0F2133C0C5;

1.10
date	2007.06.10.03.19.27;	author tg;	state Exp;
branches;
next	1.9;
commitid	100466B6DB0510D7F48;

1.9
date	2007.05.19.01.18.27;	author tg;	state Exp;
branches;
next	1.8;
commitid	100464E50415A4F2B05;

1.8
date	2007.01.01.19.16.39;	author tg;	state Exp;
branches;
next	1.7;
commitid	10045995E2277C886D7;

1.7
date	2006.12.11.20.46.46;	author tg;	state Exp;
branches;
next	1.6;
commitid	100457DC3BD668F9764;

1.6
date	2006.07.04.00.02.13;	author tg;	state Exp;
branches;
next	1.5;
commitid	10044A9B00F46A9FF40;

1.5
date	2006.07.03.01.27.12;	author tg;	state Exp;
branches;
next	1.4;
commitid	10044A8727618896ABD;

1.4
date	2006.06.30.23.18.04;	author tg;	state Exp;
branches;
next	1.3;
commitid	10044A5B12A66F53B0F;

1.3
date	2006.06.17.17.17.28;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004494392C3FB89C4C;

1.2
date	2006.04.06.11.10.18;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004434F7063C00D695;

1.1
date	2005.12.18.16.36.50;	author tg;	state Exp;
branches;
next	;
commitid	10043A58BE830AFB807;


desc
@@


1.18
log
@stop shipping libgcc_s in base, too
@
text
@# $MirOS: gcc/Makefile.lang,v 1.17 2014/01/22 19:55:56 tg Exp $
#-
# To build gcj yourself, use the following command:
# $ make NO_JAVA=No NO_THREADS=No NO_BOEHMGC=No COMPILER_ONLY=Yes
# $ sudo make NO_JAVA=No NO_THREADS=No NO_BOEHMGC=No COMPILER_ONLY=Yes install
# $ make NO_JAVA=No NO_THREADS=No NO_BOEHMGC=No
# $ sudo make NO_JAVA=No NO_THREADS=No NO_BOEHMGC=No install
# and repeat, for sake of lib-gnu-awt-xlib depending on libgcj

.ifndef _MODGCC_MAKEFILE_LANG
_MODGCC_MAKEFILE_LANG=1

.include <bsd.own.mk>

.if ${OStype} == "MirBSD"
.  if (${MACHINE_ARCH} == "i386") || (${MACHINE_ARCH} == "sparc")
#NO_ADA?=	No	# disabled due to lack of users vs. cost of keeping it
#NO_CXX?=	No	# disabled to not conflict with newer CXX from ports
NO_PASCAL?=	No
.  endif
# Ada is known to work, but large and slow to build.
NO_ADA?=	Yes
# C++ is known to be stable, beats OpenBSD gcc/gxx 3.3 easily.
NO_CXX?=	Yes
# Objective-C is known to sort of work, nobody sane uses it
# though. libobjc_gc is known to at least not break things.
NO_OBJC?=	Yes
# GCJ is not recommended because it's out of date and takes
# ages to build. It does however work, for low values of work.
NO_JAVA?=	Yes
# Pascal is known to work and be in a fairly good shape.
NO_PASCAL?=	Yes
.else
GCC_NATIVE=	No
NO_ADA?=	Yes	# helps bootstrapping
NO_JAVA=	Yes	# never
.endif
# Threads may or may not work. Seems to be safe on i386, but
# disabled for improved overall stability.
NO_THREADS?=	Yes

# cross-compiling a native compiler?
.if (${CROSS_MODE:L} == "yes") && !defined(_CROSSBUILD)
NO_CXX=		Yes
NO_OBJC=	Yes
NO_PASCAL=	Yes
.endif

.if ${NO_THREADS:L} != "no"
NO_JAVA=	Yes #implied
.endif

.if ${NO_CXX:L} != "no"
NO_JAVA=	Yes #implied
.endif

# only check java since nobody uses libobjc_gc anyway
# (noone sane uses libobjc anyway, to state truth...)
.if ${NO_JAVA:L} == "no"
NO_BOEHMGC?=	No
.  if ${NO_BOEHMGC:L} != "no"
NO_JAVA=	Yes #implied
.  endif
.endif
NO_BOEHMGC?=	Yes

# finally, this one
GCC_NO_SHARED_LIBGCC=defined

.endif
@


1.17
log
@first part of treebreaker: disable G++ 3.4
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.16 2013/12/02 19:45:43 tg Exp $
d67 3
@


1.16
log
@remove Ada and schedule C++ for removal; agreed bsiegert@@
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.15 2010/12/23 21:07:39 tg Exp $
d18 1
a18 1
NO_CXX?=	No	# disabled to not conflict with newer CXX from ports
@


1.15
log
@drop Objective-C from base, after having commented it with ‚Äúnobody sane
uses it anyway‚Äù ‚Äì even for clang you need at least libobjc from gcc4
from ports, better yet libobjc2 or ciruZ‚Äô objrt‚Ä¶

keeping Ada (for bootstrapping), C++ (for libGLU and some xlock modes),
Pascal (because there‚Äôs no port for it) for now but in the long term,
they will cease due to the pcc migration and succeeding removal of GCC
from the base system
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.14 2007/08/18 22:41:49 tg Exp $
d17 2
a18 2
NO_ADA?=	No
NO_CXX?=	No
@


1.14
log
@disable gcj by default again - sorry lads, but I get hardware issues
(I think) with it, when not heavily underclocking my build laptop it
segfaults (ICE) in libjava.

add instructions to top of mircvs://gcc/Makefile.lang how to enable.

agreed bsiegert@@ after some discussions
focusing on getting the release out soon and especially stable
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.13 2007/08/13 19:22:36 tg Exp $
a18 1
NO_OBJC?=	No
@


1.13
log
@re-enable gcj for i386 (will be put in the ‚Äúada‚Äù distset to save space)
ok bsiegert@@
@
text
@d1 8
a8 1
# $MirOS: gcc/Makefile.lang,v 1.12 2007/08/08 22:32:40 tg Exp $
a21 5
.  if (${MACHINE_ARCH} == "i386")
NO_JAVA?=	No
NO_THREADS?=	No
NO_BOEHMGC?=	No
.  endif
@


1.12
log
@let‚Äôs try it‚Ä¶
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.11 2007/06/15 16:11:07 tg Exp $
d15 5
@


1.11
log
@disable the Ada set for sparc, until I got rid of the segfaults appearing
in C language programmes for a recently cross-built compiler
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.10 2007/06/10 03:19:27 tg Exp $
a26 3
.  if ${MACHINE_ARCH} == "sparc"
NO_ADA:=	Yes	# for now, until the segfaults (in C) go away
.  endif
@


1.10
log
@first step of trying to build cross-compilers and cross-build native compi-
lers with both the new framework and Ada‚Ä¶ this isn't enough apparently tho‚Ä¶
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.9 2007/05/19 01:18:27 tg Exp $
d27 3
@


1.9
log
@‚Ä¢ revive Ada (but not the Lovelace one)
‚Ä¢ make all subsystems ignore our special CFLAGS, even if they're C-only
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.8 2007/01/01 19:16:39 tg Exp $
d36 7
@


1.8
log
@fix pasto (= i.p.v. ?=) and remove redundancy
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.7 2006/12/11 20:46:46 tg Exp $
d10 1
d15 1
a15 1
# Ada is known to work but not included due to size constraints.
d17 1
a17 1
# C++ is known to be stable, better than OpenBSD gcc/gxx 3.3
@


1.7
log
@Add comment about the state of usability of the languages/options
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.6 2006/07/04 00:02:13 tg Exp $
d23 1
a23 1
NO_JAVA=	Yes
d39 1
a39 1
.if defined(NO_CXX) && ${NO_CXX:L} != "no"
d45 1
a45 1
.if !defined(NO_JAVA) || ${NO_JAVA:L} == "no"
@


1.6
log
@enable gcc, g++, gobjc, gpc on sparc
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.5 2006/07/03 01:27:12 tg Exp $
d14 1
d16 1
d18 2
d21 2
d24 1
d31 2
@


1.5
log
@restructure
this gets us rid of threaded gcc in the java-disabled case, affects i386
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.4 2006/06/30 23:18:04 tg Exp $
d9 1
a9 1
.  if ${MACHINE_ARCH} == "i386"
@


1.4
log
@check MACHINE_ARCH not MACHINE for same-userland stuff
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.3 2006/06/17 17:17:28 tg Exp $
a9 1
NO_ADA?=	Yes #No
a11 1
NO_JAVA?=	Yes #No
d13 1
a13 2
NO_THREADS?=	No	# mainly needed for gcj
.  else
a18 3
NO_THREADS=	Yes
.  endif
NO_BOEHMGC=	Yes	# noone uses libobjc_gc anyway
d23 5
a27 2
NO_THREADS=	Yes
NO_BOEHMGC=	Yes
d34 7
a40 3
.if defined(NO_OBJC) && defined(NO_JAVA) \
    && ${NO_OBJC:L} != "no" && ${NO_JAVA:L} != "no"
NO_BOEHMGC=	Yes
d42 1
a42 1
NO_BOEHMGC?=	No
@


1.3
log
@get rid of libobjc_gc, noone uses it anyway
(noone sane uses libobjc anyway, even...)
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.2 2006/04/06 11:10:18 tg Exp $
d9 1
a9 1
.  if ${MACHINE} == "i386"
@


1.2
log
@* don't build java and Ada, with prejudice
  this is for size reasons; users can still build them via /etc/make.cfg
* while here, clean up macppc (no change in behaviour)
@
text
@d1 1
a1 1
# $MirOS: gcc/Makefile.lang,v 1.1 2005/12/18 16:36:50 tg Exp $
d24 1
@


1.1
log
@Part 2 of the big commit:
* www/vbegin.php: don't output the UTF-8 BOM for now
* ports/Setup.sh: change order in which path is divined [1]
* ports/books/mirex: convert to CVS_DISTF
* ports/comms/ssfe: increase line length limit and history buffer size
* ports/infrastructure/install/setup.sh: sync path order with Setup.sh [1]
* ports/infrastructure/mk/bsd.port.mk: (_PORTPATH) sync default PATH [1]
* ports/infrastructure/mk/bsd.port.mk: (_UPGRADE_FLAGS) new, default to -a
* ports/infrastructure/mk/bsd.port.mk: (_upgrade) use it
* ports/infrastructure/mk/bsd.port.mk: (reupgrade) new target, set to -a -f
* ports/infrastructure/scripts/mkmcz: don't use $LOCALBASE, trust in PATH
* ports/infrastructure/mk/bsd.port.mk: (_CVS_FETCH) use _PORTPATH
* ports/infrastructure/pkgtools/create: treat /usr/info same as /usr/man
* ports/infrastructure/pkgtools/upgrade: fix path to temp +REQUIRED_BY
* ports/www/firesomething: break, suggest Opera-Linux/K-Meleon/Safari
* src/Makefile, src/gcc/Makefile.lang: if build GCJ, check if X11 installed
* src/Makefile, src/gnu/usr.bin/perl/Makefile.bsd-wrapper: defer h2ph
  execution to end of build
* src/distrib/lists: sync with pre-h2ph change
* src/etc/services: add openvpn, from IANA
* src/gcc/Makefile.inc, Makefile.lang: fragment out NO_*= stuff
* src/gcc/libjava/Makefile.bsd-wrapper: DEBUGPROGS is gone
* src/gnu/usr.bin/perl/Makefile.bsd-wrapper: flesh out h2ph, fix perms
* src/lib/libc/time/localtime.c: fix undefined extern
* ports/net/sirc/Makefile: automatically insert version into CTCP VERSION
* ports/net/sirc/dist/PROGRAMMING: document capab hooks
* ports/net/sirc/dist/dsircp: several hours of perl hacking with Club-Mate
  - publish $msgchannel, $talkserver [2]
  - support for CAPAB: publish $has_capab, $capab_cmd, $capab_response;
    add "capab" hook in reply
  - support for CAPAB IDENTIFY-MSG: publish $has_identifymsg; new
    $unverified, $unverified_m; enable automatically if present;
    change <...> [...] -...- to ´...ª [[...]] ¨...¨
  - /describe nick now looks [*] (or [[*]]) instead of *, /me now looks
    # instead of * if identified, to facilitate this conversion
  - fix abuse of U+0060
  - sort /names [2]
  - fix ^B ^_ ^V [2]
  - remove trailing whitespace on outgoing msgs [2]
  - remove trailing whitespace on incoming msgs
  - fix indentation
  - auto-split overlong lines (partially [2])
  - in NOTICE make nick bold too [2]
  - disable DCC since it crashes
  - beautify CTCP TIME replies
  - add ACCEPT command (for ratbox-ircd, e.g. Freeforge)
* ports/net/sirc/pkg/DESCR: summarise new features

[1] all for the sake of bsiegert@@ wanting to not have to souce a
    SetEnv.sh or SetEnv.csh before building in "default MirPorts"
    (i.e. LOCALBASE=/usr/mpkg SYSCONFDIR=/etc BINOWN=root SUDO=sudo)
[2] adapted from http://co.ordinate.org/sirc/
@
text
@d1 1
a1 1
# $MirOS$
d10 1
a10 1
NO_ADA?=	No
d13 1
a13 1
NO_JAVA?=	No
a15 7
.  elif ${MACHINE} == "macppc"
NO_ADA?=	Yes
NO_CXX?=	Yes
NO_OBJC?=	Yes
NO_JAVA?=	Yes
NO_PASCAL?=	Yes
NO_THREADS?=	Yes
@

