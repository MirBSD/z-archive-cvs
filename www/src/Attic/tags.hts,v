head	1.6;
access;
symbols;
locks; strict;
comment	@# @;


1.6
date	2018.12.25.02.20.58;	author tg;	state dead;
branches;
next	1.5;
commitid	1005C21941248BF7F0B;

1.5
date	2018.05.06.12.56.45;	author tg;	state Exp;
branches;
next	1.4;
commitid	1005AEEFB932696C89D;

1.4
date	2009.09.25.18.25.21;	author tg;	state Exp;
branches;
next	1.3;
commitid	1004ABD0B1969A3544A;

1.3
date	2009.06.21.11.01.27;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004A3E12E72F4AD1AB;

1.2
date	2008.12.04.20.31.35;	author tg;	state Exp;
branches;
next	1.1;
commitid	10049383E3809AC325E;

1.1
date	2008.12.04.20.27.13;	author tg;	state Exp;
branches;
next	;
commitid	10049383D2D5E05084A;


desc
@@


1.6
log
@further simplification: drop entire tag cloud functionality
@
text
@# This file is part of the website of The MirOS Project, which is
# copyrighted material, please read the LICENCE file for details.

mws_setname tags "Website Tag Cloud"
mws_setheadline MirOS Website Tag Cloud
mws_setold
mws_putheader '$MirOS: www/src/tags.hts,v 1.5 2018/05/06 12:56:45 tg Exp $'

#DEPEND data/*.cfg

mws_content <<'EOF'
<p>These tags are backlinked from news and weblog:</p>
<ul>
EOF

rm -f tags.out
(cd "$TOP/data"; seen=; for x in *.cfg; do
	x=${x%.cfg}
	t=$(grep '^targets=' $x.cfg || :)
	typeset -l targets=
	[[ -z $t ]] || eval $t
	for t in $targets; do
		if [[ $t != +([0-9a-z_]) ]]; then
			print -u2 "Invalid tag '$t' in data/$x.cfg"
			continue
		fi
		eval linktarget_$t=$x
		seen="$seen $t"
	done
done; for t in $seen; do
	eval print $t \$linktarget_$t
done) | sort -u | while read tag target; do
	print " <li><a href=\"@@@@RELPATH@@@@${target}.htm\">${tag}</a>" \
	    "(<a href=\"@@@@RELPATH@@@@${target}.rss\">RSS</a>)</li>"
	print $tag >>tags.out
done | mws_content

mws_content <<'EOF'
</ul>
EOF
mws_putfooter
exit 0
@


1.5
log
@introduce a marker for pages with old content
@
text
@d7 1
a7 1
mws_putheader '$MirOS: www/src/tags.hts,v 1.4 2009/09/25 18:25:21 tg Exp $'
@


1.4
log
@change CSS, so that we donâ€™t need in-body 500px min-height things
@
text
@d6 2
a7 1
mws_putheader '$MirOS: www/src/tags.hts,v 1.3 2009/06/21 11:01:27 tg Exp $'
@


1.3
log
@Add a new function mws_setheadline, which takes over from using <h1> in
the HTML source itself; ensure <h1> is never used otherwise; ensure the
headlines do not contain entities (convert to plain UTF-8) or HTML code
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/src/tags.hts,v 1.2 2008/12/04 20:31:35 tg Exp $'
a38 1
<p style="margin-bottom: 500px">&nbsp;</p> <!-- XXX -->
@


1.2
log
@do tag accounting
@
text
@d5 2
a6 1
mws_putheader '$MirOS: www/src/tags.hts,v 1.1 2008/12/04 20:27:13 tg Exp $'
a10 2
<h1>MirOS Website Tag Cloud</h1>

@


1.1
log
@add a collected tag cloud
@
text
@d5 1
a5 1
mws_putheader '$MirOS$'
d16 1
d35 1
@

