head	1.14;
access;
symbols;
locks; strict;
comment	@# @;


1.14
date	2018.05.06.12.56.45;	author tg;	state Exp;
branches;
next	1.13;
commitid	1005AEEFB932696C89D;

1.13
date	2014.12.02.12.37.06;	author tg;	state Exp;
branches;
next	1.12;
commitid	100547DB25C2F6A5D56;

1.12
date	2011.02.12.23.41.32;	author bsiegert;	state Exp;
branches;
next	1.11;
commitid	1004D571AAE31F7134C;

1.11
date	2011.02.09.19.51.50;	author tg;	state Exp;
branches;
next	1.10;
commitid	1004D52F06C38172690;

1.10
date	2011.02.09.19.03.27;	author bsiegert;	state Exp;
branches;
next	1.9;
commitid	1004D52E5027585CD8C;

1.9
date	2009.06.21.11.01.26;	author tg;	state Exp;
branches;
next	1.8;
commitid	1004A3E12E72F4AD1AB;

1.8
date	2008.12.10.18.40.18;	author tg;	state Exp;
branches;
next	1.7;
commitid	10049400D213BD80DD4;

1.7
date	2008.03.24.20.02.41;	author tg;	state Exp;
branches;
next	1.6;
commitid	10047E808E66939F5ED;

1.6
date	2008.03.21.22.13.18;	author tg;	state Exp;
branches;
next	1.5;
commitid	10047E4330D2F107956;

1.5
date	2008.03.16.23.12.38;	author tg;	state Exp;
branches;
next	1.4;
commitid	10047DDA978397DAE07;

1.4
date	2008.03.14.21.13.10;	author tg;	state Exp;
branches;
next	1.3;
commitid	10047DAEA6C5933200C;

1.3
date	2008.03.09.18.38.48;	author tg;	state Exp;
branches;
next	1.2;
commitid	10047D42EC21788B88F;

1.2
date	2008.02.28.19.12.35;	author tg;	state Exp;
branches;
next	1.1;
commitid	10047C707B968F04A61;

1.1
date	2008.02.28.18.54.09;	author tg;	state Exp;
branches;
next	;
commitid	10047C703633E03AF1A;


desc
@@


1.14
log
@introduce a marker for pages with old content
@
text
@# This file is part of the website of The MirOS Project, which is
# copyrighted material, please read the LICENCE file for details.

mws_setname ports "The MirPorts Framework"
mws_subdir 0
mws_setheadline MirPorts: The MirOS Ports Framework
mws_setold
mws_putheader '$MirOS: www/src/ports.hts,v 1.13 2014/12/02 12:37:06 tg Exp $'
mws_content <<'EOF'
<p>(The official MirPorts homepage can always be reached at <a
 href="http://mirbsd.de/ports">http://mirbsd.de/ports</a> which
 redirects to a &quot;known working&quot; mirror.)</p>

<p>On this page:</p>

EOF
mws_maketoc
mws_content <<EOF

<h2 id="intro">Introduction</h2>

<p>MirPorts&mdash;a derivative of the OpenBSD ports tree&mdash;is
 our solution for installing additional software packages not contained
 in the base system.</p>


<p>Both MirOS and MirPorts should put most of the “dotfiles” in users’
 home directories in a single directory named “.etc”. You can have  your
 own programs and scripts in ~/.etc/bin.</p>

<p>MirPorts is portable. It has support for the following operating
 systems:</p>

<ul>
 <li>MirOS BSD (-stable and -current)</li>
 <li>OpenBSD (-stable and -current)</li>
 <li>MidnightBSD</li>
 <li>Mac OS X  (10.4 and newer) / Darwin</li>
 <li>Interix / SFU 3.5 (to a lesser degree)</li>
</ul>

<p>Even on stable releases, using the newest MirPorts version is
 recommended. For all platforms, we are still searching for developers
 as well as testers to build packages and to submit bug reports.</p>

<h2 id="install">Set-up instructions</h2>

<p>Please refer to the <a href="man8/Setup.sh.htm">installer’s
 manual page</a> for an invocation reference of the Setup.sh script.</p>

<h3 id="installsystem">System-wide installation</h3>

<p>The system-wide setup is usually carried out by a user who can run
 commands as root by using sudo(8).</p>
 
<ol>
 <li>First, MirPorts must be checked out from CVS into either /usr/ports
  or /usr/mirports. If you are on MirOS and installed the ports10.ngz
  set, you can skip this step, and you will find the sources unpacked in
  /usr/ports. In the following commands, replace “mirports” by “ports”
  to use the /usr/ports directory.<pre>
$ cd /usr
$ sudo mkdir mirports
$ sudo chown $(id -u) mirports
$ cvs -d _anoncvs@@anoncvs.mirbsd.org:/cvs co -d mirports ports
</pre></li>
 <li>Now you need to run the setup script. It will automatically use
  sudo(8) to gain root privileges where necessary. If the -e flag is
  given below, the configuration files will be placed inside
  /usr/mpkg/etc instead of /etc. If you do not have mksh, replace it by
  bash.<pre>
$ cd /usr/mirports
$ mksh Setup.sh -e
</pre><p>On MirOS, you can skip this step if you installed the
  pkgutl10.ngz set during the installation. If not, then run</p><pre>
$ cd /usr/ports ; make setup
</pre><p>instead of the commands above.</p></li>
 <li>On non-MirOS systems, to use MirPorts, some environment variables
  (PATH etc.) have to be set. For Bourne shells (mksh, bash or similar),
  run the following command:<pre>
$ . /usr/mpkg/db/SetEnv.sh
</pre><p>and add it to your ~/.profile or /etc/profile (for all users).
  For tcsh, the command is</p><pre>
$ source /usr/mpkg/db/SetEnv.csh
</pre><p>To make the changes permanent, the command must be added to
 ~/.tcshrc.</p></li>
</ol>

<h3 id="installuser">Installation as an unprivileged user</h3>

<p>For an unprivileged installation, the same three steps as above are
 necessary. In the Setup.sh invocation, the -u flag is used to select an
 unprivileged setup, and the target directory is selected with the -l
 flag. This directory is usually located in your home directory and will
 contain all installed packages, configuration files and the package
 database. In the following, we will use <tt>$localbase</tt> for this
 directory.</p>

<ol>
 <li>Checkout:<pre>
$ cvs -d _anoncvs@@anoncvs.mirbsd.org:/cvs co -d mirports ports
</pre></li>
 <li>Setup:<pre>
$ cd ports
$ mkdir -p $localbase/bin
$ MKSH=$localbase/bin/mksh bash Setup.sh -uel $localbase
</pre></li>
 <li>Set environment variables:<pre>
$ . $localbase/db/SetEnv.sh
</pre><p>Or for tcsh:</p><pre>
$ source $localbase/db/SetEnv.csh
</pre></li>
</ol>


<h2 id="platforms">Platform-specific notes</h2>

<h3 id="miros">MirOS BSD</h3>


<p>To install MirPorts system-wide on MirOS BSD, just execute</p><pre>
 $ cd /usr/ports
 $ make setup
</pre><p>as an unprivileged user. The sudo command is invoked
 automatically to gain root privileges where needed.</p>

<p><strong>Note:</strong> If you installed the <tt>pkgutl10.ngz</tt>
 dist set, <em>do not</em> do this, because that set is basically
 the result of running that command, tarred up.</p>

<h3 id="darwin">Mac OS X</h3>

<p>Before using MirPorts, you need to install the Developer Tools from
 the separate DVD provided, as well as the X11 package from the
 installation DVD.</p>

<h3 id="mnbsd">MidnightBSD</h3>

<p>MidnightBSD support is experimental, and it currently
 lacks support for the “i386-unknown-midnightbsd0.2” gnutarget in
 most applications. This should be unproblematic due to MirLibtool.</p>

<p>You must install perl from mports before setting up MirPorts, as
 parts of the infrastructure are written in Perl.</p>

<p>Note that the MirPorts Framework always uses the <a
 href="mksh.htm">MirBSD Korn Shell</a> internally to run
 command lines embedded in the Makefiles, configure scripts,
 etc. Since mksh lives as <tt>/bin/mksh</tt> in MidnightBSD,
 there is no need to install it; however, if a more recent
 version is available, you can upgrade it from shells/mksh;
 export MKSH=$LOCALBASE/mksh then (or overwrite the system’s
 copy).</p>

<h3 id="obsd">OpenBSD</h3>

<p>Using MirPorts on OpenBSD is currently untested but should work well
 in principle. It does not conflict with the OpenBSD ports tree. You can
 use ksh for the Setup.sh invocation in step 2 above.</p>

<p>If you use MirPorts on OpenBSD and are willing to help us test,
 please drop an e-mail to the miros-discuss@@ mailing list. Thanks!</p>

<h2 id="using">Using the MirPorts Framework</h2>

<p>The directories below /usr/ports are the categories for ports. Each
 port is contained in its own subdirectory and contains a Makefile.
 Just executing <tt>mmake install</tt> in such a directory will download
 the source code, compile it, create a binary package and install it.
 Dependencies are automatically installed  when necessary. Some ports
 exist in different “flavours”, e.g. with or without X support.</p>

<p>For example, to install the “joe” port from the “editors” category,
 use the following commands:</p><pre>
 $ cd /usr/ports/editors/joe
 $ mmake install clean
</pre>

<p>Always use mmake instead of make for invoking MirPorts commands. Some
 other useful commands are:</p>
 
<ul>
 <li>To search for ports whose name contains “foo”, run the following
  command in the top-level directory:<pre>
$ mmake search name=foo
</pre></li>
 <li>To show all flavours of a given port, run:<pre>
$ mmake show=FLAVOURS
</pre></li>
 <li>To install the package with, say, the “foo” and without the
  “bar” flavour, run:<pre>
$ env FLAVOUR='foo no-bar' mmake install clean
</pre>Note that you must not place the assignment after the mmake
 invocation.</li>
</ul>
EOF
mws_putfooter
exit 0
@


1.13
log
@fix inconsistency noticed by lewellyn
@
text
@d7 2
a8 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.12 2011/02/12 23:41:32 bsiegert Exp $'
@


1.12
log
@Use mws_maketoc here instead of writing it out by hand
@
text
@d7 1
a7 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.11 2011/02/09 19:51:50 tg Exp $'
d126 4
@


1.11
log
@fix XHTML
@
text
@d7 1
a7 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.10 2011/02/09 19:03:27 bsiegert Exp $'
d15 3
a17 16
<ul>
 <li><a href="#intro">Introduction</a></li>
 <li><a href="#install">Set-up instructions</a>
  <ul>
   <li><a href="#installsystem">System-wide installation</a></li>
   <li><a href="#installuser">Installation as an unprivileged user</a></li>
  </ul></li>
 <li><a href="#platforms">Platform-specific notes</a>
  <ul>
   <li><a href="#miros">MirOS BSD</a></li>
   <li><a href="#darwin">Mac OS X</a></li>
   <li><a href="#mnbsd">MidnightBSD</a></li>
   <li><a href="#obsd">OpenBSD</a></li>
  </ul></li>
  <li><a href="#using">Using the MirPorts Framework</a></li>
</ul>
@


1.10
log
@Refactor this page in order to make it actually useful
@
text
@d7 1
a7 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.10 2011/02/09 19:01:59 bsiegert Exp $'
d197 2
a198 1
</pre><p>To install the package with, say, the “foo” and without the
d201 2
a202 2
</pre><p>Note that you must not place the assignment after the mmake
 invocation.</p></li>
@


1.9
log
@Add a new function mws_setheadline, which takes over from using <h1> in
the HTML source itself; ensure <h1> is never used otherwise; ensure the
headlines do not contain entities (convert to plain UTF-8) or HTML code
@
text
@d7 1
a7 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.8 2008/12/10 18:40:18 tg Exp $'
d9 1
a9 1
<p>The official MirPorts homepage can always be reached at <a
d11 1
a11 1
 redirects to a &quot;known working&quot; mirror.</p>
d13 1
a13 1
<h2>Installation instructions</h2>
d15 42
a56 1
<h3>BSD users</h3>
d58 1
a58 1
<h4>General</h4>
d61 65
a125 1
 manual page</a> for an invocation reference.</p>
a126 1
<h4 id="mbsd">Special case: MirOS system-wide installation</h4>
d128 6
a133 1
<p>On MirOS BSD, you can do the backwards-compatible</p><pre>
d136 2
a137 1
</pre><p>as well (SUDO is invoked automatically).</p>
d139 1
a139 1
<h3 id="darwin">Macintosh users</h3>
d141 3
a143 10
<p>You might need the following commands. They assume the Bourne
 shell (GNU bash is pre-installed) as user shell; source SetEnv.csh
 if using the C shell (tcsh) instead. bash is still required to
 build, though.</p><pre>
 $ localbase=$HOME/.mpkg	# or something similarily sensible
 $ cd ports
 $ mkdir -p $localbase/bin
 $ MKSH=$localbase/bin/mksh bash Setup.sh -uel $localbase
 $ . $localbase/db/SetEnv.sh	# repeat each time you want to use it
</pre>
d145 1
a145 1
<h3 id="mnbsd">MidnightBSD users</h3>
d147 1
a147 1
<p>MidnightBSD support is very new, as of 2008-03-14, and currently
d149 1
a149 13
 most applications. This should not be <em>that</em> much a problem,
 as we have MirLibtool, which aids in 90% of the use cases. (Besides,
 we did the adjustments for MirBSD already, and sometimes even for
 ekkoBSD. It’s possible.)</p>

<p>You <strong>must</strong> first install perl from mports, which
 creates the <tt>/usr/bin/perl</tt> link required to run some code
 we inherited from OpenBSD and could not yet rewrite in non-perl.</p>

<p>There are two possible, recommended, methods of operation of
 the MirPorts Framework (mirports, not to confuse with mports,
 the native MidnightBSD ports tree) on MidnightBSD, both of which
 do not interact with mports or distract it:</p>
d151 2
a152 21
<h4>MidnightBSD installation – system-wide</h4>

<p>To install, execute the following commands as a user who has
 sudo(8) rights:</p><pre>
$ cd /usr
$ sudo mkdir mirports
$ sudo chown $(id -u) mirports
$ cvs -d _anoncvs@@anoncvs.mirbsd.org:/cvs co -d mirports ports
$ cd mirports
$ mksh Setup.sh -e
</pre>

<p>To build, you need a user with sudo(8) rights (and write
 permissions on <tt>/usr/mirports</tt>, possibly via UNIX®
 groups). Execute the following command to set up your
 environment, then proceed as <a href="#using">below</a>.</p>

<pre>
$ . /usr/mpkg/db/SetEnv.sh		# if you’re using ksh
% source /usr/mpkg/db/SetEnv.csh	# if you’re using csh
</pre>
d163 1
a163 34
<p>To use the applications built, it is <em>often</em> enough
 to place <tt>/usr/mpkg/bin</tt> in one’s <tt>$PATH</tt> –
 however, we <strong>recommend</strong> to <em>also</em> use
 the “dot”/“source” command from above before <em>running</em>
 an application built via the MirPorts Framework.</p>

<p>If you do <em>not</em> wish to use mports, only MirPorts,
 and do not fear the wrath of ctriv ☺, you can add either the
 source/dot command or necessary variables to the system-wide
 <tt>/etc/profile</tt> so that all users can benefit from the
 applications supplied via MirPorts without additional hassle.</p>

<h4>MidnightBSD installation – within $HOME</h4>

<p>This is not different from the installation inside $HOME on
 other operating systems, like Darwin. The installer issues a
 warning about not using sudo(8), but you can’t or don’t need
 it since you’re using a private copy of the $LOCALBASE. On the
 other hand, many ports, like <tt>games/bsdgames</tt>, will either
 not work at all or force you to manually export SUDO=sudo before
 building. That’s the reason for the warning.</p><pre>
$ cd
$ cvs -d _anoncvs@@anoncvs.mirbsd.org:/cvs co -d mirports ports
$ cd mirports
$ mksh Setup.sh -uel ~/.mpkg
</pre>

<p>The dot/source commands read like this then:</p><pre>
$ . ~/.mpkg/db/SetEnv.sh		# if you’re using ksh
% source ~/.mpkg/db/SetEnv.csh		# if you’re using csh
</pre>

<p>The notes about environment variables from above apply here
 as well.</p>
d165 3
a167 7
<h3 id="obsd">OpenBSD users</h3>

<p>We do not currently know of anyone using MirPorts on OpenBSD,
 although it is destined to work there quite well, and not conflict
 with the OpenBSD ports tree. Please use the same commands as for
 Macintosh users above, except you can use ksh instead of bash for
 the <tt>Setup.sh</tt> invocation.</p>
d170 1
a170 1
 please drop an eMail to the miros-discuss@@ mailing list. Thanks!</p>
d174 9
a182 2
<p>To be filled in...</p>
<p>Basically:</p><pre>
d184 1
a184 2
 $ <b>m</b>make install clean
 $ echo export EDITOR=/usr/mpkg/bin/jupp &gt;&gt;~/.profile
d187 15
a201 6
<p>Other useful commands:</p><ul>
<li><tt>$ <b>m</b>make show=FLAVOURS</tt> # show all flavours,
 which can then be used with<br /><tt>$ env FLAVOUR='foo bar'
 <b>m</b>make install clean</tt> (note that you must not place the
 assignment after the <b>m</b>make invocation)</li>
<li>…</li>
a202 4

<h2 id="hacking">Writing ports for the framework</h2>

<p>To be filled in…</p>
@


1.8
log
@eurynome: anoncvs@@ → _anoncvs@@
@
text
@d6 2
a7 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.7 2008/03/24 20:02:41 tg Exp $'
a8 2
<h1>MirPorts: The MirOS Ports Framework</h1>

@


1.7
log
@no @@@@RELPATH@@@@ here, this is for www/data/*.inc only
(it didn’t hurt, just slow down)
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.6 2008/03/21 22:13:18 tg Exp $'
d68 1
a68 1
$ cvs -d anoncvs@@anoncvs.mirbsd.org:/cvs co -d mirports ports
d114 1
a114 1
$ cvs -d anoncvs@@anoncvs.mirbsd.org:/cvs co -d mirports ports
@


1.6
log
@mention mnbsd users need to install perl from mports first
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.5 2008/03/16 23:12:38 tg Exp $'
d20 1
a20 1
<p>Please refer to the <a href="@@@@RELPATH@@@@man8/Setup.sh.htm">installer’s
@


1.5
log
@fix typo, 10x laffer1@@mnbsd
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.4 2008/03/14 21:13:10 tg Exp $'
d52 4
@


1.4
log
@switch to marc.info and wlog-10 etc.
I'm as good as done
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.3 2008/03/09 18:38:48 tg Exp $'
d64 1
a64 1
$ cvs -d anoncvs@@anoncvs.mirbsd.org:/cvs co -r mirports ports
d110 1
a110 1
$ cvs -d anoncvs@@anoncvs.mirbsd.org:/cvs co -r mirports ports
@


1.3
log
@it’s flavou̲r now ☺
10x bsiegert@@
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.2 2008/02/28 19:12:35 tg Exp $'
d18 2
d23 2
d30 1
a30 1
<h3>Macintosh users</h3>
d43 81
a123 1
<h3>OpenBSD users</h3>
d134 1
a134 1
<h2>Using the MirPorts Framework</h2>
d151 1
a151 1
<h2>Writing ports for the framework</h2>
@


1.2
log
@typo
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/src/ports.hts,v 1.1 2008/02/28 18:54:09 tg Exp $'
d60 2
a61 2
<li><tt>$ <b>m</b>make show=FLAVORS</tt> # show all flavours (note the
 spelling), which can then be used with<br /><tt>$ env FLAVOR='foo bar'
@


1.1
log
@link the ports page (still needs work), add some text and a wlog
@
text
@d6 1
a6 1
mws_putheader '$MirOS: www/content/cG9ydHM_.inc,v 1.11 2006/08/10 23:23:29 tg Exp $'
d65 1
a65 1
<ul>
@

